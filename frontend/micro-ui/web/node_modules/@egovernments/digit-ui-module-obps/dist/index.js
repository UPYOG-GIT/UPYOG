function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var React = require('react');
var React__default = _interopDefault(React);
var reactI18next = require('react-i18next');
var reactRouterDom = require('react-router-dom');
var digitUiReactComponents = require('@egovernments/digit-ui-react-components');
var reactHookForm = require('react-hook-form');
require('react-dom');
var reactQuery = require('react-query');

function _extends() {
  _extends = Object.assign ? Object.assign.bind() : function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}

var _iteratorSymbol = /*#__PURE__*/typeof Symbol !== "undefined" ? Symbol.iterator || (Symbol.iterator = Symbol("Symbol.iterator")) : "@@iterator";
var _asyncIteratorSymbol = /*#__PURE__*/typeof Symbol !== "undefined" ? Symbol.asyncIterator || (Symbol.asyncIterator = Symbol("Symbol.asyncIterator")) : "@@asyncIterator";

function _catch(body, recover) {
  try {
    var result = body();
  } catch (e) {
    return recover(e);
  }
  if (result && result.then) {
    return result.then(void 0, recover);
  }
  return result;
}

function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}
var _listCacheClear = listCacheClear;

function eq(value, other) {
  return value === other || value !== value && other !== other;
}
var eq_1 = eq;

function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq_1(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}
var _assocIndexOf = assocIndexOf;

var arrayProto = Array.prototype;

var splice = arrayProto.splice;

function listCacheDelete(key) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}
var _listCacheDelete = listCacheDelete;

function listCacheGet(key) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  return index < 0 ? undefined : data[index][1];
}
var _listCacheGet = listCacheGet;

function listCacheHas(key) {
  return _assocIndexOf(this.__data__, key) > -1;
}
var _listCacheHas = listCacheHas;

function listCacheSet(key, value) {
  var data = this.__data__,
    index = _assocIndexOf(data, key);
  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}
var _listCacheSet = listCacheSet;

function ListCache(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

ListCache.prototype.clear = _listCacheClear;
ListCache.prototype['delete'] = _listCacheDelete;
ListCache.prototype.get = _listCacheGet;
ListCache.prototype.has = _listCacheHas;
ListCache.prototype.set = _listCacheSet;
var _ListCache = ListCache;

function stackClear() {
  this.__data__ = new _ListCache();
  this.size = 0;
}
var _stackClear = stackClear;

function stackDelete(key) {
  var data = this.__data__,
    result = data['delete'](key);
  this.size = data.size;
  return result;
}
var _stackDelete = stackDelete;

function stackGet(key) {
  return this.__data__.get(key);
}
var _stackGet = stackGet;

function stackHas(key) {
  return this.__data__.has(key);
}
var _stackHas = stackHas;

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function createCommonjsModule(fn, module) {
	return module = { exports: {} }, fn(module, module.exports), module.exports;
}

var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
var _freeGlobal = freeGlobal;

var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

var root = _freeGlobal || freeSelf || Function('return this')();
var _root = root;

var Symbol$1 = _root.Symbol;
var _Symbol = Symbol$1;

var objectProto = Object.prototype;

var hasOwnProperty = objectProto.hasOwnProperty;

var nativeObjectToString = objectProto.toString;

var symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;

function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
    tag = value[symToStringTag];
  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}
  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}
var _getRawTag = getRawTag;

var objectProto$1 = Object.prototype;

var nativeObjectToString$1 = objectProto$1.toString;

function objectToString(value) {
  return nativeObjectToString$1.call(value);
}
var _objectToString = objectToString;

var nullTag = '[object Null]',
  undefinedTag = '[object Undefined]';

var symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;

function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return symToStringTag$1 && symToStringTag$1 in Object(value) ? _getRawTag(value) : _objectToString(value);
}
var _baseGetTag = baseGetTag;

function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}
var isObject_1 = isObject;

var asyncTag = '[object AsyncFunction]',
  funcTag = '[object Function]',
  genTag = '[object GeneratorFunction]',
  proxyTag = '[object Proxy]';

function isFunction(value) {
  if (!isObject_1(value)) {
    return false;
  }
  var tag = _baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}
var isFunction_1 = isFunction;

var coreJsData = _root['__core-js_shared__'];
var _coreJsData = coreJsData;

var maskSrcKey = function () {
  var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || '');
  return uid ? 'Symbol(src)_1.' + uid : '';
}();

function isMasked(func) {
  return !!maskSrcKey && maskSrcKey in func;
}
var _isMasked = isMasked;

var funcProto = Function.prototype;

var funcToString = funcProto.toString;

function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return func + '';
    } catch (e) {}
  }
  return '';
}
var _toSource = toSource;

var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

var reIsHostCtor = /^\[object .+?Constructor\]$/;

var funcProto$1 = Function.prototype,
  objectProto$2 = Object.prototype;

var funcToString$1 = funcProto$1.toString;

var hasOwnProperty$1 = objectProto$2.hasOwnProperty;

var reIsNative = RegExp('^' + funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');

function baseIsNative(value) {
  if (!isObject_1(value) || _isMasked(value)) {
    return false;
  }
  var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;
  return pattern.test(_toSource(value));
}
var _baseIsNative = baseIsNative;

function getValue(object, key) {
  return object == null ? undefined : object[key];
}
var _getValue = getValue;

function getNative(object, key) {
  var value = _getValue(object, key);
  return _baseIsNative(value) ? value : undefined;
}
var _getNative = getNative;

var Map = _getNative(_root, 'Map');
var _Map = Map;

var nativeCreate = _getNative(Object, 'create');
var _nativeCreate = nativeCreate;

function hashClear() {
  this.__data__ = _nativeCreate ? _nativeCreate(null) : {};
  this.size = 0;
}
var _hashClear = hashClear;

function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}
var _hashDelete = hashDelete;

var HASH_UNDEFINED = '__lodash_hash_undefined__';

var objectProto$3 = Object.prototype;

var hasOwnProperty$2 = objectProto$3.hasOwnProperty;

function hashGet(key) {
  var data = this.__data__;
  if (_nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty$2.call(data, key) ? data[key] : undefined;
}
var _hashGet = hashGet;

var objectProto$4 = Object.prototype;

var hasOwnProperty$3 = objectProto$4.hasOwnProperty;

function hashHas(key) {
  var data = this.__data__;
  return _nativeCreate ? data[key] !== undefined : hasOwnProperty$3.call(data, key);
}
var _hashHas = hashHas;

var HASH_UNDEFINED$1 = '__lodash_hash_undefined__';

function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = _nativeCreate && value === undefined ? HASH_UNDEFINED$1 : value;
  return this;
}
var _hashSet = hashSet;

function Hash(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

Hash.prototype.clear = _hashClear;
Hash.prototype['delete'] = _hashDelete;
Hash.prototype.get = _hashGet;
Hash.prototype.has = _hashHas;
Hash.prototype.set = _hashSet;
var _Hash = Hash;

function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new _Hash(),
    'map': new (_Map || _ListCache)(),
    'string': new _Hash()
  };
}
var _mapCacheClear = mapCacheClear;

function isKeyable(value) {
  var type = typeof value;
  return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ? value !== '__proto__' : value === null;
}
var _isKeyable = isKeyable;

function getMapData(map, key) {
  var data = map.__data__;
  return _isKeyable(key) ? data[typeof key == 'string' ? 'string' : 'hash'] : data.map;
}
var _getMapData = getMapData;

function mapCacheDelete(key) {
  var result = _getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}
var _mapCacheDelete = mapCacheDelete;

function mapCacheGet(key) {
  return _getMapData(this, key).get(key);
}
var _mapCacheGet = mapCacheGet;

function mapCacheHas(key) {
  return _getMapData(this, key).has(key);
}
var _mapCacheHas = mapCacheHas;

function mapCacheSet(key, value) {
  var data = _getMapData(this, key),
    size = data.size;
  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}
var _mapCacheSet = mapCacheSet;

function MapCache(entries) {
  var index = -1,
    length = entries == null ? 0 : entries.length;
  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

MapCache.prototype.clear = _mapCacheClear;
MapCache.prototype['delete'] = _mapCacheDelete;
MapCache.prototype.get = _mapCacheGet;
MapCache.prototype.has = _mapCacheHas;
MapCache.prototype.set = _mapCacheSet;
var _MapCache = MapCache;

var LARGE_ARRAY_SIZE = 200;

function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof _ListCache) {
    var pairs = data.__data__;
    if (!_Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new _MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}
var _stackSet = stackSet;

function Stack(entries) {
  var data = this.__data__ = new _ListCache(entries);
  this.size = data.size;
}

Stack.prototype.clear = _stackClear;
Stack.prototype['delete'] = _stackDelete;
Stack.prototype.get = _stackGet;
Stack.prototype.has = _stackHas;
Stack.prototype.set = _stackSet;
var _Stack = Stack;

function arrayEach(array, iteratee) {
  var index = -1,
    length = array == null ? 0 : array.length;
  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}
var _arrayEach = arrayEach;

var defineProperty = function () {
  try {
    var func = _getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}();
var _defineProperty = defineProperty;

function baseAssignValue(object, key, value) {
  if (key == '__proto__' && _defineProperty) {
    _defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}
var _baseAssignValue = baseAssignValue;

var objectProto$5 = Object.prototype;

var hasOwnProperty$4 = objectProto$5.hasOwnProperty;

function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty$4.call(object, key) && eq_1(objValue, value)) || value === undefined && !(key in object)) {
    _baseAssignValue(object, key, value);
  }
}
var _assignValue = assignValue;

function copyObject(source, props, object, customizer) {
  var isNew = !object;
  object || (object = {});
  var index = -1,
    length = props.length;
  while (++index < length) {
    var key = props[index];
    var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined;
    if (newValue === undefined) {
      newValue = source[key];
    }
    if (isNew) {
      _baseAssignValue(object, key, newValue);
    } else {
      _assignValue(object, key, newValue);
    }
  }
  return object;
}
var _copyObject = copyObject;

function baseTimes(n, iteratee) {
  var index = -1,
    result = Array(n);
  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}
var _baseTimes = baseTimes;

function isObjectLike(value) {
  return value != null && typeof value == 'object';
}
var isObjectLike_1 = isObjectLike;

var argsTag = '[object Arguments]';

function baseIsArguments(value) {
  return isObjectLike_1(value) && _baseGetTag(value) == argsTag;
}
var _baseIsArguments = baseIsArguments;

var objectProto$6 = Object.prototype;

var hasOwnProperty$5 = objectProto$6.hasOwnProperty;

var propertyIsEnumerable = objectProto$6.propertyIsEnumerable;

var isArguments = _baseIsArguments(function () {
  return arguments;
}()) ? _baseIsArguments : function (value) {
  return isObjectLike_1(value) && hasOwnProperty$5.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
};
var isArguments_1 = isArguments;

var isArray = Array.isArray;
var isArray_1 = isArray;

function stubFalse() {
  return false;
}
var stubFalse_1 = stubFalse;

var isBuffer_1 = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;

  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  var moduleExports = freeModule && freeModule.exports === freeExports;

  var Buffer = moduleExports ? _root.Buffer : undefined;

  var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

  var isBuffer = nativeIsBuffer || stubFalse_1;
  module.exports = isBuffer;
});

var MAX_SAFE_INTEGER = 9007199254740991;

var reIsUint = /^(?:0|[1-9]\d*)$/;

function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
}
var _isIndex = isIndex;

var MAX_SAFE_INTEGER$1 = 9007199254740991;

function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER$1;
}
var isLength_1 = isLength;

var argsTag$1 = '[object Arguments]',
  arrayTag = '[object Array]',
  boolTag = '[object Boolean]',
  dateTag = '[object Date]',
  errorTag = '[object Error]',
  funcTag$1 = '[object Function]',
  mapTag = '[object Map]',
  numberTag = '[object Number]',
  objectTag = '[object Object]',
  regexpTag = '[object RegExp]',
  setTag = '[object Set]',
  stringTag = '[object String]',
  weakMapTag = '[object WeakMap]';
var arrayBufferTag = '[object ArrayBuffer]',
  dataViewTag = '[object DataView]',
  float32Tag = '[object Float32Array]',
  float64Tag = '[object Float64Array]',
  int8Tag = '[object Int8Array]',
  int16Tag = '[object Int16Array]',
  int32Tag = '[object Int32Array]',
  uint8Tag = '[object Uint8Array]',
  uint8ClampedTag = '[object Uint8ClampedArray]',
  uint16Tag = '[object Uint16Array]',
  uint32Tag = '[object Uint32Array]';

var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag$1] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag$1] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

function baseIsTypedArray(value) {
  return isObjectLike_1(value) && isLength_1(value.length) && !!typedArrayTags[_baseGetTag(value)];
}
var _baseIsTypedArray = baseIsTypedArray;

function baseUnary(func) {
  return function (value) {
    return func(value);
  };
}
var _baseUnary = baseUnary;

var _nodeUtil = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;

  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  var moduleExports = freeModule && freeModule.exports === freeExports;

  var freeProcess = moduleExports && _freeGlobal.process;

  var nodeUtil = function () {
    try {
      var types = freeModule && freeModule.require && freeModule.require('util').types;
      if (types) {
        return types;
      }

      return freeProcess && freeProcess.binding && freeProcess.binding('util');
    } catch (e) {}
  }();
  module.exports = nodeUtil;
});

var nodeIsTypedArray = _nodeUtil && _nodeUtil.isTypedArray;

var isTypedArray = nodeIsTypedArray ? _baseUnary(nodeIsTypedArray) : _baseIsTypedArray;
var isTypedArray_1 = isTypedArray;

var objectProto$7 = Object.prototype;

var hasOwnProperty$6 = objectProto$7.hasOwnProperty;

function arrayLikeKeys(value, inherited) {
  var isArr = isArray_1(value),
    isArg = !isArr && isArguments_1(value),
    isBuff = !isArr && !isArg && isBuffer_1(value),
    isType = !isArr && !isArg && !isBuff && isTypedArray_1(value),
    skipIndexes = isArr || isArg || isBuff || isType,
    result = skipIndexes ? _baseTimes(value.length, String) : [],
    length = result.length;
  for (var key in value) {
    if ((inherited || hasOwnProperty$6.call(value, key)) && !(skipIndexes && (
    key == 'length' ||
    isBuff && (key == 'offset' || key == 'parent') ||
    isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') ||
    _isIndex(key, length)))) {
      result.push(key);
    }
  }
  return result;
}
var _arrayLikeKeys = arrayLikeKeys;

var objectProto$8 = Object.prototype;

function isPrototype(value) {
  var Ctor = value && value.constructor,
    proto = typeof Ctor == 'function' && Ctor.prototype || objectProto$8;
  return value === proto;
}
var _isPrototype = isPrototype;

function overArg(func, transform) {
  return function (arg) {
    return func(transform(arg));
  };
}
var _overArg = overArg;

var nativeKeys = _overArg(Object.keys, Object);
var _nativeKeys = nativeKeys;

var objectProto$9 = Object.prototype;

var hasOwnProperty$7 = objectProto$9.hasOwnProperty;

function baseKeys(object) {
  if (!_isPrototype(object)) {
    return _nativeKeys(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty$7.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }
  return result;
}
var _baseKeys = baseKeys;

function isArrayLike(value) {
  return value != null && isLength_1(value.length) && !isFunction_1(value);
}
var isArrayLike_1 = isArrayLike;

function keys(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object) : _baseKeys(object);
}
var keys_1 = keys;

function baseAssign(object, source) {
  return object && _copyObject(source, keys_1(source), object);
}
var _baseAssign = baseAssign;

function nativeKeysIn(object) {
  var result = [];
  if (object != null) {
    for (var key in Object(object)) {
      result.push(key);
    }
  }
  return result;
}
var _nativeKeysIn = nativeKeysIn;

var objectProto$a = Object.prototype;

var hasOwnProperty$8 = objectProto$a.hasOwnProperty;

function baseKeysIn(object) {
  if (!isObject_1(object)) {
    return _nativeKeysIn(object);
  }
  var isProto = _isPrototype(object),
    result = [];
  for (var key in object) {
    if (!(key == 'constructor' && (isProto || !hasOwnProperty$8.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}
var _baseKeysIn = baseKeysIn;

function keysIn(object) {
  return isArrayLike_1(object) ? _arrayLikeKeys(object, true) : _baseKeysIn(object);
}
var keysIn_1 = keysIn;

function baseAssignIn(object, source) {
  return object && _copyObject(source, keysIn_1(source), object);
}
var _baseAssignIn = baseAssignIn;

var _cloneBuffer = createCommonjsModule(function (module, exports) {
  var freeExports =  exports && !exports.nodeType && exports;

  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

  var moduleExports = freeModule && freeModule.exports === freeExports;

  var Buffer = moduleExports ? _root.Buffer : undefined,
    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;

  function cloneBuffer(buffer, isDeep) {
    if (isDeep) {
      return buffer.slice();
    }
    var length = buffer.length,
      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
    buffer.copy(result);
    return result;
  }
  module.exports = cloneBuffer;
});

function copyArray(source, array) {
  var index = -1,
    length = source.length;
  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}
var _copyArray = copyArray;

function arrayFilter(array, predicate) {
  var index = -1,
    length = array == null ? 0 : array.length,
    resIndex = 0,
    result = [];
  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}
var _arrayFilter = arrayFilter;

function stubArray() {
  return [];
}
var stubArray_1 = stubArray;

var objectProto$b = Object.prototype;

var propertyIsEnumerable$1 = objectProto$b.propertyIsEnumerable;

var nativeGetSymbols = Object.getOwnPropertySymbols;

var getSymbols = !nativeGetSymbols ? stubArray_1 : function (object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return _arrayFilter(nativeGetSymbols(object), function (symbol) {
    return propertyIsEnumerable$1.call(object, symbol);
  });
};
var _getSymbols = getSymbols;

function copySymbols(source, object) {
  return _copyObject(source, _getSymbols(source), object);
}
var _copySymbols = copySymbols;

function arrayPush(array, values) {
  var index = -1,
    length = values.length,
    offset = array.length;
  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}
var _arrayPush = arrayPush;

var getPrototype = _overArg(Object.getPrototypeOf, Object);
var _getPrototype = getPrototype;

var nativeGetSymbols$1 = Object.getOwnPropertySymbols;

var getSymbolsIn = !nativeGetSymbols$1 ? stubArray_1 : function (object) {
  var result = [];
  while (object) {
    _arrayPush(result, _getSymbols(object));
    object = _getPrototype(object);
  }
  return result;
};
var _getSymbolsIn = getSymbolsIn;

function copySymbolsIn(source, object) {
  return _copyObject(source, _getSymbolsIn(source), object);
}
var _copySymbolsIn = copySymbolsIn;

function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray_1(object) ? result : _arrayPush(result, symbolsFunc(object));
}
var _baseGetAllKeys = baseGetAllKeys;

function getAllKeys(object) {
  return _baseGetAllKeys(object, keys_1, _getSymbols);
}
var _getAllKeys = getAllKeys;

function getAllKeysIn(object) {
  return _baseGetAllKeys(object, keysIn_1, _getSymbolsIn);
}
var _getAllKeysIn = getAllKeysIn;

var DataView = _getNative(_root, 'DataView');
var _DataView = DataView;

var Promise$1 = _getNative(_root, 'Promise');
var _Promise = Promise$1;

var Set = _getNative(_root, 'Set');
var _Set = Set;

var WeakMap = _getNative(_root, 'WeakMap');
var _WeakMap = WeakMap;

var mapTag$1 = '[object Map]',
  objectTag$1 = '[object Object]',
  promiseTag = '[object Promise]',
  setTag$1 = '[object Set]',
  weakMapTag$1 = '[object WeakMap]';
var dataViewTag$1 = '[object DataView]';

var dataViewCtorString = _toSource(_DataView),
  mapCtorString = _toSource(_Map),
  promiseCtorString = _toSource(_Promise),
  setCtorString = _toSource(_Set),
  weakMapCtorString = _toSource(_WeakMap);

var getTag = _baseGetTag;

if (_DataView && getTag(new _DataView(new ArrayBuffer(1))) != dataViewTag$1 || _Map && getTag(new _Map()) != mapTag$1 || _Promise && getTag(_Promise.resolve()) != promiseTag || _Set && getTag(new _Set()) != setTag$1 || _WeakMap && getTag(new _WeakMap()) != weakMapTag$1) {
  getTag = function getTag(value) {
    var result = _baseGetTag(value),
      Ctor = result == objectTag$1 ? value.constructor : undefined,
      ctorString = Ctor ? _toSource(Ctor) : '';
    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString:
          return dataViewTag$1;
        case mapCtorString:
          return mapTag$1;
        case promiseCtorString:
          return promiseTag;
        case setCtorString:
          return setTag$1;
        case weakMapCtorString:
          return weakMapTag$1;
      }
    }
    return result;
  };
}
var _getTag = getTag;

var objectProto$c = Object.prototype;

var hasOwnProperty$9 = objectProto$c.hasOwnProperty;

function initCloneArray(array) {
  var length = array.length,
    result = new array.constructor(length);

  if (length && typeof array[0] == 'string' && hasOwnProperty$9.call(array, 'index')) {
    result.index = array.index;
    result.input = array.input;
  }
  return result;
}
var _initCloneArray = initCloneArray;

var Uint8Array = _root.Uint8Array;
var _Uint8Array = Uint8Array;

function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new _Uint8Array(result).set(new _Uint8Array(arrayBuffer));
  return result;
}
var _cloneArrayBuffer = cloneArrayBuffer;

function cloneDataView(dataView, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(dataView.buffer) : dataView.buffer;
  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
}
var _cloneDataView = cloneDataView;

var reFlags = /\w*$/;

function cloneRegExp(regexp) {
  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
  result.lastIndex = regexp.lastIndex;
  return result;
}
var _cloneRegExp = cloneRegExp;

var symbolProto = _Symbol ? _Symbol.prototype : undefined,
  symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;

function cloneSymbol(symbol) {
  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
}
var _cloneSymbol = cloneSymbol;

function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? _cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}
var _cloneTypedArray = cloneTypedArray;

var boolTag$1 = '[object Boolean]',
  dateTag$1 = '[object Date]',
  mapTag$2 = '[object Map]',
  numberTag$1 = '[object Number]',
  regexpTag$1 = '[object RegExp]',
  setTag$2 = '[object Set]',
  stringTag$1 = '[object String]',
  symbolTag = '[object Symbol]';
var arrayBufferTag$1 = '[object ArrayBuffer]',
  dataViewTag$2 = '[object DataView]',
  float32Tag$1 = '[object Float32Array]',
  float64Tag$1 = '[object Float64Array]',
  int8Tag$1 = '[object Int8Array]',
  int16Tag$1 = '[object Int16Array]',
  int32Tag$1 = '[object Int32Array]',
  uint8Tag$1 = '[object Uint8Array]',
  uint8ClampedTag$1 = '[object Uint8ClampedArray]',
  uint16Tag$1 = '[object Uint16Array]',
  uint32Tag$1 = '[object Uint32Array]';

function initCloneByTag(object, tag, isDeep) {
  var Ctor = object.constructor;
  switch (tag) {
    case arrayBufferTag$1:
      return _cloneArrayBuffer(object);
    case boolTag$1:
    case dateTag$1:
      return new Ctor(+object);
    case dataViewTag$2:
      return _cloneDataView(object, isDeep);
    case float32Tag$1:
    case float64Tag$1:
    case int8Tag$1:
    case int16Tag$1:
    case int32Tag$1:
    case uint8Tag$1:
    case uint8ClampedTag$1:
    case uint16Tag$1:
    case uint32Tag$1:
      return _cloneTypedArray(object, isDeep);
    case mapTag$2:
      return new Ctor();
    case numberTag$1:
    case stringTag$1:
      return new Ctor(object);
    case regexpTag$1:
      return _cloneRegExp(object);
    case setTag$2:
      return new Ctor();
    case symbolTag:
      return _cloneSymbol(object);
  }
}
var _initCloneByTag = initCloneByTag;

var objectCreate = Object.create;

var baseCreate = function () {
  function object() {}
  return function (proto) {
    if (!isObject_1(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object.prototype = proto;
    var result = new object();
    object.prototype = undefined;
    return result;
  };
}();
var _baseCreate = baseCreate;

function initCloneObject(object) {
  return typeof object.constructor == 'function' && !_isPrototype(object) ? _baseCreate(_getPrototype(object)) : {};
}
var _initCloneObject = initCloneObject;

var mapTag$3 = '[object Map]';

function baseIsMap(value) {
  return isObjectLike_1(value) && _getTag(value) == mapTag$3;
}
var _baseIsMap = baseIsMap;

var nodeIsMap = _nodeUtil && _nodeUtil.isMap;

var isMap = nodeIsMap ? _baseUnary(nodeIsMap) : _baseIsMap;
var isMap_1 = isMap;

var setTag$3 = '[object Set]';

function baseIsSet(value) {
  return isObjectLike_1(value) && _getTag(value) == setTag$3;
}
var _baseIsSet = baseIsSet;

var nodeIsSet = _nodeUtil && _nodeUtil.isSet;

var isSet = nodeIsSet ? _baseUnary(nodeIsSet) : _baseIsSet;
var isSet_1 = isSet;

var CLONE_DEEP_FLAG = 1,
  CLONE_FLAT_FLAG = 2,
  CLONE_SYMBOLS_FLAG = 4;

var argsTag$2 = '[object Arguments]',
  arrayTag$1 = '[object Array]',
  boolTag$2 = '[object Boolean]',
  dateTag$2 = '[object Date]',
  errorTag$1 = '[object Error]',
  funcTag$2 = '[object Function]',
  genTag$1 = '[object GeneratorFunction]',
  mapTag$4 = '[object Map]',
  numberTag$2 = '[object Number]',
  objectTag$2 = '[object Object]',
  regexpTag$2 = '[object RegExp]',
  setTag$4 = '[object Set]',
  stringTag$2 = '[object String]',
  symbolTag$1 = '[object Symbol]',
  weakMapTag$2 = '[object WeakMap]';
var arrayBufferTag$2 = '[object ArrayBuffer]',
  dataViewTag$3 = '[object DataView]',
  float32Tag$2 = '[object Float32Array]',
  float64Tag$2 = '[object Float64Array]',
  int8Tag$2 = '[object Int8Array]',
  int16Tag$2 = '[object Int16Array]',
  int32Tag$2 = '[object Int32Array]',
  uint8Tag$2 = '[object Uint8Array]',
  uint8ClampedTag$2 = '[object Uint8ClampedArray]',
  uint16Tag$2 = '[object Uint16Array]',
  uint32Tag$2 = '[object Uint32Array]';

var cloneableTags = {};
cloneableTags[argsTag$2] = cloneableTags[arrayTag$1] = cloneableTags[arrayBufferTag$2] = cloneableTags[dataViewTag$3] = cloneableTags[boolTag$2] = cloneableTags[dateTag$2] = cloneableTags[float32Tag$2] = cloneableTags[float64Tag$2] = cloneableTags[int8Tag$2] = cloneableTags[int16Tag$2] = cloneableTags[int32Tag$2] = cloneableTags[mapTag$4] = cloneableTags[numberTag$2] = cloneableTags[objectTag$2] = cloneableTags[regexpTag$2] = cloneableTags[setTag$4] = cloneableTags[stringTag$2] = cloneableTags[symbolTag$1] = cloneableTags[uint8Tag$2] = cloneableTags[uint8ClampedTag$2] = cloneableTags[uint16Tag$2] = cloneableTags[uint32Tag$2] = true;
cloneableTags[errorTag$1] = cloneableTags[funcTag$2] = cloneableTags[weakMapTag$2] = false;

function baseClone(value, bitmask, customizer, key, object, stack) {
  var result,
    isDeep = bitmask & CLONE_DEEP_FLAG,
    isFlat = bitmask & CLONE_FLAT_FLAG,
    isFull = bitmask & CLONE_SYMBOLS_FLAG;
  if (customizer) {
    result = object ? customizer(value, key, object, stack) : customizer(value);
  }
  if (result !== undefined) {
    return result;
  }
  if (!isObject_1(value)) {
    return value;
  }
  var isArr = isArray_1(value);
  if (isArr) {
    result = _initCloneArray(value);
    if (!isDeep) {
      return _copyArray(value, result);
    }
  } else {
    var tag = _getTag(value),
      isFunc = tag == funcTag$2 || tag == genTag$1;
    if (isBuffer_1(value)) {
      return _cloneBuffer(value, isDeep);
    }
    if (tag == objectTag$2 || tag == argsTag$2 || isFunc && !object) {
      result = isFlat || isFunc ? {} : _initCloneObject(value);
      if (!isDeep) {
        return isFlat ? _copySymbolsIn(value, _baseAssignIn(result, value)) : _copySymbols(value, _baseAssign(result, value));
      }
    } else {
      if (!cloneableTags[tag]) {
        return object ? value : {};
      }
      result = _initCloneByTag(value, tag, isDeep);
    }
  }
  stack || (stack = new _Stack());
  var stacked = stack.get(value);
  if (stacked) {
    return stacked;
  }
  stack.set(value, result);
  if (isSet_1(value)) {
    value.forEach(function (subValue) {
      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
    });
  } else if (isMap_1(value)) {
    value.forEach(function (subValue, key) {
      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
    });
  }
  var keysFunc = isFull ? isFlat ? _getAllKeysIn : _getAllKeys : isFlat ? keysIn_1 : keys_1;
  var props = isArr ? undefined : keysFunc(value);
  _arrayEach(props || value, function (subValue, key) {
    if (props) {
      key = subValue;
      subValue = value[key];
    }
    _assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
  });
  return result;
}
var _baseClone = baseClone;

var CLONE_DEEP_FLAG$1 = 1,
  CLONE_SYMBOLS_FLAG$1 = 4;

function cloneDeep(value) {
  return _baseClone(value, CLONE_DEEP_FLAG$1 | CLONE_SYMBOLS_FLAG$1);
}
var cloneDeep_1 = cloneDeep;

var getPattern = function getPattern(type) {
  switch (type) {
    case "Name":
      return /^[^{0-9}^\$\"<>?\\\\~!@#$%^()+={}\[\]*,/_:;“”‘’]{1,50}$/i;
    case "MobileNo":
      return /^[6-9]{1}[0-9]{9}$/i;
  }
};
var stringReplaceAll = function stringReplaceAll(str, searcher, replaceWith) {
  if (str === void 0) {
    str = "";
  }
  if (searcher === void 0) {
    searcher = "";
  }
  if (replaceWith === void 0) {
    replaceWith = "";
  }
  if (searcher == "") return str;
  while (str.includes(searcher)) {
    str = str.replace(searcher, replaceWith);
  }
  return str;
};
var sortDropdownNames = function sortDropdownNames(options, optionkey, locilizationkey) {
  return options.sort(function (a, b) {
    return locilizationkey(a[optionkey]).localeCompare(locilizationkey(b[optionkey]));
  });
};
var uuidv4 = function uuidv4() {
  return require("uuid/v4")();
};
var pdfDownloadLink = function pdfDownloadLink(documents, fileStoreId, format) {
  if (documents === void 0) {
    documents = {};
  }
  if (fileStoreId === void 0) {
    fileStoreId = "";
  }
  var downloadLink = documents[fileStoreId] || "";
  var differentFormats = (downloadLink === null || downloadLink === void 0 ? void 0 : downloadLink.split(",")) || [];
  var fileURL = "";
  differentFormats.length > 0 && differentFormats.map(function (link) {
    if (!link.includes("large") && !link.includes("medium") && !link.includes("small")) {
      fileURL = link;
    }
  });
  return fileURL;
};
var convertToNocObject = function convertToNocObject(data, datafromflow) {
  var _datafromflow$nocDocu, _datafromflow$nocDocu2;
  var formData = {
    Noc: data
  };
  var doc = (datafromflow === null || datafromflow === void 0 ? void 0 : (_datafromflow$nocDocu = datafromflow.nocDocuments) === null || _datafromflow$nocDocu === void 0 ? void 0 : _datafromflow$nocDocu.nocDocuments.length) > 0 ? (datafromflow === null || datafromflow === void 0 ? void 0 : (_datafromflow$nocDocu2 = datafromflow.nocDocuments) === null || _datafromflow$nocDocu2 === void 0 ? void 0 : _datafromflow$nocDocu2.nocDocuments.filter(function (n) {
    var _data$nocType;
    return n.documentType.includes(data === null || data === void 0 ? void 0 : (_data$nocType = data.nocType) === null || _data$nocType === void 0 ? void 0 : _data$nocType.split("_")[0]);
  }).map(function (noc) {
    return {
      fileName: (noc === null || noc === void 0 ? void 0 : noc.fileName) || "",
      name: (noc === null || noc === void 0 ? void 0 : noc.name) || "",
      fileStoreId: noc === null || noc === void 0 ? void 0 : noc.fileStoreId,
      fileUrl: "",
      isClickable: true,
      link: "",
      title: noc === null || noc === void 0 ? void 0 : noc.documentType,
      documentType: noc === null || noc === void 0 ? void 0 : noc.documentType,
      id: noc === null || noc === void 0 ? void 0 : noc.id,
      additionalDetails: {}
    };
  })) || [] : [];
  doc = [].concat(doc, datafromflow !== null && datafromflow !== void 0 && datafromflow.PrevStateNocDocuments ? datafromflow === null || datafromflow === void 0 ? void 0 : datafromflow.PrevStateNocDocuments.filter(function (n) {
    var _data$nocType2;
    return n.documentType.includes(data === null || data === void 0 ? void 0 : (_data$nocType2 = data.nocType) === null || _data$nocType2 === void 0 ? void 0 : _data$nocType2.split("_")[0]);
  }) : []);
  formData.Noc.documents = doc;
  return formData;
};
var getBPAFormData = function getBPAFormData(data, mdmsData, history, t) {
  try {
    return Promise.resolve(Digit.OBPSService.scrutinyDetails(data === null || data === void 0 ? void 0 : data.tenantId, {
      edcrNumber: data === null || data === void 0 ? void 0 : data.edcrNumber
    })).then(function (edcrResponse) {
      var _data$landInfo, _data$landInfo2, _data$landInfo3, _data$landInfo3$addre, _data$landInfo4, _data$landInfo4$addre, _data$landInfo4$addre2, _data$additionalDetai, _APIScrutinyDetails$p, _APIScrutinyDetails$p2, _data$auditDetails, _data$additionalDetai2, _APIScrutinyDetails$p3, _APIScrutinyDetails$p4, _data$additionalDetai3, _mdmsData$BPA, _APIScrutinyDetails$p5, _APIScrutinyDetails$p6, _APIScrutinyDetails$p7, _data$additionalDetai4, _data$landInfo5, _data$landInfo6, _data$landInfo7, _mdmsData$BPA2, _APIScrutinyDetails$p8, _APIScrutinyDetails$p9, _APIScrutinyDetails$p10, _data$landInfo8, _data$businessService, _data$additionalDetai5, _data$additionalDetai6;
      var APIScrutinyDetails = edcrResponse === null || edcrResponse === void 0 ? void 0 : edcrResponse.edcrDetail[0];
      var getBlockIds = function getBlockIds(unit) {
        var blocks = {};
        unit && unit.map(function (ob, index) {
          blocks["Block_" + (index + 1)] = ob.id;
        });
        return blocks;
      };
      var getBlocksforFlow = function getBlocksforFlow(unit) {
        var arr = [];
        var subBlocks = [];
        var subOcc = {};
        unit && unit.map(function (un, index) {
          var _un$usageCategory, _arr;
          arr = un === null || un === void 0 ? void 0 : (_un$usageCategory = un.usageCategory) === null || _un$usageCategory === void 0 ? void 0 : _un$usageCategory.split(",");
          subBlocks = [];
          arr && ((_arr = arr) === null || _arr === void 0 ? void 0 : _arr.length) > 0 && arr != "" && arr.map(function (ob, ind) {
            subBlocks.push({
              code: ob,
              i18nKey: "BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"),
              name: t("BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"))
            });
          });
          subOcc["Block_" + (index + 1)] = subBlocks;
        });
        return subOcc;
      };
      data.BlockIds = getBlockIds(data === null || data === void 0 ? void 0 : (_data$landInfo = data.landInfo) === null || _data$landInfo === void 0 ? void 0 : _data$landInfo.unit);
      data.address = data === null || data === void 0 ? void 0 : (_data$landInfo2 = data.landInfo) === null || _data$landInfo2 === void 0 ? void 0 : _data$landInfo2.address;
      data.address.locality["i18nkey"] = "" + t(stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$landInfo3 = data.landInfo) === null || _data$landInfo3 === void 0 ? void 0 : (_data$landInfo3$addre = _data$landInfo3.address) === null || _data$landInfo3$addre === void 0 ? void 0 : _data$landInfo3$addre.tenantId, ".", "_").toUpperCase() + "_REVENUE_" + (data === null || data === void 0 ? void 0 : (_data$landInfo4 = data.landInfo) === null || _data$landInfo4 === void 0 ? void 0 : (_data$landInfo4$addre = _data$landInfo4.address) === null || _data$landInfo4$addre === void 0 ? void 0 : (_data$landInfo4$addre2 = _data$landInfo4$addre.locality) === null || _data$landInfo4$addre2 === void 0 ? void 0 : _data$landInfo4$addre2.code));
      data.placeName = (data === null || data === void 0 ? void 0 : (_data$additionalDetai = data.additionalDetails) === null || _data$additionalDetai === void 0 ? void 0 : _data$additionalDetai.GISPlaceName) || "";
      data.data = {
        scrutinyNumber: {
          edcrNumber: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.edcrNumber
        },
        applicantName: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p === void 0 ? void 0 : (_APIScrutinyDetails$p2 = _APIScrutinyDetails$p.planInformation) === null || _APIScrutinyDetails$p2 === void 0 ? void 0 : _APIScrutinyDetails$p2.applicantName,
        applicationDate: data === null || data === void 0 ? void 0 : (_data$auditDetails = data.auditDetails) === null || _data$auditDetails === void 0 ? void 0 : _data$auditDetails.createdTime,
        applicationType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType,
        holdingNumber: data === null || data === void 0 ? void 0 : (_data$additionalDetai2 = data.additionalDetails) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.holdingNo,
        occupancyType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p3 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p3 === void 0 ? void 0 : (_APIScrutinyDetails$p4 = _APIScrutinyDetails$p3.planInformation) === null || _APIScrutinyDetails$p4 === void 0 ? void 0 : _APIScrutinyDetails$p4.occupancy,
        registrationDetails: data === null || data === void 0 ? void 0 : (_data$additionalDetai3 = data.additionalDetails) === null || _data$additionalDetai3 === void 0 ? void 0 : _data$additionalDetai3.registrationDetails,
        riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : _mdmsData$BPA.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p5 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p5 === void 0 ? void 0 : (_APIScrutinyDetails$p6 = _APIScrutinyDetails$p5.plot) === null || _APIScrutinyDetails$p6 === void 0 ? void 0 : _APIScrutinyDetails$p6.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p7 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p7 === void 0 ? void 0 : _APIScrutinyDetails$p7.blocks),
        serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai4 = data.additionalDetails) === null || _data$additionalDetai4 === void 0 ? void 0 : _data$additionalDetai4.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
      };
      data === null || data === void 0 ? void 0 : data.landInfo.owners.map(function (owner, ind) {
        owner.gender = {
          active: true,
          code: owner.gender,
          i18nKey: "COMMON_GENDER_" + owner.gender
        };
      });
      data.owners = {
        owners: data === null || data === void 0 ? void 0 : (_data$landInfo5 = data.landInfo) === null || _data$landInfo5 === void 0 ? void 0 : _data$landInfo5.owners,
        ownershipCategory: {
          active: true,
          code: data === null || data === void 0 ? void 0 : (_data$landInfo6 = data.landInfo) === null || _data$landInfo6 === void 0 ? void 0 : _data$landInfo6.ownershipCategory,
          i18nKey: "COMMON_MASTERS_OWNERSHIPCATEGORY_" + (data === null || data === void 0 ? void 0 : (_data$landInfo7 = data.landInfo) === null || _data$landInfo7 === void 0 ? void 0 : _data$landInfo7.ownershipCategory.replaceAll(".", "_"))
        }
      };
      data.riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p8 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p8 === void 0 ? void 0 : (_APIScrutinyDetails$p9 = _APIScrutinyDetails$p8.plot) === null || _APIScrutinyDetails$p9 === void 0 ? void 0 : _APIScrutinyDetails$p9.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p10 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p10 === void 0 ? void 0 : _APIScrutinyDetails$p10.blocks);
      data.subOccupancy = getBlocksforFlow(data === null || data === void 0 ? void 0 : (_data$landInfo8 = data.landInfo) === null || _data$landInfo8 === void 0 ? void 0 : _data$landInfo8.unit);
      data.uiFlow = {
        flow: data !== null && data !== void 0 && data.businessService.includes("OC") ? "OCBPA" : data === null || data === void 0 ? void 0 : (_data$businessService = data.businessService) === null || _data$businessService === void 0 ? void 0 : _data$businessService.split(".")[0],
        applicationType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai5 = data.additionalDetails) === null || _data$additionalDetai5 === void 0 ? void 0 : _data$additionalDetai5.applicationType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType),
        serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai6 = data.additionalDetails) === null || _data$additionalDetai6 === void 0 ? void 0 : _data$additionalDetai6.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
      };
      if (data !== null && data !== void 0 && data.businessService.includes("OC")) {
        var _data$additionalDetai7, _data$additionalDetai8;
        sessionStorage.setItem("BPAintermediateValue", JSON.stringify(_extends({}, data)));
        history.push("/digit-ui/citizen/obps/ocbpa/" + (data === null || data === void 0 ? void 0 : (_data$additionalDetai7 = data.additionalDetails) === null || _data$additionalDetai7 === void 0 ? void 0 : _data$additionalDetai7.applicationType.toLowerCase()) + "/" + (data === null || data === void 0 ? void 0 : (_data$additionalDetai8 = data.additionalDetails) === null || _data$additionalDetai8 === void 0 ? void 0 : _data$additionalDetai8.serviceType.toLowerCase()));
      } else {
        var _data$additionalDetai9, _data$additionalDetai10;
        sessionStorage.setItem("BPAintermediateValue", JSON.stringify(_extends({}, data)));
        history.push("/digit-ui/citizen/obps/bpa/" + (data === null || data === void 0 ? void 0 : (_data$additionalDetai9 = data.additionalDetails) === null || _data$additionalDetai9 === void 0 ? void 0 : _data$additionalDetai9.applicationType.toLowerCase()) + "/" + (data === null || data === void 0 ? void 0 : (_data$additionalDetai10 = data.additionalDetails) === null || _data$additionalDetai10 === void 0 ? void 0 : _data$additionalDetai10.serviceType.toLowerCase()));
      }
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
var getDocumentforBPA = function getDocumentforBPA(docs, PrevStateDocs) {
  var document = [];
  docs && docs.map(function (ob) {
    if (ob.id) {
      document.push({
        documentType: ob.documentType,
        fileStoreId: ob.fileStoreId,
        fileStore: ob.fileStoreId,
        fileName: "",
        fileUrl: "",
        additionalDetails: {},
        id: ob.id
      });
    } else {
      document.push({
        documentType: ob.documentType,
        fileStoreId: ob.fileStoreId,
        fileStore: ob.fileStoreId,
        fileName: "",
        fileUrl: "",
        additionalDetails: {}
      });
    }
  });
  document = [].concat(document, PrevStateDocs ? PrevStateDocs : []);
  return document;
};
function getusageCategoryAPI(arr) {
  var usageCat = "";
  arr.map(function (ob, i) {
    usageCat = usageCat + (i !== 0 ? "," : "") + ob.code;
  });
  return usageCat;
}
var getBPAUnit = function getBPAUnit(data) {
  var _data$landInfo10;
  var units = [];
  var ob = data === null || data === void 0 ? void 0 : data.subOccupancy;
  if (ob) {
    var _data$landInfo9;
    var result = Object.entries(ob);
    data === null || data === void 0 ? void 0 : (_data$landInfo9 = data.landInfo) === null || _data$landInfo9 === void 0 ? void 0 : _data$landInfo9.unit.map(function (oldUnit, ind) {
      result.map(function (newunit, index) {
        var _newunit$;
        if (oldUnit.id && oldUnit.floorNo === ((_newunit$ = newunit[0]) === null || _newunit$ === void 0 ? void 0 : _newunit$.split("_")[1])) {
          units.push(_extends({}, oldUnit, {
            usageCategory: getusageCategoryAPI(newunit[1])
          }));
        }
      });
    });

    result && result.map(function (newunit, index) {
      var found = units.length > 0 ? units === null || units === void 0 ? void 0 : units.some(function (el) {
        var _newunit$2;
        return (el === null || el === void 0 ? void 0 : el.floorNo) === ((_newunit$2 = newunit[0]) === null || _newunit$2 === void 0 ? void 0 : _newunit$2.split("_")[1]);
      }) : false;
      if (!found) {
        var _newunit$3;
        units.push({
          blockIndex: index,
          floorNo: (_newunit$3 = newunit[0]) === null || _newunit$3 === void 0 ? void 0 : _newunit$3.split("_")[1],
          unitType: "Block",
          usageCategory: getusageCategoryAPI(newunit[1])
        });
      }
    });
  }
  return units.length > 0 ? units : data === null || data === void 0 ? void 0 : (_data$landInfo10 = data.landInfo) === null || _data$landInfo10 === void 0 ? void 0 : _data$landInfo10.unit;
};
var getBPAUnitsForAPI = function getBPAUnitsForAPI(ob) {
  var units = [];
  if (ob) {
    var result = Object.entries(ob);
    result.map(function (unit, index) {
      var _unit$;
      units.push({
        blockIndex: index,
        floorNo: (_unit$ = unit[0]) === null || _unit$ === void 0 ? void 0 : _unit$.split("_")[1],
        unitType: "Block",
        usageCategory: getusageCategoryAPI(unit[1])
      });
    });
  }
  return units;
};
var getunitforBPA = function getunitforBPA(units) {
  var unit = [];
  units && units.map(function (ob, index) {
    unit.push({
      blockIndex: index,
      usageCategory: ob.usageCategory,
      occupancyType: ob.occupancyType,
      floorNo: ob.floorNo,
      unitType: ob.unitType,
      id: ob.id
    });
  });
  return unit;
};

var getBPAOwners = function getBPAOwners(data, isOCBPA) {
  var _data$owners, _data$landInfo11, _data$landInfo11$owne;
  if (isOCBPA) return data.landInfo.owners;
  var bpaownerarray = cloneDeep_1(data === null || data === void 0 ? void 0 : (_data$owners = data.owners) === null || _data$owners === void 0 ? void 0 : _data$owners.owners);
  bpaownerarray && (bpaownerarray === null || bpaownerarray === void 0 ? void 0 : bpaownerarray.forEach(function (newOwner) {
    var _newOwner$gender, _newOwner$gender2;
    if (newOwner !== null && newOwner !== void 0 && (_newOwner$gender = newOwner.gender) !== null && _newOwner$gender !== void 0 && _newOwner$gender.code) newOwner.gender = (_newOwner$gender2 = newOwner.gender) === null || _newOwner$gender2 === void 0 ? void 0 : _newOwner$gender2.code;
    if (!(newOwner !== null && newOwner !== void 0 && newOwner.fatherOrHusbandName)) newOwner.fatherOrHusbandName = "NAME";
    newOwner.active = true;
  }));
  data === null || data === void 0 ? void 0 : (_data$landInfo11 = data.landInfo) === null || _data$landInfo11 === void 0 ? void 0 : (_data$landInfo11$owne = _data$landInfo11.owners) === null || _data$landInfo11$owne === void 0 ? void 0 : _data$landInfo11$owne.map(function (oldowner) {
    var found = (bpaownerarray === null || bpaownerarray === void 0 ? void 0 : bpaownerarray.length) > 0 ? bpaownerarray === null || bpaownerarray === void 0 ? void 0 : bpaownerarray.some(function (el) {
      return el.id === oldowner.id;
    }) : false;
    if (!found) bpaownerarray === null || bpaownerarray === void 0 ? void 0 : bpaownerarray.push(_extends({}, oldowner, {
      active: false
    }));
  });
  return bpaownerarray;
};
var convertToBPAObject = function convertToBPAObject(data, isOCBPA, isSendBackTOCitizen) {
  var _data$address4, _data$documents, _data$address5, _data$data, _data$data2, _data$additionalDetai11, _data$data3, _data$data4, _data$additionalDetai12;
  if (isOCBPA === void 0) {
    isOCBPA = false;
  }
  if (isSendBackTOCitizen === void 0) {
    isSendBackTOCitizen = false;
  }
  if (isOCBPA) {
    data.landInfo = data.landInfo;
    data.landInfo.owners.forEach(function (owner, index) {
      var _owner$gender, _owner$gender2;
      if (owner !== null && owner !== void 0 && (_owner$gender = owner.gender) !== null && _owner$gender !== void 0 && _owner$gender.code) data.landInfo.owners[index].gender = owner === null || owner === void 0 ? void 0 : (_owner$gender2 = owner.gender) === null || _owner$gender2 === void 0 ? void 0 : _owner$gender2.code;
    });
  } else {
    var _data$address, _data$address2, _data$address3, _data$landInfo12, _data$landInfo12$addr, _data$landInfo12$addr2, _data$landInfo13, _data$landInfo14, _data$landInfo15;
    data.landInfo.owners.map(function (owner, index) {
      var _owner$gender3;
      data.landInfo.owners[index].gender = owner === null || owner === void 0 ? void 0 : (_owner$gender3 = owner.gender) === null || _owner$gender3 === void 0 ? void 0 : _owner$gender3.code;
    });
    data.landInfo.address.landmark = data === null || data === void 0 ? void 0 : (_data$address = data.address) === null || _data$address === void 0 ? void 0 : _data$address.landmark;
    data.landInfo.address.street = data !== null && data !== void 0 && (_data$address2 = data.address) !== null && _data$address2 !== void 0 && _data$address2.street ? data === null || data === void 0 ? void 0 : (_data$address3 = data.address) === null || _data$address3 === void 0 ? void 0 : _data$address3.street : null;
    data.landInfo.address.city = data === null || data === void 0 ? void 0 : (_data$landInfo12 = data.landInfo) === null || _data$landInfo12 === void 0 ? void 0 : (_data$landInfo12$addr = _data$landInfo12.address) === null || _data$landInfo12$addr === void 0 ? void 0 : (_data$landInfo12$addr2 = _data$landInfo12$addr.city) === null || _data$landInfo12$addr2 === void 0 ? void 0 : _data$landInfo12$addr2.code;
    data.landInfo.unit = data !== null && data !== void 0 && (_data$landInfo13 = data.landInfo) !== null && _data$landInfo13 !== void 0 && _data$landInfo13.unit && (data === null || data === void 0 ? void 0 : (_data$landInfo14 = data.landInfo) === null || _data$landInfo14 === void 0 ? void 0 : _data$landInfo14.unit.length) > 0 ? getunitforBPA(data === null || data === void 0 ? void 0 : (_data$landInfo15 = data.landInfo) === null || _data$landInfo15 === void 0 ? void 0 : _data$landInfo15.unit) : data !== null && data !== void 0 && data.subOccupancy ? getBPAUnitsForAPI(data === null || data === void 0 ? void 0 : data.subOccupancy) : [];
  }
  var formData = {
    BPA: {
      id: data === null || data === void 0 ? void 0 : data.id,
      applicationNo: data === null || data === void 0 ? void 0 : data.applicationNo,
      approvalNo: data === null || data === void 0 ? void 0 : data.approvalNo,
      accountId: data === null || data === void 0 ? void 0 : data.accountId,
      edcrNumber: data === null || data === void 0 ? void 0 : data.edcrNumber,
      riskType: data === null || data === void 0 ? void 0 : data.riskType,
      businessService: data === null || data === void 0 ? void 0 : data.businessService,
      landId: data === null || data === void 0 ? void 0 : data.landId,
      tenantId: (data === null || data === void 0 ? void 0 : data.tenantId) || (data === null || data === void 0 ? void 0 : (_data$address4 = data.address) === null || _data$address4 === void 0 ? void 0 : _data$address4.tenantId),
      approvalDate: data === null || data === void 0 ? void 0 : data.approvalDate,
      applicationDate: data === null || data === void 0 ? void 0 : data.applicationDate,
      status: isSendBackTOCitizen ? data.status : data.status ? data.status : "INITIATED",
      documents: getDocumentforBPA(data === null || data === void 0 ? void 0 : (_data$documents = data.documents) === null || _data$documents === void 0 ? void 0 : _data$documents.documents, data === null || data === void 0 ? void 0 : data.PrevStateDocuments),
      landInfo: isOCBPA ? data === null || data === void 0 ? void 0 : data.landInfo : _extends({}, data === null || data === void 0 ? void 0 : data.landInfo, {
        owners: getBPAOwners(data, isOCBPA),
        unit: getBPAUnit(data)
      }),
      assignee: isSendBackTOCitizen ? data.assignee : [],
      workflow: {
        action: "SEND_TO_CITIZEN",
        assignes: null,
        comments: null,
        varificationDocuments: null
      },
      auditDetails: data === null || data === void 0 ? void 0 : data.auditDetails,
      additionalDetails: _extends({}, data === null || data === void 0 ? void 0 : data.additionalDetails, {
        GISPlaceName: data === null || data === void 0 ? void 0 : (_data$address5 = data.address) === null || _data$address5 === void 0 ? void 0 : _data$address5.placeName,
        holdingNo: data !== null && data !== void 0 && (_data$data = data.data) !== null && _data$data !== void 0 && _data$data.holdingNumber ? data === null || data === void 0 ? void 0 : (_data$data2 = data.data) === null || _data$data2 === void 0 ? void 0 : _data$data2.holdingNumber : data === null || data === void 0 ? void 0 : (_data$additionalDetai11 = data.additionalDetails) === null || _data$additionalDetai11 === void 0 ? void 0 : _data$additionalDetai11.holdingNo,
        registrationDetails: data !== null && data !== void 0 && (_data$data3 = data.data) !== null && _data$data3 !== void 0 && _data$data3.registrationDetails ? data === null || data === void 0 ? void 0 : (_data$data4 = data.data) === null || _data$data4 === void 0 ? void 0 : _data$data4.registrationDetails : data === null || data === void 0 ? void 0 : (_data$additionalDetai12 = data.additionalDetails) === null || _data$additionalDetai12 === void 0 ? void 0 : _data$additionalDetai12.registrationDetails
      }),
      applicationType: "BUILDING_PLAN_SCRUTINY",
      serviceType: "NEW_CONSTRUCTION",
      occupancyType: "A"
    }
  };
  return formData;
};
var getapplicationdocstakeholder = function getapplicationdocstakeholder(initial) {
  var _initial$documents;
  var convertedDoc = [];
  (_initial$documents = initial.documents) === null || _initial$documents === void 0 ? void 0 : _initial$documents.documents.map(function (ob) {
    var _initial$result, _initial$result$Licen;
    convertedDoc.push({
      fileStoreId: ob.fileStoreId,
      fileStore: ob.fileStoreId,
      fileName: ob.fileName,
      fileUrl: "",
      documentType: ob.documentType,
      tenantId: initial === null || initial === void 0 ? void 0 : (_initial$result = initial.result) === null || _initial$result === void 0 ? void 0 : (_initial$result$Licen = _initial$result.Licenses[0]) === null || _initial$result$Licen === void 0 ? void 0 : _initial$result$Licen.tenantId
    });
  });
  return convertedDoc;
};
var convertToStakeholderObject = function convertToStakeholderObject(data) {
  var _data$result, _data$result2, _data$result2$License, _data$formData, _data$formData$Licnes, _data$result3, _data$result3$License, _data$result3$License2, _data$result3$License3, _data$formData2, _data$formData2$Licne, _data$formData2$Licne2, _data$result4, _data$result4$License, _data$result4$License2, _data$result4$License3, _data$result4$License4, _data$result5, _data$result5$License, _data$result5$License2, _data$result5$License3, _data$formData3, _data$formData3$Licne, _data$formData3$Licne2, _data$formData4, _data$formData4$Licne, _data$formData5, _data$formData5$Licne, _data$formData6, _data$formData6$Licne, _data$formData7, _data$formData7$Licne, _data$formData8, _data$formData8$Licne, _data$result6, _data$result6$License, _data$result6$License2, _data$result6$License3, _data$result6$License4;
  var formData = {
    Licenses: [_extends({}, data === null || data === void 0 ? void 0 : (_data$result = data.result) === null || _data$result === void 0 ? void 0 : _data$result.Licenses[0], {
      action: "APPLY",
      tradeLicenseDetail: _extends({}, data === null || data === void 0 ? void 0 : (_data$result2 = data.result) === null || _data$result2 === void 0 ? void 0 : (_data$result2$License = _data$result2.Licenses[0]) === null || _data$result2$License === void 0 ? void 0 : _data$result2$License.tradeLicenseDetail, {
        additionalDetail: {
          counsilForArchNo: data === null || data === void 0 ? void 0 : (_data$formData = data.formData) === null || _data$formData === void 0 ? void 0 : (_data$formData$Licnes = _data$formData.LicneseType) === null || _data$formData$Licnes === void 0 ? void 0 : _data$formData$Licnes.ArchitectNo
        },
        tradeUnits: [_extends({}, data === null || data === void 0 ? void 0 : (_data$result3 = data.result) === null || _data$result3 === void 0 ? void 0 : (_data$result3$License = _data$result3.Licenses[0]) === null || _data$result3$License === void 0 ? void 0 : (_data$result3$License2 = _data$result3$License.tradeLicenseDetail) === null || _data$result3$License2 === void 0 ? void 0 : (_data$result3$License3 = _data$result3$License2.tradeUnits) === null || _data$result3$License3 === void 0 ? void 0 : _data$result3$License3[0], {
          tradeType: data === null || data === void 0 ? void 0 : (_data$formData2 = data.formData) === null || _data$formData2 === void 0 ? void 0 : (_data$formData2$Licne = _data$formData2.LicneseType) === null || _data$formData2$Licne === void 0 ? void 0 : (_data$formData2$Licne2 = _data$formData2$Licne.LicenseType) === null || _data$formData2$Licne2 === void 0 ? void 0 : _data$formData2$Licne2.tradeType,
          id: data === null || data === void 0 ? void 0 : (_data$result4 = data.result) === null || _data$result4 === void 0 ? void 0 : (_data$result4$License = _data$result4.Licenses[0]) === null || _data$result4$License === void 0 ? void 0 : (_data$result4$License2 = _data$result4$License.tradeLicenseDetail) === null || _data$result4$License2 === void 0 ? void 0 : (_data$result4$License3 = _data$result4$License2.tradeUnits) === null || _data$result4$License3 === void 0 ? void 0 : (_data$result4$License4 = _data$result4$License3[0]) === null || _data$result4$License4 === void 0 ? void 0 : _data$result4$License4.id
        })],
        owners: [_extends({}, data === null || data === void 0 ? void 0 : (_data$result5 = data.result) === null || _data$result5 === void 0 ? void 0 : (_data$result5$License = _data$result5.Licenses[0]) === null || _data$result5$License === void 0 ? void 0 : (_data$result5$License2 = _data$result5$License.tradeLicenseDetail) === null || _data$result5$License2 === void 0 ? void 0 : (_data$result5$License3 = _data$result5$License2.owners) === null || _data$result5$License3 === void 0 ? void 0 : _data$result5$License3[0], {
          gender: data === null || data === void 0 ? void 0 : (_data$formData3 = data.formData) === null || _data$formData3 === void 0 ? void 0 : (_data$formData3$Licne = _data$formData3.LicneseDetails) === null || _data$formData3$Licne === void 0 ? void 0 : (_data$formData3$Licne2 = _data$formData3$Licne.gender) === null || _data$formData3$Licne2 === void 0 ? void 0 : _data$formData3$Licne2.code,
          mobileNumber: data === null || data === void 0 ? void 0 : (_data$formData4 = data.formData) === null || _data$formData4 === void 0 ? void 0 : (_data$formData4$Licne = _data$formData4.LicneseDetails) === null || _data$formData4$Licne === void 0 ? void 0 : _data$formData4$Licne.mobileNumber,
          name: data === null || data === void 0 ? void 0 : (_data$formData5 = data.formData) === null || _data$formData5 === void 0 ? void 0 : (_data$formData5$Licne = _data$formData5.LicneseDetails) === null || _data$formData5$Licne === void 0 ? void 0 : _data$formData5$Licne.name,
          dob: null,
          emailId: data === null || data === void 0 ? void 0 : (_data$formData6 = data.formData) === null || _data$formData6 === void 0 ? void 0 : (_data$formData6$Licne = _data$formData6.LicneseDetails) === null || _data$formData6$Licne === void 0 ? void 0 : _data$formData6$Licne.email,
          permanentAddress: data === null || data === void 0 ? void 0 : (_data$formData7 = data.formData) === null || _data$formData7 === void 0 ? void 0 : (_data$formData7$Licne = _data$formData7.LicneseDetails) === null || _data$formData7$Licne === void 0 ? void 0 : _data$formData7$Licne.PermanentAddress,
          correspondenceAddress: data === null || data === void 0 ? void 0 : data.Correspondenceaddress,
          pan: data === null || data === void 0 ? void 0 : (_data$formData8 = data.formData) === null || _data$formData8 === void 0 ? void 0 : (_data$formData8$Licne = _data$formData8.LicneseDetails) === null || _data$formData8$Licne === void 0 ? void 0 : _data$formData8$Licne.PanNumber,
          uuid: data === null || data === void 0 ? void 0 : (_data$result6 = data.result) === null || _data$result6 === void 0 ? void 0 : (_data$result6$License = _data$result6.Licenses[0]) === null || _data$result6$License === void 0 ? void 0 : (_data$result6$License2 = _data$result6$License.tradeLicenseDetail) === null || _data$result6$License2 === void 0 ? void 0 : (_data$result6$License3 = _data$result6$License2.owners) === null || _data$result6$License3 === void 0 ? void 0 : (_data$result6$License4 = _data$result6$License3[0]) === null || _data$result6$License4 === void 0 ? void 0 : _data$result6$License4.uuid
        })],

        applicationDocuments: getapplicationdocstakeholder(data)
      })
    })]
  };
  return formData;
};
var convertDateToEpoch = function convertDateToEpoch(dateString, dayStartOrEnd) {
  if (dayStartOrEnd === void 0) {
    dayStartOrEnd = "dayend";
  }
  try {
    var parts = dateString.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);
    var DateObj = new Date(Date.UTC(parts[1], parts[2] - 1, parts[3]));
    DateObj.setMinutes(DateObj.getMinutes() + DateObj.getTimezoneOffset());
    if (dayStartOrEnd === "dayend") {
      DateObj.setHours(DateObj.getHours() + 24);
      DateObj.setSeconds(DateObj.getSeconds() - 1);
    }
    return DateObj.getTime();
  } catch (e) {
    return dateString;
  }
};
var convertEpochToDateDMY = function convertEpochToDateDMY(dateEpoch) {
  if (dateEpoch == null || dateEpoch == undefined || dateEpoch == "") {
    return "NA";
  }
  var dateFromApi = new Date(dateEpoch);
  var month = dateFromApi.getMonth() + 1;
  var day = dateFromApi.getDate();
  var year = dateFromApi.getFullYear();
  month = (month > 9 ? "" : "0") + month;
  day = (day > 9 ? "" : "0") + day;
  return day + "/" + month + "/" + year;
};
var getBPAEditDetails = function getBPAEditDetails(data, APIScrutinyDetails, mdmsData, nocdata, t) {
  try {
    var _data$landInfo16, _data$landInfo17, _APIScrutinyDetails$p11, _APIScrutinyDetails$p12, _data$auditDetails2, _data$additionalDetai13, _APIScrutinyDetails$p13, _APIScrutinyDetails$p14, _data$additionalDetai14, _mdmsData$BPA3, _APIScrutinyDetails$p15, _APIScrutinyDetails$p16, _APIScrutinyDetails$p17, _data$additionalDetai15, _data$landInfo18, _data$landInfo19, _data$landInfo20, _mdmsData$BPA4, _APIScrutinyDetails$p18, _APIScrutinyDetails$p19, _APIScrutinyDetails$p20, _data$landInfo21, _mdmsData$BPA5, _mdmsData$BPA5$homePa, _data$businessService2, _data$additionalDetai16, _data$additionalDetai17;
    var getBlockIds = function getBlockIds(unit) {
      var blocks = {};
      unit && unit.map(function (ob, index) {
        blocks["Block_" + (index + 1)] = ob.id;
      });
      return blocks;
    };
    var getBlocksforFlow = function getBlocksforFlow(unit) {
      var arr = [];
      var subBlocks = [];
      var subOcc = {};
      unit && unit.map(function (un, index) {
        var _un$usageCategory2;
        arr = un === null || un === void 0 ? void 0 : (_un$usageCategory2 = un.usageCategory) === null || _un$usageCategory2 === void 0 ? void 0 : _un$usageCategory2.split(",");
        subBlocks = [];
        arr && arr.map(function (ob, ind) {
          subBlocks.push({
            code: ob,
            i18nKey: "BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"),
            name: t("BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"))
          });
        });
        subOcc["Block_" + (index + 1)] = subBlocks;
      });
      return subOcc;
    };
    data.BlockIds = getBlockIds(data === null || data === void 0 ? void 0 : (_data$landInfo16 = data.landInfo) === null || _data$landInfo16 === void 0 ? void 0 : _data$landInfo16.unit);
    data.address = data === null || data === void 0 ? void 0 : (_data$landInfo17 = data.landInfo) === null || _data$landInfo17 === void 0 ? void 0 : _data$landInfo17.address;
    data.data = {
      applicantName: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p11 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p11 === void 0 ? void 0 : (_APIScrutinyDetails$p12 = _APIScrutinyDetails$p11.planInformation) === null || _APIScrutinyDetails$p12 === void 0 ? void 0 : _APIScrutinyDetails$p12.applicantName,
      applicationDate: data === null || data === void 0 ? void 0 : (_data$auditDetails2 = data.auditDetails) === null || _data$auditDetails2 === void 0 ? void 0 : _data$auditDetails2.createdTime,
      applicationType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType,
      holdingNumber: data === null || data === void 0 ? void 0 : (_data$additionalDetai13 = data.additionalDetails) === null || _data$additionalDetai13 === void 0 ? void 0 : _data$additionalDetai13.holdingNo,
      occupancyType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p13 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p13 === void 0 ? void 0 : (_APIScrutinyDetails$p14 = _APIScrutinyDetails$p13.planInformation) === null || _APIScrutinyDetails$p14 === void 0 ? void 0 : _APIScrutinyDetails$p14.occupancy,
      registrationDetails: data === null || data === void 0 ? void 0 : (_data$additionalDetai14 = data.additionalDetails) === null || _data$additionalDetai14 === void 0 ? void 0 : _data$additionalDetai14.registrationDetails,
      riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA3 = mdmsData.BPA) === null || _mdmsData$BPA3 === void 0 ? void 0 : _mdmsData$BPA3.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p15 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p15 === void 0 ? void 0 : (_APIScrutinyDetails$p16 = _APIScrutinyDetails$p15.plot) === null || _APIScrutinyDetails$p16 === void 0 ? void 0 : _APIScrutinyDetails$p16.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p17 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p17 === void 0 ? void 0 : _APIScrutinyDetails$p17.blocks),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai15 = data.additionalDetails) === null || _data$additionalDetai15 === void 0 ? void 0 : _data$additionalDetai15.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType),
      edcrDetails: APIScrutinyDetails,
      scrutinyNumber: {
        edcrNumber: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.edcrNumber
      }
    };
    var PrevStateDocuments = [];
    data === null || data === void 0 ? void 0 : data.documents.map(function (doc) {
      return PrevStateDocuments.push(doc);
    });
    data["PrevStateDocuments"] = cloneDeep_1(PrevStateDocuments);
    data.documents = {
      documents: []
    };
    var nocDocs = [];
    nocdata && nocdata.map(function (a, index) {
      a.documents && a.documents.map(function (b, index) {
        nocDocs.push(b);
      });
    });
    data["PrevStateNocDocuments"] = nocDocs;
    data.nocDocuments = {
      NocDetails: nocdata,
      nocDocuments: []
    };
    data === null || data === void 0 ? void 0 : data.landInfo.owners.map(function (owner, ind) {
      owner.gender = {
        active: true,
        code: owner.gender,
        i18nKey: "COMMON_GENDER_" + owner.gender
      };
    });
    data.owners = {
      owners: data === null || data === void 0 ? void 0 : (_data$landInfo18 = data.landInfo) === null || _data$landInfo18 === void 0 ? void 0 : _data$landInfo18.owners,
      ownershipCategory: {
        active: true,
        code: data === null || data === void 0 ? void 0 : (_data$landInfo19 = data.landInfo) === null || _data$landInfo19 === void 0 ? void 0 : _data$landInfo19.ownershipCategory,
        i18nKey: "COMMON_MASTERS_OWNERSHIPCATEGORY_" + (data === null || data === void 0 ? void 0 : (_data$landInfo20 = data.landInfo) === null || _data$landInfo20 === void 0 ? void 0 : _data$landInfo20.ownershipCategory.replaceAll(".", "_"))
      }
    };
    data.riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA4 = mdmsData.BPA) === null || _mdmsData$BPA4 === void 0 ? void 0 : _mdmsData$BPA4.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p18 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p18 === void 0 ? void 0 : (_APIScrutinyDetails$p19 = _APIScrutinyDetails$p18.plot) === null || _APIScrutinyDetails$p19 === void 0 ? void 0 : _APIScrutinyDetails$p19.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p20 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p20 === void 0 ? void 0 : _APIScrutinyDetails$p20.blocks);
    data.subOccupancy = getBlocksforFlow(data === null || data === void 0 ? void 0 : (_data$landInfo21 = data.landInfo) === null || _data$landInfo21 === void 0 ? void 0 : _data$landInfo21.unit);
    var bpaFlow = "BPA";
    mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA5 = mdmsData.BPA) === null || _mdmsData$BPA5 === void 0 ? void 0 : (_mdmsData$BPA5$homePa = _mdmsData$BPA5.homePageUrlLinks) === null || _mdmsData$BPA5$homePa === void 0 ? void 0 : _mdmsData$BPA5$homePa.map(function (linkData) {
      if ((APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType) === (linkData === null || linkData === void 0 ? void 0 : linkData.applicationType) && (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType) === (linkData === null || linkData === void 0 ? void 0 : linkData.serviceType)) {
        bpaFlow = linkData === null || linkData === void 0 ? void 0 : linkData.flow;
      }
    });
    data.uiFlow = {
      flow: data !== null && data !== void 0 && data.businessService.includes("OC") ? "OCBPA" : data === null || data === void 0 ? void 0 : (_data$businessService2 = data.businessService) === null || _data$businessService2 === void 0 ? void 0 : _data$businessService2.split(".")[0],
      applicationType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai16 = data.additionalDetails) === null || _data$additionalDetai16 === void 0 ? void 0 : _data$additionalDetai16.applicationType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai17 = data.additionalDetails) === null || _data$additionalDetai17 === void 0 ? void 0 : _data$additionalDetai17.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
    };
    sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS", JSON.stringify(true));
    return Promise.resolve(data);
  } catch (e) {
    return Promise.reject(e);
  }
};
var getPath = function getPath(path, params) {
  params && Object.keys(params).map(function (key) {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
var convertDateTimeToEpoch = function convertDateTimeToEpoch(dateTimeString) {
  try {
    var parts = dateTimeString.match(/(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2}):(\d{2})/);
    return Date.UTC(+parts[3], parts[2] - 1, +parts[1], +parts[4], +parts[5]);
  } catch (e) {
    return dateTimeString;
  }
};

var convertEpochToDate = function convertEpochToDate(dateEpoch) {
  if (dateEpoch) {
    var dateFromApi = new Date(dateEpoch);
    var month = dateFromApi.getMonth() + 1;
    var day = dateFromApi.getDate();
    var year = dateFromApi.getFullYear();
    month = (month > 9 ? "" : "0") + month;
    day = (day > 9 ? "" : "0") + day;
    return year + "-" + month + "-" + day;
  } else {
    return null;
  }
};
var getBusinessServices = function getBusinessServices(businessService, status) {
  var billBusinessService = "BPA.NC_APP_FEE";
  if (businessService === "BPA_LOW") {
    billBusinessService = "BPA.LOW_RISK_PERMIT_FEE";
  } else if (businessService === "BPA") {
    billBusinessService = status == "PENDING_APPL_FEE" ? "BPA.NC_APP_FEE" : "BPA.NC_SAN_FEE";
  } else if (businessService === "BPA_OC") {
    billBusinessService = status == "PENDING_APPL_FEE" ? "BPA.NC_OC_APP_FEE" : "BPA.NC_OC_SAN_FEE";
  }
  return billBusinessService;
};
var downloadPdf = function downloadPdf(blob, fileName) {
  if (window.mSewaApp && window.mSewaApp.isMsewaApp() && window.mSewaApp.downloadBase64File) {
    var reader = new FileReader();
    reader.readAsDataURL(blob);
    reader.onloadend = function () {
      var base64data = reader.result;
      mSewaApp.downloadBase64File(base64data, fileName);
    };
  } else {
    var link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = fileName;
    document.body.append(link);
    link.click();
    link.remove();
    setTimeout(function () {
      return URL.revokeObjectURL(link.href);
    }, 7000);
  }
};
var printPdf = function printPdf(blob) {
  var fileURL = URL.createObjectURL(blob);
  var myWindow = window.open(fileURL);
  if (myWindow != undefined) {
    myWindow.addEventListener("load", function (event) {
      myWindow.focus();
      myWindow.print();
    });
  }
};
var downloadAndPrintReciept = function downloadAndPrintReciept(bussinessService, consumerCode, tenantId, mode, pdfKey) {
  if (mode === void 0) {
    mode = "download";
  }
  if (pdfKey === void 0) {
    pdfKey = "consolidatedreceipt";
  }
  try {
    return Promise.resolve(Digit.OBPSService.receipt_download(bussinessService, consumerCode, tenantId, {
      pdfKey: pdfKey
    })).then(function (response) {
      var responseStatus = parseInt(response.status, 10);
      if (responseStatus === 201 || responseStatus === 200) {
        var fileName = mode == "print" ? printPdf(new Blob([response.data], {
          type: "application/pdf"
        })) : downloadPdf(new Blob([response.data], {
          type: "application/pdf"
        }), "RECEIPT-" + consumerCode + ".pdf");
      }
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
var showHidingLinksForStakeholder = function showHidingLinksForStakeholder(roles) {
  var _roles;
  if (roles === void 0) {
    roles = [];
  }
  var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
  var userInfo = userInfos ? JSON.parse(userInfos) : {};
  var checkedRoles = [];
  var rolearray = (_roles = roles) === null || _roles === void 0 ? void 0 : _roles.map(function (role) {
    var _userInfo$value, _userInfo$value$info, _userInfo$value$info$;
    userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$value = userInfo.value) === null || _userInfo$value === void 0 ? void 0 : (_userInfo$value$info = _userInfo$value.info) === null || _userInfo$value$info === void 0 ? void 0 : (_userInfo$value$info$ = _userInfo$value$info.roles) === null || _userInfo$value$info$ === void 0 ? void 0 : _userInfo$value$info$.map(function (item) {
      if (item.code === role.code && item.tenantId === role.tenantId) {
        checkedRoles.push(item);
      }
    });
  });
  return checkedRoles === null || checkedRoles === void 0 ? void 0 : checkedRoles.length;
};
var showHidingLinksForBPA = function showHidingLinksForBPA(roles) {
  var _roles2;
  if (roles === void 0) {
    roles = [];
  }
  var userInfo = Digit.UserService.getUser();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var checkedRoles = [];
  var rolearray = (_roles2 = roles) === null || _roles2 === void 0 ? void 0 : _roles2.map(function (role) {
    var _userInfo$info, _userInfo$info$roles;
    userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : (_userInfo$info$roles = _userInfo$info.roles) === null || _userInfo$info$roles === void 0 ? void 0 : _userInfo$info$roles.map(function (item) {
      if (item.code == role && item.tenantId === tenantId) {
        checkedRoles.push(item);
      }
    });
  });
  return checkedRoles === null || checkedRoles === void 0 ? void 0 : checkedRoles.length;
};
var getCheckBoxLabelData = function getCheckBoxLabelData(t, appData) {
  if ((appData === null || appData === void 0 ? void 0 : appData.status) == "CITIZEN_APPROVAL_INPROCESS") {
    return "" + t("BPA_CITIZEN_1_DECLARAION_LABEL") + t("BPA_CITIZEN_2_DECLARAION_LABEL");
  } else if ((appData === null || appData === void 0 ? void 0 : appData.status) == "INPROGRESS") {
    return "" + t("BPA_STAKEHOLDER_1_DECLARAION_LABEL") + t("BPA_STAKEHOLDER_2_DECLARAION_LABEL");
  }
};
var scrutinyDetailsData = function scrutinyDetailsData(edcrNumber, tenantId) {
  try {
    return Promise.resolve(Digit.OBPSService.scrutinyDetails(tenantId, {
      edcrNumber: edcrNumber
    })).then(function (scrutinyDetails) {
      return Promise.resolve(Digit.OBPSService.BPASearch(tenantId, {
        edcrNumber: edcrNumber
      })).then(function (bpaDetails) {
        var _bpaDetails$BPA, _bpaDetails$BPA2, _bpaDetails$BPA3, _bpaDetails$BPA3$, _bpaDetails$BPA4, _bpaDetails$BPA4$, _bpaDetails$BPA5, _bpaDetails$BPA5$;
        if ((bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA = bpaDetails.BPA) === null || _bpaDetails$BPA === void 0 ? void 0 : _bpaDetails$BPA.length) == 0) {
          var _scrutinyDetails$edcr, _scrutinyDetails$edcr2;
          return scrutinyDetails !== null && scrutinyDetails !== void 0 && (_scrutinyDetails$edcr = scrutinyDetails.edcrDetail) !== null && _scrutinyDetails$edcr !== void 0 && _scrutinyDetails$edcr[0] ? scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$edcr2 = scrutinyDetails.edcrDetail) === null || _scrutinyDetails$edcr2 === void 0 ? void 0 : _scrutinyDetails$edcr2[0] : {
            type: "ERROR",
            message: "BPA_NO_RECORD_FOUND"
          };
        } else if ((bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA2 = bpaDetails.BPA) === null || _bpaDetails$BPA2 === void 0 ? void 0 : _bpaDetails$BPA2.length) > 0 && ((bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA3 = bpaDetails.BPA) === null || _bpaDetails$BPA3 === void 0 ? void 0 : (_bpaDetails$BPA3$ = _bpaDetails$BPA3[0]) === null || _bpaDetails$BPA3$ === void 0 ? void 0 : _bpaDetails$BPA3$.status) == "INITIATED" || (bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA4 = bpaDetails.BPA) === null || _bpaDetails$BPA4 === void 0 ? void 0 : (_bpaDetails$BPA4$ = _bpaDetails$BPA4[0]) === null || _bpaDetails$BPA4$ === void 0 ? void 0 : _bpaDetails$BPA4$.status) == "REJECTED" || (bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA5 = bpaDetails.BPA) === null || _bpaDetails$BPA5 === void 0 ? void 0 : (_bpaDetails$BPA5$ = _bpaDetails$BPA5[0]) === null || _bpaDetails$BPA5$ === void 0 ? void 0 : _bpaDetails$BPA5$.status) == "PERMIT REVOCATION")) {
          var _scrutinyDetails$edcr3, _scrutinyDetails$edcr4;
          return scrutinyDetails !== null && scrutinyDetails !== void 0 && (_scrutinyDetails$edcr3 = scrutinyDetails.edcrDetail) !== null && _scrutinyDetails$edcr3 !== void 0 && _scrutinyDetails$edcr3[0] ? scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$edcr4 = scrutinyDetails.edcrDetail) === null || _scrutinyDetails$edcr4 === void 0 ? void 0 : _scrutinyDetails$edcr4[0] : {
            type: "ERROR",
            message: "BPA_NO_RECORD_FOUND"
          };
        } else {
          return {
            type: "ERROR",
            message: "APPLICATION_NUMBER_ALREADY_EXISTS"
          };
        }
      });
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
var getOCEDCRDetails = function getOCEDCRDetails(edcrNumber, tenantId) {
  try {
    return Promise.resolve(_catch(function () {
      return Promise.resolve(Digit.OBPSService.scrutinyDetails(tenantId, {
        edcrNumber: edcrNumber
      }));
    }, function (err) {
      var _err$response, _err$response2;
      return err !== null && err !== void 0 && (_err$response = err.response) !== null && _err$response !== void 0 && _err$response.statusText ? err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.statusText : "BPA_INTERNAL_SERVER_ERROR";
    }));
  } catch (e) {
    return Promise.reject(e);
  }
};
var ocScrutinyDetailsData = function ocScrutinyDetailsData(edcrNumber, tenantId) {
  return Promise.resolve(getOCEDCRDetails(edcrNumber, tenantId)).then(function (scrutinyDetails) {
    var _scrutinyDetails$edcr5, _scrutinyDetails$edcr6, _scrutinyDetails$edcr7, _scrutinyDetails$edcr8;
    return scrutinyDetails !== null && scrutinyDetails !== void 0 && (_scrutinyDetails$edcr5 = scrutinyDetails.edcrDetail) !== null && _scrutinyDetails$edcr5 !== void 0 && (_scrutinyDetails$edcr6 = _scrutinyDetails$edcr5[0]) !== null && _scrutinyDetails$edcr6 !== void 0 && _scrutinyDetails$edcr6.edcrNumber ? Promise.resolve(Digit.OBPSService.BPASearch(tenantId, {
      approvalNo: scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$edcr7 = scrutinyDetails.edcrDetail) === null || _scrutinyDetails$edcr7 === void 0 ? void 0 : (_scrutinyDetails$edcr8 = _scrutinyDetails$edcr7[0]) === null || _scrutinyDetails$edcr8 === void 0 ? void 0 : _scrutinyDetails$edcr8.permitNumber
    })).then(function (bpaDetails) {
      var _bpaDetails$BPA6, _bpaDetails$BPA6$, _bpaDetails$BPA7, _bpaDetails$BPA7$;
      var bpaEdcrNumber = bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA6 = bpaDetails.BPA) === null || _bpaDetails$BPA6 === void 0 ? void 0 : (_bpaDetails$BPA6$ = _bpaDetails$BPA6[0]) === null || _bpaDetails$BPA6$ === void 0 ? void 0 : _bpaDetails$BPA6$.edcrNumber;
      tenantId = bpaDetails === null || bpaDetails === void 0 ? void 0 : (_bpaDetails$BPA7 = bpaDetails.BPA) === null || _bpaDetails$BPA7 === void 0 ? void 0 : (_bpaDetails$BPA7$ = _bpaDetails$BPA7[0]) === null || _bpaDetails$BPA7$ === void 0 ? void 0 : _bpaDetails$BPA7$.tenantId;
      return Promise.resolve(Digit.OBPSService.scrutinyDetails(tenantId, {
        edcrNumber: bpaEdcrNumber
      })).then(function (edcrDetails) {
        return Promise.resolve(Digit.OBPSService.BPASearch(tenantId, {
          edcrNumber: edcrNumber
        })).then(function (bpaResponse) {
          var _scrutinyDetails$edcr9, _scrutinyDetails$edcr10, _scrutinyDetails$edcr11, _scrutinyDetails$edcr12;
          if (!(scrutinyDetails !== null && scrutinyDetails !== void 0 && (_scrutinyDetails$edcr9 = scrutinyDetails.edcrDetail) !== null && _scrutinyDetails$edcr9 !== void 0 && (_scrutinyDetails$edcr10 = _scrutinyDetails$edcr9[0]) !== null && _scrutinyDetails$edcr10 !== void 0 && _scrutinyDetails$edcr10.edcrNumber)) {
            return {
              type: "ERROR",
              message: scrutinyDetails ? scrutinyDetails : "BPA_NO_RECORD_FOUND"
            };
          }
          if (scrutinyDetails !== null && scrutinyDetails !== void 0 && (_scrutinyDetails$edcr11 = scrutinyDetails.edcrDetail) !== null && _scrutinyDetails$edcr11 !== void 0 && (_scrutinyDetails$edcr12 = _scrutinyDetails$edcr11[0]) !== null && _scrutinyDetails$edcr12 !== void 0 && _scrutinyDetails$edcr12.edcrNumber) {
            var _scrutinyDetails$edcr13;
            return {
              ocEdcrDetails: scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$edcr13 = scrutinyDetails.edcrDetail) === null || _scrutinyDetails$edcr13 === void 0 ? void 0 : _scrutinyDetails$edcr13[0],
              otherDetails: {
                bpaApprovalResponse: bpaDetails === null || bpaDetails === void 0 ? void 0 : bpaDetails.BPA,
                edcrDetails: edcrDetails === null || edcrDetails === void 0 ? void 0 : edcrDetails.edcrDetail,
                bpaResponse: bpaResponse === null || bpaResponse === void 0 ? void 0 : bpaResponse.BPA
              }
            };
          } else {
            return {
              type: "ERROR",
              message: "BPA_NO_RECORD_FOUND"
            };
          }
        });
      });
    }) : {
      type: "ERROR",
      message: scrutinyDetails ? scrutinyDetails : "BPA_NO_RECORD_FOUND"
    };
  });
};
var getOrderDocuments = function getOrderDocuments(appUploadedDocumnets, isNoc) {
  if (isNoc === void 0) {
    isNoc = false;
  }
  var finalDocs = [];
  if ((appUploadedDocumnets === null || appUploadedDocumnets === void 0 ? void 0 : appUploadedDocumnets.length) > 0) {
    var uniqueDocmnts = appUploadedDocumnets.filter(function (elem, index) {
      return appUploadedDocumnets.findIndex(function (obj) {
        var _obj$documentType, _obj$documentType$spl, _obj$documentType$spl2, _elem$documentType, _elem$documentType$sp, _elem$documentType$sp2;
        return (obj === null || obj === void 0 ? void 0 : (_obj$documentType = obj.documentType) === null || _obj$documentType === void 0 ? void 0 : (_obj$documentType$spl = _obj$documentType.split(".")) === null || _obj$documentType$spl === void 0 ? void 0 : (_obj$documentType$spl2 = _obj$documentType$spl.slice(0, 2)) === null || _obj$documentType$spl2 === void 0 ? void 0 : _obj$documentType$spl2.join("_")) === (elem === null || elem === void 0 ? void 0 : (_elem$documentType = elem.documentType) === null || _elem$documentType === void 0 ? void 0 : (_elem$documentType$sp = _elem$documentType.split(".")) === null || _elem$documentType$sp === void 0 ? void 0 : (_elem$documentType$sp2 = _elem$documentType$sp.slice(0, 2)) === null || _elem$documentType$sp2 === void 0 ? void 0 : _elem$documentType$sp2.join("_"));
      }) === index;
    });
    uniqueDocmnts === null || uniqueDocmnts === void 0 ? void 0 : uniqueDocmnts.map(function (uniDoc) {
      var _resultsDocs$, _resultsDocs$$documen, _resultsDocs$$documen2, _resultsDocs$$documen3;
      var resultsDocs = appUploadedDocumnets === null || appUploadedDocumnets === void 0 ? void 0 : appUploadedDocumnets.filter(function (appDoc) {
        var _uniDoc$documentType, _uniDoc$documentType$, _uniDoc$documentType$2, _appDoc$documentType, _appDoc$documentType$, _appDoc$documentType$2;
        return (uniDoc === null || uniDoc === void 0 ? void 0 : (_uniDoc$documentType = uniDoc.documentType) === null || _uniDoc$documentType === void 0 ? void 0 : (_uniDoc$documentType$ = _uniDoc$documentType.split(".")) === null || _uniDoc$documentType$ === void 0 ? void 0 : (_uniDoc$documentType$2 = _uniDoc$documentType$.slice(0, 2)) === null || _uniDoc$documentType$2 === void 0 ? void 0 : _uniDoc$documentType$2.join("_")) == (appDoc === null || appDoc === void 0 ? void 0 : (_appDoc$documentType = appDoc.documentType) === null || _appDoc$documentType === void 0 ? void 0 : (_appDoc$documentType$ = _appDoc$documentType.split(".")) === null || _appDoc$documentType$ === void 0 ? void 0 : (_appDoc$documentType$2 = _appDoc$documentType$.slice(0, 2)) === null || _appDoc$documentType$2 === void 0 ? void 0 : _appDoc$documentType$2.join("_"));
      });
      resultsDocs === null || resultsDocs === void 0 ? void 0 : resultsDocs.forEach(function (resDoc) {
        return resDoc.title = resDoc.documentType;
      });
      finalDocs.push({
        title: !isNoc ? resultsDocs === null || resultsDocs === void 0 ? void 0 : (_resultsDocs$ = resultsDocs[0]) === null || _resultsDocs$ === void 0 ? void 0 : (_resultsDocs$$documen = _resultsDocs$.documentType) === null || _resultsDocs$$documen === void 0 ? void 0 : (_resultsDocs$$documen2 = _resultsDocs$$documen.split(".")) === null || _resultsDocs$$documen2 === void 0 ? void 0 : (_resultsDocs$$documen3 = _resultsDocs$$documen2.slice(0, 2)) === null || _resultsDocs$$documen3 === void 0 ? void 0 : _resultsDocs$$documen3.join("_") : "",
        values: resultsDocs
      });
    });
  }
  return finalDocs;
};

var SearchFormFieldsComponent = function SearchFormFieldsComponent(_ref) {
  var _userInfo$value, _JSON$parse, _userInformation$role, _userInformation$role2, _businessServiceData$, _formState$errors, _formState$errors$mob;
  var formState = _ref.formState,
    Controller = _ref.Controller,
    register = _ref.register,
    control = _ref.control,
    t = _ref.t,
    reset = _ref.reset,
    previousPage = _ref.previousPage;
  var stateTenantId = Digit.ULBService.getStateId();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
  var userInfo = userInfos ? JSON.parse(userInfos) : {};
  var userInformation = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$value = userInfo.value) === null || _userInfo$value === void 0 ? void 0 : _userInfo$value.info;
  var applicationType = reactHookForm.useWatch({
    control: control,
    name: "applicationType"
  });
  var oldApplicationType = sessionStorage.getItem("search_application") || "";
  if (oldApplicationType && oldApplicationType != "undefined" && ((_JSON$parse = JSON.parse(oldApplicationType)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.code) !== (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code)) control.setValue("status", "");
  sessionStorage.setItem("search_application", JSON.stringify(applicationType));
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useServiceTypeFromApplicationType({
      Applicationtype: (applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) || ((userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role = userInformation.roles) === null || _userInformation$role === void 0 ? void 0 : _userInformation$role.filter(function (ob) {
        return ob.code.includes("BPAREG_");
      }).length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role2 = userInformation.roles) === null || _userInformation$role2 === void 0 ? void 0 : _userInformation$role2.filter(function (ob) {
        return ob.code.includes("BPA_");
      }).length) <= 0 ? "BPA_STAKEHOLDER_REGISTRATION" : "BUILDING_PLAN_SCRUTINY"),
      tenantId: stateTenantId
    }),
    applicationTypes = _Digit$Hooks$obps$use.applicationTypes,
    ServiceTypes = _Digit$Hooks$obps$use.ServiceTypes;
  var businessServices = "BPA,BPA_LOW,BPA_OC,ARCHITECT,BUILDER,ENGINEER,STRUCTURALENGINEER";
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBusinessServiceData(tenantId, businessServices, {}),
    businessServiceData = _Digit$Hooks$obps$use2.data;
  var bpaStatus = [],
    bpaOCStatus = [],
    bparegStatus = [],
    applicationStatuses = [];
  businessServiceData === null || businessServiceData === void 0 ? void 0 : (_businessServiceData$ = businessServiceData.BusinessServices) === null || _businessServiceData$ === void 0 ? void 0 : _businessServiceData$.map(function (data) {
    data.states.map(function (state) {
      if (state.state && state.applicationStatus) {
        if (data.business == "BPAREG") {
          bparegStatus.push({
            code: state.applicationStatus,
            i18nKey: "WF_ARCHITECT_" + state.state,
            module: data.business
          });
        } else {
          if ((data === null || data === void 0 ? void 0 : data.businessService) == "BPA_OC") {
            bpaOCStatus.push({
              code: state.applicationStatus,
              i18nKey: "WF_BPA_" + state.state,
              module: data.business
            });
          } else {
            bpaStatus.push({
              code: state.applicationStatus,
              i18nKey: "WF_BPA_" + state.state,
              module: data.business
            });
          }
        }
      }
    });
  });
  var bpaFlags = [],
    bpaStatusUnique = [],
    i;
  for (i = 0; i < bpaStatus.length; i++) {
    if (bpaFlags[bpaStatus[i].code]) continue;
    bpaFlags[bpaStatus[i].code] = true;
    bpaStatusUnique.push(bpaStatus[i].code);
  }
  var bpaOCFlags = [],
    bpaOCStatusStatusUnique = [],
    j;
  for (j = 0; j < bpaOCStatus.length; j++) {
    if (bpaOCFlags[bpaOCStatus[j].code]) continue;
    bpaOCFlags[bpaOCStatus[j].code] = true;
    bpaOCStatusStatusUnique.push(bpaOCStatus[j].code);
  }
  var bpaRegFlags = [],
    bparegStatusUnique = [],
    k;
  for (k = 0; k < bparegStatus.length; k++) {
    if (bpaRegFlags[bparegStatus[k].code]) continue;
    bpaRegFlags[bparegStatus[k].code] = true;
    bparegStatusUnique.push(bparegStatus[k].code);
  }
  var bpaApplicationStatus = [],
    bpaOCApplicationStatus = [],
    bpaRegApplicationStatus = [];
  bpaStatusUnique.forEach(function (code) {
    return bpaApplicationStatus.push({
      i18nKey: "WF_BPA_" + code,
      code: code
    });
  });
  bpaOCStatusStatusUnique.forEach(function (code) {
    return bpaOCApplicationStatus.push({
      i18nKey: "WF_BPA_" + code,
      code: code
    });
  });
  bparegStatusUnique.forEach(function (code) {
    return bpaRegApplicationStatus.push({
      i18nKey: "WF_BPA_" + code,
      code: code
    });
  });
  bpaApplicationStatus.forEach(function (bpaCode) {
    bpaStatus.map(function (bpaCde) {
      if ((bpaCode === null || bpaCode === void 0 ? void 0 : bpaCode.code) == (bpaCde === null || bpaCde === void 0 ? void 0 : bpaCde.code)) bpaCode.i18nKey = bpaCde.i18nKey;
    });
  });
  bpaOCApplicationStatus.forEach(function (bpaOCCode) {
    bpaOCStatus.map(function (bpaOCCde) {
      if ((bpaOCCode === null || bpaOCCode === void 0 ? void 0 : bpaOCCode.code) == (bpaOCCde === null || bpaOCCde === void 0 ? void 0 : bpaOCCde.code)) bpaOCCode.i18nKey = bpaOCCde.i18nKey;
    });
  });
  bpaRegApplicationStatus.forEach(function (bparegCode) {
    bparegStatus.map(function (bparegCde) {
      if ((bparegCode === null || bparegCode === void 0 ? void 0 : bparegCode.code) == (bparegCde === null || bparegCde === void 0 ? void 0 : bparegCde.code)) bparegCode.i18nKey = bparegCde.i18nKey;
    });
  });
  if ((applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "BPA_STAKEHOLDER_REGISTRATION") applicationStatuses = bpaRegApplicationStatus;else if ((applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "BUILDING_PLAN_SCRUTINY") applicationStatuses = bpaApplicationStatus;else if ((applicationType === null || applicationType === void 0 ? void 0 : applicationType.code) === "BUILDING_OC_PLAN_SCRUTINY") applicationStatuses = bpaOCApplicationStatus;else applicationStatuses = [];
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_SEARCH_APPLICATION_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    name: "applicationNo",
    inputRef: register({})
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APP_MOBILE_NO_SEARCH_PARAM")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
    name: "mobileNumber",
    disable: window.location.href.includes("/digit-ui/citizen") ? true : false,
    inputRef: register({
      minLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      maxLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      pattern: {
        value: /[6789][0-9]{9}/,
        message: t("CORE_COMMON_MOBILE_ERROR")
      }
    }),
    type: "number",
    componentInFront: /*#__PURE__*/React__default.createElement("div", {
      className: "employee-card-input employee-card-input--front"
    }, "+91")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, formState === null || formState === void 0 ? void 0 : (_formState$errors = formState.errors) === null || _formState$errors === void 0 ? void 0 : (_formState$errors$mob = _formState$errors["mobileNumber"]) === null || _formState$errors$mob === void 0 ? void 0 : _formState$errors$mob.message)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_SEARCH_APPLICATION_TYPE_LABEL")), /*#__PURE__*/React__default.createElement(Controller, {
    control: control,
    name: "applicationType",
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        selected: props.value,
        select: props.onChange,
        onBlur: props.onBlur,
        option: applicationTypes,
        optionKey: "i18nKey",
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")), /*#__PURE__*/React__default.createElement(Controller, {
    control: control,
    name: "serviceType",
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        selected: ServiceTypes && (ServiceTypes === null || ServiceTypes === void 0 ? void 0 : ServiceTypes.length) > 0 ? props.value : ServiceTypes[0],
        select: props.onChange,
        onBlur: props.onBlur,
        option: ServiceTypes,
        optionKey: "i18nKey",
        t: t,
        isBPAREG: ServiceTypes && (ServiceTypes === null || ServiceTypes === void 0 ? void 0 : ServiceTypes.length) > 0 ? true : false
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APP_FROM_DATE_SEARCH_PARAM")), /*#__PURE__*/React__default.createElement(Controller, {
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
        date: props.value,
        onChange: props.onChange
      });
    },
    name: "fromDate",
    control: control
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APP_TO_DATE_SEARCH_PARAM")), /*#__PURE__*/React__default.createElement(Controller, {
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
        date: props.value,
        onChange: props.onChange
      });
    },
    name: "toDate",
    control: control
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_SEARCH_APPLICATION_STATUS_LABEL")), /*#__PURE__*/React__default.createElement(Controller, {
    control: control,
    name: "status",
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        selected: props.value,
        select: props.onChange,
        onBlur: props.onBlur,
        option: applicationStatuses,
        optionKey: "i18nKey",
        t: t
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, {
    className: "submit"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ES_COMMON_SEARCH"),
    submit: true
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "24px"
    },
    onClick: function onClick() {
      var _userInformation$role3, _userInformation$role4, _userInformation$role5, _userInformation$role6, _userInformation$role7, _userInformation$role8, _userInformation$role9, _userInformation$role10, _userInformation$role11, _userInformation$role12, _userInformation$role13, _userInformation$role14;
      reset({
        applicationNo: "",
        mobileNumber: "",
        fromDate: "",
        toDate: "",
        status: "",
        offset: 0,
        limit: 10,
        sortBy: "commencementDate",
        sortOrder: "DESC",
        applicationType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role3 = userInformation.roles) === null || _userInformation$role3 === void 0 ? void 0 : (_userInformation$role4 = _userInformation$role3.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role4 === void 0 ? void 0 : _userInformation$role4.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role5 = userInformation.roles) === null || _userInformation$role5 === void 0 ? void 0 : _userInformation$role5.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role6 = userInformation.roles) === null || _userInformation$role6 === void 0 ? void 0 : (_userInformation$role7 = _userInformation$role6.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role7 === void 0 ? void 0 : _userInformation$role7.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role8 = userInformation.roles) === null || _userInformation$role8 === void 0 ? void 0 : _userInformation$role8.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ? {
          code: "BPA_STAKEHOLDER_REGISTRATION",
          i18nKey: "WF_BPA_BPA_STAKEHOLDER_REGISTRATION"
        } : {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        },
        serviceType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role9 = userInformation.roles) === null || _userInformation$role9 === void 0 ? void 0 : (_userInformation$role10 = _userInformation$role9.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role10 === void 0 ? void 0 : _userInformation$role10.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role11 = userInformation.roles) === null || _userInformation$role11 === void 0 ? void 0 : _userInformation$role11.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role12 = userInformation.roles) === null || _userInformation$role12 === void 0 ? void 0 : (_userInformation$role13 = _userInformation$role12.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role13 === void 0 ? void 0 : _userInformation$role13.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role14 = userInformation.roles) === null || _userInformation$role14 === void 0 ? void 0 : _userInformation$role14.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ?
        "" : {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        },
        "isSubmitSuccessful": false
      });
      previousPage();
    }
  }, t("ES_COMMON_CLEAR_ALL"))));
};

var useSearchApplicationTableConfig = function useSearchApplicationTableConfig(_ref) {
  var t = _ref.t;
  var getRedirectionLink = function getRedirectionLink(bService) {
    var redirectBS = bService === "BPAREG" ? "search/application/stakeholder" : "search/application/bpa";
    if (window.location.href.includes("/citizen")) {
      redirectBS = bService === "BPAREG" ? "stakeholder" : "bpa";
    }
    return redirectBS;
  };
  var GetCell = function GetCell(value) {
    return /*#__PURE__*/React__default.createElement("span", {
      className: "cell-text"
    }, value);
  };
  return React.useMemo(function () {
    return [{
      Header: t("BPA_APPLICATION_NUMBER_LABEL"),
      accessor: "applicationNo",
      disableSortBy: true,
      Cell: function Cell(_ref2) {
        var row = _ref2.row;
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: window.location.href.includes("/citizen") ? "/digit-ui/citizen/obps/" + (getRedirectionLink(row.original["businessService"]) || "--") + "/" + (row.original["applicationNo"] || row.original["applicationNumber"]) : "/digit-ui/employee/obps/" + (getRedirectionLink(row.original["businessService"]) || "--") + "/" + (row.original["applicationNo"] || row.original["applicationNumber"])
        }, row.original["applicationNo"] || row.original["applicationNumber"])));
      }
    }, {
      Header: t("BPA_COMMON_TABLE_COL_APP_DATE_LABEL"),
      disableSortBy: true,
      accessor: function accessor(row) {
        var _row$auditDetails, _row$auditDetails2;
        return GetCell(row !== null && row !== void 0 && (_row$auditDetails = row.auditDetails) !== null && _row$auditDetails !== void 0 && _row$auditDetails.createdTime ? convertEpochToDateDMY(row === null || row === void 0 ? void 0 : (_row$auditDetails2 = row.auditDetails) === null || _row$auditDetails2 === void 0 ? void 0 : _row$auditDetails2.createdTime) : "");
      }
    }, {
      Header: t("BPA_SEARCH_APPLICATION_TYPE_LABEL"),
      disableSortBy: true,
      accessor: "applicationType",
      Cell: function Cell(_ref3) {
        var _row$original, _row$original$additio, _row$original2, _row$original2$additi, _row$original3, _row$original4;
        var row = _ref3.row;
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: "cell-text"
        }, (_row$original = row.original) !== null && _row$original !== void 0 && (_row$original$additio = _row$original.additionalDetails) !== null && _row$original$additio !== void 0 && _row$original$additio.applicationType ? t("WF_BPA_" + ((_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : (_row$original2$additi = _row$original2.additionalDetails) === null || _row$original2$additi === void 0 ? void 0 : _row$original2$additi.applicationType)) : (_row$original3 = row.original) !== null && _row$original3 !== void 0 && _row$original3.businessService ? t("BPA_APPLICATIONTYPE_" + (row === null || row === void 0 ? void 0 : (_row$original4 = row.original) === null || _row$original4 === void 0 ? void 0 : _row$original4.businessService)) : "-"));
      }
    }, {
      Header: t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
      disableSortBy: true,
      accessor: function accessor(row) {
        var _row$additionalDetail, _row$tradeLicenseDeta, _row$tradeLicenseDeta2, _row$tradeLicenseDeta3, _row$tradeLicenseDeta4;
        return GetCell(t(((_row$additionalDetail = row.additionalDetails) === null || _row$additionalDetail === void 0 ? void 0 : _row$additionalDetail.serviceType) || t("TRADELICENSE_TRADETYPE_" + (row === null || row === void 0 ? void 0 : (_row$tradeLicenseDeta = row.tradeLicenseDetail) === null || _row$tradeLicenseDeta === void 0 ? void 0 : (_row$tradeLicenseDeta2 = _row$tradeLicenseDeta.tradeUnits) === null || _row$tradeLicenseDeta2 === void 0 ? void 0 : (_row$tradeLicenseDeta3 = _row$tradeLicenseDeta2[0]) === null || _row$tradeLicenseDeta3 === void 0 ? void 0 : (_row$tradeLicenseDeta4 = _row$tradeLicenseDeta3.tradeType) === null || _row$tradeLicenseDeta4 === void 0 ? void 0 : _row$tradeLicenseDeta4.split(".")[0])) || "-"));
      }
    }, {
      Header: t("BPA_CURRENT_OWNER_HEAD"),
      accessor: function accessor(row) {
        return GetCell((row === null || row === void 0 ? void 0 : row.assignee) || "-");
      },
      disableSortBy: true
    }, {
      Header: t("BPA_STATUS_LABEL"),
      accessor: function accessor(row) {
        return GetCell(t((row === null || row === void 0 ? void 0 : row.state) && "WF_BPA_" + row.state || (row === null || row === void 0 ? void 0 : row.state) && "WF_BPA_" + row.status || "NA"));
      },
      disableSortBy: true
    }];
  }, []);
};

var _excluded = ["currentlyActiveMobileModal", "searchFormFieldsComponentProps"],
  _excluded2 = ["currentlyActiveMobileModal", "searchFormFieldsComponentProps"];
var OBPSSearchApplication = function OBPSSearchApplication(_ref) {
  var _userInfo$value, _userInfo$value2, _userInfo$value2$info, _userInformation$role, _userInformation$role2, _userInformation$role3, _userInformation$role4, _userInformation$role5, _userInformation$role6, _userInformation$role7, _userInformation$role8, _userInformation$role9, _userInformation$role10, _userInformation$role11, _userInformation$role12, _data$3, _data$4;
  var t = _ref.t,
    _onSubmit = _ref.onSubmit,
    data = _ref.data,
    error = _ref.error,
    searchData = _ref.searchData,
    isLoading = _ref.isLoading,
    Count = _ref.Count,
    setparamerror = _ref.setparamerror;
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];

  var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
  var userInfo = userInfos ? JSON.parse(userInfos) : {};
  var userInformation = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$value = userInfo.value) === null || _userInfo$value === void 0 ? void 0 : _userInfo$value.info;
  var currentUserPhoneNumber = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$value2 = userInfo.value) === null || _userInfo$value2 === void 0 ? void 0 : (_userInfo$value2$info = _userInfo$value2.info) === null || _userInfo$value2$info === void 0 ? void 0 : _userInfo$value2$info.mobileNumber;
  var _useForm = reactHookForm.useForm({
      defaultValues: _extends({
        applicationNo: "",
        mobileNumber: window.location.href.includes("/digit-ui/citizen") ? currentUserPhoneNumber : "",
        fromDate: "",
        toDate: "",
        status: "",
        offset: 0,
        limit: 10,
        sortBy: "commencementDate",
        sortOrder: "DESC",
        applicationType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role = userInformation.roles) === null || _userInformation$role === void 0 ? void 0 : (_userInformation$role2 = _userInformation$role.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role2 === void 0 ? void 0 : _userInformation$role2.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role3 = userInformation.roles) === null || _userInformation$role3 === void 0 ? void 0 : _userInformation$role3.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role4 = userInformation.roles) === null || _userInformation$role4 === void 0 ? void 0 : (_userInformation$role5 = _userInformation$role4.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role5 === void 0 ? void 0 : _userInformation$role5.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role6 = userInformation.roles) === null || _userInformation$role6 === void 0 ? void 0 : _userInformation$role6.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ? {
          code: "BPA_STAKEHOLDER_REGISTRATION",
          i18nKey: "WF_BPA_BPA_STAKEHOLDER_REGISTRATION"
        } : {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        },
        serviceType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role7 = userInformation.roles) === null || _userInformation$role7 === void 0 ? void 0 : (_userInformation$role8 = _userInformation$role7.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role8 === void 0 ? void 0 : _userInformation$role8.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role9 = userInformation.roles) === null || _userInformation$role9 === void 0 ? void 0 : _userInformation$role9.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role10 = userInformation.roles) === null || _userInformation$role10 === void 0 ? void 0 : (_userInformation$role11 = _userInformation$role10.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role11 === void 0 ? void 0 : _userInformation$role11.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role12 = userInformation.roles) === null || _userInformation$role12 === void 0 ? void 0 : _userInformation$role12.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ?
        "" : {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        }
      }, searchData)
    }),
    register = _useForm.register,
    control = _useForm.control,
    handleSubmit = _useForm.handleSubmit,
    setValue = _useForm.setValue,
    getValues = _useForm.getValues,
    reset = _useForm.reset,
    formState = _useForm.formState;
  React.useEffect(function () {
    register("offset", 0);
    register("limit", 10);
    register("sortBy", "commencementDate");
    register("sortOrder", "DESC");
  }, [register]);
  React__default.useEffect(function () {
    if (formState.isSubmitSuccessful) {
      var _Digit$UserService$ge, _Digit$UserService$ge2, _userInformation$role13, _userInformation$role14, _userInformation$role15, _userInformation$role16, _userInformation$role17, _userInformation$role18, _userInformation$role19, _userInformation$role20, _userInformation$role21, _userInformation$role22, _userInformation$role23, _userInformation$role24;
      reset(_extends({
        applicationNo: "",
        mobileNumber: window.location.href.includes("/digit-ui/citizen") ? (_Digit$UserService$ge = Digit.UserService.getUser()) === null || _Digit$UserService$ge === void 0 ? void 0 : (_Digit$UserService$ge2 = _Digit$UserService$ge.info) === null || _Digit$UserService$ge2 === void 0 ? void 0 : _Digit$UserService$ge2.mobileNumber : "",
        fromDate: "",
        toDate: "",
        status: "",
        offset: 0,
        limit: 10,
        sortBy: "commencementDate",
        sortOrder: "DESC",
        applicationType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role13 = userInformation.roles) === null || _userInformation$role13 === void 0 ? void 0 : (_userInformation$role14 = _userInformation$role13.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role14 === void 0 ? void 0 : _userInformation$role14.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role15 = userInformation.roles) === null || _userInformation$role15 === void 0 ? void 0 : _userInformation$role15.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role16 = userInformation.roles) === null || _userInformation$role16 === void 0 ? void 0 : (_userInformation$role17 = _userInformation$role16.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role17 === void 0 ? void 0 : _userInformation$role17.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role18 = userInformation.roles) === null || _userInformation$role18 === void 0 ? void 0 : _userInformation$role18.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ? {
          code: "BPA_STAKEHOLDER_REGISTRATION",
          i18nKey: "WF_BPA_BPA_STAKEHOLDER_REGISTRATION"
        } : {
          code: "BUILDING_PLAN_SCRUTINY",
          i18nKey: "WF_BPA_BUILDING_PLAN_SCRUTINY"
        },
        serviceType: (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role19 = userInformation.roles) === null || _userInformation$role19 === void 0 ? void 0 : (_userInformation$role20 = _userInformation$role19.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role20 === void 0 ? void 0 : _userInformation$role20.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role21 = userInformation.roles) === null || _userInformation$role21 === void 0 ? void 0 : _userInformation$role21.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) > 0 ? {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        } : (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role22 = userInformation.roles) === null || _userInformation$role22 === void 0 ? void 0 : (_userInformation$role23 = _userInformation$role22.filter(function (ob) {
          return ob.code.includes("BPAREG_");
        })) === null || _userInformation$role23 === void 0 ? void 0 : _userInformation$role23.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role24 = userInformation.roles) === null || _userInformation$role24 === void 0 ? void 0 : _userInformation$role24.filter(function (ob) {
          return ob.code.includes("BPA_");
        }).length) <= 0 ?
        "" : {
          applicationType: ["BUILDING_PLAN_SCRUTINY", "BUILDING_OC_PLAN_SCRUTINY"],
          code: "NEW_CONSTRUCTION",
          i18nKey: "BPA_SERVICETYPE_NEW_CONSTRUCTION"
        }
      }, searchData, {
        isSubmitSuccessful: false
      }));
    }
  }, [formState]);
  var columns = useSearchApplicationTableConfig({
    t: t
  });
  var _useState2 = React.useState(getValues("offset") / getValues("limit")),
    currPage = _useState2[0],
    setCurrPage = _useState2[1];
  React.useEffect(function () {
    if (error !== "") {
      setparamerror("");
      setShowToast({
        key: true,
        label: error
      });
    }
  }, [error]);
  var fetchLastPage = function fetchLastPage() {
    setValue("offset", Count && Math.ceil(Count / 10) * 10 - getValues("limit"));
    handleSubmit(_onSubmit)();
  };
  var fetchFirstPage = function fetchFirstPage() {
    setValue("offset", 0);
    handleSubmit(_onSubmit)();
  };
  var onSort = React.useCallback(function (args) {
    if (args.length === 0) return;
    setValue("sortBy", args.id);
    setValue("sortOrder", args.desc ? "DESC" : "ASC");
  }, []);
  function onPageSizeChange(e) {
    setValue("limit", Number(e.target.value));
    handleSubmit(_onSubmit)();
  }
  function nextPage() {
    setValue("offset", getValues("offset") + getValues("limit"));
    handleSubmit(_onSubmit)();
  }
  function previousPage() {
    setValue("offset", getValues("offset") - getValues("limit"));
    handleSubmit(_onSubmit)();
  }
  React.useEffect(function () {
    if (!(getValues("offset") == undefined || getValues("limit") == undefined)) setCurrPage(getValues("offset") / getValues("limit"));
  }, [getValues("offset"), getValues("limit")]);
  var isMobile = window.Digit.Utils.browser.isMobile();
  var searchFormFieldsComponentProps = {
    formState: formState,
    Controller: reactHookForm.Controller,
    register: register,
    control: control,
    t: t,
    reset: reset,
    previousPage: previousPage
  };
  var getRedirectionLink = function getRedirectionLink(bService) {
    var redirectBS = bService === "BPAREG" ? "search/application/stakeholder" : "search/application/bpa";
    if (window.location.href.includes("/citizen")) {
      redirectBS = bService === "BPAREG" ? "stakeholder" : "bpa";
    }
    return redirectBS;
  };
  var propsMobileInboxCards = React.useMemo(function () {
    return data === null || data === void 0 ? void 0 : data.map(function (data) {
      var _data$auditDetails, _data$additionalDetai, _data$additionalDetai2, _data$additionalDetai3, _data$additionalDetai4, _data$landInfo, _ref2;
      return _ref2 = {}, _ref2[t("BPA_APPLICATION_NUMBER_LABEL")] = data.applicationNo, _ref2[t("BPA_COMMON_TABLE_COL_APP_DATE_LABEL")] = convertEpochToDateDMY((_data$auditDetails = data.auditDetails) === null || _data$auditDetails === void 0 ? void 0 : _data$auditDetails.createdTime) || "", _ref2[t("BPA_SEARCH_APPLICATION_TYPE_LABEL")] = (_data$additionalDetai = data.additionalDetails) !== null && _data$additionalDetai !== void 0 && _data$additionalDetai.applicationType ? t("WF_BPA_" + ((_data$additionalDetai2 = data.additionalDetails) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.applicationType)) : "-", _ref2[t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")] = (_data$additionalDetai3 = data.additionalDetails) !== null && _data$additionalDetai3 !== void 0 && _data$additionalDetai3.serviceType ? t((_data$additionalDetai4 = data.additionalDetails) === null || _data$additionalDetai4 === void 0 ? void 0 : _data$additionalDetai4.serviceType) : "-", _ref2[t("BPA_CURRENT_OWNER_HEAD")] = ((_data$landInfo = data.landInfo) === null || _data$landInfo === void 0 ? void 0 : _data$landInfo.owners.map(function (o) {
        return o.name;
      }).join(",")) || "-", _ref2[t("BPA_STATUS_LABEL")] = data.state ? t("WF_BPA_" + data.state) : "NA", _ref2;
    });
  }, [data]);
  if (isMobile) {
    var _data$, _data$2;
    var activateModal = function activateModal(state, action) {
      switch (action.type) {
        case "set":
          return action.payload;
        case "remove":
          return false;
      }
    };
    var _useReducer = React.useReducer(activateModal, false),
      currentlyActiveMobileModal = _useReducer[0],
      setActiveMobileModal = _useReducer[1];
    var closeMobilePopupModal = function closeMobilePopupModal() {
      setActiveMobileModal({
        type: "remove"
      });
    };
    var MobilePopUpCloseButton = function MobilePopUpCloseButton() {
      return /*#__PURE__*/React__default.createElement("div", {
        className: "InboxMobilePopupCloseButtonWrapper",
        onClick: closeMobilePopupModal
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CloseSvg, null));
    };
    var MobileComponentDirectory = function MobileComponentDirectory(_ref3) {
      var currentlyActiveMobileModal = _ref3.currentlyActiveMobileModal,
        searchFormFieldsComponentProps = _ref3.searchFormFieldsComponentProps,
        props = _objectWithoutPropertiesLoose(_ref3, _excluded);
      var closeMobilePopupModal = props.closeMobilePopupModal;
      switch (currentlyActiveMobileModal) {
        case "SearchFormComponent":
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, props, /*#__PURE__*/React__default.createElement(MobilePopUpCloseButton, null), /*#__PURE__*/React__default.createElement("div", {
            className: "MobilePopupHeadingWrapper"
          }, /*#__PURE__*/React__default.createElement("h2", null, t("ES_COMMON_SEARCH_APPLICATION"), ":")), /*#__PURE__*/React__default.createElement(SearchFormFieldsComponent, _extends({}, searchFormFieldsComponentProps, {
            closeMobilePopupModal: closeMobilePopupModal
          })));
        default:
          return /*#__PURE__*/React__default.createElement("span", null);
      }
    };
    var CurrentMobileModalComponent = React.useCallback(function (_ref4) {
      var currentlyActiveMobileModal = _ref4.currentlyActiveMobileModal,
        searchFormFieldsComponentProps = _ref4.searchFormFieldsComponentProps,
        props = _objectWithoutPropertiesLoose(_ref4, _excluded2);
      return MobileComponentDirectory(_extends({
        currentlyActiveMobileModal: currentlyActiveMobileModal,
        searchFormFieldsComponentProps: searchFormFieldsComponentProps
      }, props));
    }, [currentlyActiveMobileModal]);
    if (isLoading) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
      className: "searchBox"
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchAction, {
      text: t("ES_COMMON_SEARCH_APPLICATION"),
      handleActionClick: function handleActionClick() {
        return setActiveMobileModal({
          type: "set",
          payload: "SearchFormComponent"
        });
      }
    })), currentlyActiveMobileModal ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.PopUp, null, /*#__PURE__*/React__default.createElement(CurrentMobileModalComponent, {
      onSubmit: function onSubmit(data) {
        setActiveMobileModal({
          type: "remove"
        });
        _onSubmit(data);
      },
      handleSubmit: handleSubmit,
      id: "search-form",
      className: "rm-mb form-field-flex-one inboxPopupMobileWrapper",
      searchFormFieldsComponentProps: searchFormFieldsComponentProps,
      currentlyActiveMobileModal: currentlyActiveMobileModal,
      closeMobilePopupModal: closeMobilePopupModal
    })) : null, data !== null && data !== void 0 && (_data$ = data[0]) !== null && _data$ !== void 0 && _data$.display ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
      style: {
        marginTop: 20
      }
    }, t(data === null || data === void 0 ? void 0 : (_data$2 = data[0]) === null || _data$2 === void 0 ? void 0 : _data$2.display).split("\\n").map(function (text, index) {
      return /*#__PURE__*/React__default.createElement("p", {
        key: index,
        style: {
          textAlign: "center"
        }
      }, text);
    })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.DetailsCard, {
      data: propsMobileInboxCards,
      isTwoDynamicPrefix: true,
      linkPrefix: window.location.href.includes("/citizen") ? "/digit-ui/citizen/obps/" : "/digit-ui/employee/obps/",
      getRedirectionLink: getRedirectionLink,
      serviceRequestIdKey: "applicationNo"
    }));
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_SEARCH_APPLICATION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchForm, {
    onSubmit: _onSubmit,
    handleSubmit: handleSubmit
  }, /*#__PURE__*/React__default.createElement(SearchFormFieldsComponent, searchFormFieldsComponentProps)), !isLoading && data !== null && data !== void 0 && (_data$3 = data[0]) !== null && _data$3 !== void 0 && _data$3.display ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      marginTop: 20
    }
  }, t(data === null || data === void 0 ? void 0 : (_data$4 = data[0]) === null || _data$4 === void 0 ? void 0 : _data$4.display).split("\\n").map(function (text, index) {
    return /*#__PURE__*/React__default.createElement("p", {
      key: index,
      style: {
        textAlign: "center"
      }
    }, text);
  })) : !showToast ? !isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
    t: t,
    data: data,
    columns: columns,
    getCellProps: function getCellProps(cellInfo) {
      return {
        style: {
          minWidth: cellInfo.column.Header === t("ES_INBOX_APPLICATION_NO") ? "240px" : "",
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    onPageSizeChange: onPageSizeChange
    ,
    currentPage: currPage,
    onNextPage: nextPage,
    onPrevPage: previousPage,
    pageSizeLimit: getValues("limit"),
    onSort: onSort,
    totalRecords: Count,
    disableSort: false,
    onLastPage: fetchLastPage,
    onFirstPage: fetchFirstPage,
    sortParams: [{
      id: getValues("sortBy"),
      desc: getValues("sortOrder") === "DESC" ? true : false
    }]
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : "", showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    warning: showToast.label == "BPA_ADD_MORE_PARAM_STAKEHOLDER" ? true : false,
    error: showToast.label == "BPA_ADD_MORE_PARAM_STAKEHOLDER" ? false : showToast.key,
    label: t(showToast.label),
    isDleteBtn: true,
    onClose: function onClose() {
      setShowToast(null);
    }
  }));
};

var Search = function Search(_ref) {
  var _userInfo$value, _bpaData$;
  var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
  var userInfo = userInfos ? JSON.parse(userInfos) : {};
  var userInformation = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$value = userInfo.value) === null || _userInfo$value === void 0 ? void 0 : _userInfo$value.info;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var location = reactRouterDom.useLocation();
  var details = function details() {
    var _userInformation$role, _userInformation$role2, _userInformation$role3, _userInformation$role4, _userInformation$role5, _userInformation$role6;
    if ((userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role = userInformation.roles) === null || _userInformation$role === void 0 ? void 0 : (_userInformation$role2 = _userInformation$role.filter(function (ob) {
      return ob.code.includes("BPAREG_");
    })) === null || _userInformation$role2 === void 0 ? void 0 : _userInformation$role2.length) <= 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role3 = userInformation.roles) === null || _userInformation$role3 === void 0 ? void 0 : _userInformation$role3.filter(function (ob) {
      return ob.code.includes("BPA_");
    }).length) > 0) return "BUILDING_PLAN_SCRUTINY";
    if ((userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role4 = userInformation.roles) === null || _userInformation$role4 === void 0 ? void 0 : (_userInformation$role5 = _userInformation$role4.filter(function (ob) {
      return ob.code.includes("BPAREG_");
    })) === null || _userInformation$role5 === void 0 ? void 0 : _userInformation$role5.length) > 0 && (userInformation === null || userInformation === void 0 ? void 0 : (_userInformation$role6 = userInformation.roles) === null || _userInformation$role6 === void 0 ? void 0 : _userInformation$role6.filter(function (ob) {
      return ob.code.includes("BPA_");
    }).length) <= 0) return "BPA_STAKEHOLDER_REGISTRATION";else return "BUILDING_PLAN_SCRUTINY";
  };
  var _useState = React.useState(details()),
    selectedType = _useState[0],
    setSelectedType = _useState[1];
  var _useState2 = React.useState({}),
    payload = _useState2[0],
    setPayload = _useState2[1];
  var _useState3 = React.useState({}),
    searchData = _useState3[0],
    setSearchData = _useState3[1];
  React.useEffect(function () {
    if (location.pathname === "/digit-ui/citizen/obps/search/application" || location.pathname === "/digit-ui/employee/obps/search/application") {
      Digit.SessionStorage.del("OBPS.INBOX");
      Digit.SessionStorage.del("STAKEHOLDER.INBOX");
    }
  }, [location.pathname]);
  var Search = Digit.ComponentRegistryService.getComponent("OBPSSearchApplication");
  var checkData = function checkData(data) {
    if ((data === null || data === void 0 ? void 0 : data.applicationNo) === "" && (data === null || data === void 0 ? void 0 : data.fromDate) === "" && (data === null || data === void 0 ? void 0 : data.mobileNumber) === "" && (data === null || data === void 0 ? void 0 : data.serviceType) === "" && (data === null || data === void 0 ? void 0 : data.status) === "" && (data === null || data === void 0 ? void 0 : data.toDate) === "") return false;
    return true;
  };
  var _useState4 = React.useState(""),
    paramerror = _useState4[0],
    setparamerror = _useState4[1];
  function onSubmit(_data) {
    var _data$applicationType, _data$applicationType2, _data$applicationType3;
    if ((_data === null || _data === void 0 ? void 0 : (_data$applicationType = _data.applicationType) === null || _data$applicationType === void 0 ? void 0 : _data$applicationType.code) === "BPA_STAKEHOLDER_REGISTRATION") {
      var isSearchAllowed = checkData(_data);
      if (!isSearchAllowed) {
        setparamerror("BPA_ADD_MORE_PARAM_STAKEHOLDER");
      }
    }
    setSearchData(_data);
    var fromDate = new Date(_data === null || _data === void 0 ? void 0 : _data.fromDate);
    fromDate === null || fromDate === void 0 ? void 0 : fromDate.setSeconds((fromDate === null || fromDate === void 0 ? void 0 : fromDate.getSeconds()) - 19800);
    var toDate = new Date(_data === null || _data === void 0 ? void 0 : _data.toDate);
    setSelectedType(_data !== null && _data !== void 0 && (_data$applicationType2 = _data.applicationType) !== null && _data$applicationType2 !== void 0 && _data$applicationType2.code ? _data === null || _data === void 0 ? void 0 : (_data$applicationType3 = _data.applicationType) === null || _data$applicationType3 === void 0 ? void 0 : _data$applicationType3.code : selectedType);
    toDate === null || toDate === void 0 ? void 0 : toDate.setSeconds((toDate === null || toDate === void 0 ? void 0 : toDate.getSeconds()) + 86399 - 19800);
    var data = _extends({}, _data, _data.toDate ? {
      toDate: toDate === null || toDate === void 0 ? void 0 : toDate.getTime()
    } : {}, _data.fromDate ? {
      fromDate: fromDate === null || fromDate === void 0 ? void 0 : fromDate.getTime()
    } : {});
    setPayload(Object.keys(data).filter(function (k) {
      return data[k];
    }).reduce(function (acc, key) {
      var _extends2;
      return _extends({}, acc, (_extends2 = {}, _extends2[key] = typeof data[key] === "object" ? data[key].code : data[key], _extends2));
    }, {}));
  }
  var params = {};
  var filters = {};
  if (selectedType && selectedType.includes("STAKEHOLDER") || Object.keys(payload).length > 0 && payload !== null && payload !== void 0 && payload.applicationType && payload !== null && payload !== void 0 && payload.applicationType.includes("STAKEHOLDER")) {
    if (Object.entries(payload).length <= 2 && Object.keys(payload).filter(function (ob) {
      return ob === "applicationType";
    }).length == 0) ; else {
      if (payload.applicationNo) {
        payload["applicationNumber"] = payload.applicationNo;
        payload.applicationNo = "";
      }
      if (payload && payload["applicationType"]) delete payload["applicationType"];
      if (payload && payload["serviceType"]) {
        payload["tradeType"] = payload["serviceType"];
        delete payload["serviceType"];
      }
      params = _extends({}, payload, {
        tenantId: Digit.ULBService.getStateId()
      });
    }
  } else {
    if (Object.keys(payload).length === 0) {
      var _Digit$UserService$ge, _Digit$UserService$ge2;
      var payload1 = _extends({
        applicationType: "BUILDING_PLAN_SCRUTINY",
        serviceType: "NEW_CONSTRUCTION"
      }, window.location.href.includes("/digit-ui/citizen") && {
        mobileNumber: (_Digit$UserService$ge = Digit.UserService.getUser()) === null || _Digit$UserService$ge === void 0 ? void 0 : (_Digit$UserService$ge2 = _Digit$UserService$ge.info) === null || _Digit$UserService$ge2 === void 0 ? void 0 : _Digit$UserService$ge2.mobileNumber
      });
      setPayload(_extends({}, payload, payload1));
    }
    filters = payload;
  }
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useOBPSSearch(selectedType, payload, tenantId, filters, params, {
      enabled: paramerror === ""
    }),
    _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use.data,
    bpaData = _Digit$Hooks$obps$use2 === void 0 ? [] : _Digit$Hooks$obps$use2,
    isBpaSearchLoading = _Digit$Hooks$obps$use.isLoading,
    isBpaSuccess = _Digit$Hooks$obps$use.isSuccess;
  return /*#__PURE__*/React__default.createElement(Search, {
    t: t,
    tenantId: tenantId,
    onSubmit: onSubmit,
    searchData: searchData,
    isLoading: isBpaSearchLoading,
    Count: bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$ = bpaData[0]) === null || _bpaData$ === void 0 ? void 0 : _bpaData$.Count,
    error: paramerror,
    data: !isBpaSearchLoading && isBpaSuccess && (bpaData === null || bpaData === void 0 ? void 0 : bpaData.length) > 0 ? bpaData : [{
      display: "ES_COMMON_NO_DATA"
    }],
    setparamerror: setparamerror
  });
};

var MyApplication = function MyApplication() {
  var _userInfo$info, _data$Licenses3;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var _useState = React.useState([]),
    finalData = _useState[0],
    setFinalData = _useState[1];
  var _useState2 = React.useState(false),
    labelMessage = _useState2[0],
    setLableMessage = _useState2[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var userInfo = Digit.UserService.getUser();
  var requestor = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.mobileNumber;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAREGSearch(tenantId),
    data = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading,
    revalidate = _Digit$Hooks$obps$use.revalidate;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPASearch(tenantId, {
      requestor: requestor,
      limit: -1,
      offset: 0
    }),
    bpaData = _Digit$Hooks$obps$use2.data,
    isBpaSearchLoading = _Digit$Hooks$obps$use2.isLoading,
    bpaRevalidate = _Digit$Hooks$obps$use2.revalidate;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(), "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use3.data;
  var getBPAREGFormData = function getBPAREGFormData(data) {
    var _license$tradeLicense, _license$tradeLicense2, _license$tradeLicense3, _license$tradeLicense4, _license$tradeLicense5, _license$tradeLicense6, _license$tradeLicense7, _license$tradeLicense8, _license$tradeLicense9, _license$tradeLicense10, _license$tradeLicense11, _license$tradeLicense12, _license$tradeLicense13, _license$tradeLicense14, _license$tradeLicense15, _license$tradeLicense16, _license$tradeLicense17, _license$tradeLicense18, _license$tradeLicense19, _license$tradeLicense20, _license$tradeLicense21, _license$tradeLicense22, _license$tradeLicense23, _license$tradeLicense24, _license$tradeLicense25, _license$tradeLicense26, _license$tradeLicense27, _license$tradeLicense28, _license$tradeLicense29, _license$tradeLicense30, _license$tradeLicense31, _license$tradeLicense32, _license$tradeLicense33, _license$tradeLicense34, _license$tradeLicense35, _license$tradeLicense36, _license$tradeLicense37, _license$tradeLicense38, _license$tradeLicense39, _license$tradeLicense40, _license$tradeLicense41, _license$tradeLicense42, _license$tradeLicense43, _license$tradeLicense44, _license$tradeLicense45, _license$tradeLicense46, _license$tradeLicense47, _license$tradeLicense48, _license$tradeLicense49, _license$tradeLicense50, _license$tradeLicense51, _license$tradeLicense52, _license$tradeLicense53, _license$tradeLicense54, _license$tradeLicense55, _license$tradeLicense56, _license$tradeLicense57, _license$tradeLicense58, _license$tradeLicense59, _license$tradeLicense60, _license$tradeLicense61, _license$tradeLicense62, _license$tradeLicense63, _license$tradeLicense64, _license$tradeLicense65, _license$tradeLicense66;
    var license = data;
    var intermediateData = {
      "Correspondenceaddress": (license === null || license === void 0 ? void 0 : (_license$tradeLicense = license.tradeLicenseDetail) === null || _license$tradeLicense === void 0 ? void 0 : (_license$tradeLicense2 = _license$tradeLicense.owners) === null || _license$tradeLicense2 === void 0 ? void 0 : (_license$tradeLicense3 = _license$tradeLicense2[0]) === null || _license$tradeLicense3 === void 0 ? void 0 : _license$tradeLicense3.correspondenceAddress) || (license !== null && license !== void 0 && (_license$tradeLicense4 = license.tradeLicenseDetail) !== null && _license$tradeLicense4 !== void 0 && (_license$tradeLicense5 = _license$tradeLicense4.address) !== null && _license$tradeLicense5 !== void 0 && _license$tradeLicense5.doorNo ? (license === null || license === void 0 ? void 0 : (_license$tradeLicense6 = license.tradeLicenseDetail) === null || _license$tradeLicense6 === void 0 ? void 0 : (_license$tradeLicense7 = _license$tradeLicense6.address) === null || _license$tradeLicense7 === void 0 ? void 0 : _license$tradeLicense7.doorNo) + ", " : "") + " " + (license !== null && license !== void 0 && (_license$tradeLicense8 = license.tradeLicenseDetail) !== null && _license$tradeLicense8 !== void 0 && (_license$tradeLicense9 = _license$tradeLicense8.address) !== null && _license$tradeLicense9 !== void 0 && _license$tradeLicense9.street ? (license === null || license === void 0 ? void 0 : (_license$tradeLicense10 = license.tradeLicenseDetail) === null || _license$tradeLicense10 === void 0 ? void 0 : (_license$tradeLicense11 = _license$tradeLicense10.address) === null || _license$tradeLicense11 === void 0 ? void 0 : _license$tradeLicense11.street) + ", " : "") + (license !== null && license !== void 0 && (_license$tradeLicense12 = license.tradeLicenseDetail) !== null && _license$tradeLicense12 !== void 0 && (_license$tradeLicense13 = _license$tradeLicense12.address) !== null && _license$tradeLicense13 !== void 0 && _license$tradeLicense13.landmark ? (license === null || license === void 0 ? void 0 : (_license$tradeLicense14 = license.tradeLicenseDetail) === null || _license$tradeLicense14 === void 0 ? void 0 : (_license$tradeLicense15 = _license$tradeLicense14.address) === null || _license$tradeLicense15 === void 0 ? void 0 : _license$tradeLicense15.landmark) + ", " : "") + t(license === null || license === void 0 ? void 0 : (_license$tradeLicense16 = license.tradeLicenseDetail) === null || _license$tradeLicense16 === void 0 ? void 0 : (_license$tradeLicense17 = _license$tradeLicense16.address) === null || _license$tradeLicense17 === void 0 ? void 0 : _license$tradeLicense17.locality.code) + ", " + t(license !== null && license !== void 0 && (_license$tradeLicense18 = license.tradeLicenseDetail) !== null && _license$tradeLicense18 !== void 0 && (_license$tradeLicense19 = _license$tradeLicense18.address) !== null && _license$tradeLicense19 !== void 0 && _license$tradeLicense19.city ? license === null || license === void 0 ? void 0 : (_license$tradeLicense20 = license.tradeLicenseDetail) === null || _license$tradeLicense20 === void 0 ? void 0 : (_license$tradeLicense21 = _license$tradeLicense20.address) === null || _license$tradeLicense21 === void 0 ? void 0 : _license$tradeLicense21.city.code : "") + "," + (t(license === null || license === void 0 ? void 0 : (_license$tradeLicense22 = license.tradeLicenseDetail) === null || _license$tradeLicense22 === void 0 ? void 0 : (_license$tradeLicense23 = _license$tradeLicense22.address) === null || _license$tradeLicense23 === void 0 ? void 0 : _license$tradeLicense23.pincode) ? "" + ((_license$tradeLicense24 = license.tradeLicenseDetail) === null || _license$tradeLicense24 === void 0 ? void 0 : (_license$tradeLicense25 = _license$tradeLicense24.address) === null || _license$tradeLicense25 === void 0 ? void 0 : _license$tradeLicense25.pincode) : " "),
      "formData": {
        "LicneseDetails": {
          "PanNumber": license === null || license === void 0 ? void 0 : (_license$tradeLicense26 = license.tradeLicenseDetail) === null || _license$tradeLicense26 === void 0 ? void 0 : (_license$tradeLicense27 = _license$tradeLicense26.owners) === null || _license$tradeLicense27 === void 0 ? void 0 : (_license$tradeLicense28 = _license$tradeLicense27[0]) === null || _license$tradeLicense28 === void 0 ? void 0 : _license$tradeLicense28.pan,
          "PermanentAddress": license === null || license === void 0 ? void 0 : (_license$tradeLicense29 = license.tradeLicenseDetail) === null || _license$tradeLicense29 === void 0 ? void 0 : (_license$tradeLicense30 = _license$tradeLicense29.owners) === null || _license$tradeLicense30 === void 0 ? void 0 : (_license$tradeLicense31 = _license$tradeLicense30[0]) === null || _license$tradeLicense31 === void 0 ? void 0 : _license$tradeLicense31.permanentAddress,
          "email": license === null || license === void 0 ? void 0 : (_license$tradeLicense32 = license.tradeLicenseDetail) === null || _license$tradeLicense32 === void 0 ? void 0 : (_license$tradeLicense33 = _license$tradeLicense32.owners) === null || _license$tradeLicense33 === void 0 ? void 0 : (_license$tradeLicense34 = _license$tradeLicense33[0]) === null || _license$tradeLicense34 === void 0 ? void 0 : _license$tradeLicense34.emailId,
          "gender": {
            code: license === null || license === void 0 ? void 0 : (_license$tradeLicense35 = license.tradeLicenseDetail) === null || _license$tradeLicense35 === void 0 ? void 0 : (_license$tradeLicense36 = _license$tradeLicense35.owners) === null || _license$tradeLicense36 === void 0 ? void 0 : (_license$tradeLicense37 = _license$tradeLicense36[0]) === null || _license$tradeLicense37 === void 0 ? void 0 : _license$tradeLicense37.gender,
            i18nKey: "COMMON_GENDER_" + (license === null || license === void 0 ? void 0 : (_license$tradeLicense38 = license.tradeLicenseDetail) === null || _license$tradeLicense38 === void 0 ? void 0 : (_license$tradeLicense39 = _license$tradeLicense38.owners) === null || _license$tradeLicense39 === void 0 ? void 0 : (_license$tradeLicense40 = _license$tradeLicense39[0]) === null || _license$tradeLicense40 === void 0 ? void 0 : _license$tradeLicense40.gender),
            value: license === null || license === void 0 ? void 0 : (_license$tradeLicense41 = license.tradeLicenseDetail) === null || _license$tradeLicense41 === void 0 ? void 0 : (_license$tradeLicense42 = _license$tradeLicense41.owners) === null || _license$tradeLicense42 === void 0 ? void 0 : (_license$tradeLicense43 = _license$tradeLicense42[0]) === null || _license$tradeLicense43 === void 0 ? void 0 : _license$tradeLicense43.gender
          },
          "mobileNumber": license === null || license === void 0 ? void 0 : (_license$tradeLicense44 = license.tradeLicenseDetail) === null || _license$tradeLicense44 === void 0 ? void 0 : (_license$tradeLicense45 = _license$tradeLicense44.owners) === null || _license$tradeLicense45 === void 0 ? void 0 : (_license$tradeLicense46 = _license$tradeLicense45[0]) === null || _license$tradeLicense46 === void 0 ? void 0 : _license$tradeLicense46.mobileNumber,
          "name": license === null || license === void 0 ? void 0 : (_license$tradeLicense47 = license.tradeLicenseDetail) === null || _license$tradeLicense47 === void 0 ? void 0 : (_license$tradeLicense48 = _license$tradeLicense47.owners) === null || _license$tradeLicense48 === void 0 ? void 0 : (_license$tradeLicense49 = _license$tradeLicense48[0]) === null || _license$tradeLicense49 === void 0 ? void 0 : _license$tradeLicense49.name
        },
        "LicneseType": {
          LicenseType: {
            i18nKey: "TRADELICENSE_TRADETYPE_" + (license === null || license === void 0 ? void 0 : (_license$tradeLicense50 = license.tradeLicenseDetail) === null || _license$tradeLicense50 === void 0 ? void 0 : (_license$tradeLicense51 = _license$tradeLicense50.tradeUnits) === null || _license$tradeLicense51 === void 0 ? void 0 : (_license$tradeLicense52 = _license$tradeLicense51[0]) === null || _license$tradeLicense52 === void 0 ? void 0 : _license$tradeLicense52.tradeType.split(".")[0]),
            role: ["BPA_" + (license === null || license === void 0 ? void 0 : (_license$tradeLicense53 = license.tradeLicenseDetail) === null || _license$tradeLicense53 === void 0 ? void 0 : (_license$tradeLicense54 = _license$tradeLicense53.tradeUnits) === null || _license$tradeLicense54 === void 0 ? void 0 : (_license$tradeLicense55 = _license$tradeLicense54[0]) === null || _license$tradeLicense55 === void 0 ? void 0 : _license$tradeLicense55.tradeType.split(".")[0])],
            tradeType: license === null || license === void 0 ? void 0 : (_license$tradeLicense56 = license.tradeLicenseDetail) === null || _license$tradeLicense56 === void 0 ? void 0 : (_license$tradeLicense57 = _license$tradeLicense56.tradeUnits) === null || _license$tradeLicense57 === void 0 ? void 0 : (_license$tradeLicense58 = _license$tradeLicense57[0]) === null || _license$tradeLicense58 === void 0 ? void 0 : _license$tradeLicense58.tradeType
          },
          ArchitectNo: (license === null || license === void 0 ? void 0 : (_license$tradeLicense59 = license.tradeLicenseDetail) === null || _license$tradeLicense59 === void 0 ? void 0 : (_license$tradeLicense60 = _license$tradeLicense59.additionalDetail) === null || _license$tradeLicense60 === void 0 ? void 0 : _license$tradeLicense60.counsilForArchNo) || null
        }
      },
      "isAddressSame": (license === null || license === void 0 ? void 0 : (_license$tradeLicense61 = license.tradeLicenseDetail) === null || _license$tradeLicense61 === void 0 ? void 0 : (_license$tradeLicense62 = _license$tradeLicense61.owners) === null || _license$tradeLicense62 === void 0 ? void 0 : (_license$tradeLicense63 = _license$tradeLicense62[0]) === null || _license$tradeLicense63 === void 0 ? void 0 : _license$tradeLicense63.correspondenceAddress) === (license === null || license === void 0 ? void 0 : (_license$tradeLicense64 = license.tradeLicenseDetail) === null || _license$tradeLicense64 === void 0 ? void 0 : (_license$tradeLicense65 = _license$tradeLicense64.owners) === null || _license$tradeLicense65 === void 0 ? void 0 : (_license$tradeLicense66 = _license$tradeLicense65[0]) === null || _license$tradeLicense66 === void 0 ? void 0 : _license$tradeLicense66.permanentAddress) ? true : false,
      "result": {
        Licenses: [_extends({}, data)]
      },
      "initiationFlow": true
    };
    sessionStorage.setItem("BPAREGintermediateValue", JSON.stringify(intermediateData));
    history.push("/digit-ui/citizen/obps/stakeholder/apply/stakeholder-docs-required");
  };
  React.useEffect(function () {
    return function () {
      setFinalData([]);
      revalidate === null || revalidate === void 0 ? void 0 : revalidate();
      bpaRevalidate === null || bpaRevalidate === void 0 ? void 0 : bpaRevalidate();
    };
  }, []);
  React.useEffect(function () {
    if (!isLoading && !isBpaSearchLoading) {
      var _data$Licenses, _userInfoDetails$valu, _userInfoDetails$valu2, _userInfoDetails$valu3, _userInfoDetails$valu4, _userInfoDetails$valu5, _userInfoDetails$valu6, _userInfoDetails$valu7;
      var searchConvertedArray = [];
      var sortConvertedArray = [];
      if (data !== null && data !== void 0 && (_data$Licenses = data.Licenses) !== null && _data$Licenses !== void 0 && _data$Licenses.length) {
        var _data$Licenses2;
        data === null || data === void 0 ? void 0 : (_data$Licenses2 = data.Licenses) === null || _data$Licenses2 === void 0 ? void 0 : _data$Licenses2.forEach(function (license) {
          license.sortNumber = 0;
          license.modifiedTime = license.auditDetails.lastModifiedTime;
          license.type = "BPAREG";
          searchConvertedArray.push(license);
        });
      }
      if (bpaData !== null && bpaData !== void 0 && bpaData.length) {
        bpaData === null || bpaData === void 0 ? void 0 : bpaData.forEach(function (bpaDta) {
          bpaDta.sortNumber = 0;
          bpaDta.modifiedTime = bpaDta.auditDetails.lastModifiedTime;
          bpaDta.type = "BPA";
          searchConvertedArray.push(bpaDta);
        });
      }
      sortConvertedArray = [].slice.call(searchConvertedArray).sort(function (a, b) {
        return new Date(b.modifiedTime) - new Date(a.modifiedTime) || a.sortNumber - b.sortNumber;
      });
      setFinalData(sortConvertedArray);
      var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
      var userInfoDetails = userInfos ? JSON.parse(userInfos) : {};
      if ((userInfoDetails === null || userInfoDetails === void 0 ? void 0 : (_userInfoDetails$valu = userInfoDetails.value) === null || _userInfoDetails$valu === void 0 ? void 0 : (_userInfoDetails$valu2 = _userInfoDetails$valu.info) === null || _userInfoDetails$valu2 === void 0 ? void 0 : (_userInfoDetails$valu3 = _userInfoDetails$valu2.roles) === null || _userInfoDetails$valu3 === void 0 ? void 0 : _userInfoDetails$valu3.length) == 1 && (userInfoDetails === null || userInfoDetails === void 0 ? void 0 : (_userInfoDetails$valu4 = userInfoDetails.value) === null || _userInfoDetails$valu4 === void 0 ? void 0 : (_userInfoDetails$valu5 = _userInfoDetails$valu4.info) === null || _userInfoDetails$valu5 === void 0 ? void 0 : (_userInfoDetails$valu6 = _userInfoDetails$valu5.roles) === null || _userInfoDetails$valu6 === void 0 ? void 0 : (_userInfoDetails$valu7 = _userInfoDetails$valu6[0]) === null || _userInfoDetails$valu7 === void 0 ? void 0 : _userInfoDetails$valu7.code) == "CITIZEN") setLableMessage(true);
    }
  }, [isLoading, isBpaSearchLoading, bpaData, data]);
  if (isLoading || isBpaSearchLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("BPA_MY_APPLICATIONS") + " (" + ((data === null || data === void 0 ? void 0 : (_data$Licenses3 = data.Licenses) === null || _data$Licenses3 === void 0 ? void 0 : _data$Licenses3.length) + (bpaData === null || bpaData === void 0 ? void 0 : bpaData.length)) + ")"), finalData === null || finalData === void 0 ? void 0 : finalData.map(function (application, index) {
    if (application.type === "BPAREG") {
      var _application$tradeLic, _application$tradeLic2, _application$tradeLic3, _application$tradeLic4, _application$tradeLic5, _application$tradeLic6, _application$tradeLic7, _application$tradeLic8, _application$tradeLic9, _application$tradeLic10, _application$tradeLic11, _application$tradeLic12;
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_APPLICATION_NUMBER_LABEL"),
        note: application === null || application === void 0 ? void 0 : application.applicationNumber
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_LICENSE_TYPE"),
        note: t("TRADELICENSE_TRADETYPE_" + (application === null || application === void 0 ? void 0 : (_application$tradeLic = application.tradeLicenseDetail) === null || _application$tradeLic === void 0 ? void 0 : (_application$tradeLic2 = _application$tradeLic.tradeUnits) === null || _application$tradeLic2 === void 0 ? void 0 : (_application$tradeLic3 = _application$tradeLic2[0]) === null || _application$tradeLic3 === void 0 ? void 0 : (_application$tradeLic4 = _application$tradeLic3.tradeType) === null || _application$tradeLic4 === void 0 ? void 0 : _application$tradeLic4.split('.')[0]))
      }), (application === null || application === void 0 ? void 0 : (_application$tradeLic5 = application.tradeLicenseDetail) === null || _application$tradeLic5 === void 0 ? void 0 : (_application$tradeLic6 = _application$tradeLic5.tradeUnits) === null || _application$tradeLic6 === void 0 ? void 0 : (_application$tradeLic7 = _application$tradeLic6[0]) === null || _application$tradeLic7 === void 0 ? void 0 : _application$tradeLic7.tradeType.includes('ARCHITECT')) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_COUNCIL_OF_ARCH_NO_LABEL"),
        note: application === null || application === void 0 ? void 0 : (_application$tradeLic8 = application.tradeLicenseDetail) === null || _application$tradeLic8 === void 0 ? void 0 : (_application$tradeLic9 = _application$tradeLic8.additionalDetail) === null || _application$tradeLic9 === void 0 ? void 0 : _application$tradeLic9.counsilForArchNo
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_APPLICANT_NAME_LABEL"),
        note: application === null || application === void 0 ? void 0 : (_application$tradeLic10 = application.tradeLicenseDetail) === null || _application$tradeLic10 === void 0 ? void 0 : (_application$tradeLic11 = _application$tradeLic10.owners) === null || _application$tradeLic11 === void 0 ? void 0 : (_application$tradeLic12 = _application$tradeLic11[0]) === null || _application$tradeLic12 === void 0 ? void 0 : _application$tradeLic12.name
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("TL_COMMON_TABLE_COL_STATUS"),
        note: t("WF_ARCHITECT_" + (application === null || application === void 0 ? void 0 : application.status)),
        noteStyle: (application === null || application === void 0 ? void 0 : application.status) === "APPROVED" ? {
          color: "#00703C"
        } : {
          color: "#D4351C"
        }
      }), application.status !== "INITIATED" ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: {
          pathname: "/digit-ui/citizen/obps/stakeholder/" + (application === null || application === void 0 ? void 0 : application.applicationNumber),
          state: {
            tenantId: ''
          }
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
        label: t("TL_VIEW_DETAILS")
      })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
        label: t("BPA_COMP_WORKFLOW"),
        onSubmit: function onSubmit() {
          return getBPAREGFormData(application);
        }
      }));
    } else {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_APPLICATION_NUMBER_LABEL"),
        note: application === null || application === void 0 ? void 0 : application.applicationNo
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
        note: (application === null || application === void 0 ? void 0 : application.businessService) !== "BPA_OC" ? t("WF_BPA_BUILDING_PLAN_SCRUTINY") : t("WF_BPA_BUILDING_OC_PLAN_SCRUTINY")
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_COMMON_SERVICE"),
        note: t("BPA_SERVICETYPE_NEW_CONSTRUCTION")
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("TL_COMMON_TABLE_COL_STATUS"),
        note: t("WF_BPA_" + (application === null || application === void 0 ? void 0 : application.state)),
        noteStyle: (application === null || application === void 0 ? void 0 : application.status) === "APPROVED" ? {
          color: "#00703C"
        } : {
          color: "#D4351C"
        }
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.KeyNote, {
        keyValue: t("BPA_COMMON_SLA"),
        note: application === null || application === void 0 ? void 0 : application.sla
      }), application.action === "SEND_TO_ARCHITECT" || application.status !== "INITIATED" ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: {
          pathname: "/digit-ui/citizen/obps/bpa/" + (application === null || application === void 0 ? void 0 : application.applicationNo),
          state: {
            tenantId: ''
          }
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
        label: t("TL_VIEW_DETAILS")
      })) : /*#__PURE__*/React__default.createElement("div", null, labelMessage ? /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
        to: {
          pathname: "/digit-ui/citizen/obps/bpa/" + (application === null || application === void 0 ? void 0 : application.applicationNo),
          state: {
            tenantId: ''
          }
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
        label: t("TL_VIEW_DETAILS")
      })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
        label: t("BPA_COMP_WORKFLOW"),
        onSubmit: function onSubmit() {
          return getBPAFormData(application, mdmsData, history, t);
        }
      })));
    }
  }));
};

var BPAReason = function BPAReason(_ref) {
  var headComment = _ref.headComment,
    otherComment = _ref.otherComment;
  return /*#__PURE__*/React__default.createElement("div", {
    className: "checkpoint-comments-wrap"
  }, /*#__PURE__*/React__default.createElement("h4", null, headComment), /*#__PURE__*/React__default.createElement("p", null, otherComment));
};

var BPACaption = function BPACaption(_ref) {
  var _data$wfComment, _data$thumbnailsToSho, _data$thumbnailsToSho2;
  var data = _ref.data,
    OpenImage = _ref.OpenImage;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement("div", null, data.date && /*#__PURE__*/React__default.createElement("p", null, data.date), /*#__PURE__*/React__default.createElement("p", null, data.name), data.mobileNumber && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TelePhone, {
    mobile: data.mobileNumber
  }), data.source && /*#__PURE__*/React__default.createElement("p", null, t("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_" + data.source.toUpperCase())), data.comment && /*#__PURE__*/React__default.createElement(BPAReason, {
    otherComment: data === null || data === void 0 ? void 0 : data.otherComment,
    headComment: data === null || data === void 0 ? void 0 : data.comment
  }), data !== null && data !== void 0 && data.wfComment ? /*#__PURE__*/React__default.createElement("div", null, data === null || data === void 0 ? void 0 : (_data$wfComment = data.wfComment) === null || _data$wfComment === void 0 ? void 0 : _data$wfComment.map(function (e) {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "TLComments"
    }, /*#__PURE__*/React__default.createElement("h3", null, t("WF_COMMON_COMMENTS")), /*#__PURE__*/React__default.createElement("p", null, e));
  })) : null, (data === null || data === void 0 ? void 0 : (_data$thumbnailsToSho = data.thumbnailsToShow) === null || _data$thumbnailsToSho === void 0 ? void 0 : (_data$thumbnailsToSho2 = _data$thumbnailsToSho.thumbs) === null || _data$thumbnailsToSho2 === void 0 ? void 0 : _data$thumbnailsToSho2.length) > 0 ? /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("CS_COMMON_ATTACHMENTS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.DisplayPhotos, {
    srcs: data === null || data === void 0 ? void 0 : data.thumbnailsToShow.thumbs,
    onClick: function onClick(src, index) {
      OpenImage(src, index, data === null || data === void 0 ? void 0 : data.thumbnailsToShow);
    }
  })) : null);
};

var ApplicationTimeline = function ApplicationTimeline(_ref) {
  var _data$timeline, _data$timeline2, _data$timeline$, _data$nextActions;
  var id = _ref.id,
    tenantId = _ref.tenantId;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _Digit$Hooks$useWorkf = Digit.Hooks.useWorkflowDetails({
      tenantId: tenantId,
      id: id,
      moduleCode: "OBPS"
    }),
    isLoading = _Digit$Hooks$useWorkf.isLoading,
    data = _Digit$Hooks$useWorkf.data;
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  var getTimelineCaptions = function getTimelineCaptions(checkpoint) {
    if (checkpoint.state === "INITIATE") {
      var _props$application, _props$application$au, _props$application2, _props$application2$t;
      var caption = {
        date: Digit.DateUtils.ConvertTimestampToDate((_props$application = props.application) === null || _props$application === void 0 ? void 0 : (_props$application$au = _props$application.auditDetails) === null || _props$application$au === void 0 ? void 0 : _props$application$au.createdTime),
        source: ((_props$application2 = props.application) === null || _props$application2 === void 0 ? void 0 : (_props$application2$t = _props$application2.tradeLicenseDetail) === null || _props$application2$t === void 0 ? void 0 : _props$application2$t.channel) || ""
      };
      return /*#__PURE__*/React__default.createElement(BPACaption, {
        data: caption
      });
    } else {
      var _checkpoint$auditDeta, _checkpoint$assignes, _checkpoint$assignes$, _checkpoint$assignes2, _checkpoint$assignes3;
      var _caption = {
        date: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$auditDeta = checkpoint.auditDetails) === null || _checkpoint$auditDeta === void 0 ? void 0 : _checkpoint$auditDeta.lastModified,
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes = checkpoint.assignes) === null || _checkpoint$assignes === void 0 ? void 0 : (_checkpoint$assignes$ = _checkpoint$assignes[0]) === null || _checkpoint$assignes$ === void 0 ? void 0 : _checkpoint$assignes$.name,
        mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes2 = checkpoint.assignes) === null || _checkpoint$assignes2 === void 0 ? void 0 : (_checkpoint$assignes3 = _checkpoint$assignes2[0]) === null || _checkpoint$assignes3 === void 0 ? void 0 : _checkpoint$assignes3.mobileNumber,
        comment: t(checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.comment)
      };
      return /*#__PURE__*/React__default.createElement(BPACaption, {
        data: _caption
      });
    }
  };
  var showNextActions = function showNextActions(nextAction) {
    var _data$processInstance, _data$processInstance2, _data$processInstance3, _data$processInstance4, _data$processInstance5, _data$processInstance6;
    switch (nextAction === null || nextAction === void 0 ? void 0 : nextAction.action) {
      case "PAY":
        return /*#__PURE__*/React__default.createElement("div", {
          style: {
            marginTop: "24px"
          }
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: {
            pathname: "/digit-ui/citizen/payment/collect/" + (data === null || data === void 0 ? void 0 : (_data$processInstance = data.processInstances) === null || _data$processInstance === void 0 ? void 0 : (_data$processInstance2 = _data$processInstance[0]) === null || _data$processInstance2 === void 0 ? void 0 : _data$processInstance2.moduleName) + "/" + (data === null || data === void 0 ? void 0 : (_data$processInstance3 = data.processInstances) === null || _data$processInstance3 === void 0 ? void 0 : (_data$processInstance4 = _data$processInstance3[0]) === null || _data$processInstance4 === void 0 ? void 0 : _data$processInstance4.businessId),
            state: {
              tenantId: data === null || data === void 0 ? void 0 : (_data$processInstance5 = data.processInstances) === null || _data$processInstance5 === void 0 ? void 0 : (_data$processInstance6 = _data$processInstance5[0]) === null || _data$processInstance6 === void 0 ? void 0 : _data$processInstance6.tenantId
            }
          }
        }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
          label: t("TL_COMMON_BUTTON_CITIZEN_MAKE_PAYMENT")
        })));
      case "SUBMIT_FEEDBACK":
        return /*#__PURE__*/React__default.createElement("div", {
          style: {
            marginTop: "24px"
          }
        }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: "/digit-ui/citizen/fsm/rate/" + props.id
        }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
          label: t("CS_APPLICATION_DETAILS_RATE")
        })));
    }
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !isLoading && /*#__PURE__*/React__default.createElement(React.Fragment, null, (data === null || data === void 0 ? void 0 : (_data$timeline = data.timeline) === null || _data$timeline === void 0 ? void 0 : _data$timeline.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px",
      marginTop: "32px"
    }
  }, t("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")), data !== null && data !== void 0 && data.timeline && (data === null || data === void 0 ? void 0 : (_data$timeline2 = data.timeline) === null || _data$timeline2 === void 0 ? void 0 : _data$timeline2.length) === 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
    isCompleted: true,
    label: t((data === null || data === void 0 ? void 0 : (_data$timeline$ = data.timeline[0]) === null || _data$timeline$ === void 0 ? void 0 : _data$timeline$.state) && "WF_ARCHITECT_" + data.timeline[0].state || "NA"),
    customChild: getTimelineCaptions(data === null || data === void 0 ? void 0 : data.timeline[0])
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ConnectingCheckPoints, null, (data === null || data === void 0 ? void 0 : data.timeline) && (data === null || data === void 0 ? void 0 : data.timeline.map(function (checkpoint, index, arr) {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
      keyValue: index,
      isCompleted: index === 0,
      label: checkpoint.state ? t("WF_ARCHITECT_" + checkpoint.state) : "NA",
      customChild: getTimelineCaptions(checkpoint)
    }));
  })))), data && showNextActions(data === null || data === void 0 ? void 0 : (_data$nextActions = data.nextActions) === null || _data$nextActions === void 0 ? void 0 : _data$nextActions[0]));
};

var ApplicationDetails = function ApplicationDetails() {
  var _LicenseData$Licenses, _License$tradeLicense7, _License$tradeLicense8, _mdmsRes$StakeholderR, _mdmsRes$StakeholderR2, _reciept_data$Payment6, _License$tradeLicense14, _License$tradeLicense15, _License$tradeLicense16, _License$tradeLicense17, _License$tradeLicense18, _License$tradeLicense19, _License$tradeLicense20, _License$tradeLicense21, _License$tradeLicense22, _License$tradeLicense23, _License$tradeLicense24, _License$tradeLicense25, _License$tradeLicense26, _License$tradeLicense27, _License$tradeLicense28, _License$tradeLicense29, _License$tradeLicense30, _License$tradeLicense31, _License$tradeLicense32, _License$tradeLicense33, _License$tradeLicense34, _License$tradeLicense35, _License$tradeLicense36, _License$tradeLicense37, _License$tradeLicense38, _License$tradeLicense39, _License$tradeLicense40, _License$tradeLicense41, _License$tradeLicense42, _License$tradeLicense43, _License$tradeLicense44, _License$tradeLicense45, _License$tradeLicense46, _License$tradeLicense47;
  var _useParams = reactRouterDom.useParams(),
    id = _useParams.id;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useState = React.useState({}),
    documents = _useState[0],
    setDocuments = _useState[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState2 = React.useState(false),
    showOptions = _useState2[0],
    setShowOptions = _useState2[1];
  var _useState3 = React.useState([]),
    dowloadOptions = _useState3[0],
    setDowloadOptions = _useState3[1];
  var _useParams2 = reactRouterDom.useParams(),
    appNumber = _useParams2.id;
  var params = {
    applicationNumber: appNumber
  };
  var stateCode = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAREGSearch(tenantId, {}, params),
    LicenseData = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var License = LicenseData === null || LicenseData === void 0 ? void 0 : (_LicenseData$Licenses = LicenseData.Licenses) === null || _LicenseData$Licenses === void 0 ? void 0 : _LicenseData$Licenses[0];
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateCode, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    mdmsRes = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$useRecie = Digit.Hooks.useRecieptSearch({
      tenantId: stateCode,
      businessService: "BPAREG",
      consumerCodes: id,
      isEmployee: false
    }, {}),
    reciept_data = _Digit$Hooks$useRecie.data;
  React.useEffect(function () {
    var _License$tradeLicense, _License$tradeLicense2;
    if (License !== null && License !== void 0 && (_License$tradeLicense = License.tradeLicenseDetail) !== null && _License$tradeLicense !== void 0 && (_License$tradeLicense2 = _License$tradeLicense.applicationDocuments) !== null && _License$tradeLicense2 !== void 0 && _License$tradeLicense2.length) {
      var _License$tradeLicense3, _License$tradeLicense4;
      var fileStoresIds = License === null || License === void 0 ? void 0 : (_License$tradeLicense3 = License.tradeLicenseDetail) === null || _License$tradeLicense3 === void 0 ? void 0 : (_License$tradeLicense4 = _License$tradeLicense3.applicationDocuments) === null || _License$tradeLicense4 === void 0 ? void 0 : _License$tradeLicense4.map(function (document) {
        return document === null || document === void 0 ? void 0 : document.fileStoreId;
      });
      Digit.UploadServices.Filefetch(fileStoresIds, tenantId.split(".")[0]).then(function (res) {
        return setDocuments(res === null || res === void 0 ? void 0 : res.data);
      });
    }
  }, [License]);
  React.useEffect(function () {
    if (License) {
      var _reciept_data$Payment, _License$tradeLicense5, _License$tradeLicense6;
      if ((reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment = reciept_data.Payments) === null || _reciept_data$Payment === void 0 ? void 0 : _reciept_data$Payment.length) > 0) {
        setDowloadOptions([{
          label: t("TL_RECEIPT"),
          onClick: function onClick() {
            var _reciept_data$Payment2, _reciept_data$Payment3, _reciept_data$Payment4, _reciept_data$Payment5;
            return downloadAndPrintReciept((reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment2 = reciept_data.Payments) === null || _reciept_data$Payment2 === void 0 ? void 0 : (_reciept_data$Payment3 = _reciept_data$Payment2[0]) === null || _reciept_data$Payment3 === void 0 ? void 0 : (_reciept_data$Payment4 = _reciept_data$Payment3.paymentDetails) === null || _reciept_data$Payment4 === void 0 ? void 0 : (_reciept_data$Payment5 = _reciept_data$Payment4[0]) === null || _reciept_data$Payment5 === void 0 ? void 0 : _reciept_data$Payment5.businessService) || "BPAREG", License === null || License === void 0 ? void 0 : License.applicationNumber, License === null || License === void 0 ? void 0 : License.tenantId);
          }
        }]);
      }
      var fileStoresIds = License === null || License === void 0 ? void 0 : (_License$tradeLicense5 = License.tradeLicenseDetail) === null || _License$tradeLicense5 === void 0 ? void 0 : (_License$tradeLicense6 = _License$tradeLicense5.applicationDocuments) === null || _License$tradeLicense6 === void 0 ? void 0 : _License$tradeLicense6.map(function (document) {
        return document === null || document === void 0 ? void 0 : document.fileStoreId;
      });
    }
  }, [License, reciept_data]);
  if (License !== null && License !== void 0 && (_License$tradeLicense7 = License.tradeLicenseDetail) !== null && _License$tradeLicense7 !== void 0 && (_License$tradeLicense8 = _License$tradeLicense7.applicationDocuments) !== null && _License$tradeLicense8 !== void 0 && _License$tradeLicense8.length && (mdmsRes === null || mdmsRes === void 0 ? void 0 : (_mdmsRes$StakeholderR = mdmsRes.StakeholderRegistraition) === null || _mdmsRes$StakeholderR === void 0 ? void 0 : (_mdmsRes$StakeholderR2 = _mdmsRes$StakeholderR.TradeTypetoRoleMapping) === null || _mdmsRes$StakeholderR2 === void 0 ? void 0 : _mdmsRes$StakeholderR2.length) > 0) {
    var _mdmsRes$StakeholderR3, _mdmsRes$StakeholderR4;
    mdmsRes === null || mdmsRes === void 0 ? void 0 : (_mdmsRes$StakeholderR3 = mdmsRes.StakeholderRegistraition) === null || _mdmsRes$StakeholderR3 === void 0 ? void 0 : (_mdmsRes$StakeholderR4 = _mdmsRes$StakeholderR3.TradeTypetoRoleMapping) === null || _mdmsRes$StakeholderR4 === void 0 ? void 0 : _mdmsRes$StakeholderR4.map(function (doc) {
      var _doc$docTypes, _License$tradeLicense9, _License$tradeLicense10, _License$tradeLicense11;
      if ((doc === null || doc === void 0 ? void 0 : (_doc$docTypes = doc.docTypes) === null || _doc$docTypes === void 0 ? void 0 : _doc$docTypes.length) > 0 && (doc === null || doc === void 0 ? void 0 : doc.tradeType) == (License === null || License === void 0 ? void 0 : (_License$tradeLicense9 = License.tradeLicenseDetail) === null || _License$tradeLicense9 === void 0 ? void 0 : (_License$tradeLicense10 = _License$tradeLicense9.tradeUnits) === null || _License$tradeLicense10 === void 0 ? void 0 : (_License$tradeLicense11 = _License$tradeLicense10[0]) === null || _License$tradeLicense11 === void 0 ? void 0 : _License$tradeLicense11.tradeType)) {
        var _doc$docTypes2;
        doc === null || doc === void 0 ? void 0 : (_doc$docTypes2 = doc.docTypes) === null || _doc$docTypes2 === void 0 ? void 0 : _doc$docTypes2.map(function (docType) {
          var _License$tradeLicense12, _License$tradeLicense13;
          License === null || License === void 0 ? void 0 : (_License$tradeLicense12 = License.tradeLicenseDetail) === null || _License$tradeLicense12 === void 0 ? void 0 : (_License$tradeLicense13 = _License$tradeLicense12.applicationDocuments) === null || _License$tradeLicense13 === void 0 ? void 0 : _License$tradeLicense13.forEach(function (document) {
            if ((docType === null || docType === void 0 ? void 0 : docType.code) == (document === null || document === void 0 ? void 0 : document.documentType) && docType !== null && docType !== void 0 && docType.info) document.info = docType === null || docType === void 0 ? void 0 : docType.info;
          });
        });
      }
    });
  }
  if (isLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "cardHeaderWithOptions",
    style: {
      marginRight: "auto",
      maxWidth: "960px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("BPA_TASK_DETAILS_HEADER")), (reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment6 = reciept_data.Payments) === null || _reciept_data$Payment6 === void 0 ? void 0 : _reciept_data$Payment6.length) > 0 &&
  /*#__PURE__*/
  React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper",
    onHeadClick: function onHeadClick() {
      return setShowOptions(!showOptions);
    },
    displayOptions: showOptions,
    options: dowloadOptions,
    style: {
      top: "90px"
    }
  })), /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_NUMBER_LABEL"),
    text: (License === null || License === void 0 ? void 0 : License.applicationNumber) || "NA"
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSE_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_LICENSE_TYPE"),
    text: t("TRADELICENSE_TRADETYPE_" + (License === null || License === void 0 ? void 0 : (_License$tradeLicense14 = License.tradeLicenseDetail) === null || _License$tradeLicense14 === void 0 ? void 0 : (_License$tradeLicense15 = _License$tradeLicense14.tradeUnits) === null || _License$tradeLicense15 === void 0 ? void 0 : (_License$tradeLicense16 = _License$tradeLicense15[0]) === null || _License$tradeLicense16 === void 0 ? void 0 : (_License$tradeLicense17 = _License$tradeLicense16.tradeType) === null || _License$tradeLicense17 === void 0 ? void 0 : _License$tradeLicense17.split('.')[0]))
  }), (License === null || License === void 0 ? void 0 : (_License$tradeLicense18 = License.tradeLicenseDetail) === null || _License$tradeLicense18 === void 0 ? void 0 : (_License$tradeLicense19 = _License$tradeLicense18.tradeUnits) === null || _License$tradeLicense19 === void 0 ? void 0 : (_License$tradeLicense20 = _License$tradeLicense19[0]) === null || _License$tradeLicense20 === void 0 ? void 0 : _License$tradeLicense20.tradeType.includes('ARCHITECT')) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COUNCIL_OF_ARCH_NO_LABEL"),
    text: License === null || License === void 0 ? void 0 : (_License$tradeLicense21 = License.tradeLicenseDetail) === null || _License$tradeLicense21 === void 0 ? void 0 : (_License$tradeLicense22 = _License$tradeLicense21.additionalDetail) === null || _License$tradeLicense22 === void 0 ? void 0 : _License$tradeLicense22.counsilForArchNo
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSE_DET_CAPTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_NAME_LABEL"),
    text: t(License === null || License === void 0 ? void 0 : (_License$tradeLicense23 = License.tradeLicenseDetail) === null || _License$tradeLicense23 === void 0 ? void 0 : (_License$tradeLicense24 = _License$tradeLicense23.owners) === null || _License$tradeLicense24 === void 0 ? void 0 : (_License$tradeLicense25 = _License$tradeLicense24[0]) === null || _License$tradeLicense25 === void 0 ? void 0 : _License$tradeLicense25.name)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_GENDER_LABEL"),
    text: t(License === null || License === void 0 ? void 0 : (_License$tradeLicense26 = License.tradeLicenseDetail) === null || _License$tradeLicense26 === void 0 ? void 0 : (_License$tradeLicense27 = _License$tradeLicense26.owners) === null || _License$tradeLicense27 === void 0 ? void 0 : (_License$tradeLicense28 = _License$tradeLicense27[0]) === null || _License$tradeLicense28 === void 0 ? void 0 : _License$tradeLicense28.gender)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_OWNER_MOBILE_NO_LABEL"),
    text: License === null || License === void 0 ? void 0 : (_License$tradeLicense29 = License.tradeLicenseDetail) === null || _License$tradeLicense29 === void 0 ? void 0 : (_License$tradeLicense30 = _License$tradeLicense29.owners) === null || _License$tradeLicense30 === void 0 ? void 0 : (_License$tradeLicense31 = _License$tradeLicense30[0]) === null || _License$tradeLicense31 === void 0 ? void 0 : _License$tradeLicense31.mobileNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_EMAIL_LABEL"),
    text: (License === null || License === void 0 ? void 0 : (_License$tradeLicense32 = License.tradeLicenseDetail) === null || _License$tradeLicense32 === void 0 ? void 0 : (_License$tradeLicense33 = _License$tradeLicense32.owners) === null || _License$tradeLicense33 === void 0 ? void 0 : (_License$tradeLicense34 = _License$tradeLicense33[0]) === null || _License$tradeLicense34 === void 0 ? void 0 : _License$tradeLicense34.emailId) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_PAN_NO"),
    text: (License === null || License === void 0 ? void 0 : (_License$tradeLicense35 = License.tradeLicenseDetail) === null || _License$tradeLicense35 === void 0 ? void 0 : (_License$tradeLicense36 = _License$tradeLicense35.owners) === null || _License$tradeLicense36 === void 0 ? void 0 : (_License$tradeLicense37 = _License$tradeLicense36[0]) === null || _License$tradeLicense37 === void 0 ? void 0 : _License$tradeLicense37.pan) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSEE_PERMANENT_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    text: (License === null || License === void 0 ? void 0 : (_License$tradeLicense38 = License.tradeLicenseDetail) === null || _License$tradeLicense38 === void 0 ? void 0 : (_License$tradeLicense39 = _License$tradeLicense38.owners) === null || _License$tradeLicense39 === void 0 ? void 0 : (_License$tradeLicense40 = _License$tradeLicense39[0]) === null || _License$tradeLicense40 === void 0 ? void 0 : _License$tradeLicense40.permanentAddress) || t("CS_NA")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_CORRESPONDANCE_ADDRESS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    text: (License === null || License === void 0 ? void 0 : (_License$tradeLicense41 = License.tradeLicenseDetail) === null || _License$tradeLicense41 === void 0 ? void 0 : (_License$tradeLicense42 = _License$tradeLicense41.owners) === null || _License$tradeLicense42 === void 0 ? void 0 : (_License$tradeLicense43 = _License$tradeLicense42[0]) === null || _License$tradeLicense43 === void 0 ? void 0 : _License$tradeLicense43.correspondenceAddress) || t("CS_NA")
  })), (License === null || License === void 0 ? void 0 : (_License$tradeLicense44 = License.tradeLicenseDetail) === null || _License$tradeLicense44 === void 0 ? void 0 : (_License$tradeLicense45 = _License$tradeLicense44.applicationDocuments) === null || _License$tradeLicense45 === void 0 ? void 0 : _License$tradeLicense45.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_DOC_DETAILS_SUMMARY")), License === null || License === void 0 ? void 0 : (_License$tradeLicense46 = License.tradeLicenseDetail) === null || _License$tradeLicense46 === void 0 ? void 0 : (_License$tradeLicense47 = _License$tradeLicense46.applicationDocuments) === null || _License$tradeLicense47 === void 0 ? void 0 : _License$tradeLicense47.map(function (document, index) {
    var _document$documentTyp, _documents$document$f, _ref, _document$documentTyp2, _License$tradeLicense48, _License$tradeLicense49;
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      styles: {
        fontSize: "18px"
      }
    }, t("BPAREG_HEADER_" + stringReplaceAll(document === null || document === void 0 ? void 0 : (_document$documentTyp = document.documentType) === null || _document$documentTyp === void 0 ? void 0 : _document$documentTyp.toUpperCase(), ".", "_"))), document !== null && document !== void 0 && document.info ? /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontSize: "12px",
        color: "#505A5F",
        fontWeight: 400,
        lineHeight: "15px",
        margin: "10px 0px"
      }
    }, "" + t(document === null || document === void 0 ? void 0 : document.info)) : null, /*#__PURE__*/React__default.createElement("a", {
      target: "_blank",
      href: (_documents$document$f = documents[document.fileStoreId]) === null || _documents$document$f === void 0 ? void 0 : _documents$document$f.split(",")[0]
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), /*#__PURE__*/React__default.createElement("p", {
      style: (_ref = {
        marginTop: "8px",
        fontWeight: "bold",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#505A5F"
      }, _ref["fontWeight"] = "400", _ref)
    }, t("BPAREG_HEADER_" + stringReplaceAll(document === null || document === void 0 ? void 0 : (_document$documentTyp2 = document.documentType) === null || _document$documentTyp2 === void 0 ? void 0 : _document$documentTyp2.toUpperCase(), ".", "_")))), (License === null || License === void 0 ? void 0 : (_License$tradeLicense48 = License.tradeLicenseDetail) === null || _License$tradeLicense48 === void 0 ? void 0 : (_License$tradeLicense49 = _License$tradeLicense48.applicationDocuments) === null || _License$tradeLicense49 === void 0 ? void 0 : _License$tradeLicense49.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#cccccc",
        backgroundColor: "#cccccc",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null);
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(ApplicationTimeline, {
    id: id,
    tenantId: License === null || License === void 0 ? void 0 : License.tenantId
  }))));
};

var OBPSResponse = function OBPSResponse(props) {
  var _state$data, _state$data$BPA;
  var state = props.location.state;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var bpaData = state === null || state === void 0 ? void 0 : (_state$data = state.data) === null || _state$data === void 0 ? void 0 : (_state$data$BPA = _state$data.BPA) === null || _state$data$BPA === void 0 ? void 0 : _state$data$BPA[0];
  var _useState = React.useState({}),
    applicationData = _useState[0],
    setApplicationData = _useState[1];
  var _useState2 = React.useState(true),
    isLoader = _useState2[0],
    setIsLoader = _useState2[1];
  var history = reactRouterDom.useHistory();
  var _useState3 = React.useState(""),
    isSanctionFee = _useState3[0],
    setSanctionFee = _useState3[1];
  var _useState4 = React.useState(null),
    billData = _useState4[0],
    setBillData = _useState4[1];
  var bpaBusinessService = applicationData === null || applicationData === void 0 ? void 0 : applicationData.businessService;
  var bpaStatus = applicationData === null || applicationData === void 0 ? void 0 : applicationData.status;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  var workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: bpaData === null || bpaData === void 0 ? void 0 : bpaData.tenantId,
    id: bpaData === null || bpaData === void 0 ? void 0 : bpaData.applicationNo,
    moduleCode: "BPA"
  });
  React.useEffect(function () {
    try {
      setIsLoader(true);
      return Promise.resolve(Digit.OBPSService.BPASearch(tenantId, {
        applicationNo: bpaData === null || bpaData === void 0 ? void 0 : bpaData.applicationNo
      })).then(function (bpaResponse) {
        var _bpaResponse$BPA, _bpaResponse$BPA$, _bpaResponse$BPA2, _bpaResponse$BPA2$;
        return Promise.resolve(getBusinessServices(bpaResponse === null || bpaResponse === void 0 ? void 0 : (_bpaResponse$BPA = bpaResponse.BPA) === null || _bpaResponse$BPA === void 0 ? void 0 : (_bpaResponse$BPA$ = _bpaResponse$BPA[0]) === null || _bpaResponse$BPA$ === void 0 ? void 0 : _bpaResponse$BPA$.businessService, bpaResponse === null || bpaResponse === void 0 ? void 0 : (_bpaResponse$BPA2 = bpaResponse.BPA) === null || _bpaResponse$BPA2 === void 0 ? void 0 : (_bpaResponse$BPA2$ = _bpaResponse$BPA2[0]) === null || _bpaResponse$BPA2$ === void 0 ? void 0 : _bpaResponse$BPA2$.status)).then(function (businessService) {
          var _bpaResponse$BPA3, _bpaResponse$BPA3$;
          return Promise.resolve(Digit.PaymentService.fetchBill(tenantId, {
            consumerCode: bpaResponse === null || bpaResponse === void 0 ? void 0 : (_bpaResponse$BPA3 = bpaResponse.BPA) === null || _bpaResponse$BPA3 === void 0 ? void 0 : (_bpaResponse$BPA3$ = _bpaResponse$BPA3[0]) === null || _bpaResponse$BPA3$ === void 0 ? void 0 : _bpaResponse$BPA3$.applicationNo,
            businessService: businessService
          })).then(function (fetchBill) {
            var _bpaResponse$BPA4, _bpaResponse$BPA4$, _fetchBill$Bill$, _bpaResponse$BPA5;
            if ((bpaResponse === null || bpaResponse === void 0 ? void 0 : (_bpaResponse$BPA4 = bpaResponse.BPA) === null || _bpaResponse$BPA4 === void 0 ? void 0 : (_bpaResponse$BPA4$ = _bpaResponse$BPA4[0]) === null || _bpaResponse$BPA4$ === void 0 ? void 0 : _bpaResponse$BPA4$.status) == "APPROVED" && fetchBill !== null && fetchBill !== void 0 && fetchBill.Bill[0] && (fetchBill === null || fetchBill === void 0 ? void 0 : (_fetchBill$Bill$ = fetchBill.Bill[0]) === null || _fetchBill$Bill$ === void 0 ? void 0 : _fetchBill$Bill$.totalAmount) != 0) setSanctionFee("_SAN_FEE");
            setIsLoader(false);
            setApplicationData(bpaResponse === null || bpaResponse === void 0 ? void 0 : (_bpaResponse$BPA5 = bpaResponse.BPA) === null || _bpaResponse$BPA5 === void 0 ? void 0 : _bpaResponse$BPA5[0]);
            setBillData(fetchBill === null || fetchBill === void 0 ? void 0 : fetchBill.Bill);
          });
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  }, []);
  var getHeaderMessage = function getHeaderMessage() {
    var _bpaData$workflow;
    return t("BPA_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow = bpaData.workflow) === null || _bpaData$workflow === void 0 ? void 0 : _bpaData$workflow.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase() + (isSanctionFee ? isSanctionFee : ""));
  };
  var getSubHeaderMessage = function getSubHeaderMessage() {
    var _bpaData$workflow2, _bpaData$additionalDe, _bpaData$additionalDe2;
    return t("BPA_SUB_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow2 = bpaData.workflow) === null || _bpaData$workflow2 === void 0 ? void 0 : _bpaData$workflow2.action) + "_" + (bpaData !== null && bpaData !== void 0 && (_bpaData$additionalDe = bpaData.additionalDetails) !== null && _bpaData$additionalDe !== void 0 && _bpaData$additionalDe.typeOfArchitect ? bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$additionalDe2 = bpaData.additionalDetails) === null || _bpaData$additionalDe2 === void 0 ? void 0 : _bpaData$additionalDe2.typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase() + (isSanctionFee ? isSanctionFee : ""));
  };
  var printReciept = function printReciept() {
    try {
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Bpa: [applicationData]
      }, "bpa-revocation")).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var onSubmit = function onSubmit() {
    history.push("/digit-ui/employee");
  };
  var getApplicationNoLabel = function getApplicationNoLabel() {
    return bpaBusinessService == "BPA" ? t("BPA_PERMIT_APPLICATION_NUMBER_LABEL") : t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL");
  };
  var getPaymentURL = function getPaymentURL(isCitizen) {
    if (isCitizen == true) return "/digit-ui/citizen/payment/collect/" + getBusinessServices(applicationData === null || applicationData === void 0 ? void 0 : applicationData.businessService, applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) + "/" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.applicationNo) + "/" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.tenantId) + "?tenantId=" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.tenantId);
  };
  var getPaymentURLEmployee = function getPaymentURLEmployee() {
    history.push("/digit-ui/employee/payment/collect/" + getBusinessServices(applicationData === null || applicationData === void 0 ? void 0 : applicationData.businessService, applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) + "/" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.applicationNo) + "/" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.tenantId) + "?tenantId=" + (applicationData === null || applicationData === void 0 ? void 0 : applicationData.tenantId));
  };
  var isPayButtonEnable = false;
  if (workflowDetails && workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.data && !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading)) {
    var _workflowDetails$data, _workflowDetails$data2;
    workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.nextActions) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.forEach(function (data) {
      if (data.action == "PAY" && !isPayButtonEnable) isPayButtonEnable = true;
    });
  }
  return /*#__PURE__*/React__default.createElement("div", null, isLoader || workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: getHeaderMessage(),
    applicationNumber: applicationData === null || applicationData === void 0 ? void 0 : applicationData.applicationNo,
    info: getApplicationNoLabel(),
    successful: (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PERMIT REVOCATION" || (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "REJECTED" ? false : true,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      paddingBottom: "10px",
      marginBottom: "10px"
    }
  }, getSubHeaderMessage()), (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PERMIT REVOCATION" ? /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: printReciept
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#F47738"
  })), t("BPA_REVOCATION_PDF_LABEL")) : null, window.location.href.includes("/citizen") ? /*#__PURE__*/React__default.createElement("div", null, ((applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_APPL_FEE" || (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_FEE" || (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_SANC_FEE_PAYMENT") && (billData === null || billData === void 0 ? void 0 : billData.length) > 0 && isPayButtonEnable ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: getPaymentURL(true)
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WF_BPA_PAY"),
    style: {
      margin: "10px 0px 0px 0px"
    }
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CORE_COMMON_GO_TO_HOME")
  }))) : /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    style: {
      margin: "10px 10px 0px 0px"
    }
  }))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, ((applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_APPL_FEE" || (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_FEE" || (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) == "PENDING_SANC_FEE_PAYMENT") && (billData === null || billData === void 0 ? void 0 : billData.length) > 0 && isPayButtonEnable ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WF_BPA_PAY"),
    onSubmit: getPaymentURLEmployee,
    style: {
      margin: "10px 0px 0px 0px"
    }
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/employee"
  }, /*#__PURE__*/React__default.createElement("span", {
    style: {
      color: "#f47738",
      margin: "0px 10px"
    }
  }, t("CORE_COMMON_GO_TO_HOME")))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    onSubmit: onSubmit,
    style: {
      margin: "10px 10px 0px 0px"
    }
  })))));
};

var FilterFormFieldsComponent = function FilterFormFieldsComponent(_ref) {
  var statuses = _ref.statuses,
    isInboxLoading = _ref.isInboxLoading,
    controlFilterForm = _ref.controlFilterForm,
    setFilterFormValue = _ref.setFilterFormValue,
    filterFormState = _ref.filterFormState,
    localitiesForEmployeesCurrentTenant = _ref.localitiesForEmployeesCurrentTenant,
    loadingLocalitiesForEmployeesCurrentTenant = _ref.loadingLocalitiesForEmployeesCurrentTenant;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.useApplicationTypes(tenantId),
    applicationTypesOfBPA = _Digit$Hooks$obps$Sea.data,
    loadingApplicationTypesOfBPA = _Digit$Hooks$obps$Sea.isLoading;
  var availableOptions = [{
    code: "ASSIGNED_TO_ME",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ME")
  }, {
    code: "ASSIGNED_TO_ALL",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ALL")
  }];
  var selectedApplicationType = reactHookForm.useWatch({
    control: controlFilterForm,
    name: "applicationType",
    defaultValue: (filterFormState === null || filterFormState === void 0 ? void 0 : filterFormState.applicationType) || null
  });
  var availableBusinessServicesOptions = Digit.Hooks.obps.useBusinessServiceBasedOnServiceType({
    applicationType: selectedApplicationType
  });
  var selectedBusinessService = reactHookForm.useWatch({
    control: controlFilterForm,
    name: "businessService",
    defaultValue: (filterFormState === null || filterFormState === void 0 ? void 0 : filterFormState.businessService) || null
  });
  var selectrole = function selectrole(listOfSelections, props) {
    var res = listOfSelections.map(function (propsData) {
      var data = propsData[1];
      return data;
    });
    return props.onChange(res);
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, !window.location.href.includes("/citizen") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "assignee",
    control: controlFilterForm,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          props.onChange(e.code);
        },
        selectedOption: availableOptions.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionsKey: "name",
        name: "assignee",
        options: availableOptions
      });
    }
  })) : null, !window.location.href.includes("/citizen") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "locality",
    control: controlFilterForm,
    render: function render(props) {
      var renderRemovableTokens = React.useMemo(function () {
        var _props$value;
        return props === null || props === void 0 ? void 0 : (_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.map(function (locality, index) {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RemoveableTag, {
            key: index,
            text: locality.i18nkey,
            onClick: function onClick() {
              var _props$value2;
              props.onChange(props === null || props === void 0 ? void 0 : (_props$value2 = props.value) === null || _props$value2 === void 0 ? void 0 : _props$value2.filter(function (loc) {
                return loc.code !== locality.code;
              }));
            }
          });
        });
      }, [props === null || props === void 0 ? void 0 : props.value]);
      return loadingLocalitiesForEmployeesCurrentTenant ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontSize: "18px",
          fontWeight: "600"
        }
      }, t("ES_INBOX_LOCALITY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiSelectDropdown, {
        options: localitiesForEmployeesCurrentTenant ? localitiesForEmployeesCurrentTenant : [],
        optionsKey: "i18nkey",
        props: props,
        isPropsNeeded: true,
        onSelect: selectrole,
        selected: props === null || props === void 0 ? void 0 : props.value,
        defaultLabel: t("ES_BPA_ALL_SELECTED"),
        defaultUnit: t("BPA_SELECTED_TEXT")
      }), /*#__PURE__*/React__default.createElement("div", {
        className: "tag-container"
      }, renderRemovableTokens));
    }
  })) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationType",
    control: controlFilterForm,
    render: function render(props) {
      return loadingApplicationTypesOfBPA ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontSize: "18px",
          fontWeight: "600"
        }
      }, t("BPA_SEARCH_APPLICATION_TYPE_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          props.onChange(e.code);
          setFilterFormValue("applicationStatus", []);
          setFilterFormValue("businessService", []);
        },
        selectedOption: applicationTypesOfBPA.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionsKey: "i18nKey",
        name: "applicationType",
        options: applicationTypesOfBPA
      }));
    }
  })), (selectedApplicationType === null || selectedApplicationType === void 0 ? void 0 : selectedApplicationType.length) > 0 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "businessService",
    control: controlFilterForm,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontSize: "18px",
          fontWeight: "600"
        }
      }, t("ES_INBOX_RISK_TYPE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          props.onChange(e.code);
          setFilterFormValue("applicationStatus", []);
        },
        selectedOption: availableBusinessServicesOptions.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionsKey: "i18nKey",
        name: "businessService",
        options: availableBusinessServicesOptions
      }));
    }
  })) : null, (selectedApplicationType === null || selectedApplicationType === void 0 ? void 0 : selectedApplicationType.length) > 0 && (selectedBusinessService === null || selectedBusinessService === void 0 ? void 0 : selectedBusinessService.length) > 0 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement("div", {
    className: "filter-label sub-filter-label",
    style: {
      fontSize: "18px",
      fontWeight: "600"
    }
  }, t("ACTION_TEST_APPLICATION_STATUS")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationStatus",
    control: controlFilterForm,
    render: function render(props) {
      function changeItemCheckStatus(value) {
        props.onChange(value);
      }
      var renderStatusCheckBoxes = React.useMemo(function () {
        var _statuses$filter;
        return statuses === null || statuses === void 0 ? void 0 : (_statuses$filter = statuses.filter(function (e) {
          var value = cloneDeep_1(selectedBusinessService);
          if (value == "BPA_OC_LOW") value = "BPA_OC";
          return e.businessservice === value;
        })) === null || _statuses$filter === void 0 ? void 0 : _statuses$filter.map(function (status, index) {
          var _props$value4;
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
            style: {
              marginTop: "10px"
            },
            key: index,
            onChange: function onChange(e) {
              var _props$value3;
              return e.target.checked ? changeItemCheckStatus([].concat(props === null || props === void 0 ? void 0 : props.value, [status === null || status === void 0 ? void 0 : status.statusid])) : changeItemCheckStatus(props === null || props === void 0 ? void 0 : (_props$value3 = props.value) === null || _props$value3 === void 0 ? void 0 : _props$value3.filter(function (id) {
                return id !== (status === null || status === void 0 ? void 0 : status.statusid);
              }));
            },
            checked: props === null || props === void 0 ? void 0 : (_props$value4 = props.value) === null || _props$value4 === void 0 ? void 0 : _props$value4.includes(status === null || status === void 0 ? void 0 : status.statusid),
            label: "" + t("WF_STATE_" + status.businessservice + "_" + status.applicationstatus)
          });
        });
      }, [props.value, statuses, selectedBusinessService]);
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, isInboxLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, renderStatusCheckBoxes));
    }
  })) : null);
};

var SearchFormFieldsComponents = function SearchFormFieldsComponents(_ref) {
  var _searchFormState$erro5, _searchFormState$erro6, _searchFormState$erro7, _searchFormState$erro8;
  var registerRef = _ref.registerRef,
    searchFormState = _ref.searchFormState,
    searchFieldComponents = _ref.searchFieldComponents;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  var gridStyles = function gridStyles() {
    return {
      gridTemplateColumns: "33.33% 67.33%",
      textAlign: "start"
    };
  };
  if (!isMobile) {
    var _searchFormState$erro, _searchFormState$erro2, _searchFormState$erro3, _searchFormState$erro4;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
      className: "search-container",
      style: {
        width: "auto",
        marginLeft: "24px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "search-complaint-container"
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "complaint-input-container",
      style: window.location.href.includes("/citizen") ? gridStyles() : {
        textAlign: "start"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      name: "applicationNo",
      inputRef: registerRef({})
    })), !window.location.href.includes("/citizen") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
      name: "mobileNumber",
      type: "number",
      inputRef: registerRef({
        minLength: {
          value: 10,
          message: t("CORE_COMMON_MOBILE_ERROR")
        },
        maxLength: {
          value: 10,
          message: t("CORE_COMMON_MOBILE_ERROR")
        },
        pattern: {
          value: /[6789][0-9]{9}/,
          message: t("CORE_COMMON_MOBILE_ERROR")
        }
      })
    }), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro = searchFormState.errors) !== null && _searchFormState$erro !== void 0 && (_searchFormState$erro2 = _searchFormState$erro["mobileNumber"]) !== null && _searchFormState$erro2 !== void 0 && _searchFormState$erro2.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro3 = searchFormState.errors) === null || _searchFormState$erro3 === void 0 ? void 0 : (_searchFormState$erro4 = _searchFormState$erro3["mobileNumber"]) === null || _searchFormState$erro4 === void 0 ? void 0 : _searchFormState$erro4.message) : null) : null, /*#__PURE__*/React__default.createElement("div", {
      className: "search-action-wrapper",
      style: {
        width: "100%"
      }
    }, searchFieldComponents)))));
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    name: "applicationNo",
    inputRef: registerRef({})
  })), !window.location.href.includes("/citizen") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
    name: "mobileNumber",
    type: "number",
    inputRef: registerRef({
      minLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      maxLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      pattern: {
        value: /[6789][0-9]{9}/,
        message: t("CORE_COMMON_MOBILE_ERROR")
      }
    })
  }), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro5 = searchFormState.errors) !== null && _searchFormState$erro5 !== void 0 && (_searchFormState$erro6 = _searchFormState$erro5["mobileNumber"]) !== null && _searchFormState$erro6 !== void 0 && _searchFormState$erro6.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro7 = searchFormState.errors) === null || _searchFormState$erro7 === void 0 ? void 0 : (_searchFormState$erro8 = _searchFormState$erro7["mobileNumber"]) === null || _searchFormState$erro8 === void 0 ? void 0 : _searchFormState$erro8.message) : null) : null);
};

function toInteger(dirtyNumber) {
  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {
    return NaN;
  }
  var number = Number(dirtyNumber);
  if (isNaN(number)) {
    return number;
  }
  return number < 0 ? Math.ceil(number) : Math.floor(number);
}

function requiredArgs(required, args) {
  if (args.length < required) {
    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');
  }
}

function toDate(argument) {
  requiredArgs(1, arguments);
  var argStr = Object.prototype.toString.call(argument);

  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {
    return new Date(argument.getTime());
  } else if (typeof argument === 'number' || argStr === '[object Number]') {
    return new Date(argument);
  } else {
    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {
      console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule");

      console.warn(new Error().stack);
    }
    return new Date(NaN);
  }
}

function addMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var timestamp = toDate(dirtyDate).getTime();
  var amount = toInteger(dirtyAmount);
  return new Date(timestamp + amount);
}

function getTimezoneOffsetInMilliseconds(date) {
  var utcDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));
  utcDate.setUTCFullYear(date.getFullYear());
  return date.getTime() - utcDate.getTime();
}

function isDate(value) {
  requiredArgs(1, arguments);
  return value instanceof Date || typeof value === 'object' && Object.prototype.toString.call(value) === '[object Date]';
}

function isValid(dirtyDate) {
  requiredArgs(1, arguments);
  if (!isDate(dirtyDate) && typeof dirtyDate !== 'number') {
    return false;
  }
  var date = toDate(dirtyDate);
  return !isNaN(Number(date));
}

var formatDistanceLocale = {
  lessThanXSeconds: {
    one: 'less than a second',
    other: 'less than {{count}} seconds'
  },
  xSeconds: {
    one: '1 second',
    other: '{{count}} seconds'
  },
  halfAMinute: 'half a minute',
  lessThanXMinutes: {
    one: 'less than a minute',
    other: 'less than {{count}} minutes'
  },
  xMinutes: {
    one: '1 minute',
    other: '{{count}} minutes'
  },
  aboutXHours: {
    one: 'about 1 hour',
    other: 'about {{count}} hours'
  },
  xHours: {
    one: '1 hour',
    other: '{{count}} hours'
  },
  xDays: {
    one: '1 day',
    other: '{{count}} days'
  },
  aboutXWeeks: {
    one: 'about 1 week',
    other: 'about {{count}} weeks'
  },
  xWeeks: {
    one: '1 week',
    other: '{{count}} weeks'
  },
  aboutXMonths: {
    one: 'about 1 month',
    other: 'about {{count}} months'
  },
  xMonths: {
    one: '1 month',
    other: '{{count}} months'
  },
  aboutXYears: {
    one: 'about 1 year',
    other: 'about {{count}} years'
  },
  xYears: {
    one: '1 year',
    other: '{{count}} years'
  },
  overXYears: {
    one: 'over 1 year',
    other: 'over {{count}} years'
  },
  almostXYears: {
    one: 'almost 1 year',
    other: 'almost {{count}} years'
  }
};
var formatDistance = function formatDistance(token, count, options) {
  var result;
  var tokenValue = formatDistanceLocale[token];
  if (typeof tokenValue === 'string') {
    result = tokenValue;
  } else if (count === 1) {
    result = tokenValue.one;
  } else {
    result = tokenValue.other.replace('{{count}}', count.toString());
  }
  if (options !== null && options !== void 0 && options.addSuffix) {
    if (options.comparison && options.comparison > 0) {
      return 'in ' + result;
    } else {
      return result + ' ago';
    }
  }
  return result;
};

function buildFormatLongFn(args) {
  return function () {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var width = options.width ? String(options.width) : args.defaultWidth;
    var format = args.formats[width] || args.formats[args.defaultWidth];
    return format;
  };
}

var dateFormats = {
  full: 'EEEE, MMMM do, y',
  long: 'MMMM do, y',
  medium: 'MMM d, y',
  short: 'MM/dd/yyyy'
};
var timeFormats = {
  full: 'h:mm:ss a zzzz',
  long: 'h:mm:ss a z',
  medium: 'h:mm:ss a',
  short: 'h:mm a'
};
var dateTimeFormats = {
  full: "{{date}} 'at' {{time}}",
  long: "{{date}} 'at' {{time}}",
  medium: '{{date}}, {{time}}',
  short: '{{date}}, {{time}}'
};
var formatLong = {
  date: buildFormatLongFn({
    formats: dateFormats,
    defaultWidth: 'full'
  }),
  time: buildFormatLongFn({
    formats: timeFormats,
    defaultWidth: 'full'
  }),
  dateTime: buildFormatLongFn({
    formats: dateTimeFormats,
    defaultWidth: 'full'
  })
};

var formatRelativeLocale = {
  lastWeek: "'last' eeee 'at' p",
  yesterday: "'yesterday at' p",
  today: "'today at' p",
  tomorrow: "'tomorrow at' p",
  nextWeek: "eeee 'at' p",
  other: 'P'
};
var formatRelative = function formatRelative(token, _date, _baseDate, _options) {
  return formatRelativeLocale[token];
};

function buildLocalizeFn(args) {
  return function (dirtyIndex, dirtyOptions) {
    var options = dirtyOptions || {};
    var context = options.context ? String(options.context) : 'standalone';
    var valuesArray;
    if (context === 'formatting' && args.formattingValues) {
      var defaultWidth = args.defaultFormattingWidth || args.defaultWidth;
      var width = options.width ? String(options.width) : defaultWidth;
      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];
    } else {
      var _defaultWidth = args.defaultWidth;
      var _width = options.width ? String(options.width) : args.defaultWidth;
      valuesArray = args.values[_width] || args.values[_defaultWidth];
    }
    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;

    return valuesArray[index];
  };
}

var eraValues = {
  narrow: ['B', 'A'],
  abbreviated: ['BC', 'AD'],
  wide: ['Before Christ', 'Anno Domini']
};
var quarterValues = {
  narrow: ['1', '2', '3', '4'],
  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],
  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']
};

var monthValues = {
  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],
  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']
};
var dayValues = {
  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],
  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
};
var dayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'morning',
    afternoon: 'afternoon',
    evening: 'evening',
    night: 'night'
  }
};
var formattingDayPeriodValues = {
  narrow: {
    am: 'a',
    pm: 'p',
    midnight: 'mi',
    noon: 'n',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  abbreviated: {
    am: 'AM',
    pm: 'PM',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  },
  wide: {
    am: 'a.m.',
    pm: 'p.m.',
    midnight: 'midnight',
    noon: 'noon',
    morning: 'in the morning',
    afternoon: 'in the afternoon',
    evening: 'in the evening',
    night: 'at night'
  }
};
var ordinalNumber = function ordinalNumber(dirtyNumber, _options) {
  var number = Number(dirtyNumber);

  var rem100 = number % 100;
  if (rem100 > 20 || rem100 < 10) {
    switch (rem100 % 10) {
      case 1:
        return number + 'st';
      case 2:
        return number + 'nd';
      case 3:
        return number + 'rd';
    }
  }
  return number + 'th';
};
var localize = {
  ordinalNumber: ordinalNumber,
  era: buildLocalizeFn({
    values: eraValues,
    defaultWidth: 'wide'
  }),
  quarter: buildLocalizeFn({
    values: quarterValues,
    defaultWidth: 'wide',
    argumentCallback: function argumentCallback(quarter) {
      return quarter - 1;
    }
  }),
  month: buildLocalizeFn({
    values: monthValues,
    defaultWidth: 'wide'
  }),
  day: buildLocalizeFn({
    values: dayValues,
    defaultWidth: 'wide'
  }),
  dayPeriod: buildLocalizeFn({
    values: dayPeriodValues,
    defaultWidth: 'wide',
    formattingValues: formattingDayPeriodValues,
    defaultFormattingWidth: 'wide'
  })
};

function buildMatchFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var width = options.width;
    var matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];
    var matchResult = string.match(matchPattern);
    if (!matchResult) {
      return null;
    }
    var matchedString = matchResult[0];
    var parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];
    var key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    }) : findKey(parsePatterns, function (pattern) {
      return pattern.test(matchedString);
    });
    var value;
    value = args.valueCallback ? args.valueCallback(key) : key;
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}
function findKey(object, predicate) {
  for (var key in object) {
    if (object.hasOwnProperty(key) && predicate(object[key])) {
      return key;
    }
  }
  return undefined;
}
function findIndex(array, predicate) {
  for (var key = 0; key < array.length; key++) {
    if (predicate(array[key])) {
      return key;
    }
  }
  return undefined;
}

function buildMatchPatternFn(args) {
  return function (string) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var matchResult = string.match(args.matchPattern);
    if (!matchResult) return null;
    var matchedString = matchResult[0];
    var parseResult = string.match(args.parsePattern);
    if (!parseResult) return null;
    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];
    value = options.valueCallback ? options.valueCallback(value) : value;
    var rest = string.slice(matchedString.length);
    return {
      value: value,
      rest: rest
    };
  };
}

var matchOrdinalNumberPattern = /^(\d+)(th|st|nd|rd)?/i;
var parseOrdinalNumberPattern = /\d+/i;
var matchEraPatterns = {
  narrow: /^(b|a)/i,
  abbreviated: /^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,
  wide: /^(before christ|before common era|anno domini|common era)/i
};
var parseEraPatterns = {
  any: [/^b/i, /^(a|c)/i]
};
var matchQuarterPatterns = {
  narrow: /^[1234]/i,
  abbreviated: /^q[1234]/i,
  wide: /^[1234](th|st|nd|rd)? quarter/i
};
var parseQuarterPatterns = {
  any: [/1/i, /2/i, /3/i, /4/i]
};
var matchMonthPatterns = {
  narrow: /^[jfmasond]/i,
  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,
  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i
};
var parseMonthPatterns = {
  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],
  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]
};
var matchDayPatterns = {
  narrow: /^[smtwf]/i,
  short: /^(su|mo|tu|we|th|fr|sa)/i,
  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,
  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i
};
var parseDayPatterns = {
  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],
  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]
};
var matchDayPeriodPatterns = {
  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,
  any: /^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i
};
var parseDayPeriodPatterns = {
  any: {
    am: /^a/i,
    pm: /^p/i,
    midnight: /^mi/i,
    noon: /^no/i,
    morning: /morning/i,
    afternoon: /afternoon/i,
    evening: /evening/i,
    night: /night/i
  }
};
var match = {
  ordinalNumber: buildMatchPatternFn({
    matchPattern: matchOrdinalNumberPattern,
    parsePattern: parseOrdinalNumberPattern,
    valueCallback: function valueCallback(value) {
      return parseInt(value, 10);
    }
  }),
  era: buildMatchFn({
    matchPatterns: matchEraPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseEraPatterns,
    defaultParseWidth: 'any'
  }),
  quarter: buildMatchFn({
    matchPatterns: matchQuarterPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseQuarterPatterns,
    defaultParseWidth: 'any',
    valueCallback: function valueCallback(index) {
      return index + 1;
    }
  }),
  month: buildMatchFn({
    matchPatterns: matchMonthPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseMonthPatterns,
    defaultParseWidth: 'any'
  }),
  day: buildMatchFn({
    matchPatterns: matchDayPatterns,
    defaultMatchWidth: 'wide',
    parsePatterns: parseDayPatterns,
    defaultParseWidth: 'any'
  }),
  dayPeriod: buildMatchFn({
    matchPatterns: matchDayPeriodPatterns,
    defaultMatchWidth: 'any',
    parsePatterns: parseDayPeriodPatterns,
    defaultParseWidth: 'any'
  })
};

var locale = {
  code: 'en-US',
  formatDistance: formatDistance,
  formatLong: formatLong,
  formatRelative: formatRelative,
  localize: localize,
  match: match,
  options: {
    weekStartsOn: 0
    ,

    firstWeekContainsDate: 1
  }
};

function subMilliseconds(dirtyDate, dirtyAmount) {
  requiredArgs(2, arguments);
  var amount = toInteger(dirtyAmount);
  return addMilliseconds(dirtyDate, -amount);
}

var MILLISECONDS_IN_DAY = 86400000;

function getUTCDayOfYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var timestamp = date.getTime();
  date.setUTCMonth(0, 1);
  date.setUTCHours(0, 0, 0, 0);
  var startOfYearTimestamp = date.getTime();
  var difference = timestamp - startOfYearTimestamp;
  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1;
}

function startOfUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var weekStartsOn = 1;
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var fourthOfJanuaryOfNextYear = new Date(0);
  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);
  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear);
  var fourthOfJanuaryOfThisYear = new Date(0);
  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);
  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCISOWeekYear(dirtyDate) {
  requiredArgs(1, arguments);
  var year = getUTCISOWeekYear(dirtyDate);
  var fourthOfJanuary = new Date(0);
  fourthOfJanuary.setUTCFullYear(year, 0, 4);
  fourthOfJanuary.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCISOWeek(fourthOfJanuary);
  return date;
}

var MILLISECONDS_IN_WEEK = 604800000;

function getUTCISOWeek(dirtyDate) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCISOWeek(date).getTime() - startOfUTCISOWeekYear(date).getTime();

  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1;
}

function startOfUTCWeek(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  var date = toDate(dirtyDate);
  var day = date.getUTCDay();
  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;
  date.setUTCDate(date.getUTCDate() - diff);
  date.setUTCHours(0, 0, 0, 0);
  return date;
}

function getUTCWeekYear(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var year = date.getUTCFullYear();
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var firstWeekOfNextYear = new Date(0);
  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);
  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);
  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, dirtyOptions);
  var firstWeekOfThisYear = new Date(0);
  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);
  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, dirtyOptions);
  if (date.getTime() >= startOfNextYear.getTime()) {
    return year + 1;
  } else if (date.getTime() >= startOfThisYear.getTime()) {
    return year;
  } else {
    return year - 1;
  }
}

function startOfUTCWeekYear(dirtyDate, dirtyOptions) {
  requiredArgs(1, arguments);
  var options = dirtyOptions || {};
  var locale = options.locale;
  var localeFirstWeekContainsDate = locale && locale.options && locale.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);
  var year = getUTCWeekYear(dirtyDate, dirtyOptions);
  var firstWeek = new Date(0);
  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);
  firstWeek.setUTCHours(0, 0, 0, 0);
  var date = startOfUTCWeek(firstWeek, dirtyOptions);
  return date;
}

var MILLISECONDS_IN_WEEK$1 = 604800000;

function getUTCWeek(dirtyDate, options) {
  requiredArgs(1, arguments);
  var date = toDate(dirtyDate);
  var diff = startOfUTCWeek(date, options).getTime() - startOfUTCWeekYear(date, options).getTime();

  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1;
}

function addLeadingZeros(number, targetLength) {
  var sign = number < 0 ? '-' : '';
  var output = Math.abs(number).toString();
  while (output.length < targetLength) {
    output = '0' + output;
  }
  return sign + output;
}

var formatters = {
  y: function y(date, token) {
    var signedYear = date.getUTCFullYear();

    var year = signedYear > 0 ? signedYear : 1 - signedYear;
    return addLeadingZeros(token === 'yy' ? year % 100 : year, token.length);
  },
  M: function M(date, token) {
    var month = date.getUTCMonth();
    return token === 'M' ? String(month + 1) : addLeadingZeros(month + 1, 2);
  },
  d: function d(date, token) {
    return addLeadingZeros(date.getUTCDate(), token.length);
  },
  a: function a(date, token) {
    var dayPeriodEnumValue = date.getUTCHours() / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return dayPeriodEnumValue.toUpperCase();
      case 'aaa':
        return dayPeriodEnumValue;
      case 'aaaaa':
        return dayPeriodEnumValue[0];
      case 'aaaa':
      default:
        return dayPeriodEnumValue === 'am' ? 'a.m.' : 'p.m.';
    }
  },
  h: function h(date, token) {
    return addLeadingZeros(date.getUTCHours() % 12 || 12, token.length);
  },
  H: function H(date, token) {
    return addLeadingZeros(date.getUTCHours(), token.length);
  },
  m: function m(date, token) {
    return addLeadingZeros(date.getUTCMinutes(), token.length);
  },
  s: function s(date, token) {
    return addLeadingZeros(date.getUTCSeconds(), token.length);
  },
  S: function S(date, token) {
    var numberOfDigits = token.length;
    var milliseconds = date.getUTCMilliseconds();
    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));
    return addLeadingZeros(fractionalSeconds, token.length);
  }
};

var dayPeriodEnum = {
  am: 'am',
  pm: 'pm',
  midnight: 'midnight',
  noon: 'noon',
  morning: 'morning',
  afternoon: 'afternoon',
  evening: 'evening',
  night: 'night'
};

var formatters$1 = {
  G: function G(date, token, localize) {
    var era = date.getUTCFullYear() > 0 ? 1 : 0;
    switch (token) {
      case 'G':
      case 'GG':
      case 'GGG':
        return localize.era(era, {
          width: 'abbreviated'
        });

      case 'GGGGG':
        return localize.era(era, {
          width: 'narrow'
        });

      case 'GGGG':
      default:
        return localize.era(era, {
          width: 'wide'
        });
    }
  },
  y: function y(date, token, localize) {
    if (token === 'yo') {
      var signedYear = date.getUTCFullYear();

      var year = signedYear > 0 ? signedYear : 1 - signedYear;
      return localize.ordinalNumber(year, {
        unit: 'year'
      });
    }
    return formatters.y(date, token);
  },
  Y: function Y(date, token, localize, options) {
    var signedWeekYear = getUTCWeekYear(date, options);

    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;

    if (token === 'YY') {
      var twoDigitYear = weekYear % 100;
      return addLeadingZeros(twoDigitYear, 2);
    }

    if (token === 'Yo') {
      return localize.ordinalNumber(weekYear, {
        unit: 'year'
      });
    }

    return addLeadingZeros(weekYear, token.length);
  },
  R: function R(date, token) {
    var isoWeekYear = getUTCISOWeekYear(date);

    return addLeadingZeros(isoWeekYear, token.length);
  },
  u: function u(date, token) {
    var year = date.getUTCFullYear();
    return addLeadingZeros(year, token.length);
  },
  Q: function Q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case 'Q':
        return String(quarter);

      case 'QQ':
        return addLeadingZeros(quarter, 2);

      case 'Qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });

      case 'QQQ':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'QQQQQ':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'QQQQ':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  q: function q(date, token, localize) {
    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);
    switch (token) {
      case 'q':
        return String(quarter);

      case 'qq':
        return addLeadingZeros(quarter, 2);

      case 'qo':
        return localize.ordinalNumber(quarter, {
          unit: 'quarter'
        });

      case 'qqq':
        return localize.quarter(quarter, {
          width: 'abbreviated',
          context: 'standalone'
        });

      case 'qqqqq':
        return localize.quarter(quarter, {
          width: 'narrow',
          context: 'standalone'
        });

      case 'qqqq':
      default:
        return localize.quarter(quarter, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  M: function M(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'M':
      case 'MM':
        return formatters.M(date, token);

      case 'Mo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });

      case 'MMM':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'MMMMM':
        return localize.month(month, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'MMMM':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  L: function L(date, token, localize) {
    var month = date.getUTCMonth();
    switch (token) {
      case 'L':
        return String(month + 1);

      case 'LL':
        return addLeadingZeros(month + 1, 2);

      case 'Lo':
        return localize.ordinalNumber(month + 1, {
          unit: 'month'
        });

      case 'LLL':
        return localize.month(month, {
          width: 'abbreviated',
          context: 'standalone'
        });

      case 'LLLLL':
        return localize.month(month, {
          width: 'narrow',
          context: 'standalone'
        });

      case 'LLLL':
      default:
        return localize.month(month, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  w: function w(date, token, localize, options) {
    var week = getUTCWeek(date, options);
    if (token === 'wo') {
      return localize.ordinalNumber(week, {
        unit: 'week'
      });
    }
    return addLeadingZeros(week, token.length);
  },
  I: function I(date, token, localize) {
    var isoWeek = getUTCISOWeek(date);
    if (token === 'Io') {
      return localize.ordinalNumber(isoWeek, {
        unit: 'week'
      });
    }
    return addLeadingZeros(isoWeek, token.length);
  },
  d: function d(date, token, localize) {
    if (token === 'do') {
      return localize.ordinalNumber(date.getUTCDate(), {
        unit: 'date'
      });
    }
    return formatters.d(date, token);
  },
  D: function D(date, token, localize) {
    var dayOfYear = getUTCDayOfYear(date);
    if (token === 'Do') {
      return localize.ordinalNumber(dayOfYear, {
        unit: 'dayOfYear'
      });
    }
    return addLeadingZeros(dayOfYear, token.length);
  },
  E: function E(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    switch (token) {
      case 'E':
      case 'EE':
      case 'EEE':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'EEEEE':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'EEEEEE':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });

      case 'EEEE':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  e: function e(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case 'e':
        return String(localDayOfWeek);

      case 'ee':
        return addLeadingZeros(localDayOfWeek, 2);

      case 'eo':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'eee':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'eeeee':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'eeeeee':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });

      case 'eeee':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  c: function c(date, token, localize, options) {
    var dayOfWeek = date.getUTCDay();
    var localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;
    switch (token) {
      case 'c':
        return String(localDayOfWeek);

      case 'cc':
        return addLeadingZeros(localDayOfWeek, token.length);

      case 'co':
        return localize.ordinalNumber(localDayOfWeek, {
          unit: 'day'
        });
      case 'ccc':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'standalone'
        });

      case 'ccccc':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'standalone'
        });

      case 'cccccc':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'standalone'
        });

      case 'cccc':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'standalone'
        });
    }
  },
  i: function i(date, token, localize) {
    var dayOfWeek = date.getUTCDay();
    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;
    switch (token) {
      case 'i':
        return String(isoDayOfWeek);

      case 'ii':
        return addLeadingZeros(isoDayOfWeek, token.length);

      case 'io':
        return localize.ordinalNumber(isoDayOfWeek, {
          unit: 'day'
        });

      case 'iii':
        return localize.day(dayOfWeek, {
          width: 'abbreviated',
          context: 'formatting'
        });

      case 'iiiii':
        return localize.day(dayOfWeek, {
          width: 'narrow',
          context: 'formatting'
        });

      case 'iiiiii':
        return localize.day(dayOfWeek, {
          width: 'short',
          context: 'formatting'
        });

      case 'iiii':
      default:
        return localize.day(dayOfWeek, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  a: function a(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    switch (token) {
      case 'a':
      case 'aa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'aaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'aaaaa':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'aaaa':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  b: function b(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours === 12) {
      dayPeriodEnumValue = dayPeriodEnum.noon;
    } else if (hours === 0) {
      dayPeriodEnumValue = dayPeriodEnum.midnight;
    } else {
      dayPeriodEnumValue = hours / 12 >= 1 ? 'pm' : 'am';
    }
    switch (token) {
      case 'b':
      case 'bb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'bbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        }).toLowerCase();
      case 'bbbbb':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'bbbb':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  B: function B(date, token, localize) {
    var hours = date.getUTCHours();
    var dayPeriodEnumValue;
    if (hours >= 17) {
      dayPeriodEnumValue = dayPeriodEnum.evening;
    } else if (hours >= 12) {
      dayPeriodEnumValue = dayPeriodEnum.afternoon;
    } else if (hours >= 4) {
      dayPeriodEnumValue = dayPeriodEnum.morning;
    } else {
      dayPeriodEnumValue = dayPeriodEnum.night;
    }
    switch (token) {
      case 'B':
      case 'BB':
      case 'BBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'abbreviated',
          context: 'formatting'
        });
      case 'BBBBB':
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'narrow',
          context: 'formatting'
        });
      case 'BBBB':
      default:
        return localize.dayPeriod(dayPeriodEnumValue, {
          width: 'wide',
          context: 'formatting'
        });
    }
  },
  h: function h(date, token, localize) {
    if (token === 'ho') {
      var hours = date.getUTCHours() % 12;
      if (hours === 0) hours = 12;
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return formatters.h(date, token);
  },
  H: function H(date, token, localize) {
    if (token === 'Ho') {
      return localize.ordinalNumber(date.getUTCHours(), {
        unit: 'hour'
      });
    }
    return formatters.H(date, token);
  },
  K: function K(date, token, localize) {
    var hours = date.getUTCHours() % 12;
    if (token === 'Ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  k: function k(date, token, localize) {
    var hours = date.getUTCHours();
    if (hours === 0) hours = 24;
    if (token === 'ko') {
      return localize.ordinalNumber(hours, {
        unit: 'hour'
      });
    }
    return addLeadingZeros(hours, token.length);
  },
  m: function m(date, token, localize) {
    if (token === 'mo') {
      return localize.ordinalNumber(date.getUTCMinutes(), {
        unit: 'minute'
      });
    }
    return formatters.m(date, token);
  },
  s: function s(date, token, localize) {
    if (token === 'so') {
      return localize.ordinalNumber(date.getUTCSeconds(), {
        unit: 'second'
      });
    }
    return formatters.s(date, token);
  },
  S: function S(date, token) {
    return formatters.S(date, token);
  },
  X: function X(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    if (timezoneOffset === 0) {
      return 'Z';
    }
    switch (token) {
      case 'X':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      case 'XXXX':
      case 'XX':
        return formatTimezone(timezoneOffset);

      case 'XXXXX':
      case 'XXX':

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  x: function x(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'x':
        return formatTimezoneWithOptionalMinutes(timezoneOffset);

      case 'xxxx':
      case 'xx':
        return formatTimezone(timezoneOffset);

      case 'xxxxx':
      case 'xxx':

      default:
        return formatTimezone(timezoneOffset, ':');
    }
  },
  O: function O(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'O':
      case 'OO':
      case 'OOO':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');

      case 'OOOO':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  z: function z(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timezoneOffset = originalDate.getTimezoneOffset();
    switch (token) {
      case 'z':
      case 'zz':
      case 'zzz':
        return 'GMT' + formatTimezoneShort(timezoneOffset, ':');

      case 'zzzz':
      default:
        return 'GMT' + formatTimezone(timezoneOffset, ':');
    }
  },
  t: function t(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = Math.floor(originalDate.getTime() / 1000);
    return addLeadingZeros(timestamp, token.length);
  },
  T: function T(date, token, _localize, options) {
    var originalDate = options._originalDate || date;
    var timestamp = originalDate.getTime();
    return addLeadingZeros(timestamp, token.length);
  }
};
function formatTimezoneShort(offset, dirtyDelimiter) {
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = Math.floor(absOffset / 60);
  var minutes = absOffset % 60;
  if (minutes === 0) {
    return sign + String(hours);
  }
  var delimiter = dirtyDelimiter || '';
  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);
}
function formatTimezoneWithOptionalMinutes(offset, dirtyDelimiter) {
  if (offset % 60 === 0) {
    var sign = offset > 0 ? '-' : '+';
    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);
  }
  return formatTimezone(offset, dirtyDelimiter);
}
function formatTimezone(offset, dirtyDelimiter) {
  var delimiter = dirtyDelimiter || '';
  var sign = offset > 0 ? '-' : '+';
  var absOffset = Math.abs(offset);
  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);
  var minutes = addLeadingZeros(absOffset % 60, 2);
  return sign + hours + delimiter + minutes;
}

function dateLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'P':
      return formatLong.date({
        width: 'short'
      });
    case 'PP':
      return formatLong.date({
        width: 'medium'
      });
    case 'PPP':
      return formatLong.date({
        width: 'long'
      });
    case 'PPPP':
    default:
      return formatLong.date({
        width: 'full'
      });
  }
}
function timeLongFormatter(pattern, formatLong) {
  switch (pattern) {
    case 'p':
      return formatLong.time({
        width: 'short'
      });
    case 'pp':
      return formatLong.time({
        width: 'medium'
      });
    case 'ppp':
      return formatLong.time({
        width: 'long'
      });
    case 'pppp':
    default:
      return formatLong.time({
        width: 'full'
      });
  }
}
function dateTimeLongFormatter(pattern, formatLong) {
  var matchResult = pattern.match(/(P+)(p+)?/) || [];
  var datePattern = matchResult[1];
  var timePattern = matchResult[2];
  if (!timePattern) {
    return dateLongFormatter(pattern, formatLong);
  }
  var dateTimeFormat;
  switch (datePattern) {
    case 'P':
      dateTimeFormat = formatLong.dateTime({
        width: 'short'
      });
      break;
    case 'PP':
      dateTimeFormat = formatLong.dateTime({
        width: 'medium'
      });
      break;
    case 'PPP':
      dateTimeFormat = formatLong.dateTime({
        width: 'long'
      });
      break;
    case 'PPPP':
    default:
      dateTimeFormat = formatLong.dateTime({
        width: 'full'
      });
      break;
  }
  return dateTimeFormat.replace('{{date}}', dateLongFormatter(datePattern, formatLong)).replace('{{time}}', timeLongFormatter(timePattern, formatLong));
}
var longFormatters = {
  p: timeLongFormatter,
  P: dateTimeLongFormatter
};

var protectedDayOfYearTokens = ['D', 'DD'];
var protectedWeekYearTokens = ['YY', 'YYYY'];
function isProtectedDayOfYearToken(token) {
  return protectedDayOfYearTokens.indexOf(token) !== -1;
}
function isProtectedWeekYearToken(token) {
  return protectedWeekYearTokens.indexOf(token) !== -1;
}
function throwProtectedError(token, format, input) {
  if (token === 'YYYY') {
    throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'YY') {
    throw new RangeError("Use `yy` instead of `YY` (in `".concat(format, "`) for formatting years to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'D') {
    throw new RangeError("Use `d` instead of `D` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  } else if (token === 'DD') {
    throw new RangeError("Use `dd` instead of `DD` (in `".concat(format, "`) for formatting days of the month to the input `").concat(input, "`; see: https://git.io/fxCyr"));
  }
}

var formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g;

var longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;
var escapedStringRegExp = /^'([^]*?)'?$/;
var doubleQuoteRegExp = /''/g;
var unescapedLatinCharacterRegExp = /[a-zA-Z]/;

function format(dirtyDate, dirtyFormatStr, dirtyOptions) {
  requiredArgs(2, arguments);
  var formatStr = String(dirtyFormatStr);
  var options = dirtyOptions || {};
  var locale$1 = options.locale || locale;
  var localeFirstWeekContainsDate = locale$1.options && locale$1.options.firstWeekContainsDate;
  var defaultFirstWeekContainsDate = localeFirstWeekContainsDate == null ? 1 : toInteger(localeFirstWeekContainsDate);
  var firstWeekContainsDate = options.firstWeekContainsDate == null ? defaultFirstWeekContainsDate : toInteger(options.firstWeekContainsDate);

  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {
    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively');
  }
  var localeWeekStartsOn = locale$1.options && locale$1.options.weekStartsOn;
  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);
  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);

  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {
    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively');
  }
  if (!locale$1.localize) {
    throw new RangeError('locale must contain localize property');
  }
  if (!locale$1.formatLong) {
    throw new RangeError('locale must contain formatLong property');
  }
  var originalDate = toDate(dirtyDate);
  if (!isValid(originalDate)) {
    throw new RangeError('Invalid time value');
  }

  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);
  var utcDate = subMilliseconds(originalDate, timezoneOffset);
  var formatterOptions = {
    firstWeekContainsDate: firstWeekContainsDate,
    weekStartsOn: weekStartsOn,
    locale: locale$1,
    _originalDate: originalDate
  };
  var result = formatStr.match(longFormattingTokensRegExp).map(function (substring) {
    var firstCharacter = substring[0];
    if (firstCharacter === 'p' || firstCharacter === 'P') {
      var longFormatter = longFormatters[firstCharacter];
      return longFormatter(substring, locale$1.formatLong, formatterOptions);
    }
    return substring;
  }).join('').match(formattingTokensRegExp).map(function (substring) {
    if (substring === "''") {
      return "'";
    }
    var firstCharacter = substring[0];
    if (firstCharacter === "'") {
      return cleanEscapedString(substring);
    }
    var formatter = formatters$1[firstCharacter];
    if (formatter) {
      if (!options.useAdditionalWeekYearTokens && isProtectedWeekYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, dirtyDate);
      }
      if (!options.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(substring)) {
        throwProtectedError(substring, dirtyFormatStr, dirtyDate);
      }
      return formatter(utcDate, substring, locale$1.localize, formatterOptions);
    }
    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {
      throw new RangeError('Format string contains an unescaped latin alphabet character `' + firstCharacter + '`');
    }
    return substring;
  }).join('');
  return result;
}
function cleanEscapedString(input) {
  return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, "'");
}

var useInboxTableConfig = function useInboxTableConfig(_ref) {
  var _formState$tableForm, _formState$tableForm2, _formState$tableForm7, _formState$searchForm;
  var parentRoute = _ref.parentRoute,
    onPageSizeChange = _ref.onPageSizeChange,
    formState = _ref.formState,
    totalCount = _ref.totalCount,
    table = _ref.table,
    dispatch = _ref.dispatch,
    onSortingByData = _ref.onSortingByData;
  var GetCell = function GetCell(value) {
    return /*#__PURE__*/React__default.createElement("span", {
      className: "cell-text styled-cell"
    }, value);
  };
  var GetStatusCell = function GetStatusCell(value) {
    return value === "Active" || value > 0 ? /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-success"
    }, value) : /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-error"
    }, value);
  };
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tableColumnConfig = React.useMemo(function () {
    return [{
      Header: t("BPA_APPLICATION_NUMBER_LABEL"),
      accessor: "applicationNo",
      disableSortBy: true,
      Cell: function Cell(_ref2) {
        var row = _ref2.row;
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: window.location.href.includes("/citizen") ? parentRoute + "/bpa/" + row.original["applicationId"] : parentRoute + "/inbox/bpa/" + row.original["applicationId"]
        }, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, row.original["applicationId"])));
      }
    }, {
      Header: t("CS_APPLICATION_DETAILS_APPLICATION_DATE"),
      accessor: "applicationDate",
      Cell: function Cell(_ref3) {
        var _row$original, _row$original2;
        var row = _ref3.row;
        return (_row$original = row.original) !== null && _row$original !== void 0 && _row$original["date"] ? GetCell(format(new Date((_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2["date"]), 'dd/MM/yyyy')) : "";
      }
    }, {
      Header: t("ES_INBOX_LOCALITY"),
      accessor: function accessor(row) {
        return t(row === null || row === void 0 ? void 0 : row.locality);
      },
      disableSortBy: true
    }, {
      Header: t("EVENTS_STATUS_LABEL"),
      accessor: function accessor(row) {
        return row !== null && row !== void 0 && row.state ? t("WF_" + (row === null || row === void 0 ? void 0 : row.businessService) + "_" + (row === null || row === void 0 ? void 0 : row.state)) : t("WF_" + (row === null || row === void 0 ? void 0 : row.businessService) + "_" + (row === null || row === void 0 ? void 0 : row.status));
      },
      disableSortBy: true
    }, {
      Header: t("WF_INBOX_HEADER_CURRENT_OWNER"),
      accessor: function accessor(row) {
        return t(row === null || row === void 0 ? void 0 : row.owner);
      },
      disableSortBy: true
    }, {
      Header: t("BPA_SEARCH_APPLICATION_TYPE_LABEL"),
      accessor: function accessor(row) {
        return t(row === null || row === void 0 ? void 0 : row.applicationType);
      },
      disableSortBy: true
    }, {
      Header: t("ES_INBOX_SLA_DAYS_REMAINING"),
      accessor: function accessor(row) {
        return GetStatusCell(row === null || row === void 0 ? void 0 : row.sla);
      }
    }];
  });
  return {
    getCellProps: function getCellProps(cellInfo) {
      return {
        style: {
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    disableSort: false,
    autoSort: false,
    manualPagination: true,
    initSortId: "applicationDate",
    onPageSizeChange: onPageSizeChange,
    currentPage: ((_formState$tableForm = formState.tableForm) === null || _formState$tableForm === void 0 ? void 0 : _formState$tableForm.offset) / ((_formState$tableForm2 = formState.tableForm) === null || _formState$tableForm2 === void 0 ? void 0 : _formState$tableForm2.limit),
    onNextPage: function onNextPage() {
      var _formState$tableForm3, _formState$tableForm4;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm3 = formState.tableForm) === null || _formState$tableForm3 === void 0 ? void 0 : _formState$tableForm3.offset) + parseInt((_formState$tableForm4 = formState.tableForm) === null || _formState$tableForm4 === void 0 ? void 0 : _formState$tableForm4.limit)
        })
      });
    },
    onPrevPage: function onPrevPage() {
      var _formState$tableForm5, _formState$tableForm6;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm5 = formState.tableForm) === null || _formState$tableForm5 === void 0 ? void 0 : _formState$tableForm5.offset) - parseInt((_formState$tableForm6 = formState.tableForm) === null || _formState$tableForm6 === void 0 ? void 0 : _formState$tableForm6.limit)
        })
      });
    },
    pageSizeLimit: (_formState$tableForm7 = formState.tableForm) === null || _formState$tableForm7 === void 0 ? void 0 : _formState$tableForm7.limit,
    onSort: onSortingByData,
    totalRecords: totalCount,
    onSearch: formState === null || formState === void 0 ? void 0 : (_formState$searchForm = formState.searchForm) === null || _formState$searchForm === void 0 ? void 0 : _formState$searchForm.message,
    onLastPage: function onLastPage() {
      var _formState$tableForm8;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: Math.ceil(totalCount / 10) * 10 - parseInt((_formState$tableForm8 = formState.tableForm) === null || _formState$tableForm8 === void 0 ? void 0 : _formState$tableForm8.limit)
        })
      });
    },
    onFirstPage: function onFirstPage() {
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: 0
        })
      });
    },
    data: table,
    columns: tableColumnConfig
  };
};

var useInboxMobileCardsData = function useInboxMobileCardsData(_ref) {
  var table = _ref.table,
    getRedirectionLink = _ref.getRedirectionLink;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var dataForMobileInboxCards = table === null || table === void 0 ? void 0 : table.map(function (_ref2) {
    var _ref3;
    var applicationId = _ref2.applicationId,
      date = _ref2.date,
      applicationType = _ref2.applicationType,
      businessService = _ref2.businessService,
      locality = _ref2.locality,
      status = _ref2.status,
      owner = _ref2.owner,
      sla = _ref2.sla,
      state = _ref2.state;
    return _ref3 = {}, _ref3[t("BPA_APPLICATION_NUMBER_LABEL")] = applicationId, _ref3[t("CS_APPLICATION_DETAILS_APPLICATION_DATE")] = format(new Date(date), 'dd/MM/yyyy'), _ref3[t("BPA_SEARCH_APPLICATION_TYPE_LABEL")] = t(applicationType), _ref3[t("ES_INBOX_LOCALITY")] = t(locality), _ref3[t("EVENTS_STATUS_LABEL")] = state ? t("WF_" + businessService + "_" + state) : t("WF_" + businessService + "_" + status), _ref3[t("WF_INBOX_HEADER_CURRENT_OWNER")] = owner, _ref3[t("ES_INBOX_SLA_DAYS_REMAINING")] = sla, _ref3;
  });
  var MobileSortFormValues = function MobileSortFormValues() {
    var sortOrderOptions = [{
      code: "DESC",
      i18nKey: "ES_COMMON_SORT_BY_DESC"
    }, {
      code: "ASC",
      i18nKey: "ES_COMMON_SORT_BY_ASC"
    }];
    var _useFormContext = reactHookForm.useFormContext(),
      controlSortForm = _useFormContext.control;
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "sortOrder",
      control: controlSortForm,
      render: function render(_ref4) {
        var onChange = _ref4.onChange,
          value = _ref4.value;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          onSelect: function onSelect(e) {
            onChange(e.code);
          },
          selectedOption: sortOrderOptions.filter(function (option) {
            return option.code === value;
          })[0],
          optionsKey: "i18nKey",
          name: "sortOrder",
          options: sortOrderOptions
        });
      }
    }));
  };
  return {
    data: dataForMobileInboxCards,
    isTwoDynamicPrefix: true,
    linkPrefix: window.location.href.includes("/citizen") ? "/digit-ui/citizen/obps/" : "/digit-ui/employee/obps/",
    getRedirectionLink: getRedirectionLink,
    serviceRequestIdKey: "applicationNo",
    MobileSortFormValues: MobileSortFormValues
  };
};

var Inbox = function Inbox(_ref) {
  var parentRoute = _ref.parentRoute;
  window.scroll(0, 0);
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var searchFormDefaultValues = {};
  var filterFormDefaultValues = {
    moduleName: "bpa-services",
    applicationStatus: [],
    locality: [],
    assignee: "ASSIGNED_TO_ALL",
    applicationType: []
  };
  var tableOrderFormDefaultValues = {
    sortBy: "",
    limit: Digit.Utils.browser.isMobile() ? 50 : 10,
    offset: 0,
    sortOrder: "DESC"
  };
  function formReducer(state, payload) {
    switch (payload.action) {
      case "mutateSearchForm":
        Digit.SessionStorage.set("OBPS.INBOX", _extends({}, state, {
          searchForm: payload.data
        }));
        return _extends({}, state, {
          searchForm: payload.data
        });
      case "mutateFilterForm":
        Digit.SessionStorage.set("OBPS.INBOX", _extends({}, state, {
          filterForm: payload.data
        }));
        return _extends({}, state, {
          filterForm: payload.data
        });
      case "mutateTableForm":
        Digit.SessionStorage.set("OBPS.INBOX", _extends({}, state, {
          tableForm: payload.data
        }));
        return _extends({}, state, {
          tableForm: payload.data
        });
    }
  }
  var InboxObjectInSessionStorage = Digit.SessionStorage.get("OBPS.INBOX");
  var onSearchFormReset = function onSearchFormReset(setSearchFormValue) {
    setSearchFormValue("mobileNumber", null);
    setSearchFormValue("applicationNo", null);
    dispatch({
      action: "mutateSearchForm",
      data: searchFormDefaultValues
    });
  };
  var onFilterFormReset = function onFilterFormReset(setFilterFormValue) {
    setFilterFormValue("moduleName", "bpa-services");
    setFilterFormValue("applicationStatus", "");
    setFilterFormValue("locality", []);
    setFilterFormValue("assignee", "ASSIGNED_TO_ALL");
    setFilterFormValue("applicationType", []);
    dispatch({
      action: "mutateFilterForm",
      data: filterFormDefaultValues
    });
  };
  var onSortFormReset = function onSortFormReset(setSortFormValue) {
    setSortFormValue("sortOrder", "DESC");
    dispatch({
      action: "mutateTableForm",
      data: tableOrderFormDefaultValues
    });
  };
  var formInitValue = React.useMemo(function () {
    return InboxObjectInSessionStorage || {
      filterForm: filterFormDefaultValues,
      searchForm: searchFormDefaultValues,
      tableForm: tableOrderFormDefaultValues
    };
  }, [Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.filterForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.searchForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.tableForm) || {})]);
  var _useReducer = React.useReducer(formReducer, formInitValue),
    formState = _useReducer[0],
    dispatch = _useReducer[1];
  var onPageSizeChange = function onPageSizeChange(e) {
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        limit: e.target.value
      })
    });
  };
  var onSortingByData = function onSortingByData(e) {
    if (e.length > 0) {
      var _e$ = e[0],
        id = _e$.id,
        desc = _e$.desc;
      var sortOrder = desc ? "DESC" : "ASC";
      var sortBy = id;
      if (!(formState.tableForm.sortBy === sortBy && formState.tableForm.sortOrder === sortOrder)) {
        dispatch({
          action: "mutateTableForm",
          data: _extends({}, formState.tableForm, {
            sortBy: id,
            sortOrder: desc ? "DESC" : "ASC"
          })
        });
      }
    }
  };
  var onMobileSortOrderData = function onMobileSortOrderData(data) {
    var sortOrder = data.sortOrder;
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        sortOrder: sortOrder
      })
    });
  };
  var getRedirectionLink = function getRedirectionLink(bService) {
    var redirectBS = "";
    if (bService === "BPAREG") {
      redirectBS = "search/application/stakeholder";
    } else {
      redirectBS = window.location.href.includes("/citizen") ? "bpa" : "search/application/bpa";
    }
    return redirectBS;
  };
  var _Digit$Hooks$useBound = Digit.Hooks.useBoundaryLocalities(tenantId, "revenue", {}, t),
    localitiesForEmployeesCurrentTenant = _Digit$Hooks$useBound.data,
    loadingLocalitiesForEmployeesCurrentTenant = _Digit$Hooks$useBound.isLoading;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAInbox({
      tenantId: tenantId,
      filters: _extends({}, formState)
    }),
    isInboxLoading = _Digit$Hooks$obps$use.isLoading,
    _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use.data;
  _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use2 === void 0 ? {} : _Digit$Hooks$obps$use2;
  var table = _Digit$Hooks$obps$use2.table,
    statuses = _Digit$Hooks$obps$use2.statuses,
    totalCount = _Digit$Hooks$obps$use2.totalCount;
  var PropsForInboxLinks = {
    logoIcon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.CaseIcon, null),
    headerText: "CS_COMMON_OBPS",
    links: [{
      text: t("BPA_SEARCH_PAGE_TITLE"),
      link: window.location.href.includes("/citizen") ? "/digit-ui/citizen/obps/search/application" : "/digit-ui/employee/obps/search/application",
      businessService: "BPA",
      roles: ["BPAREG_EMPLOYEE", "BPAREG_APPROVER", "BPAREG_DOC_VERIFIER", "BPAREG_DOC_VERIFIER"]
    }]
  };
  var SearchFormFields = React.useCallback(function (_ref2) {
    var registerRef = _ref2.registerRef,
      searchFormState = _ref2.searchFormState,
      searchFieldComponents = _ref2.searchFieldComponents;
    return /*#__PURE__*/React__default.createElement(SearchFormFieldsComponents, {
      registerRef: registerRef,
      searchFormState: searchFormState,
      searchFieldComponents: searchFieldComponents
    });
  }, []);
  var FilterFormFields = React.useCallback(function (_ref3) {
    var registerRef = _ref3.registerRef,
      controlFilterForm = _ref3.controlFilterForm,
      setFilterFormValue = _ref3.setFilterFormValue,
      getFilterFormValue = _ref3.getFilterFormValue;
    return /*#__PURE__*/React__default.createElement(FilterFormFieldsComponent, {
      statuses: statuses,
      isInboxLoading: isInboxLoading,
      registerRef: registerRef,
      controlFilterForm: controlFilterForm,
      setFilterFormValue: setFilterFormValue,
      filterFormState: formState === null || formState === void 0 ? void 0 : formState.filterForm,
      getFilterFormValue: getFilterFormValue,
      localitiesForEmployeesCurrentTenant: localitiesForEmployeesCurrentTenant,
      loadingLocalitiesForEmployeesCurrentTenant: loadingLocalitiesForEmployeesCurrentTenant
    });
  }, [statuses, isInboxLoading, localitiesForEmployeesCurrentTenant, loadingLocalitiesForEmployeesCurrentTenant]);
  var onSearchFormSubmit = function onSearchFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateSearchForm",
      data: data
    });
  };
  var onFilterFormSubmit = function onFilterFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateFilterForm",
      data: data
    });
  };
  var propsForSearchForm = {
    SearchFormFields: SearchFormFields,
    onSearchFormSubmit: onSearchFormSubmit,
    searchFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.searchForm,
    resetSearchFormDefaultValues: searchFormDefaultValues,
    onSearchFormReset: onSearchFormReset
  };
  var propsForFilterForm = {
    FilterFormFields: FilterFormFields,
    onFilterFormSubmit: onFilterFormSubmit,
    filterFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.filterForm,
    resetFilterFormDefaultValues: filterFormDefaultValues,
    onFilterFormReset: onFilterFormReset
  };
  var propsForInboxTable = useInboxTableConfig(_extends({}, {
    parentRoute: parentRoute,
    onPageSizeChange: onPageSizeChange,
    formState: formState,
    totalCount: totalCount,
    table: table,
    dispatch: dispatch,
    onSortingByData: onSortingByData
  }));
  var propsForInboxMobileCards = useInboxMobileCardsData({
    parentRoute: parentRoute,
    table: table,
    getRedirectionLink: getRedirectionLink
  });
  var propsForMobileSortForm = {
    onMobileSortOrderData: onMobileSortOrderData,
    sortFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.tableForm,
    onSortFormReset: onSortFormReset
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_INBOX"), totalCount ? /*#__PURE__*/React__default.createElement("p", {
    className: "inbox-count"
  }, totalCount) : null), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InboxComposer, _extends({
    isInboxLoading: isInboxLoading,
    PropsForInboxLinks: PropsForInboxLinks
  }, propsForSearchForm, propsForFilterForm, propsForMobileSortForm, {
    propsForInboxTable: propsForInboxTable,
    propsForInboxMobileCards: propsForInboxMobileCards,
    formState: formState
  })));
};

var App = function App(_ref) {
  var _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi, _Digit3, _Digit3$ComponentRegi, _Digit4, _Digit4$ComponentRegi, _Digit5, _Digit5$ComponentRegi, _Digit6, _Digit6$ComponentRegi, _Digit7, _Digit7$ComponentRegi, _Digit8, _Digit8$ComponentRegi, _Digit9, _Digit9$ComponentRegi, _Digit10, _Digit10$ComponentReg, _Digit11, _Digit11$ComponentReg, _Digit12, _Digit12$ComponentReg;
  var path = _ref.path;
  var location = reactRouterDom.useLocation();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var BPACitizenHomeScreen = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('BPACitizenHomeScreen');
  var CreateEDCR = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('ObpsCreateEDCR');
  var CreateOCEDCR = (_Digit3 = Digit) === null || _Digit3 === void 0 ? void 0 : (_Digit3$ComponentRegi = _Digit3.ComponentRegistryService) === null || _Digit3$ComponentRegi === void 0 ? void 0 : _Digit3$ComponentRegi.getComponent('ObpsCreateOCEDCR');
  var NewBuildingPermit = (_Digit4 = Digit) === null || _Digit4 === void 0 ? void 0 : (_Digit4$ComponentRegi = _Digit4.ComponentRegistryService) === null || _Digit4$ComponentRegi === void 0 ? void 0 : _Digit4$ComponentRegi.getComponent('ObpsNewBuildingPermit');
  var OCBuildingPermit = (_Digit5 = Digit) === null || _Digit5 === void 0 ? void 0 : (_Digit5$ComponentRegi = _Digit5.ComponentRegistryService) === null || _Digit5$ComponentRegi === void 0 ? void 0 : _Digit5$ComponentRegi.getComponent('ObpsOCBuildingPermit');
  var StakeholderRegistration = (_Digit6 = Digit) === null || _Digit6 === void 0 ? void 0 : (_Digit6$ComponentRegi = _Digit6.ComponentRegistryService) === null || _Digit6$ComponentRegi === void 0 ? void 0 : _Digit6$ComponentRegi.getComponent('ObpsStakeholderRegistration');
  var EdcrInbox = (_Digit7 = Digit) === null || _Digit7 === void 0 ? void 0 : (_Digit7$ComponentRegi = _Digit7.ComponentRegistryService) === null || _Digit7$ComponentRegi === void 0 ? void 0 : _Digit7$ComponentRegi.getComponent('ObpsEdcrInbox');
  var BpaApplicationDetail = (_Digit8 = Digit) === null || _Digit8 === void 0 ? void 0 : (_Digit8$ComponentRegi = _Digit8.ComponentRegistryService) === null || _Digit8$ComponentRegi === void 0 ? void 0 : _Digit8$ComponentRegi.getComponent('ObpsCitizenBpaApplicationDetail');
  var BPASendToArchitect = (_Digit9 = Digit) === null || _Digit9 === void 0 ? void 0 : (_Digit9$ComponentRegi = _Digit9.ComponentRegistryService) === null || _Digit9$ComponentRegi === void 0 ? void 0 : _Digit9$ComponentRegi.getComponent('ObpsBPASendToArchitect');
  var OCSendToArchitect = (_Digit10 = Digit) === null || _Digit10 === void 0 ? void 0 : (_Digit10$ComponentReg = _Digit10.ComponentRegistryService) === null || _Digit10$ComponentReg === void 0 ? void 0 : _Digit10$ComponentReg.getComponent('ObpsOCSendToArchitect');
  var BPASendBackToCitizen = (_Digit11 = Digit) === null || _Digit11 === void 0 ? void 0 : (_Digit11$ComponentReg = _Digit11.ComponentRegistryService) === null || _Digit11$ComponentReg === void 0 ? void 0 : _Digit11$ComponentReg.getComponent('ObpsBPASendBackToCitizen');
  var OCSendBackToCitizen = (_Digit12 = Digit) === null || _Digit12 === void 0 ? void 0 : (_Digit12$ComponentReg = _Digit12.ComponentRegistryService) === null || _Digit12$ComponentReg === void 0 ? void 0 : _Digit12$ComponentReg.getComponent('ObpsOCSendBackToCitizen');
  var isDocScreenAfterEdcr = sessionStorage.getItem("clickOnBPAApplyAfterEDCR") === "true" ? true : false;
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !location.pathname.includes("response") && !location.pathname.includes("openlink/stakeholder") && !location.pathname.includes("/acknowledgement") && !isDocScreenAfterEdcr && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/home",
    component: BPACitizenHomeScreen
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/search/application",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(Search, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edcrscrutiny/apply",
    component: CreateEDCR
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edcrscrutiny/oc-apply",
    component: CreateOCEDCR
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bpa/:applicationType/:serviceType",
    component: NewBuildingPermit
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/ocbpa/:applicationType/:serviceType",
    component: OCBuildingPermit
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/stakeholder/apply",
    component: StakeholderRegistration
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/openlink/stakeholder/apply",
    component: StakeholderRegistration
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/my-applications",
    component: MyApplication
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bpa/inbox",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(Inbox, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/edcr/inbox",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(EdcrInbox, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/stakeholder/:id",
    component: ApplicationDetails
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bpa/:id",
    component: BpaApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/editApplication/bpa/:tenantId/:applicationNo",
    component: BPASendToArchitect
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/editApplication/ocbpa/:tenantId/:applicationNo",
    component: OCSendToArchitect
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sendbacktocitizen/bpa/:tenantId/:applicationNo",
    component: BPASendBackToCitizen
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/sendbacktocitizen/ocbpa/:tenantId/:applicationNo",
    component: OCSendBackToCitizen
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/response",
    component: OBPSResponse
  })));
};

var FilterFormFieldsComponent$1 = function FilterFormFieldsComponent(_ref) {
  var statuses = _ref.statuses,
    isInboxLoading = _ref.isInboxLoading,
    controlFilterForm = _ref.controlFilterForm,
    setFilterFormValue = _ref.setFilterFormValue;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var availableOptions = [{
    code: "ASSIGNED_TO_ME",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ME")
  }, {
    code: "ASSIGNED_TO_ALL",
    name: "" + t("ES_INBOX_ASSIGNED_TO_ALL")
  }];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "StakeholderRegistraition", "TradeTypetoRoleMapping", {
      select: function select(data) {
        var _data$StakeholderRegi;
        return data === null || data === void 0 ? void 0 : (_data$StakeholderRegi = data.StakeholderRegistraition) === null || _data$StakeholderRegi === void 0 ? void 0 : _data$StakeholderRegi.TradeTypetoRoleMapping.reduce(function (accumulator, currentObject) {
          var identifier = currentObject.tradeType.split(".")[0];
          if (accumulator.find(function (el) {
            return el.i18nKey.includes(identifier);
          })) return accumulator;else return [].concat(accumulator, [{
            role: currentObject.role[0],
            i18nKey: "TRADELICENSE_TRADETYPE_" + currentObject.tradeType.split(".")[0],
            tradeType: currentObject.tradeType,
            identifier: identifier
          }]);
        }, []);
      }
    }),
    stakeholderServiceTypes = _Digit$Hooks$obps$use.data,
    stakeholderServiceTypesLoading = _Digit$Hooks$obps$use.isLoading;
  var selectedBusinessService = reactHookForm.useWatch({
    control: controlFilterForm,
    name: "businessService",
    defaultValue: null
  });
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "assignee",
    control: controlFilterForm,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          props.onChange(e.code);
        },
        selectedOption: availableOptions.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionsKey: "name",
        name: "assignee",
        options: availableOptions
      });
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "businessService",
    control: controlFilterForm,
    render: function render(props) {
      return stakeholderServiceTypesLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontSize: "18px",
          fontWeight: "600"
        }
      }, t("BPA_LICENSE_TYPE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          setFilterFormValue("applicationStatus", []);
          props.onChange(e);
        },
        selectedOption: props.value,
        optionsKey: "i18nKey",
        options: stakeholderServiceTypes
      }));
    }
  })), selectedBusinessService ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement("div", {
    className: "filter-label",
    style: {
      fontSize: "18px",
      fontWeight: "600"
    }
  }, t("ACTION_TEST_APPLICATION_STATUS")), /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "applicationStatus",
    control: controlFilterForm,
    render: function render(props) {
      function changeItemCheckStatus(value) {
        props.onChange(value);
      }
      var renderStatusCheckBoxes = React.useMemo(function () {
        var _statuses$filter;
        return statuses === null || statuses === void 0 ? void 0 : (_statuses$filter = statuses.filter(function (e) {
          return e.businessservice === selectedBusinessService.identifier;
        })) === null || _statuses$filter === void 0 ? void 0 : _statuses$filter.map(function (status, index) {
          var _props$value2;
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
            key: index,
            onChange: function onChange(e) {
              var _props$value;
              return e.target.checked ? changeItemCheckStatus([].concat(props.value, [status === null || status === void 0 ? void 0 : status.statusid])) : changeItemCheckStatus((_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.filter(function (id) {
                return id !== (status === null || status === void 0 ? void 0 : status.statusid);
              }));
            },
            checked: (_props$value2 = props.value) === null || _props$value2 === void 0 ? void 0 : _props$value2.includes(status === null || status === void 0 ? void 0 : status.statusid),
            label: t("WF_" + status.businessservice + "_" + status.applicationstatus) + " (" + status.count + ")"
          });
        });
      }, [props.value, statuses, selectedBusinessService]);
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, isInboxLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, renderStatusCheckBoxes));
    }
  })) : null);
};

var SearchFormFieldsComponents$1 = function SearchFormFieldsComponents(_ref) {
  var _searchFormState$erro5, _searchFormState$erro6, _searchFormState$erro7, _searchFormState$erro8;
  var registerRef = _ref.registerRef,
    searchFormState = _ref.searchFormState,
    searchFieldComponents = _ref.searchFieldComponents;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  if (!isMobile) {
    var _searchFormState$erro, _searchFormState$erro2, _searchFormState$erro3, _searchFormState$erro4;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
      className: "search-container",
      style: {
        width: "auto",
        marginLeft: "24px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "search-complaint-container"
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "complaint-input-container",
      style: {
        textAlign: "start"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      name: "applicationNo",
      inputRef: registerRef({})
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
      name: "mobileNumber",
      type: "number",
      inputRef: registerRef({
        minLength: {
          value: 10,
          message: t("CORE_COMMON_MOBILE_ERROR")
        },
        maxLength: {
          value: 10,
          message: t("CORE_COMMON_MOBILE_ERROR")
        },
        pattern: {
          value: /[6789][0-9]{9}/,
          message: t("CORE_COMMON_MOBILE_ERROR")
        }
      })
    }), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro = searchFormState.errors) !== null && _searchFormState$erro !== void 0 && (_searchFormState$erro2 = _searchFormState$erro["mobileNumber"]) !== null && _searchFormState$erro2 !== void 0 && _searchFormState$erro2.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro3 = searchFormState.errors) === null || _searchFormState$erro3 === void 0 ? void 0 : (_searchFormState$erro4 = _searchFormState$erro3["mobileNumber"]) === null || _searchFormState$erro4 === void 0 ? void 0 : _searchFormState$erro4.message) : null), /*#__PURE__*/React__default.createElement("div", {
      className: "search-action-wrapper",
      style: {
        width: "100%"
      }
    }, searchFieldComponents)))));
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    name: "applicationNo",
    inputRef: registerRef({})
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("CORE_COMMON_MOBILE_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
    name: "mobileNumber",
    type: "number",
    inputRef: registerRef({
      minLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      maxLength: {
        value: 10,
        message: t("CORE_COMMON_MOBILE_ERROR")
      },
      pattern: {
        value: /[6789][0-9]{9}/,
        message: t("CORE_COMMON_MOBILE_ERROR")
      }
    })
  }), searchFormState !== null && searchFormState !== void 0 && (_searchFormState$erro5 = searchFormState.errors) !== null && _searchFormState$erro5 !== void 0 && (_searchFormState$erro6 = _searchFormState$erro5["mobileNumber"]) !== null && _searchFormState$erro6 !== void 0 && _searchFormState$erro6.message ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabelError, null, searchFormState === null || searchFormState === void 0 ? void 0 : (_searchFormState$erro7 = searchFormState.errors) === null || _searchFormState$erro7 === void 0 ? void 0 : (_searchFormState$erro8 = _searchFormState$erro7["mobileNumber"]) === null || _searchFormState$erro8 === void 0 ? void 0 : _searchFormState$erro8.message) : null));
};

var useInboxTableConfig$1 = function useInboxTableConfig(_ref) {
  var _formState$tableForm, _formState$tableForm2, _formState$tableForm7, _formState$searchForm;
  var parentRoute = _ref.parentRoute,
    onPageSizeChange = _ref.onPageSizeChange,
    formState = _ref.formState,
    totalCount = _ref.totalCount,
    table = _ref.table,
    dispatch = _ref.dispatch,
    onSortingByData = _ref.onSortingByData;
  var GetCell = function GetCell(value) {
    return /*#__PURE__*/React__default.createElement("span", {
      className: "cell-text styled-cell"
    }, value);
  };
  var GetStatusCell = function GetStatusCell(value) {
    return value === "Active" || value > 0 ? /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-success"
    }, value) : /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-error"
    }, value);
  };
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tableColumnConfig = React.useMemo(function () {
    return [{
      Header: t("BPA_APPLICATION_NUMBER_LABEL"),
      accessor: "applicationNo",
      Cell: function Cell(_ref2) {
        var row = _ref2.row;
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: parentRoute + "/stakeholder-inbox/stakeholder/" + row.original["applicationId"]
        }, /*#__PURE__*/React__default.createElement("span", {
          className: "link"
        }, row.original["applicationId"])));
      }
    }, {
      Header: t("CS_APPLICATION_DETAILS_APPLICATION_DATE"),
      accessor: "applicationDate",
      Cell: function Cell(_ref3) {
        var _row$original, _row$original2;
        var row = _ref3.row;
        return (_row$original = row.original) !== null && _row$original !== void 0 && _row$original["date"] ? GetCell(format(new Date((_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2["date"]), 'dd/MM/yyyy')) : "";
      }
    }, {
      Header: t("EVENTS_STATUS_LABEL"),
      accessor: function accessor(row) {
        return t("WF_" + (row === null || row === void 0 ? void 0 : row.businessService) + "_" + (row === null || row === void 0 ? void 0 : row.status));
      }
    }, {
      Header: t("WF_INBOX_HEADER_CURRENT_OWNER"),
      accessor: function accessor(row) {
        return row === null || row === void 0 ? void 0 : row.owner;
      }
    }, {
      Header: t("ES_INBOX_SLA_DAYS_REMAINING"),
      accessor: function accessor(row) {
        return GetStatusCell(row === null || row === void 0 ? void 0 : row.sla);
      }
    }];
  });
  return {
    getCellProps: function getCellProps(cellInfo) {
      return {
        style: {
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    disableSort: false,
    autoSort: false,
    manualPagination: true,
    initSortI: "applicationDate",
    onPageSizeChange: onPageSizeChange,
    currentPage: ((_formState$tableForm = formState.tableForm) === null || _formState$tableForm === void 0 ? void 0 : _formState$tableForm.offset) / ((_formState$tableForm2 = formState.tableForm) === null || _formState$tableForm2 === void 0 ? void 0 : _formState$tableForm2.limit),
    onNextPage: function onNextPage() {
      var _formState$tableForm3, _formState$tableForm4;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm3 = formState.tableForm) === null || _formState$tableForm3 === void 0 ? void 0 : _formState$tableForm3.offset) + parseInt((_formState$tableForm4 = formState.tableForm) === null || _formState$tableForm4 === void 0 ? void 0 : _formState$tableForm4.limit)
        })
      });
    },
    onPrevPage: function onPrevPage() {
      var _formState$tableForm5, _formState$tableForm6;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm5 = formState.tableForm) === null || _formState$tableForm5 === void 0 ? void 0 : _formState$tableForm5.offset) - parseInt((_formState$tableForm6 = formState.tableForm) === null || _formState$tableForm6 === void 0 ? void 0 : _formState$tableForm6.limit)
        })
      });
    },
    pageSizeLimit: (_formState$tableForm7 = formState.tableForm) === null || _formState$tableForm7 === void 0 ? void 0 : _formState$tableForm7.limit,
    onSort: onSortingByData,
    totalRecords: totalCount,
    onSearch: formState === null || formState === void 0 ? void 0 : (_formState$searchForm = formState.searchForm) === null || _formState$searchForm === void 0 ? void 0 : _formState$searchForm.message,
    onLastPage: function onLastPage() {
      var _formState$tableForm8;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: Math.ceil(totalCount / 10) * 10 - parseInt((_formState$tableForm8 = formState.tableForm) === null || _formState$tableForm8 === void 0 ? void 0 : _formState$tableForm8.limit)
        })
      });
    },
    onFirstPage: function onFirstPage() {
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: 0
        })
      });
    },
    data: table,
    columns: tableColumnConfig
  };
};

var useInboxMobileCardsData$1 = function useInboxMobileCardsData(_ref) {
  var parentRoute = _ref.parentRoute,
    table = _ref.table;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var dataForMobileInboxCards = table === null || table === void 0 ? void 0 : table.map(function (_ref2) {
    var _ref3;
    var applicationId = _ref2.applicationId,
      date = _ref2.date,
      businessService = _ref2.businessService,
      status = _ref2.status,
      owner = _ref2.owner,
      sla = _ref2.sla;
    return _ref3 = {}, _ref3[t("BPA_APPLICATION_NUMBER_LABEL")] = applicationId, _ref3[t("CS_APPLICATION_DETAILS_APPLICATION_DATE")] = format(new Date(date), 'dd/MM/yyyy'), _ref3[t("EVENTS_STATUS_LABEL")] = t("WF_" + businessService + "_" + status), _ref3[t("WF_INBOX_HEADER_CURRENT_OWNER")] = owner, _ref3[t("ES_INBOX_SLA_DAYS_REMAINING")] = sla, _ref3;
  });
  var MobileSortFormValues = function MobileSortFormValues() {
    var sortOrderOptions = [{
      code: "DESC",
      i18nKey: "ES_COMMON_SORT_BY_DESC"
    }, {
      code: "ASC",
      i18nKey: "ES_COMMON_SORT_BY_ASC"
    }];
    var _useFormContext = reactHookForm.useFormContext(),
      controlSortForm = _useFormContext.control;
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "sortOrder",
      control: controlSortForm,
      render: function render(_ref4) {
        var onChange = _ref4.onChange,
          value = _ref4.value;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          onSelect: function onSelect(e) {
            onChange(e.code);
          },
          selectedOption: sortOrderOptions.filter(function (option) {
            return option.code === value;
          })[0],
          optionsKey: "i18nKey",
          name: "sortOrder",
          options: sortOrderOptions
        });
      }
    }));
  };
  return {
    data: dataForMobileInboxCards,
    linkPrefix: parentRoute + "/stakeholder-inbox/stakeholder/",
    serviceRequestIdKey: t("BPA_APPLICATION_NUMBER_LABEL"),
    MobileSortFormValues: MobileSortFormValues
  };
};

var Inbox$1 = function Inbox(_ref) {
  var parentRoute = _ref.parentRoute;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getStateId();
  var searchFormDefaultValues = {};
  var filterFormDefaultValues = {
    moduleName: "BPAREG",
    applicationStatus: [],
    businessService: null,
    locality: [],
    assignee: "ASSIGNED_TO_ALL"
  };
  var tableOrderFormDefaultValues = {
    sortBy: "",
    limit: window.Digit.Utils.browser.isMobile() ? 50 : 10,
    offset: 0,
    sortOrder: "DESC"
  };
  function formReducer(state, payload) {
    switch (payload.action) {
      case "mutateSearchForm":
        Digit.SessionStorage.set("STAKEHOLDER.INBOX", _extends({}, state, {
          searchForm: payload.data
        }));
        return _extends({}, state, {
          searchForm: payload.data
        });
      case "mutateFilterForm":
        Digit.SessionStorage.set("STAKEHOLDER.INBOX", _extends({}, state, {
          filterForm: payload.data
        }));
        return _extends({}, state, {
          filterForm: payload.data
        });
      case "mutateTableForm":
        Digit.SessionStorage.set("STAKEHOLDER.INBOX", _extends({}, state, {
          tableForm: payload.data
        }));
        return _extends({}, state, {
          tableForm: payload.data
        });
    }
  }
  var InboxObjectInSessionStorage = Digit.SessionStorage.get("STAKEHOLDER.INBOX");
  var onSearchFormReset = function onSearchFormReset(setSearchFormValue) {
    setSearchFormValue("mobileNumber", null);
    setSearchFormValue("applicationNo", null);
    dispatch({
      action: "mutateSearchForm",
      data: searchFormDefaultValues
    });
  };
  var onFilterFormReset = function onFilterFormReset(setFilterFormValue) {
    setFilterFormValue("moduleName", "BPAREG");
    setFilterFormValue("applicationStatus", "");
    setFilterFormValue("locality", []);
    setFilterFormValue("assignee", "ASSIGNED_TO_ALL");
    dispatch({
      action: "mutateFilterForm",
      data: filterFormDefaultValues
    });
  };
  var onSortFormReset = function onSortFormReset(setSortFormValue) {
    setSortFormValue("sortOrder", "DESC");
    dispatch({
      action: "mutateTableForm",
      data: tableOrderFormDefaultValues
    });
  };
  var formInitValue = React.useMemo(function () {
    return InboxObjectInSessionStorage || {
      filterForm: filterFormDefaultValues,
      searchForm: searchFormDefaultValues,
      tableForm: tableOrderFormDefaultValues
    };
  }, [Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.filterForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.searchForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.tableForm) || {})]);
  var _useReducer = React.useReducer(formReducer, formInitValue),
    formState = _useReducer[0],
    dispatch = _useReducer[1];
  var onPageSizeChange = function onPageSizeChange(e) {
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        limit: e.target.value
      })
    });
  };
  var onSortingByData = function onSortingByData(e) {
    if (e.length > 0) {
      var _e$ = e[0],
        id = _e$.id,
        desc = _e$.desc;
      var sortOrder = desc ? "DESC" : "ASC";
      var sortBy = id;
      if (!(formState.tableForm.sortBy === sortBy && formState.tableForm.sortOrder === sortOrder)) {
        dispatch({
          action: "mutateTableForm",
          data: _extends({}, formState.tableForm, {
            sortBy: id,
            sortOrder: desc ? "DESC" : "ASC"
          })
        });
      }
    }
  };
  var onMobileSortOrderData = function onMobileSortOrderData(data) {
    var sortOrder = data.sortOrder;
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        sortOrder: sortOrder
      })
    });
  };
  var _Digit$Hooks$useBound = Digit.Hooks.useBoundaryLocalities(tenantId, "revenue", {}, t),
    localitiesForEmployeesCurrentTenant = _Digit$Hooks$useBound.data,
    loadingLocalitiesForEmployeesCurrentTenant = _Digit$Hooks$useBound.isLoading;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAInbox({
      tenantId: tenantId,
      filters: _extends({}, formState)
    }),
    isInboxLoading = _Digit$Hooks$obps$use.isLoading,
    _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use.data;
  _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use2 === void 0 ? {} : _Digit$Hooks$obps$use2;
  var table = _Digit$Hooks$obps$use2.table,
    statuses = _Digit$Hooks$obps$use2.statuses,
    totalCount = _Digit$Hooks$obps$use2.totalCount;
  var PropsForInboxLinks = {
    logoIcon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.CaseIcon, null),
    headerText: "CS_COMMON_OBPS",
    links: [{
      text: t("BPA_SEARCH_PAGE_TITLE"),
      link: "/digit-ui/employee/obps/search/application",
      businessService: "BPA",
      roles: ["BPAREG_EMPLOYEE", "BPAREG_APPROVER", "BPAREG_DOC_VERIFIER", "BPAREG_DOC_VERIFIER"]
    }]
  };
  var SearchFormFields = React.useCallback(function (_ref2) {
    var registerRef = _ref2.registerRef,
      searchFormState = _ref2.searchFormState,
      searchFieldComponents = _ref2.searchFieldComponents;
    return /*#__PURE__*/React__default.createElement(SearchFormFieldsComponents$1, {
      registerRef: registerRef,
      searchFormState: searchFormState,
      searchFieldComponents: searchFieldComponents
    });
  }, []);
  var FilterFormFields = React.useCallback(function (_ref3) {
    var registerRef = _ref3.registerRef,
      controlFilterForm = _ref3.controlFilterForm,
      setFilterFormValue = _ref3.setFilterFormValue,
      getFilterFormValue = _ref3.getFilterFormValue;
    return /*#__PURE__*/React__default.createElement(FilterFormFieldsComponent$1, {
      statuses: statuses,
      isInboxLoading: isInboxLoading,
      registerRef: registerRef,
      controlFilterForm: controlFilterForm,
      setFilterFormValue: setFilterFormValue,
      filterFormState: formState === null || formState === void 0 ? void 0 : formState.filterForm,
      getFilterFormValue: getFilterFormValue,
      localitiesForEmployeesCurrentTenant: localitiesForEmployeesCurrentTenant,
      loadingLocalitiesForEmployeesCurrentTenant: loadingLocalitiesForEmployeesCurrentTenant
    });
  }, [statuses, isInboxLoading, localitiesForEmployeesCurrentTenant, loadingLocalitiesForEmployeesCurrentTenant]);
  var onSearchFormSubmit = function onSearchFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateSearchForm",
      data: data
    });
  };
  var onFilterFormSubmit = function onFilterFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateFilterForm",
      data: data
    });
  };
  var propsForSearchForm = {
    SearchFormFields: SearchFormFields,
    onSearchFormSubmit: onSearchFormSubmit,
    searchFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.searchForm,
    resetSearchFormDefaultValues: searchFormDefaultValues,
    onSearchFormReset: onSearchFormReset
  };
  var propsForFilterForm = {
    FilterFormFields: FilterFormFields,
    onFilterFormSubmit: onFilterFormSubmit,
    filterFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.filterForm,
    resetFilterFormDefaultValues: filterFormDefaultValues,
    onFilterFormReset: onFilterFormReset
  };
  var propsForInboxTable = useInboxTableConfig$1(_extends({}, {
    parentRoute: parentRoute,
    onPageSizeChange: onPageSizeChange,
    formState: formState,
    totalCount: totalCount,
    table: table,
    dispatch: dispatch,
    onSortingByData: onSortingByData
  }));
  var propsForInboxMobileCards = useInboxMobileCardsData$1({
    parentRoute: parentRoute,
    table: table
  });
  var propsForMobileSortForm = {
    onMobileSortOrderData: onMobileSortOrderData,
    sortFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.tableForm,
    onSortFormReset: onSortFormReset
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_INBOX"), totalCount ? /*#__PURE__*/React__default.createElement("p", {
    className: "inbox-count"
  }, totalCount) : null), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InboxComposer, _extends({
    isInboxLoading: isInboxLoading,
    PropsForInboxLinks: PropsForInboxLinks
  }, propsForSearchForm, propsForFilterForm, propsForMobileSortForm, {
    propsForInboxTable: propsForInboxTable,
    propsForInboxMobileCards: propsForInboxMobileCards,
    formState: formState
  })));
};

var BPACitizenHomeScreen = function BPACitizenHomeScreen(_ref) {
  var _userInfo$info, _userInfo$info$roles, _sortParams$5, _sortParams$6;
  var userInfo = Digit.UserService.getUser();
  var userRoles = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : (_userInfo$info$roles = _userInfo$info.roles) === null || _userInfo$info$roles === void 0 ? void 0 : _userInfo$info$roles.map(function (roleData) {
    return roleData.code;
  });
  var stateCode = Digit.ULBService.getStateId();
  var _useState = React.useState(false),
    stakeHolderRoles = _useState[0],
    setStakeholderRoles = _useState[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    stakeHolderDetails = _Digit$Hooks$obps$use.data,
    stakeHolderDetailsLoading = _Digit$Hooks$obps$use.isLoading;
  var _useState2 = React.useState([]),
    bpaLinks = _useState2[0],
    setBpaLinks = _useState2[1];
  var state = Digit.ULBService.getStateId();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var location = reactRouterDom.useLocation();
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BPA_HOME_CREATE", {}),
    clearParams = _Digit$Hooks$useSessi[2];
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(state, "BPA", ["homePageUrlLinks"]),
    homePageUrlLinks = _Digit$Hooks$obps$use2.data,
    homePageUrlLinksLoading = _Digit$Hooks$obps$use2.isLoading;
  var _useState3 = React.useState(null),
    showToast = _useState3[0],
    setShowToast = _useState3[1];
  var _useState4 = React.useState("-"),
    totalCount = _useState4[0],
    setTotalCount = _useState4[1];
  var closeToast = function closeToast() {
    window.location.replace("/digit-ui/citizen/all-services");
    setShowToast(null);
  };
  var _useState5 = React.useState({
      applicationStatus: []
    }),
    searchParams = _useState5[0];
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _useState6 = React.useState(0),
    pageOffset = _useState6[0];
  var _useState7 = React.useState(window.Digit.Utils.browser.isMobile() ? 50 : 10),
    pageSize = _useState7[0];
  var _useState8 = React.useState([{
      id: "createdTime",
      sortOrder: "DESC"
    }]),
    sortParams = _useState8[0];
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useArchitectInbox({
      tenantId: stateCode,
      moduleName: "bpa-services",
      businessService: ["BPA_LOW", "BPA", "BPA_OC"],
      filters: {
        searchForm: _extends({}, searchParams),
        tableForm: {
          sortBy: sortParams === null || sortParams === void 0 ? void 0 : (_sortParams$5 = sortParams[0]) === null || _sortParams$5 === void 0 ? void 0 : _sortParams$5.id,
          limit: pageSize,
          offset: pageOffset,
          sortOrder: sortParams === null || sortParams === void 0 ? void 0 : (_sortParams$6 = sortParams[0]) === null || _sortParams$6 === void 0 ? void 0 : _sortParams$6.sortOrder
        },
        filterForm: {
          moduleName: "bpa-services",
          businessService: [],
          applicationStatus: searchParams === null || searchParams === void 0 ? void 0 : searchParams.applicationStatus,
          locality: [],
          assignee: "ASSIGNED_TO_ALL"
        }
      },
      config: {},
      withEDCRData: false
    }),
    bpaLoading = _Digit$Hooks$obps$use3.isLoading,
    bpaInboxData = _Digit$Hooks$obps$use3.data;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useEDCRInbox({
      tenantId: stateCode,
      filters: {
        filterForm: {},
        searchForm: {},
        tableForm: {
          limit: 10,
          offset: 0
        }
      }
    }),
    isEDCRInboxLoading = _Digit$Hooks$obps$use4.isLoading,
    _Digit$Hooks$obps$use5 = _Digit$Hooks$obps$use4.data;
  _Digit$Hooks$obps$use5 = _Digit$Hooks$obps$use5 === void 0 ? {} : _Digit$Hooks$obps$use5;
  var edcrCount = _Digit$Hooks$obps$use5.totalCount;
  React.useEffect(function () {
    if (location.pathname === "/digit-ui/citizen/obps/home") {
      Digit.SessionStorage.del("OBPS.INBOX");
      Digit.SessionStorage.del("STAKEHOLDER.INBOX");
    }
  }, [location.pathname]);
  React.useEffect(function () {
    if (!bpaLoading) {
      var totalCountofBoth = (bpaInboxData === null || bpaInboxData === void 0 ? void 0 : bpaInboxData.totalCount) || 0;
      setTotalCount(totalCountofBoth);
    }
  }, [bpaInboxData]);
  React.useEffect(function () {
    if (!stakeHolderDetailsLoading) {
      var _stakeHolderDetails$S, _stakeHolderDetails$S2;
      var roles = [];
      stakeHolderDetails === null || stakeHolderDetails === void 0 ? void 0 : (_stakeHolderDetails$S = stakeHolderDetails.StakeholderRegistraition) === null || _stakeHolderDetails$S === void 0 ? void 0 : (_stakeHolderDetails$S2 = _stakeHolderDetails$S.TradeTypetoRoleMapping) === null || _stakeHolderDetails$S2 === void 0 ? void 0 : _stakeHolderDetails$S2.map(function (type) {
        var _type$role;
        type === null || type === void 0 ? void 0 : (_type$role = type.role) === null || _type$role === void 0 ? void 0 : _type$role.map(function (role) {
          roles.push(role);
        });
      });
      var uniqueRoles = roles === null || roles === void 0 ? void 0 : roles.filter(function (item, i, ar) {
        return ar.indexOf(item) === i;
      });
      var isRoute = false;
      uniqueRoles === null || uniqueRoles === void 0 ? void 0 : uniqueRoles.map(function (unRole) {
        if (userRoles !== null && userRoles !== void 0 && userRoles.includes(unRole) && !isRoute) {
          isRoute = true;
        }
      });
      if (!isRoute) {
        setStakeholderRoles(false);
        setShowToast({
          key: "true",
          message: t("BPA_LOGIN_HOME_VALIDATION_MESSAGE_LABEL")
        });
      } else {
        setStakeholderRoles(true);
      }
    }
  }, [stakeHolderDetailsLoading]);
  React.useEffect(function () {
    var _homePageUrlLinks$BPA, _homePageUrlLinks$BPA2;
    if (!homePageUrlLinksLoading && (homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA === void 0 ? void 0 : (_homePageUrlLinks$BPA2 = _homePageUrlLinks$BPA.homePageUrlLinks) === null || _homePageUrlLinks$BPA2 === void 0 ? void 0 : _homePageUrlLinks$BPA2.length) > 0) {
      var _homePageUrlLinks$BPA3, _homePageUrlLinks$BPA4;
      var uniqueLinks = [];
      homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA3 = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA3 === void 0 ? void 0 : (_homePageUrlLinks$BPA4 = _homePageUrlLinks$BPA3.homePageUrlLinks) === null || _homePageUrlLinks$BPA4 === void 0 ? void 0 : _homePageUrlLinks$BPA4.map(function (linkData) {
        var _linkData$flow, _linkData$application, _linkData$serviceType;
        uniqueLinks.push({
          link: (linkData === null || linkData === void 0 ? void 0 : (_linkData$flow = linkData.flow) === null || _linkData$flow === void 0 ? void 0 : _linkData$flow.toLowerCase()) + "/" + (linkData === null || linkData === void 0 ? void 0 : (_linkData$application = linkData.applicationType) === null || _linkData$application === void 0 ? void 0 : _linkData$application.toLowerCase()) + "/" + (linkData === null || linkData === void 0 ? void 0 : (_linkData$serviceType = linkData.serviceType) === null || _linkData$serviceType === void 0 ? void 0 : _linkData$serviceType.toLowerCase()) + "/docs-required",
          i18nKey: t("BPA_HOME_" + (linkData === null || linkData === void 0 ? void 0 : linkData.applicationType) + "_" + (linkData === null || linkData === void 0 ? void 0 : linkData.serviceType) + "_LABEL"),
          state: {
            linkData: linkData
          },
          linkState: true
        });
      });
      setBpaLinks(uniqueLinks);
    }
  }, [!homePageUrlLinksLoading]);
  React.useEffect(function () {
    clearParams();
  }, []);
  Digit.SessionStorage.set("EDCR_BACK", "IS_EDCR_BACK");
  if (showToast) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: true,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    isDleteBtn: true,
    onClose: closeToast
  });
  if (stakeHolderDetailsLoading || !stakeHolderRoles || bpaLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }

  var homeDetails = [{
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.BPAHomeIcon, null),
    moduleName: t("ACTION_TEST_BPA_STAKE_HOLDER_HOME"),
    name: "employeeCard",
    isCitizen: true,
    kpis: [{
      count: !(bpaLoading || isEDCRInboxLoading) && totalCount && edcrCount ? totalCount + edcrCount : "-",
      label: t("BPA_PDF_TOTAL"),
      link: "/digit-ui/citizen/obps/bpa/inbox"
    }],
    links: [{
      count: !bpaLoading ? totalCount : "-",
      label: t("ES_COMMON_OBPS_INBOX_LABEL"),
      link: "/digit-ui/citizen/obps/bpa/inbox"
    }, {
      count: !isEDCRInboxLoading ? edcrCount : "-",
      label: t("ES_COMMON_EDCR_INBOX_LABEL"),
      link: "/digit-ui/citizen/obps/edcr/inbox"
    }],
    className: "CitizenHomeCard",
    styles: {
      padding: "0px",
      minWidth: "90%",
      minHeight: "90%"
    }
  }, {
    title: t("ACTION_TEST_EDCR_SCRUTINY"),
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EDCRIcon, {
      className: "fill-path-primary-main"
    }),
    links: [{
      link: "edcrscrutiny/apply",
      i18nKey: t("BPA_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")
    }, {
      link: "edcrscrutiny/oc-apply",
      i18nKey: t("BPA_OC_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")
    }],
    styles: {
      minWidth: "90%",
      minHeight: "90%"
    }
  }, {
    title: t("ACTION_TEST_BPA_STAKE_HOLDER_HOME"),
    Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.BPAIcon, {
      className: "fill-path-primary-main"
    }),
    links: bpaLinks,
    styles: {
      minWidth: "90%",
      minHeight: "90%"
    }
  }];
  var homeScreen = /*#__PURE__*/React__default.createElement("div", {
    className: "mainContent citizenAllServiceGrid"
  }, homeDetails.map(function (data) {
    return /*#__PURE__*/React__default.createElement("div", null, data.name === "employeeCard" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.EmployeeModuleCard, data) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenHomeCard, {
      header: data.title,
      links: data.links,
      Icon: function Icon() {
        return data.Icon;
      },
      styles: data === null || data === void 0 ? void 0 : data.styles
    }));
  }));
  sessionStorage.setItem("isPermitApplication", true);
  sessionStorage.setItem("isEDCRDisable", JSON.stringify(false));
  return homeScreen;
};

var EDCRForm = function EDCRForm(_ref) {
  var _formData$Scrutiny, _formData$Scrutiny$, _formData$Scrutiny2, _formData$Scrutiny2$, _formData$owners, _formData$owners$docu;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData,
    isShowToast = _ref.isShowToast,
    isSubmitBtnDisable = _ref.isSubmitBtnDisable,
    setIsShowToast = _ref.setIsShowToast;
  var _useLocation = reactRouterDom.useLocation();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState([]),
    citymoduleList = _useState[0],
    setCitymoduleList = _useState[1];
  var _useState2 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$Scrutiny = formData.Scrutiny) === null || _formData$Scrutiny === void 0 ? void 0 : (_formData$Scrutiny$ = _formData$Scrutiny[0]) === null || _formData$Scrutiny$ === void 0 ? void 0 : _formData$Scrutiny$.applicantName),
    name = _useState2[0],
    setName = _useState2[1];
  var _useState3 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$Scrutiny2 = formData.Scrutiny) === null || _formData$Scrutiny2 === void 0 ? void 0 : (_formData$Scrutiny2$ = _formData$Scrutiny2[0]) === null || _formData$Scrutiny2$ === void 0 ? void 0 : _formData$Scrutiny2$.tenantIdData),
    tenantIdData = _useState3[0],
    setTenantIdData = _useState3[1];
  var _useState4 = React.useState(function () {
      var _formData$Scrutiny3, _formData$Scrutiny3$, _formData$Scrutiny3$$;
      return (formData === null || formData === void 0 ? void 0 : (_formData$Scrutiny3 = formData.Scrutiny) === null || _formData$Scrutiny3 === void 0 ? void 0 : (_formData$Scrutiny3$ = _formData$Scrutiny3[0]) === null || _formData$Scrutiny3$ === void 0 ? void 0 : (_formData$Scrutiny3$$ = _formData$Scrutiny3$.proofIdentity) === null || _formData$Scrutiny3$$ === void 0 ? void 0 : _formData$Scrutiny3$$.fileStoreId) || null;
    }),
    uploadedFile = _useState4[0],
    setUploadedFile = _useState4[1];
  var _useState5 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$owners = formData.owners) === null || _formData$owners === void 0 ? void 0 : (_formData$owners$docu = _formData$owners.documents) === null || _formData$owners$docu === void 0 ? void 0 : _formData$owners$docu.proofIdentity),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    error = _useState6[0];
  var _useState7 = React.useState(""),
    uploadMessage = _useState7[0],
    setUploadMessage = _useState7[1];
  var _useState8 = React.useState(null);
  var history = reactRouterDom.useHistory();
  var validation = {};
  function setApplicantName(e) {
    setName(e.target.value);
  }
  function setTypeOfTenantID(value) {
    setTenantIdData(value);
  }
  function selectfile(e) {
    setUploadedFile(e.target.files[0]);
    setFile(e.target.files[0]);
  }
  var onSkip = function onSkip() {
    setUploadMessage("NEED TO DELETE");
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "tenant", ["citymodule"]),
    isLoading = _Digit$Hooks$obps$use.isLoading,
    citymodules = _Digit$Hooks$obps$use.data;
  React.useEffect(function () {
    var _citymodules$tenant, _citymodules$tenant$c;
    if ((citymodules === null || citymodules === void 0 ? void 0 : (_citymodules$tenant = citymodules.tenant) === null || _citymodules$tenant === void 0 ? void 0 : (_citymodules$tenant$c = _citymodules$tenant.citymodule) === null || _citymodules$tenant$c === void 0 ? void 0 : _citymodules$tenant$c.length) > 0) {
      var _citymodules$tenant2, _citymodules$tenant2$, _list$, _list$$tenants, _list$2, _list$3, _list$4;
      var list = citymodules === null || citymodules === void 0 ? void 0 : (_citymodules$tenant2 = citymodules.tenant) === null || _citymodules$tenant2 === void 0 ? void 0 : (_citymodules$tenant2$ = _citymodules$tenant2.citymodule) === null || _citymodules$tenant2$ === void 0 ? void 0 : _citymodules$tenant2$.filter(function (data) {
        return data.code == "BPAAPPLY";
      });
      list === null || list === void 0 ? void 0 : (_list$ = list[0]) === null || _list$ === void 0 ? void 0 : (_list$$tenants = _list$.tenants) === null || _list$$tenants === void 0 ? void 0 : _list$$tenants.forEach(function (data) {
        var _data$code;
        data.i18nKey = "TENANT_TENANTS_" + stringReplaceAll(data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.toUpperCase(), ".", "_");
      });
      if (Array.isArray(list === null || list === void 0 ? void 0 : (_list$2 = list[0]) === null || _list$2 === void 0 ? void 0 : _list$2.tenants)) list === null || list === void 0 ? void 0 : (_list$3 = list[0]) === null || _list$3 === void 0 ? void 0 : _list$3.tenants.reverse();
      var sortTenants = sortDropdownNames(list === null || list === void 0 ? void 0 : (_list$4 = list[0]) === null || _list$4 === void 0 ? void 0 : _list$4.tenants, "code", t);
      setCitymoduleList(sortTenants);
    }
  }, [citymodules]);
  React.useEffect(function () {
    if (uploadMessage || isShowToast) {
      setName("");
      setTenantIdData("");
      setUploadedFile(null);
      setFile("");
      setUploadMessage("");
    }
    if (isShowToast) {
      history.replace("/digit-ui/citizen/obps/edcrscrutiny/apply/acknowledgement", {
        data: isShowToast !== null && isShowToast !== void 0 && isShowToast.label ? isShowToast === null || isShowToast === void 0 ? void 0 : isShowToast.label : "BPA_INTERNAL_SERVER_ERROR",
        type: "ERROR"
      });
    }
  }, [uploadMessage, isShowToast, isSubmitBtnDisable]);
  function onAdd() {
    setUploadMessage("NEED TO DELETE");
  }
  var handleSubmit = function handleSubmit() {
    var data = {};
    data.tenantId = tenantIdData;
    data.applicantName = name;
    data.file = file;
    onSelect(config.key, data);
  };
  if (isLoading || isSubmitBtnDisable) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !tenantIdData || !name || !file || isSubmitBtnDisable,
    onAdd: onAdd,
    isMultipleAllow: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("EDCR_SCRUTINY_CITY") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    isMandatory: false,
    option: citymoduleList,
    selected: tenantIdData,
    optionKey: "i18nKey",
    select: setTypeOfTenantID,
    uploadMessage: uploadMessage
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("EDCR_SCRUTINY_NAME_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "applicantName",
    onChange: setApplicantName,
    uploadMessage: uploadMessage,
    value: name
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z]+(( )+[a-zA-z]+)*$",
    type: "text",
    title: t("TL_NAME_ERROR_MESSAGE")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_PLAN_DIAGRAM_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    id: "edcr-doc",
    extraStyleName: "propertyCreate",
    accept: ".dxf",
    onUpload: selectfile,
    onDelete: function onDelete() {
      setUploadedFile(null);
      setFile("");
    },
    message: uploadedFile ? "1 " + t("PT_ACTION_FILEUPLOADED") : t("ES_NO_FILE_SELECTED_LABEL"),
    error: error,
    uploadMessage: uploadMessage
  }), /*#__PURE__*/React__default.createElement("div", {
    style: {
      disabled: "true",
      height: "30px",
      width: "100%",
      fontSize: "14px"
    }
  }, t("EDCR_UPLOAD_FILE_LIMITS_LABEL")), isShowToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: isShowToast.key,
    label: t(isShowToast.label),
    onClose: function onClose() {
      return setIsShowToast(null);
    },
    isDleteBtn: true
  }));
};

var actions = [];
var getAction = function getAction(flow) {
  switch (flow) {
    case "STAKEHOLDER":
      actions = ['BPA_LICENSE_DETAILS_LABEL', 'BPA_NEW_ADDRESS_HEADER_DETAILS', 'BPA_DOC_DETAILS_SUMMARY', 'BPA_STEPPER_SUMMARY_HEADER'];
      break;
    case "OCBPA":
      actions = ['BPA_BASIC_AND_PLOT_DETAILS_LABEL', 'BPA_SCRUTINY_DETAILS', 'BPA_DOCUMENT_AND_NOC_DETAILS_LABEL', 'BPA_STEPPER_SUMMARY_HEADER'];
      break;
    default:
      actions = ['BPA_STEPPER_SCRUTINY_DETAILS_HEADER', 'BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL', 'BPA_NOC_DETAILS_SUMMARY', 'BPA_STEPPER_SUMMARY_HEADER'];
  }
};
var Timeline = function Timeline(_ref) {
  var _ref$currentStep = _ref.currentStep,
    currentStep = _ref$currentStep === void 0 ? 1 : _ref$currentStep,
    _ref$flow = _ref.flow,
    flow = _ref$flow === void 0 ? "" : _ref$flow;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  getAction(flow);
  return /*#__PURE__*/React__default.createElement("div", {
    className: "timeline-container",
    style: isMobile ? {} : {
      maxWidth: "960px",
      minWidth: "640px",
      marginRight: "auto"
    }
  }, actions.map(function (action, index, arr) {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "timeline-checkpoint",
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "timeline-content"
    }, /*#__PURE__*/React__default.createElement("span", {
      className: "circle " + (index <= currentStep - 1 && 'active')
    }, index < currentStep - 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.TickMark, null) : index + 1), /*#__PURE__*/React__default.createElement("span", {
      className: "secondary-color"
    }, t(action))), index < arr.length - 1 && /*#__PURE__*/React__default.createElement("span", {
      className: "line " + (index < currentStep - 1 && 'active')
    }));
  }));
};

var BasicDetails = function BasicDetails(_ref) {
  var _formData$data, _formData$data2, _formData$data3, _mdmsData$BPA, _basicData$planDetail, _basicData$planDetail2, _basicData$planDetail3, _basicData$planDetail11, _basicData$planDetail12, _basicData$planDetail13, _basicData$planDetail14, _scrutinyNumber$edcrN;
  var formData = _ref.formData,
    onSelect = _ref.onSelect,
    config = _ref.config;
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];
  var _useState2 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$data = formData.data) === null || _formData$data === void 0 ? void 0 : _formData$data.edcrDetails) || null),
    basicData = _useState2[0],
    setBasicData = _useState2[1];
  var _useState3 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$data2 = formData.data) === null || _formData$data2 === void 0 ? void 0 : _formData$data2.scrutinyNumber),
    scrutinyNumber = _useState3[0],
    setScrutinyNumber = _useState3[1];
  var _useState4 = React.useState(formData !== null && formData !== void 0 && (_formData$data3 = formData.data) !== null && _formData$data3 !== void 0 && _formData$data3.scrutinyNumber ? true : false);
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var stateCode = Digit.ULBService.getStateId();
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use.data;
  var riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : _mdmsData$BPA.RiskTypeComputation, basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail = basicData.planDetail) === null || _basicData$planDetail === void 0 ? void 0 : (_basicData$planDetail2 = _basicData$planDetail.plot) === null || _basicData$planDetail2 === void 0 ? void 0 : _basicData$planDetail2.area, basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail3 = basicData.planDetail) === null || _basicData$planDetail3 === void 0 ? void 0 : _basicData$planDetail3.blocks);
  var handleKeyPress = function handleKeyPress(event) {
    try {
      return Promise.resolve(function () {
        if (event.key === "Enter") {
          if (!(scrutinyNumber !== null && scrutinyNumber !== void 0 && scrutinyNumber.edcrNumber)) return;
          return Promise.resolve(scrutinyDetailsData(scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber, stateCode)).then(function (details) {
            if ((details === null || details === void 0 ? void 0 : details.type) == "ERROR") {
              setShowToast({
                message: details === null || details === void 0 ? void 0 : details.message
              });
              setBasicData(null);
            }
            if (details !== null && details !== void 0 && details.edcrNumber) {
              setBasicData(details);
              setShowToast(null);
            }
          });
        }
      }());
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var handleSearch = function handleSearch(event) {
    try {
      return Promise.resolve(scrutinyDetailsData(scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber, stateCode)).then(function (details) {
        if ((details === null || details === void 0 ? void 0 : details.type) == "ERROR") {
          setShowToast({
            message: details === null || details === void 0 ? void 0 : details.message
          });
          setBasicData(null);
        }
        if (details !== null && details !== void 0 && details.edcrNumber) {
          setBasicData(details);
          setShowToast(null);
        }
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSubmit = function handleSubmit(event) {
    var _basicData$planDetail4, _basicData$planDetail5, _basicData$planDetail6, _basicData$planDetail7, _mdmsData$BPA2, _basicData$planDetail8, _basicData$planDetail9, _basicData$planDetail10;
    onSelect(config === null || config === void 0 ? void 0 : config.key, {
      scrutinyNumber: scrutinyNumber,
      applicantName: basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail4 = basicData.planDetail) === null || _basicData$planDetail4 === void 0 ? void 0 : (_basicData$planDetail5 = _basicData$planDetail4.planInformation) === null || _basicData$planDetail5 === void 0 ? void 0 : _basicData$planDetail5.applicantName,
      occupancyType: basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail6 = basicData.planDetail) === null || _basicData$planDetail6 === void 0 ? void 0 : (_basicData$planDetail7 = _basicData$planDetail6.planInformation) === null || _basicData$planDetail7 === void 0 ? void 0 : _basicData$planDetail7.occupancy,
      applicationType: basicData === null || basicData === void 0 ? void 0 : basicData.appliactionType,
      serviceType: basicData === null || basicData === void 0 ? void 0 : basicData.applicationSubType,
      applicationDate: basicData === null || basicData === void 0 ? void 0 : basicData.applicationDate,
      riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail8 = basicData.planDetail) === null || _basicData$planDetail8 === void 0 ? void 0 : (_basicData$planDetail9 = _basicData$planDetail8.plot) === null || _basicData$planDetail9 === void 0 ? void 0 : _basicData$planDetail9.area, basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail10 = basicData.planDetail) === null || _basicData$planDetail10 === void 0 ? void 0 : _basicData$planDetail10.blocks),
      edcrDetails: basicData
    });
  };
  var disableVlaue = sessionStorage.getItem("isEDCRDisable");
  disableVlaue = JSON.parse(disableVlaue);
  var getDetails = function getDetails() {
    try {
      return Promise.resolve(scrutinyDetailsData(scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber, stateCode)).then(function (details) {
        if ((details === null || details === void 0 ? void 0 : details.type) == "ERROR") {
          setShowToast({
            message: details === null || details === void 0 ? void 0 : details.message
          });
          setBasicData(null);
        }
        if (details !== null && details !== void 0 && details.edcrNumber) {
          setBasicData(details);
          setShowToast(null);
        }
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (disableVlaue) {
    var edcrApi = sessionStorage.getItem("isEDCRAPIType");
    edcrApi = edcrApi ? JSON.parse(edcrApi) : false;
    if (!edcrApi || !basicData) {
      sessionStorage.setItem("isEDCRAPIType", JSON.stringify(true));
      getDetails();
    }
  }
  return /*#__PURE__*/React__default.createElement("div", null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: true,
    label: t("" + (showToast === null || showToast === void 0 ? void 0 : showToast.message)),
    onClose: closeToast,
    isDleteBtn: true
  }), /*#__PURE__*/React__default.createElement(Timeline, null), /*#__PURE__*/React__default.createElement("div", {
    className: isMobile ? "obps-search" : "",
    style: !isMobile ? {
      maxWidth: "960px",
      minWidth: "640px",
      marginRight: "auto"
    } : {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Label, null, t("OBPS_SEARCH_EDCR_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    className: "searchInput",
    onKeyPress: handleKeyPress
    ,
    onChange: function onChange(event) {
      return setScrutinyNumber({
        edcrNumber: event.target.value
      });
    },
    value: scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber,
    signature: true,
    signatureImg: /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchIconSvg, {
      className: "signature-img",
      onClick: !disableVlaue && scrutinyNumber !== null && scrutinyNumber !== void 0 && scrutinyNumber.edcrNumber ? function () {
        return handleSearch();
      } : null
    }),
    disable: disableVlaue,
    style: {
      marginBottom: "10px"
    }
  })), basicData && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardCaption, null, t("BPA_SCRUTINY_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_BASIC_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APP_DATE_LABEL"),
    text: basicData !== null && basicData !== void 0 && basicData.applicationDate ? format(new Date(basicData === null || basicData === void 0 ? void 0 : basicData.applicationDate), 'dd/MM/yyyy') : basicData === null || basicData === void 0 ? void 0 : basicData.applicationDate
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
    text: t("WF_BPA_" + (basicData === null || basicData === void 0 ? void 0 : basicData.appliactionType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(basicData === null || basicData === void 0 ? void 0 : basicData.applicationSubType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),
    text: basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail11 = basicData.planDetail) === null || _basicData$planDetail11 === void 0 ? void 0 : (_basicData$planDetail12 = _basicData$planDetail11.planInformation) === null || _basicData$planDetail12 === void 0 ? void 0 : _basicData$planDetail12.occupancy
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),
    text: t("WF_BPA_" + riskType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),
    text: basicData === null || basicData === void 0 ? void 0 : (_basicData$planDetail13 = basicData.planDetail) === null || _basicData$planDetail13 === void 0 ? void 0 : (_basicData$planDetail14 = _basicData$planDetail13.planInformation) === null || _basicData$planDetail14 === void 0 ? void 0 : _basicData$planDetail14.applicantName
  })), riskType ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: handleSubmit,
    disabled: !(scrutinyNumber !== null && scrutinyNumber !== void 0 && (_scrutinyNumber$edcrN = scrutinyNumber.edcrNumber) !== null && _scrutinyNumber$edcrN !== void 0 && _scrutinyNumber$edcrN.length)
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null)));
};

var DocsRequired = function DocsRequired(_ref) {
  var _userInfo$info, _docsList$;
  var onSelect = _ref.onSelect;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateCode = Digit.ULBService.getStateId();
  var history = reactRouterDom.useHistory();
  var _useParams = reactRouterDom.useParams();
  var _useState = React.useState([]),
    docsList = _useState[0],
    setDocsList = _useState[1];
  var _useState2 = React.useState([]),
    uiFlow = _useState2[0],
    setUiFlow = _useState2[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "BPA", "DocumentTypes"),
    data = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateCode, "common-masters", ["DocumentType"]),
    commonDocs = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["RiskTypeComputation"]);
  var userInfo = Digit.UserService.getUser();
  var queryObject = {
    0: {
      tenantId: stateCode
    },
    1: {
      id: userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.id
    }
  };
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useBPAREGSearch(tenantId, queryObject),
    LicenseData = _Digit$Hooks$obps$use4.data;
  var checkingUrl = window.location.href.includes("ocbpa");
  sessionStorage.removeItem("clickOnBPAApplyAfterEDCR");
  var _Digit$Hooks$obps$use5 = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["homePageUrlLinks"]),
    homePageUrlLinks = _Digit$Hooks$obps$use5.data,
    homePageUrlLinksLoading = _Digit$Hooks$obps$use5.isLoading;
  var goNext = function goNext() {
    if (JSON.parse(sessionStorage.getItem("BPAintermediateValue")) !== null) {
      var formData = JSON.parse(sessionStorage.getItem("BPAintermediateValue"));
      sessionStorage.setItem("BPAintermediateValue", null);
      onSelect("", formData);
    } else onSelect("uiFlow", uiFlow);
  };
  React.useEffect(function () {
    var architectName = "",
      isDone = true;
    for (var i = 0; i < (LicenseData === null || LicenseData === void 0 ? void 0 : (_LicenseData$Licenses = LicenseData.Licenses) === null || _LicenseData$Licenses === void 0 ? void 0 : _LicenseData$Licenses.length); i++) {
      var _LicenseData$Licenses, _LicenseData$Licenses2, _LicenseData$Licenses3;
      if ((LicenseData === null || LicenseData === void 0 ? void 0 : (_LicenseData$Licenses2 = LicenseData.Licenses) === null || _LicenseData$Licenses2 === void 0 ? void 0 : (_LicenseData$Licenses3 = _LicenseData$Licenses2[i]) === null || _LicenseData$Licenses3 === void 0 ? void 0 : _LicenseData$Licenses3.status) === "APPROVED" && isDone) {
        var _LicenseData$Licenses4, _LicenseData$Licenses5, _LicenseData$Licenses6, _LicenseData$Licenses7, _LicenseData$Licenses8, _LicenseData$Licenses9;
        isDone = false;
        architectName = (LicenseData === null || LicenseData === void 0 ? void 0 : (_LicenseData$Licenses4 = LicenseData.Licenses) === null || _LicenseData$Licenses4 === void 0 ? void 0 : (_LicenseData$Licenses5 = _LicenseData$Licenses4[i]) === null || _LicenseData$Licenses5 === void 0 ? void 0 : (_LicenseData$Licenses6 = _LicenseData$Licenses5.tradeLicenseDetail) === null || _LicenseData$Licenses6 === void 0 ? void 0 : (_LicenseData$Licenses7 = _LicenseData$Licenses6.tradeUnits) === null || _LicenseData$Licenses7 === void 0 ? void 0 : (_LicenseData$Licenses8 = _LicenseData$Licenses7[0]) === null || _LicenseData$Licenses8 === void 0 ? void 0 : (_LicenseData$Licenses9 = _LicenseData$Licenses8.tradeType) === null || _LicenseData$Licenses9 === void 0 ? void 0 : _LicenseData$Licenses9.split('.')[0]) || "ARCHITECT";
        sessionStorage.setItem("BPA_ARCHITECT_NAME", JSON.stringify(architectName));
      }
    }
  }, [LicenseData]);
  React.useEffect(function () {
    if (!homePageUrlLinksLoading) {
      var _homePageUrlLinks$BPA, _homePageUrlLinks$BPA2;
      var windowUrl = window.location.href.split('/');
      var _serviceType = windowUrl[windowUrl.length - 2];
      var _applicationType = windowUrl[windowUrl.length - 3];
      homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA === void 0 ? void 0 : (_homePageUrlLinks$BPA2 = _homePageUrlLinks$BPA.homePageUrlLinks) === null || _homePageUrlLinks$BPA2 === void 0 ? void 0 : _homePageUrlLinks$BPA2.map(function (linkData) {
        if ((_applicationType === null || _applicationType === void 0 ? void 0 : _applicationType.toUpperCase()) === (linkData === null || linkData === void 0 ? void 0 : linkData.applicationType) && (_serviceType === null || _serviceType === void 0 ? void 0 : _serviceType.toUpperCase()) === (linkData === null || linkData === void 0 ? void 0 : linkData.serviceType)) {
          setUiFlow({
            flow: linkData === null || linkData === void 0 ? void 0 : linkData.flow,
            applicationType: linkData === null || linkData === void 0 ? void 0 : linkData.applicationType,
            serviceType: linkData === null || linkData === void 0 ? void 0 : linkData.serviceType
          });
        }
      });
    }
  }, [!homePageUrlLinksLoading]);
  React.useEffect(function () {
    if (!isLoading) {
      var unique = [],
        distinct = [],
        uniqueList = [];
      var windowUrl = window.location.href.split('/');
      var _serviceType2 = windowUrl[windowUrl.length - 2];
      var _applicationType2 = windowUrl[windowUrl.length - 3];
      for (var i = 0; i < data.length; i++) {
        if (!unique[data[i].applicationType] && !unique[data[i].ServiceType]) {
          distinct.push(data[i].applicationType);
          unique[data[i].applicationType] = data[i];
        }
      }
      Object.values(unique).map(function (indData) {
        var _uniqueList$;
        if ((indData === null || indData === void 0 ? void 0 : indData.applicationType) == (_applicationType2 === null || _applicationType2 === void 0 ? void 0 : _applicationType2.toUpperCase()) && (indData === null || indData === void 0 ? void 0 : indData.ServiceType) == (_serviceType2 === null || _serviceType2 === void 0 ? void 0 : _serviceType2.toUpperCase())) {
          uniqueList.push(indData === null || indData === void 0 ? void 0 : indData.docTypes);
        }
        uniqueList === null || uniqueList === void 0 ? void 0 : (_uniqueList$ = uniqueList[0]) === null || _uniqueList$ === void 0 ? void 0 : _uniqueList$.forEach(function (doc) {
          var _commonDocs$commonMa, _commonDocs$commonMa$;
          var code = doc.code;
          doc.dropdownData = [];
          commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : (_commonDocs$commonMa$ = _commonDocs$commonMa.DocumentType) === null || _commonDocs$commonMa$ === void 0 ? void 0 : _commonDocs$commonMa$.forEach(function (value) {
            var values = value.code.slice(0, code.length);
            if (code === values) {
              doc.hasDropdown = true;
              value.i18nKey = value.code;
              doc.dropdownData.push(value);
            }
          });
        });
        setDocsList(uniqueList);
      });
    }
  }, [!isLoading]);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, checkingUrl ? t("BPA_OOCUPANCY_CERTIFICATE_APP_LABEL") : t("OBPS_NEW_BUILDING_PERMIT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      color: "#0B0C0C",
      marginTop: "12px",
      fontSize: "16px",
      fontWeight: "400",
      lineHeight: "24px"
    }
  }, t("OBPS_NEW_BUILDING_PERMIT_DESCRIPTION")), isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, docsList === null || docsList === void 0 ? void 0 : (_docsList$ = docsList[0]) === null || _docsList$ === void 0 ? void 0 : _docsList$.map(function (doc, index) {
    var _doc$dropdownData;
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontWeight: 700,
        marginBottom: "8px"
      },
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex"
      }
    }, /*#__PURE__*/React__default.createElement("div", null, index + 1 + ".", "\xA0"), /*#__PURE__*/React__default.createElement("div", null, " " + t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_'))))), /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginBottom: "16px"
      }
    }, doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.map(function (value, index) {
      var _doc$dropdownData2;
      return (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : _doc$dropdownData2.length) !== index + 1 ? /*#__PURE__*/React__default.createElement("span", null, t(value === null || value === void 0 ? void 0 : value.i18nKey) + ", ") : /*#__PURE__*/React__default.createElement("span", null, "" + t(value === null || value === void 0 ? void 0 : value.i18nKey));
    })));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: goNext
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
    info: t("CS_FILE_APPLICATION_INFO_LABEL"),
    text: t("OBPS_DOCS_FILE_SIZE"),
    className: "info-banner-wrap-citizen-override"
  }));
};

var PlotDetails = function PlotDetails(_ref) {
  var _formData$uiFlow, _formData$data, _data$planDetail, _data$planDetail$plan, _data$planDetail2, _data$planDetail2$pla, _data$planDetail3, _data$planDetail3$pla, _data$planDetail4, _data$planDetail4$pla;
  var formData = _ref.formData,
    onSelect = _ref.onSelect,
    config = _ref.config;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useState = React.useState("");
  var _useState2 = React.useState("");
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var checkingFlow = formData === null || formData === void 0 ? void 0 : (_formData$uiFlow = formData.uiFlow) === null || _formData$uiFlow === void 0 ? void 0 : _formData$uiFlow.flow;
  var state = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useScrutinyDetails(state, formData === null || formData === void 0 ? void 0 : (_formData$data = formData.data) === null || _formData$data === void 0 ? void 0 : _formData$data.scrutinyNumber),
    data = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var handleSubmit = function handleSubmit(data) {
    onSelect(config === null || config === void 0 ? void 0 : config.key, _extends({}, data));
  };
  var onSkip = function onSkip() {
    return onSelect();
  };
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(Timeline, {
    flow: checkingFlow === "OCBPA" ? "OCBPA" : ""
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: handleSubmit,
    childrenAtTheBottom: false,
    t: t,
    _defaultValues: formData === null || formData === void 0 ? void 0 : formData.data,
    onSkip: onSkip
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BOUNDARY_PLOT_AREA_LABEL"),
    text: data !== null && data !== void 0 && (_data$planDetail = data.planDetail) !== null && _data$planDetail !== void 0 && (_data$planDetail$plan = _data$planDetail.planInformation) !== null && _data$planDetail$plan !== void 0 && _data$planDetail$plan.plotArea ? (data === null || data === void 0 ? void 0 : (_data$planDetail2 = data.planDetail) === null || _data$planDetail2 === void 0 ? void 0 : (_data$planDetail2$pla = _data$planDetail2.planInformation) === null || _data$planDetail2$pla === void 0 ? void 0 : _data$planDetail2$pla.plotArea) + " " + t("BPA_SQ_FT_LABEL") : "NA"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_PLOT_NUMBER_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$planDetail3 = data.planDetail) === null || _data$planDetail3 === void 0 ? void 0 : (_data$planDetail3$pla = _data$planDetail3.planInformation) === null || _data$planDetail3$pla === void 0 ? void 0 : _data$planDetail3$pla.plotNo
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_KHATHA_NUMBER_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$planDetail4 = data.planDetail) === null || _data$planDetail4 === void 0 ? void 0 : (_data$planDetail4$pla = _data$planDetail4.planInformation) === null || _data$planDetail4$pla === void 0 ? void 0 : _data$planDetail4$pla.khataNo
  }))));
};

var ScrutinyDetails = function ScrutinyDetails(_ref) {
  var _formData$landInfo, _user$info, _formData$uiFlow, _formData$data, _data$planDetail, _data$planDetail$bloc, _data$planDetail$bloc2, _data$planDetail$bloc3, _data$planDetail2, _data$planDetail2$blo, _data$planDetail2$blo2, _data$planDetail2$blo3, _data$planDetail3, _data$planDetail3$blo, _data$planDetail3$blo2, _data$planDetail3$blo3, _data$planDetail4, _data$planDetail4$blo, _data$planDetail4$blo2, _data$planDetail4$blo3, _data$planDetail5, _data$planDetail5$blo, _data$planDetail5$blo2, _data$planDetail5$blo3, _data$planDetail6, _data$planDetail6$blo, _data$planDetail7, _data$planDetail7$pla, _data$planDetail8, _data$planDetail8$pla;
  var onSelect = _ref.onSelect,
    formData = _ref.formData,
    config = _ref.config;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var _useState = React.useState([]),
    setsubOccupancy = _useState[1];
  var _useState2 = React.useState((formData === null || formData === void 0 ? void 0 : formData.subOccupancy) || (formData === null || formData === void 0 ? void 0 : (_formData$landInfo = formData.landInfo) === null || _formData$landInfo === void 0 ? void 0 : _formData$landInfo.unit) || {}),
    subOccupancyObject = _useState2[0],
    setsubOccupancyObject = _useState2[1];
  var _useState3 = React.useState([]);
  var _useState4 = React.useState([]);
  var user = Digit.UserService.getUser();
  var tenantId = (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || Digit.ULBService.getCurrentTenantId();
  var checkingFlow = formData === null || formData === void 0 ? void 0 : (_formData$uiFlow = formData.uiFlow) === null || _formData$uiFlow === void 0 ? void 0 : _formData$uiFlow.flow;
  var _useState5 = React.useState(null),
    showToast = _useState5[0],
    setShowToast = _useState5[1];
  var stateCode = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["SubOccupancyType"]),
    isMdmsLoading = _Digit$Hooks$obps$use.isMdmsLoading,
    mdmsData = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useScrutinyDetails(tenantId, formData === null || formData === void 0 ? void 0 : (_formData$data = formData.data) === null || _formData$data === void 0 ? void 0 : _formData$data.scrutinyNumber, {
      enabled: true
    }),
    data = _Digit$Hooks$obps$use2.data;
  function getFloorData(block) {
    var _block$building, _block$building$floor;
    var floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : (_block$building$floor = _block$building.floors) === null || _block$building$floor === void 0 ? void 0 : _block$building$floor.map(function (ob) {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  function getsuboptions() {
    var _mdmsData$BPA, _mdmsData$BPA$SubOccu;
    var suboccoption = [];
    mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : (_mdmsData$BPA$SubOccu = _mdmsData$BPA.SubOccupancyType) === null || _mdmsData$BPA$SubOccu === void 0 ? void 0 : _mdmsData$BPA$SubOccu.map(function (ob) {
      var _ob$code;
      suboccoption.push({
        code: ob.code,
        name: ob.name,
        i18nKey: "BPA_SUBOCCUPANCYTYPE_" + stringReplaceAll(ob === null || ob === void 0 ? void 0 : (_ob$code = ob.code) === null || _ob$code === void 0 ? void 0 : _ob$code.toUpperCase(), "-", "_")
      });
    });
    return Digit.Utils.locale.sortDropdownNames(suboccoption, 'i18nKey', t);
  }
  var ActionButton = function ActionButton(_ref2) {
    var label = _ref2.label,
      jumpTo = _ref2.jumpTo;
    var _useTranslation2 = reactI18next.useTranslation(),
      t = _useTranslation2.t;
    var history = reactRouterDom.useHistory();
    function routeTo() {
      location.href = jumpTo;
    }
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
      label: t(label),
      onClick: routeTo
    });
  };
  var tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  var selectOccupancy = function selectOccupancy(e, data, num) {
    var blocks = subOccupancyObject;
    var newSubOccupancy = [];
    e && (e === null || e === void 0 ? void 0 : e.map(function (ob) {
      newSubOccupancy.push(ob === null || ob === void 0 ? void 0 : ob[1]);
    }));
    blocks["Block_" + num] = newSubOccupancy;
    setsubOccupancy(newSubOccupancy);
    setsubOccupancyObject(blocks);
  };
  var onRemove = function onRemove(index, key, num) {
    var afterRemove = subOccupancyObject["Block_" + num].filter(function (value, i) {
      return i !== index;
    });
    setsubOccupancy(afterRemove);
    var temp = subOccupancyObject;
    temp["Block_" + num] = afterRemove;
    setsubOccupancyObject(temp);
  };
  var accessData = function accessData(plot) {
    var name = plot;
    return function (originalRow, rowIndex, columns) {
      return originalRow[name];
    };
  };
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var tableColumns = React.useMemo(function () {
    return tableHeader === null || tableHeader === void 0 ? void 0 : tableHeader.map(function (ob) {
      return {
        Header: t("" + ob.name),
        accessor: accessData(ob.id),
        id: ob.id
      };
    });
  });

  var onSkip = function onSkip() {
    return onSelect();
  };
  var goNext = function goNext() {
    if (checkingFlow === "OCBPA") {
      if (!(formData !== null && formData !== void 0 && formData.id)) {
        var _formData$edcrNumber, _formData$edcrNumber2, _formData$data2, _formData$data2$scrut, _formData$data3, _formData$data4, _formData$data5, _userInfo$info, _formData$data6, _formData$data6$bpaDa, _formData$data6$bpaDa2, _formData$data6$bpaDa3, _formData$data6$bpaDa4, _userInfo$info2, _formData$data7, _formData$data8, _formData$data9, _formData$data10, _formData$data11, _formData$data12, _formData$data13, _formData$data14, _formData$data15, _formData$data15$bpaD, _formData$data15$bpaD2;
        var payload = {};
        payload.edcrNumber = formData !== null && formData !== void 0 && (_formData$edcrNumber = formData.edcrNumber) !== null && _formData$edcrNumber !== void 0 && _formData$edcrNumber.edcrNumber ? formData === null || formData === void 0 ? void 0 : (_formData$edcrNumber2 = formData.edcrNumber) === null || _formData$edcrNumber2 === void 0 ? void 0 : _formData$edcrNumber2.edcrNumber : formData === null || formData === void 0 ? void 0 : (_formData$data2 = formData.data) === null || _formData$data2 === void 0 ? void 0 : (_formData$data2$scrut = _formData$data2.scrutinyNumber) === null || _formData$data2$scrut === void 0 ? void 0 : _formData$data2$scrut.edcrNumber;
        payload.riskType = formData === null || formData === void 0 ? void 0 : (_formData$data3 = formData.data) === null || _formData$data3 === void 0 ? void 0 : _formData$data3.riskType;
        payload.applicationType = formData === null || formData === void 0 ? void 0 : (_formData$data4 = formData.data) === null || _formData$data4 === void 0 ? void 0 : _formData$data4.applicationType;
        payload.serviceType = formData === null || formData === void 0 ? void 0 : (_formData$data5 = formData.data) === null || _formData$data5 === void 0 ? void 0 : _formData$data5.serviceType;
        var userInfo = Digit.UserService.getUser();
        var accountId = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.uuid;
        payload.tenantId = formData === null || formData === void 0 ? void 0 : (_formData$data6 = formData.data) === null || _formData$data6 === void 0 ? void 0 : (_formData$data6$bpaDa = _formData$data6.bpaData) === null || _formData$data6$bpaDa === void 0 ? void 0 : (_formData$data6$bpaDa2 = _formData$data6$bpaDa.bpaApprovalResponse) === null || _formData$data6$bpaDa2 === void 0 ? void 0 : (_formData$data6$bpaDa3 = _formData$data6$bpaDa2[0]) === null || _formData$data6$bpaDa3 === void 0 ? void 0 : (_formData$data6$bpaDa4 = _formData$data6$bpaDa3.landInfo) === null || _formData$data6$bpaDa4 === void 0 ? void 0 : _formData$data6$bpaDa4.tenantId;
        payload.workflow = {
          action: "INITIATE",
          assignes: [userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info2 = userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.uuid]
        };
        payload.accountId = accountId;
        payload.documents = null;

        payload.additionalDetails = {};
        if (formData !== null && formData !== void 0 && (_formData$data7 = formData.data) !== null && _formData$data7 !== void 0 && _formData$data7.holdingNumber) payload.additionalDetails.holdingNo = formData === null || formData === void 0 ? void 0 : (_formData$data8 = formData.data) === null || _formData$data8 === void 0 ? void 0 : _formData$data8.holdingNumber;
        if (formData !== null && formData !== void 0 && (_formData$data9 = formData.data) !== null && _formData$data9 !== void 0 && _formData$data9.registrationDetails) payload.additionalDetails.registrationDetails = formData === null || formData === void 0 ? void 0 : (_formData$data10 = formData.data) === null || _formData$data10 === void 0 ? void 0 : _formData$data10.registrationDetails;
        if (formData !== null && formData !== void 0 && (_formData$data11 = formData.data) !== null && _formData$data11 !== void 0 && _formData$data11.applicationType) payload.additionalDetails.applicationType = formData === null || formData === void 0 ? void 0 : (_formData$data12 = formData.data) === null || _formData$data12 === void 0 ? void 0 : _formData$data12.applicationType;
        if (formData !== null && formData !== void 0 && (_formData$data13 = formData.data) !== null && _formData$data13 !== void 0 && _formData$data13.serviceType) payload.additionalDetails.serviceType = formData === null || formData === void 0 ? void 0 : (_formData$data14 = formData.data) === null || _formData$data14 === void 0 ? void 0 : _formData$data14.serviceType;

        payload.landInfo = (formData === null || formData === void 0 ? void 0 : (_formData$data15 = formData.data) === null || _formData$data15 === void 0 ? void 0 : (_formData$data15$bpaD = _formData$data15.bpaData) === null || _formData$data15$bpaD === void 0 ? void 0 : (_formData$data15$bpaD2 = _formData$data15$bpaD.bpaApprovalResponse) === null || _formData$data15$bpaD2 === void 0 ? void 0 : _formData$data15$bpaD2[0].landInfo) || {};
        var nameOfAchitect = sessionStorage.getItem("BPA_ARCHITECT_NAME");
        var parsedArchitectName = nameOfAchitect ? JSON.parse(nameOfAchitect) : "ARCHITECT";
        payload.additionalDetails.typeOfArchitect = parsedArchitectName;
        Digit.OBPSService.create({
          BPA: payload
        }, tenantId).then(function (result, err) {
          var _result$BPA;
          if ((result === null || result === void 0 ? void 0 : (_result$BPA = result.BPA) === null || _result$BPA === void 0 ? void 0 : _result$BPA.length) > 0) {
            result.BPA[0].data = formData.data;
            result.BPA[0].uiFlow = formData === null || formData === void 0 ? void 0 : formData.uiFlow;
            onSelect("", result.BPA[0], "", true);
          }
        }).catch(function (e) {
          var _e$response, _e$response$data, _e$response$data$Erro;
          setShowToast({
            key: "true",
            message: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message) || null
          });
        });
      } else {
        onSelect("", formData, "", true);
      }
    } else {
      onSelect(config.key, subOccupancyObject);
    }
  };
  var clearall = function clearall(num) {
    var res = [];
    var temp = subOccupancyObject;
    temp["Block_" + num] = res;
    setsubOccupancy(res);
    setsubOccupancyObject(temp);
  };
  function getSubOccupancyValues(index) {
    var _formData$data16, _formData$data16$bpaD, _formData$data16$bpaD2, _formData$data16$bpaD3, _formData$data16$bpaD4;
    var values = formData === null || formData === void 0 ? void 0 : (_formData$data16 = formData.data) === null || _formData$data16 === void 0 ? void 0 : (_formData$data16$bpaD = _formData$data16.bpaData) === null || _formData$data16$bpaD === void 0 ? void 0 : (_formData$data16$bpaD2 = _formData$data16$bpaD.bpaApprovalResponse) === null || _formData$data16$bpaD2 === void 0 ? void 0 : (_formData$data16$bpaD3 = _formData$data16$bpaD2[0]) === null || _formData$data16$bpaD3 === void 0 ? void 0 : (_formData$data16$bpaD4 = _formData$data16$bpaD3.landInfo) === null || _formData$data16$bpaD4 === void 0 ? void 0 : _formData$data16$bpaD4.unit;
    var returnValue = "";
    if ((values === null || values === void 0 ? void 0 : values.length) > 0) {
      var _values$index, _values$index$usageCa;
      var splitArray = (_values$index = values[index]) === null || _values$index === void 0 ? void 0 : (_values$index$usageCa = _values$index.usageCategory) === null || _values$index$usageCa === void 0 ? void 0 : _values$index$usageCa.split(",");
      if (splitArray !== null && splitArray !== void 0 && splitArray.length) {
        var returnValueArray = splitArray === null || splitArray === void 0 ? void 0 : splitArray.map(function (data) {
          return data ? "" + t("BPA_SUBOCCUPANCYTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.toUpperCase(), "-", "_")) : "NA";
        });
        returnValue = returnValueArray.join(", ");
      }
    }
    return returnValue ? returnValue : "NA";
  }
  if (isMdmsLoading) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: checkingFlow === "OCBPA" ? 2 : 1,
    flow: checkingFlow === "OCBPA" ? "OCBPA" : ""
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: goNext,
    onSkip: onSkip
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_EDCR_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    style: {
      border: "none"
    },
    label: checkingFlow === "OCBPA" ? t("BPA_OC_EDCR_NO_LABEL") : t("BPA_EDCR_NO_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.edcrNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_UPLOADED_PLAN_DIAGRAM"),
    text: /*#__PURE__*/React__default.createElement(ActionButton, {
      label: t("BPA_UPLOADED_PLAN_DXF"),
      jumpTo: data === null || data === void 0 ? void 0 : data.updatedDxfFile
    })
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_SCRUNTINY_REPORT_OUTPUT"),
    text: /*#__PURE__*/React__default.createElement(ActionButton, {
      label: t("BPA_SCRUTINY_REPORT_PDF"),
      jumpTo: data === null || data === void 0 ? void 0 : data.planReport
    })
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, checkingFlow === "OCBPA" ? t("BPA_ACTUAL_BUILDING_EXTRACT_HEADER") : t("BPA_BUILDING_EXTRACT_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_TOTAL_BUILT_UP_AREA_HEADER"),
    text: data !== null && data !== void 0 && (_data$planDetail = data.planDetail) !== null && _data$planDetail !== void 0 && (_data$planDetail$bloc = _data$planDetail.blocks) !== null && _data$planDetail$bloc !== void 0 && (_data$planDetail$bloc2 = _data$planDetail$bloc[0]) !== null && _data$planDetail$bloc2 !== void 0 && (_data$planDetail$bloc3 = _data$planDetail$bloc2.building) !== null && _data$planDetail$bloc3 !== void 0 && _data$planDetail$bloc3.totalBuitUpArea ? (data === null || data === void 0 ? void 0 : (_data$planDetail2 = data.planDetail) === null || _data$planDetail2 === void 0 ? void 0 : (_data$planDetail2$blo = _data$planDetail2.blocks) === null || _data$planDetail2$blo === void 0 ? void 0 : (_data$planDetail2$blo2 = _data$planDetail2$blo[0]) === null || _data$planDetail2$blo2 === void 0 ? void 0 : (_data$planDetail2$blo3 = _data$planDetail2$blo2.building) === null || _data$planDetail2$blo3 === void 0 ? void 0 : _data$planDetail2$blo3.totalBuitUpArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$planDetail3 = data.planDetail) === null || _data$planDetail3 === void 0 ? void 0 : (_data$planDetail3$blo = _data$planDetail3.blocks) === null || _data$planDetail3$blo === void 0 ? void 0 : (_data$planDetail3$blo2 = _data$planDetail3$blo[0]) === null || _data$planDetail3$blo2 === void 0 ? void 0 : (_data$planDetail3$blo3 = _data$planDetail3$blo2.building) === null || _data$planDetail3$blo3 === void 0 ? void 0 : _data$planDetail3$blo3.totalFloors
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),
    text: data !== null && data !== void 0 && (_data$planDetail4 = data.planDetail) !== null && _data$planDetail4 !== void 0 && (_data$planDetail4$blo = _data$planDetail4.blocks) !== null && _data$planDetail4$blo !== void 0 && (_data$planDetail4$blo2 = _data$planDetail4$blo[0]) !== null && _data$planDetail4$blo2 !== void 0 && (_data$planDetail4$blo3 = _data$planDetail4$blo2.building) !== null && _data$planDetail4$blo3 !== void 0 && _data$planDetail4$blo3.declaredBuildingHeight ? (data === null || data === void 0 ? void 0 : (_data$planDetail5 = data.planDetail) === null || _data$planDetail5 === void 0 ? void 0 : (_data$planDetail5$blo = _data$planDetail5.blocks) === null || _data$planDetail5$blo === void 0 ? void 0 : (_data$planDetail5$blo2 = _data$planDetail5$blo[0]) === null || _data$planDetail5$blo2 === void 0 ? void 0 : (_data$planDetail5$blo3 = _data$planDetail5$blo2.building) === null || _data$planDetail5$blo3 === void 0 ? void 0 : _data$planDetail5$blo3.declaredBuildingHeight) + " " + t("BPA_MTRS_LABEL") : t("NA")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_OCC_SUBOCC_HEADER")), data === null || data === void 0 ? void 0 : (_data$planDetail6 = data.planDetail) === null || _data$planDetail6 === void 0 ? void 0 : (_data$planDetail6$blo = _data$planDetail6.blocks) === null || _data$planDetail6$blo === void 0 ? void 0 : _data$planDetail6$blo.map(function (block, index) {
    var _subOccupancyObject;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: {
        marginTop: "20px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "18px"
      }
    }, t("BPA_BLOCK_SUBHEADER"), " ", index + 1), !(checkingFlow === "OCBPA") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        fontWeight: "normal"
      },
      className: "card-label-smaller"
    }, t("BPA_SUB_OCCUPANCY_LABEL")) : null, !(checkingFlow === "OCBPA") ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiSelectDropdown, {
      BlockNumber: block.number,
      className: "form-field",
      isMandatory: true,
      defaultUnit: "Selected",
      selected: subOccupancyObject["Block_" + block.number]
      ,
      options: getsuboptions(),
      onSelect: function onSelect(e) {
        return selectOccupancy(e, data, block.number);
      },
      isOBPSMultiple: true,
      optionsKey: "i18nKey",
      ServerStyle: {
        width: "100%",
        overflowX: "hidden"
      },
      t: t
    }) : null, !(checkingFlow === "OCBPA") ? /*#__PURE__*/React__default.createElement("div", {
      className: "tag-container"
    }, subOccupancyObject["Block_" + block.number] && subOccupancyObject["Block_" + block.number].length > 0 && ((_subOccupancyObject = subOccupancyObject["Block_" + block.number]) === null || _subOccupancyObject === void 0 ? void 0 : _subOccupancyObject.map(function (value, index) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RemoveableTag, {
        key: index,
        text: "" + t(value["i18nKey"]),
        onClick: function onClick() {
          return onRemove(index, value, block.number);
        }
      });
    }))) : null, !(checkingFlow === "OCBPA") ? subOccupancyObject["Block_" + block.number] && subOccupancyObject["Block_" + block.number].length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
      style: {
        textAlign: "left"
      },
      label: "Clear All",
      onClick: function onClick() {
        return clearall(block.number);
      }
    }) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginTop: "20px"
      }
    }, checkingFlow === "OCBPA" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getSubOccupancyValues(index)
    })) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        overflowX: "scroll"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false
      ,
      initSortId: "S N "
      ,
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: function getCellProps(cellInfo) {
        return {
          style: {}
        };
      }
    }))));
  }), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: t("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),
    text: data !== null && data !== void 0 && (_data$planDetail7 = data.planDetail) !== null && _data$planDetail7 !== void 0 && (_data$planDetail7$pla = _data$planDetail7.planInformation) !== null && _data$planDetail7$pla !== void 0 && _data$planDetail7$pla.demolitionArea ? (data === null || data === void 0 ? void 0 : (_data$planDetail8 = data.planDetail) === null || _data$planDetail8 === void 0 ? void 0 : (_data$planDetail8$pla = _data$planDetail8.planInformation) === null || _data$planDetail8$pla === void 0 ? void 0 : _data$planDetail8$pla.demolitionArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("CS_NA")
  }))), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: true,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    isDleteBtn: true,
    onClose: closeToast
  }));
};

var OwnerDetails = function OwnerDetails(_ref) {
  var _formData$owners, _formData$owners2, _formData$owners3, _formData$owners4, _formData$owners5, _formData$owners5$own, _formData$owners6;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var validation = {};
  sessionStorage.removeItem("currentPincode");
  var isedittrade = window.location.href.includes("edit-application");
  var isrenewtrade = window.location.href.includes("renew-trade");
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState(isedittrade || isrenewtrade ? false : true),
    canmovenext = _useState[0],
    setCanmovenext = _useState[1];
  var _useState2 = React.useState([]),
    ownershipCategoryList = _useState2[0],
    setOwnershipCategoryList = _useState2[1];
  var _useState3 = React.useState([]),
    genderList = _useState3[0],
    setGenderList = _useState3[1];
  var _useState4 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$owners = formData.owners) === null || _formData$owners === void 0 ? void 0 : _formData$owners.ownershipCategory),
    ownershipCategory = _useState4[0],
    setOwnershipCategory = _useState4[1];
  var _useState5 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$owners2 = formData.owners) === null || _formData$owners2 === void 0 ? void 0 : _formData$owners2.name) || ""),
    setName = _useState5[1];
  var _useState6 = React.useState(false),
    setisPrimaryOwner = _useState6[1];
  var _useState7 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$owners3 = formData.owners) === null || _formData$owners3 === void 0 ? void 0 : _formData$owners3.gender),
    setGender = _useState7[1];
  var _useState8 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$owners4 = formData.owners) === null || _formData$owners4 === void 0 ? void 0 : _formData$owners4.mobileNumber) || ""),
    setMobileNumber = _useState8[1];
  var _useState9 = React.useState(null),
    showToast = _useState9[0],
    setShowToast = _useState9[1];
  var _useState10 = React.useState(false),
    isDisable = _useState10[0],
    setIsDisable = _useState10[1];
  var Webview = !Digit.Utils.browser.isMobile();
  var ismultiple = ownershipCategory !== null && ownershipCategory !== void 0 && ownershipCategory.code.includes("MULTIPLEOWNERS") ? true : false;
  formData === null || formData === void 0 ? void 0 : (_formData$owners5 = formData.owners) === null || _formData$owners5 === void 0 ? void 0 : (_formData$owners5$own = _formData$owners5.owners) === null || _formData$owners5$own === void 0 ? void 0 : _formData$owners5$own.forEach(function (owner) {
    if (owner.isPrimaryOwner == "false") owner.isPrimaryOwner = false;
  });
  var _useState11 = React.useState((formData === null || formData === void 0 ? void 0 : formData.owners) && (formData === null || formData === void 0 ? void 0 : (_formData$owners6 = formData.owners) === null || _formData$owners6 === void 0 ? void 0 : _formData$owners6.owners) || [{
      name: "",
      gender: "",
      mobileNumber: null,
      isPrimaryOwner: true
    }]),
    fields = _useState11[0],
    setFeilds = _useState11[1];
  React.useEffect(function () {
    var flag = 0;
    fields.map(function (ob) {
      if (ob.isPrimaryOwner) flag = 1;
      if (ob.name && ob.mobileNumber && ob.gender) {
        setCanmovenext(false);
      } else {
        setCanmovenext(true);
      }
    });
    if (!canmovenext && ownershipCategory && !(ownershipCategory !== null && ownershipCategory !== void 0 && ownershipCategory.code.includes("SINGLEOWNER"))) {
      if (flag == 1) setCanmovenext(false);else setCanmovenext(true);
    }
  }, [fields]);
  React.useEffect(function () {
    var values = cloneDeep_1(fields);
    if (ownershipCategory && !ismultiple && (values === null || values === void 0 ? void 0 : values.length) > 1) setFeilds([_extends({}, values[0], {
      isPrimaryOwner: true
    })]);
  }, [ownershipCategory]);
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["OwnerShipCategory"]),
    isLoading = _Digit$Hooks$obps$use.isLoading,
    ownerShipCategories = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["GenderType"]),
    genderTypeData = _Digit$Hooks$obps$use2.data;
  React.useEffect(function () {
    var _ownerShipCategories$;
    var ownershipCategoryLists = ownerShipCategories === null || ownerShipCategories === void 0 ? void 0 : (_ownerShipCategories$ = ownerShipCategories["common-masters"]) === null || _ownerShipCategories$ === void 0 ? void 0 : _ownerShipCategories$.OwnerShipCategory;
    if (ownershipCategoryLists && (ownershipCategoryLists === null || ownershipCategoryLists === void 0 ? void 0 : ownershipCategoryLists.length) > 0) {
      var finalOwnershipCategoryList = ownershipCategoryLists.filter(function (data) {
        var _data$code;
        return data === null || data === void 0 ? void 0 : (_data$code = data.code) === null || _data$code === void 0 ? void 0 : _data$code.includes("INDIVIDUAL");
      });
      finalOwnershipCategoryList.forEach(function (data) {
        data.i18nKey = "COMMON_MASTERS_OWNERSHIPCATEGORY_" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.code, ".", "_");
      });
      setOwnershipCategoryList(finalOwnershipCategoryList);
    }
  }, [ownerShipCategories]);
  React.useEffect(function () {
    var _genderTypeData$commo;
    var gendeTypeMenu = (genderTypeData === null || genderTypeData === void 0 ? void 0 : (_genderTypeData$commo = genderTypeData["common-masters"]) === null || _genderTypeData$commo === void 0 ? void 0 : _genderTypeData$commo.GenderType) || [];
    if (gendeTypeMenu && (gendeTypeMenu === null || gendeTypeMenu === void 0 ? void 0 : gendeTypeMenu.length) > 0) {
      var genderFilterTypeMenu = gendeTypeMenu.filter(function (data) {
        return data.active;
      });
      genderFilterTypeMenu.forEach(function (data) {
        data.i18nKey = "COMMON_GENDER_" + data.code;
      });
      setGenderList(genderFilterTypeMenu);
    }
  }, [genderTypeData]);

  function selectedValue(value) {
    setOwnershipCategory(value);
  }
  function handleAdd() {
    var values = [].concat(fields);
    values.push({
      name: "",
      gender: "",
      mobileNumber: null,
      isPrimaryOwner: false
    });
    setFeilds(values);
    setCanmovenext(true);
  }
  function handleRemove(index) {
    var values = [].concat(fields);
    if (values.length != 1) {
      values.splice(index, 1);
      if (values.length == 1) {
        values[0] = _extends({}, values[0], {
          isPrimaryOwner: true
        });
      }
      setFeilds(values);
    }
  }
  function setOwnerName(i, e) {
    var units = [].concat(fields);
    units[i].name = e.target.value;
    setName(e.target.value);
    setFeilds(units);
    if (units[i].gender && units[i].mobileNumber && units[i].name) {
      setCanmovenext(false);
    }
  }
  function setGenderName(i, value) {
    var units = [].concat(fields);
    units[i].gender = value;
    setGender(value);
    setFeilds(units);
    if (units[i].gender && units[i].mobileNumber && units[i].name) {
      setCanmovenext(false);
    }
  }
  function setMobileNo(i, e) {
    var units = [].concat(fields);
    units[i].mobileNumber = e.target.value;
    setMobileNumber(e.target.value);
    setFeilds(units);
    if (units[i].gender && units[i].mobileNumber && units[i].name) {
      setCanmovenext(false);
    }
  }
  function setPrimaryOwner(i, e) {
    var units = [].concat(fields);
    units.map(function (units) {
      units.isPrimaryOwner = false;
    });
    units[i].isPrimaryOwner = ismultiple ? e.target.checked : true;
    setisPrimaryOwner(e.target.checked);
    setFeilds(units);
  }
  var _useState12 = React.useState(null),
    error = _useState12[0],
    setError = _useState12[1];
  function getusageCategoryAPI(arr) {
    var usageCat = "";
    arr.map(function (ob, i) {
      usageCat = usageCat + (i !== 0 ? "," : "") + ob.code;
    });
    return usageCat;
  }
  function getUnitsForAPI(subOccupancyData) {
    var _subOccupancyData$dat, _subOccupancyData$dat2, _subOccupancyData$dat3;
    var ob = subOccupancyData === null || subOccupancyData === void 0 ? void 0 : subOccupancyData.subOccupancy;
    var blocksDetails = (subOccupancyData === null || subOccupancyData === void 0 ? void 0 : (_subOccupancyData$dat = subOccupancyData.data) === null || _subOccupancyData$dat === void 0 ? void 0 : (_subOccupancyData$dat2 = _subOccupancyData$dat.edcrDetails) === null || _subOccupancyData$dat2 === void 0 ? void 0 : (_subOccupancyData$dat3 = _subOccupancyData$dat2.planDetail) === null || _subOccupancyData$dat3 === void 0 ? void 0 : _subOccupancyData$dat3.blocks) || [];
    var units = [];
    if (ob) {
      var result = Object.entries(ob);
      result.map(function (unit, index) {
        var _blocksDetails$index, _blocksDetails$index$, _blocksDetails$index$2, _blocksDetails$index$3, _blocksDetails$index$4, _blocksDetails$index$5;
        units.push({
          blockIndex: index,
          floorNo: unit[0].split("_")[1],
          unitType: "Block",
          occupancyType: (blocksDetails === null || blocksDetails === void 0 ? void 0 : (_blocksDetails$index = blocksDetails[index]) === null || _blocksDetails$index === void 0 ? void 0 : (_blocksDetails$index$ = _blocksDetails$index.building) === null || _blocksDetails$index$ === void 0 ? void 0 : (_blocksDetails$index$2 = _blocksDetails$index$.occupancies) === null || _blocksDetails$index$2 === void 0 ? void 0 : (_blocksDetails$index$3 = _blocksDetails$index$2[0]) === null || _blocksDetails$index$3 === void 0 ? void 0 : (_blocksDetails$index$4 = _blocksDetails$index$3.typeHelper) === null || _blocksDetails$index$4 === void 0 ? void 0 : (_blocksDetails$index$5 = _blocksDetails$index$4.type) === null || _blocksDetails$index$5 === void 0 ? void 0 : _blocksDetails$index$5.code) || "A",
          usageCategory: getusageCategoryAPI(unit[1])
        });
      });
    }
    return units;
  }
  function getBlockIds(arr) {
    var blockId = {};
    arr.map(function (ob, ind) {
      blockId["Block_" + ob.floorNo] = ob.id;
    });
    return blockId;
  }
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var getOwnerDetails = function getOwnerDetails(indexValue, eData) {
    try {
      var _ownersCopy$indexValu, _ownersCopy$indexValu2;
      var ownersCopy = cloneDeep_1(fields);
      var ownerNo = (ownersCopy === null || ownersCopy === void 0 ? void 0 : (_ownersCopy$indexValu = ownersCopy[indexValue]) === null || _ownersCopy$indexValu === void 0 ? void 0 : _ownersCopy$indexValu.mobileNumber) || "";
      setShowToast(null);
      if (!ownerNo.match(getPattern("MobileNo"))) {
        setShowToast({
          key: "true",
          error: true,
          message: "ERR_MOBILE_NUMBER_INCORRECT"
        });
        return Promise.resolve();
      }
      if (ownerNo === (ownersCopy === null || ownersCopy === void 0 ? void 0 : (_ownersCopy$indexValu2 = ownersCopy[indexValue]) === null || _ownersCopy$indexValu2 === void 0 ? void 0 : _ownersCopy$indexValu2.userName)) {
        setShowToast({
          key: "true",
          error: true,
          message: "ERR_OWNER_ALREADY_ADDED_TOGGLE_MSG"
        });
        return Promise.resolve();
      }
      var matchingOwnerIndex = ownersCopy.findIndex(function (item) {
        return item.userName === ownerNo;
      });
      return Promise.resolve(function () {
        if (matchingOwnerIndex > -1) {
          setShowToast({
            key: "true",
            error: true,
            message: "ERR_OWNER_ALREADY_ADDED"
          });
        } else {
          var _fields$indexValue;
          return Promise.resolve(Digit.UserService.userSearch(Digit.ULBService.getStateId(), {
            userName: fields === null || fields === void 0 ? void 0 : (_fields$indexValue = fields[indexValue]) === null || _fields$indexValue === void 0 ? void 0 : _fields$indexValue.mobileNumber
          }, {})).then(function (usersResponse) {
            var _usersResponse$user;
            if ((usersResponse === null || usersResponse === void 0 ? void 0 : (_usersResponse$user = usersResponse.user) === null || _usersResponse$user === void 0 ? void 0 : _usersResponse$user.length) === 0) {
              setShowToast({
                key: "true",
                warning: true,
                message: "ERR_MOBILE_NUMBER_NOT_REGISTERED"
              });
            } else {
              var _usersResponse$user2, _values$indexValue, _values$indexValue2, _values$indexValue3, _values$indexValue3$g;
              var userData = usersResponse === null || usersResponse === void 0 ? void 0 : (_usersResponse$user2 = usersResponse.user) === null || _usersResponse$user2 === void 0 ? void 0 : _usersResponse$user2[0];
              userData.gender = userData.gender ? {
                code: userData.gender,
                active: true,
                i18nKey: "COMMON_GENDER_" + userData.gender
              } : "";
              if (userData !== null && userData !== void 0 && userData.dob) userData.dob = convertDateToEpoch(userData === null || userData === void 0 ? void 0 : userData.dob);
              if (userData !== null && userData !== void 0 && userData.createdDate) {
                userData.createdDate = convertDateTimeToEpoch(userData === null || userData === void 0 ? void 0 : userData.createdDate);
                userData.lastModifiedDate = convertDateTimeToEpoch(userData === null || userData === void 0 ? void 0 : userData.lastModifiedDate);
                userData.pwdExpiryDate = convertDateTimeToEpoch(userData === null || userData === void 0 ? void 0 : userData.pwdExpiryDate);
              }
              var values = [].concat(ownersCopy);
              if (values[indexValue]) {
                var _fields$indexValue2;
                values[indexValue] = userData;
                values[indexValue].isPrimaryOwner = ((_fields$indexValue2 = fields[indexValue]) === null || _fields$indexValue2 === void 0 ? void 0 : _fields$indexValue2.isPrimaryOwner) || false;
              }
              setFeilds(values);
              if ((_values$indexValue = values[indexValue]) !== null && _values$indexValue !== void 0 && _values$indexValue.mobileNumber && (_values$indexValue2 = values[indexValue]) !== null && _values$indexValue2 !== void 0 && _values$indexValue2.name && (_values$indexValue3 = values[indexValue]) !== null && _values$indexValue3 !== void 0 && (_values$indexValue3$g = _values$indexValue3.gender) !== null && _values$indexValue3$g !== void 0 && _values$indexValue3$g.code) setCanmovenext(true);else setCanmovenext(false);
            }
          });
        }
      }());
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var goNext = function goNext() {
    setError(null);
    if (ismultiple == true && fields.length == 1) {
      window.scrollTo(0, 0);
      setError("BPA_ERROR_MULTIPLE_OWNER");
    } else {
      var owner = formData.owners;
      var ownerStep;
      ownerStep = _extends({}, owner, {
        owners: fields,
        ownershipCategory: ownershipCategory
      });
      if (!(formData !== null && formData !== void 0 && formData.id)) {
        var _ownerStep, _ownerStep$owners, _formData$edcrNumber, _formData$edcrNumber2, _formData$data, _formData$data$scruti, _formData$data2, _formData$data3, _formData$data4, _userInfo$info, _formData$address, _formData$address$cit, _userInfo$info2, _formData$address2, _formData$data5, _formData$data6, _formData$data7, _formData$data8, _formData$data9, _formData$data10, _formData$data11, _formData$data12, _formData$address3, _formData$address3$ci, _formData$address4, _formData$address4$ci, _formData$address5, _formData$address5$lo, _formData$address6, _formData$address6$lo, _formData$address7, _formData$address8, _formData$address9, _formData$address10, _formData$address11, _formData$address12, _formData$address13, _formData$address14, _formData$address15, _formData$address15$c;
        setIsDisable(true);
        var conversionOwners = [];
        (_ownerStep = ownerStep) === null || _ownerStep === void 0 ? void 0 : (_ownerStep$owners = _ownerStep.owners) === null || _ownerStep$owners === void 0 ? void 0 : _ownerStep$owners.map(function (owner) {
          conversionOwners.push(_extends({}, owner, {
            active: true,
            name: owner.name,
            mobileNumber: owner.mobileNumber,
            isPrimaryOwner: owner.isPrimaryOwner,
            gender: owner.gender.code,
            fatherOrHusbandName: "NAME"
          }));
        });
        var payload = {};
        payload.edcrNumber = formData !== null && formData !== void 0 && (_formData$edcrNumber = formData.edcrNumber) !== null && _formData$edcrNumber !== void 0 && _formData$edcrNumber.edcrNumber ? formData === null || formData === void 0 ? void 0 : (_formData$edcrNumber2 = formData.edcrNumber) === null || _formData$edcrNumber2 === void 0 ? void 0 : _formData$edcrNumber2.edcrNumber : formData === null || formData === void 0 ? void 0 : (_formData$data = formData.data) === null || _formData$data === void 0 ? void 0 : (_formData$data$scruti = _formData$data.scrutinyNumber) === null || _formData$data$scruti === void 0 ? void 0 : _formData$data$scruti.edcrNumber;
        payload.riskType = formData === null || formData === void 0 ? void 0 : (_formData$data2 = formData.data) === null || _formData$data2 === void 0 ? void 0 : _formData$data2.riskType;
        payload.applicationType = formData === null || formData === void 0 ? void 0 : (_formData$data3 = formData.data) === null || _formData$data3 === void 0 ? void 0 : _formData$data3.applicationType;
        payload.serviceType = formData === null || formData === void 0 ? void 0 : (_formData$data4 = formData.data) === null || _formData$data4 === void 0 ? void 0 : _formData$data4.serviceType;
        var userInfo = Digit.UserService.getUser();
        var accountId = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.uuid;
        payload.tenantId = formData === null || formData === void 0 ? void 0 : (_formData$address = formData.address) === null || _formData$address === void 0 ? void 0 : (_formData$address$cit = _formData$address.city) === null || _formData$address$cit === void 0 ? void 0 : _formData$address$cit.code;
        payload.workflow = {
          action: "INITIATE",
          assignes: [userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info2 = userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.uuid]
        };
        payload.accountId = accountId;
        payload.documents = null;

        payload.additionalDetails = {
          GISPlaceName: formData === null || formData === void 0 ? void 0 : (_formData$address2 = formData.address) === null || _formData$address2 === void 0 ? void 0 : _formData$address2.placeName
        };
        if (formData !== null && formData !== void 0 && (_formData$data5 = formData.data) !== null && _formData$data5 !== void 0 && _formData$data5.holdingNumber) payload.additionalDetails.holdingNo = formData === null || formData === void 0 ? void 0 : (_formData$data6 = formData.data) === null || _formData$data6 === void 0 ? void 0 : _formData$data6.holdingNumber;
        if (formData !== null && formData !== void 0 && (_formData$data7 = formData.data) !== null && _formData$data7 !== void 0 && _formData$data7.registrationDetails) payload.additionalDetails.registrationDetails = formData === null || formData === void 0 ? void 0 : (_formData$data8 = formData.data) === null || _formData$data8 === void 0 ? void 0 : _formData$data8.registrationDetails;
        if (formData !== null && formData !== void 0 && (_formData$data9 = formData.data) !== null && _formData$data9 !== void 0 && _formData$data9.applicationType) payload.additionalDetails.applicationType = formData === null || formData === void 0 ? void 0 : (_formData$data10 = formData.data) === null || _formData$data10 === void 0 ? void 0 : _formData$data10.applicationType;
        if (formData !== null && formData !== void 0 && (_formData$data11 = formData.data) !== null && _formData$data11 !== void 0 && _formData$data11.serviceType) payload.additionalDetails.serviceType = formData === null || formData === void 0 ? void 0 : (_formData$data12 = formData.data) === null || _formData$data12 === void 0 ? void 0 : _formData$data12.serviceType;
        payload.landInfo = {};
        payload.landInfo.address = {};
        if (formData !== null && formData !== void 0 && (_formData$address3 = formData.address) !== null && _formData$address3 !== void 0 && (_formData$address3$ci = _formData$address3.city) !== null && _formData$address3$ci !== void 0 && _formData$address3$ci.code) payload.landInfo.address.city = formData === null || formData === void 0 ? void 0 : (_formData$address4 = formData.address) === null || _formData$address4 === void 0 ? void 0 : (_formData$address4$ci = _formData$address4.city) === null || _formData$address4$ci === void 0 ? void 0 : _formData$address4$ci.code;
        if (formData !== null && formData !== void 0 && (_formData$address5 = formData.address) !== null && _formData$address5 !== void 0 && (_formData$address5$lo = _formData$address5.locality) !== null && _formData$address5$lo !== void 0 && _formData$address5$lo.code) payload.landInfo.address.locality = {
          code: formData === null || formData === void 0 ? void 0 : (_formData$address6 = formData.address) === null || _formData$address6 === void 0 ? void 0 : (_formData$address6$lo = _formData$address6.locality) === null || _formData$address6$lo === void 0 ? void 0 : _formData$address6$lo.code
        };
        if (formData !== null && formData !== void 0 && (_formData$address7 = formData.address) !== null && _formData$address7 !== void 0 && _formData$address7.pincode) payload.landInfo.address.pincode = formData === null || formData === void 0 ? void 0 : (_formData$address8 = formData.address) === null || _formData$address8 === void 0 ? void 0 : _formData$address8.pincode;
        if (formData !== null && formData !== void 0 && (_formData$address9 = formData.address) !== null && _formData$address9 !== void 0 && _formData$address9.landmark) payload.landInfo.address.landmark = formData === null || formData === void 0 ? void 0 : (_formData$address10 = formData.address) === null || _formData$address10 === void 0 ? void 0 : _formData$address10.landmark;
        if (formData !== null && formData !== void 0 && (_formData$address11 = formData.address) !== null && _formData$address11 !== void 0 && _formData$address11.street) payload.landInfo.address.street = formData === null || formData === void 0 ? void 0 : (_formData$address12 = formData.address) === null || _formData$address12 === void 0 ? void 0 : _formData$address12.street;
        if (formData !== null && formData !== void 0 && (_formData$address13 = formData.address) !== null && _formData$address13 !== void 0 && _formData$address13.geoLocation) payload.landInfo.address.geoLocation = formData === null || formData === void 0 ? void 0 : (_formData$address14 = formData.address) === null || _formData$address14 === void 0 ? void 0 : _formData$address14.geoLocation;
        payload.landInfo.owners = conversionOwners;
        payload.landInfo.ownershipCategory = ownershipCategory.code;
        payload.landInfo.tenantId = formData === null || formData === void 0 ? void 0 : (_formData$address15 = formData.address) === null || _formData$address15 === void 0 ? void 0 : (_formData$address15$c = _formData$address15.city) === null || _formData$address15$c === void 0 ? void 0 : _formData$address15$c.code;

        var blockOccupancyDetails = formData;
        payload.landInfo.unit = getUnitsForAPI(blockOccupancyDetails);
        var nameOfAchitect = sessionStorage.getItem("BPA_ARCHITECT_NAME");
        var parsedArchitectName = nameOfAchitect ? JSON.parse(nameOfAchitect) : "ARCHITECT";
        payload.additionalDetails.typeOfArchitect = parsedArchitectName;
        Digit.OBPSService.create({
          BPA: payload
        }, tenantId).then(function (result, err) {
          var _result$BPA;
          if ((result === null || result === void 0 ? void 0 : (_result$BPA = result.BPA) === null || _result$BPA === void 0 ? void 0 : _result$BPA.length) > 0) {
            var _result$BPA2, _result$BPA2$, _result$BPA2$$landInf, _result$BPA2$$landInf2, _result$BPA3, _result$BPA3$, _result$BPA3$$landInf, _result$BPA4, _result$BPA4$, _result$BPA4$$landInf, _formData$address16;
            result === null || result === void 0 ? void 0 : (_result$BPA2 = result.BPA) === null || _result$BPA2 === void 0 ? void 0 : (_result$BPA2$ = _result$BPA2[0]) === null || _result$BPA2$ === void 0 ? void 0 : (_result$BPA2$$landInf = _result$BPA2$.landInfo) === null || _result$BPA2$$landInf === void 0 ? void 0 : (_result$BPA2$$landInf2 = _result$BPA2$$landInf.owners) === null || _result$BPA2$$landInf2 === void 0 ? void 0 : _result$BPA2$$landInf2.forEach(function (owner) {
              owner.gender = {
                code: owner.gender,
                active: true,
                i18nKey: "COMMON_GENDER_" + owner.gender
              };
            });
            result.BPA[0].owners = _extends({}, owner, {
              owners: result === null || result === void 0 ? void 0 : (_result$BPA3 = result.BPA) === null || _result$BPA3 === void 0 ? void 0 : (_result$BPA3$ = _result$BPA3[0]) === null || _result$BPA3$ === void 0 ? void 0 : (_result$BPA3$$landInf = _result$BPA3$.landInfo) === null || _result$BPA3$$landInf === void 0 ? void 0 : _result$BPA3$$landInf.owners,
              ownershipCategory: ownershipCategory
            });
            result.BPA[0].address = result === null || result === void 0 ? void 0 : (_result$BPA4 = result.BPA) === null || _result$BPA4 === void 0 ? void 0 : (_result$BPA4$ = _result$BPA4[0]) === null || _result$BPA4$ === void 0 ? void 0 : (_result$BPA4$$landInf = _result$BPA4$.landInfo) === null || _result$BPA4$$landInf === void 0 ? void 0 : _result$BPA4$$landInf.address;
            result.BPA[0].address.city = formData.address.city;
            result.BPA[0].address.locality = formData.address.locality;
            result.BPA[0].placeName = formData === null || formData === void 0 ? void 0 : (_formData$address16 = formData.address) === null || _formData$address16 === void 0 ? void 0 : _formData$address16.placeName;
            result.BPA[0].data = formData.data;
            result.BPA[0].BlockIds = getBlockIds(result.BPA[0].landInfo.unit);
            result.BPA[0].subOccupancy = formData === null || formData === void 0 ? void 0 : formData.subOccupancy;
            result.BPA[0].uiFlow = formData === null || formData === void 0 ? void 0 : formData.uiFlow;
            setIsDisable(false);
            onSelect("", result.BPA[0], "", true);
          }
        }).catch(function (e) {
          var _e$response, _e$response$data, _e$response$data$Erro;
          setIsDisable(false);
          setShowToast({
            key: "true",
            error: true,
            message: e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message
          });
        });
      } else {
        onSelect(config.key, ownerStep);
      }
    }
  };
  var onSkip = function onSkip() {
    return onSelect();
  };

  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    t: t,
    isDisabled: canmovenext || !ownershipCategory || isDisable,
    forcedError: t(error)
  }, !isLoading ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "10px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_TYPE_OF_OWNER_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
    isMandatory: config.isMandatory,
    options: ownershipCategoryList,
    selectedOption: ownershipCategory,
    optionsKey: "i18nKey",
    onSelect: selectedValue,
    value: ownershipCategory,
    labelKey: "PT_OWNERSHIP",
    isDependent: true
  })), fields.map(function (field, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: field + "-" + index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        border: "solid",
        borderRadius: "5px",
        padding: "10px",
        paddingTop: "20px",
        marginTop: "10px",
        borderColor: "#f3f3f3",
        background: "#FAFAFA"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        marginBottom: "-15px"
      }
    }, t("CORE_COMMON_MOBILE_NUMBER") + " *"), ismultiple && /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
      label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.DeleteIcon, {
        style: {
          float: "right",
          position: "relative",
          bottom: "5px"
        },
        fill: !(fields.length == 1) ? "#494848" : "#FAFAFA"
      }),
      style: {
        width: "100px",
        display: "inline",
        background: "black"
      },
      onClick: function onClick(e) {
        return handleRemove(index);
      }
    }), /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginTop: "30px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "field-container"
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        position: "relative",
        zIndex: "100",
        left: "35px",
        marginTop: "-24.5px",
        marginLeft: Webview ? "-25px" : "-25px"
      }
    }, "+91"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
      style: {
        background: "#FAFAFA",
        padding: "0px 35px"
      },
      type: "text",
      t: t,
      isMandatory: false,
      optionKey: "i18nKey",
      name: "mobileNumber",
      value: field.mobileNumber,
      onChange: function onChange(e) {
        return setMobileNo(index, e);
      }
    }, validation = {
      isRequired: true,
      pattern: "[6-9]{1}[0-9]{9}",
      type: "tel",
      title: t("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")
    })), /*#__PURE__*/React__default.createElement("div", {
      style: {
        position: "relative",
        zIndex: "100",
        right: "35px",
        marginTop: "-24px",
        marginRight: Webview ? "-20px" : "-20px"
      },
      onClick: function onClick(e) {
        return getOwnerDetails(index);
      }
    }, " ", /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchIcon, null), " "))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("CORE_COMMON_NAME") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
      style: {
        background: "#FAFAFA"
      },
      t: t,
      type: "text",
      isMandatory: false,
      optionKey: "i18nKey",
      name: "name",
      value: field.name,
      onChange: function onChange(e) {
        return setOwnerName(index, e);
      }
    }, validation = {
      isRequired: true,
      pattern: "^[a-zA-Z-.`' ]*$",
      type: "text",
      title: t("TL_NAME_ERROR_MESSAGE")
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_APPLICANT_GENDER_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
      name: "gender",
      options: genderList,
      selectedOption: field.gender,
      optionKey: "i18nKey",
      onSelect: function onSelect(e) {
        return setGenderName(index, e);
      },
      t: t
    }), ismultiple && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
      label: t("BPA_IS_PRIMARY_OWNER_LABEL"),
      onChange: function onChange(e) {
        return setPrimaryOwner(index, e);
      },
      value: field.isPrimaryOwner,
      checked: field.isPrimaryOwner,
      style: {
        paddingTop: "10px"
      }
    })));
  }), ismultiple ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      paddingBottom: "15px",
      color: "#FF8C00"
    }
  }, /*#__PURE__*/React__default.createElement("button", {
    type: "button",
    style: {
      paddingTop: "10px"
    },
    onClick: function onClick() {
      return handleAdd();
    }
  }, t("BPA_ADD_OWNER")))) : null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null)), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast === null || showToast === void 0 ? void 0 : showToast.error,
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    isDleteBtn: true,
    onClose: closeToast
  }));
};

function DocumentsPreview(_ref) {
  var documents = _ref.documents,
    _ref$svgStyles = _ref.svgStyles,
    svgStyles = _ref$svgStyles === void 0 ? {} : _ref$svgStyles,
    _ref$isSendBackFlow = _ref.isSendBackFlow,
    isSendBackFlow = _ref$isSendBackFlow === void 0 ? false : _ref$isSendBackFlow,
    _ref$isHrLine = _ref.isHrLine,
    isHrLine = _ref$isHrLine === void 0 ? false : _ref$isHrLine,
    titleStyles = _ref.titleStyles;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isStakeholderApplication = window.location.href.includes("stakeholder");
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, !isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map(function (document, index) {
    var _document$values;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: titleStyles ? titleStyles : {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        flexWrap: "wrap",
        justifyContent: "flex-start"
      }
    }, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values = document.values) === null || _document$values === void 0 ? void 0 : _document$values.map(function (value, index) {
      var _ref2, _value$documentType;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: value === null || value === void 0 ? void 0 : value.url,
        style: (_ref2 = {
          minWidth: "80px",
          marginRight: "10px",
          maxWidth: "100px",
          height: "auto"
        }, _ref2["minWidth"] = "100px", _ref2),
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          justifyContent: "center"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontWeight: "bold",
          textAlign: "center",
          color: "#505A5F"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), isSendBackFlow ? value !== null && value !== void 0 && (_value$documentType = value.documentType) !== null && _value$documentType !== void 0 && _value$documentType.includes("NOC") ? /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType.split(".")[1])) : /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType)) : "");
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))), isHrLine && (documents === null || documents === void 0 ? void 0 : documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#D6D5D4",
        backgroundColor: "#D6D5D4",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null);
  })), isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map(function (document, index) {
    var _document$values2;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", null, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values2 = document.values) === null || _document$values2 === void 0 ? void 0 : _document$values2.map(function (value, index) {
      var _ref3;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: value === null || value === void 0 ? void 0 : value.url,
        style: {
          minWidth: svgStyles !== null && svgStyles !== void 0 && svgStyles.minWidth ? svgStyles === null || svgStyles === void 0 ? void 0 : svgStyles.minWidth : "160px",
          marginRight: "20px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          maxWidth: "940px",
          padding: "8px",
          borderRadius: "4px",
          border: "1px solid #D6D5D4",
          background: "#FAFAFA"
        }
      }, /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontWeight: "bold",
          marginBottom: "10px"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), value !== null && value !== void 0 && value.docInfo ? /*#__PURE__*/React__default.createElement("div", {
        style: {
          fontSize: "12px",
          color: "#505A5F",
          fontWeight: 400,
          lineHeight: "15px",
          marginBottom: "10px"
        }
      }, "" + t(value === null || value === void 0 ? void 0 : value.docInfo)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
        style: (_ref3 = {
          marginTop: "8px",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F",
          fontWeight: "400",
          textAlign: "center"
        }, _ref3["color"] = "#505A5F", _ref3)
      }, "" + t(value === null || value === void 0 ? void 0 : value.title))));
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })));
}

var DocumentDetails = function DocumentDetails(_ref) {
  var _formData$documents, _formData$uiFlow;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : _formData$documents.documents) || []),
    documents = _useState[0],
    setDocuments = _useState[1];
  var _useState2 = React.useState(null),
    error = _useState2[0],
    setError = _useState2[1];
  var _useState3 = React.useState(true),
    enableSubmit = _useState3[0],
    setEnableSubmit = _useState3[1];
  var _useState4 = React.useState(false),
    checkRequiredFields = _useState4[0],
    setCheckRequiredFields = _useState4[1];
  var checkingFlow = formData === null || formData === void 0 ? void 0 : (_formData$uiFlow = formData.uiFlow) === null || _formData$uiFlow === void 0 ? void 0 : _formData$uiFlow.flow;
  var beforeUploadDocuments = cloneDeep_1((formData === null || formData === void 0 ? void 0 : formData.PrevStateDocuments) || []);
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPATaxDocuments(stateId, formData, beforeUploadDocuments || []),
    bpaTaxDocuments = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var handleSubmit = function handleSubmit() {
    var document = formData.documents;
    var documentStep;
    var RealignedDocument = [];
    bpaTaxDocuments && bpaTaxDocuments.map(function (ob) {
      documents && documents.filter(function (x) {
        return ob.code === stringReplaceAll(x === null || x === void 0 ? void 0 : x.additionalDetails.category, "_", ".");
      }).map(function (doc) {
        RealignedDocument.push(doc);
      });
    });
    documentStep = _extends({}, document, {
      documents: RealignedDocument
    });
    onSelect(config.key, documentStep);
  };
  var onSkip = function onSkip() {
    return onSelect();
  };
  function onAdd() {}
  React.useEffect(function () {
    var allRequiredDocumentsCode = bpaTaxDocuments.filter(function (e) {
      return e.required;
    }).map(function (e) {
      return e.code;
    });
    var reqDocumentEntered = allRequiredDocumentsCode.filter(function (reqCode) {
      return documents.reduce(function (acc, doc) {
        var _doc$documentType, _doc$documentType$spl, _doc$documentType2, _doc$documentType2$sp;
        if (reqCode == (doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : (_doc$documentType$spl = _doc$documentType.split('.')) === null || _doc$documentType$spl === void 0 ? void 0 : _doc$documentType$spl[0]) + "." + (doc === null || doc === void 0 ? void 0 : (_doc$documentType2 = doc.documentType) === null || _doc$documentType2 === void 0 ? void 0 : (_doc$documentType2$sp = _doc$documentType2.split('.')) === null || _doc$documentType2$sp === void 0 ? void 0 : _doc$documentType2$sp[1])) {
          return true;
        } else {
          return acc;
        }
      }, false);
    });
    if (reqDocumentEntered.length == allRequiredDocumentsCode.length && documents.length > 0) {
      setEnableSubmit(false);
    } else {
      setEnableSubmit(true);
    }
  }, [documents, checkRequiredFields]);
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: checkingFlow === "OCBPA" ? 3 : 2,
    flow: checkingFlow === "OCBPA" ? "OCBPA" : ""
  }), !isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: window.location.href.includes("editApplication") || window.location.href.includes("sendbacktocitizen") ? false : enableSubmit,
    onAdd: onAdd
  }, bpaTaxDocuments === null || bpaTaxDocuments === void 0 ? void 0 : bpaTaxDocuments.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        maxWidth: "600px",
        minWidth: "280px",
        marginBottom: "15px",
        paddingTop: "15px"
      }
    }, /*#__PURE__*/React__default.createElement(SelectDocument, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields,
      formData: formData,
      beforeUploadDocuments: beforeUploadDocuments || []
    }));
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    onClose: function onClose() {
      return setError(null);
    },
    error: true
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), (window.location.href.includes("/bpa/building_plan_scrutiny/new_construction") || window.location.href.includes("/ocbpa/building_oc_plan_scrutiny/new_construction")) && formData !== null && formData !== void 0 && formData.applicationNo ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
    info: t("CS_FILE_APPLICATION_INFO_LABEL"),
    text: t("BPA_APPLICATION_NUMBER_LABEL") + " " + (formData === null || formData === void 0 ? void 0 : formData.applicationNo) + " " + t("BPA_DOCS_INFORMATION"),
    className: "info-banner-wrap-citizen-override"
  }) : "");
};
var SelectDocument = React__default.memo(function MyComponent(_ref2) {
  var _doc$dropdownData, _formData$documents2, _doc$uploadedDocument;
  var t = _ref2.t,
    doc = _ref2.document,
    setDocuments = _ref2.setDocuments,
    documents = _ref2.documents,
    formData = _ref2.formData,
    beforeUploadDocuments = _ref2.beforeUploadDocuments;
  var filteredDocument = (documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0]) || (beforeUploadDocuments === null || beforeUploadDocuments === void 0 ? void 0 : beforeUploadDocuments.filter(function (item) {
    var _item$documentType2;
    return item === null || item === void 0 ? void 0 : (_item$documentType2 = item.documentType) === null || _item$documentType2 === void 0 ? void 0 : _item$documentType2.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0]);
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState5 = React.useState(filteredDocument ? _extends({}, filteredDocument, {
      active: true,
      code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
      i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
    }) : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) > 0 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {}),
    selectedDocument = _useState5[0],
    setSelectedDocument = _useState5[1];
  var _useState6 = React.useState(null),
    file = _useState6[0],
    setFile = _useState6[1];
  var _useState7 = React.useState(function () {
      return (documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
        var _item$documentType3;
        return item === null || item === void 0 ? void 0 : (_item$documentType3 = item.documentType) === null || _item$documentType3 === void 0 ? void 0 : _item$documentType3.includes(doc === null || doc === void 0 ? void 0 : doc.code);
      }).map(function (e) {
        return {
          fileStoreId: e === null || e === void 0 ? void 0 : e.fileStoreId,
          fileName: (e === null || e === void 0 ? void 0 : e.fileName) || ""
        };
      })) || null;
    }),
    uploadedFile = _useState7[0];
  var _useState8 = React.useState([]),
    setnewArray = _useState8[1];
  var _useState9 = React.useState([]),
    uploadedfileArray = _useState9[0],
    setuploadedfileArray = _useState9[1];
  var _useState10 = React.useState([] || (formData === null || formData === void 0 ? void 0 : (_formData$documents2 = formData.documents) === null || _formData$documents2 === void 0 ? void 0 : _formData$documents2.documents.filter(function (ob) {
      return ob.documentType === selectedDocument.code;
    }))),
    fileArray = _useState10[0],
    setfileArray = _useState10[1];
  var handleSelectDocument = function handleSelectDocument(value) {
    if (filteredDocument !== null && filteredDocument !== void 0 && filteredDocument.documentType) {
      filteredDocument.documentType = value === null || value === void 0 ? void 0 : value.code;
      var currDocs = documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
        var _item$documentType4;
        return item === null || item === void 0 ? void 0 : (_item$documentType4 = item.documentType) === null || _item$documentType4 === void 0 ? void 0 : _item$documentType4.includes(doc === null || doc === void 0 ? void 0 : doc.code);
      });
      currDocs.map(function (doc) {
        return doc.documentType = value === null || value === void 0 ? void 0 : value.code;
      });
      var newDoc = [].concat(documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
        var _item$documentType5;
        return !(item !== null && item !== void 0 && (_item$documentType5 = item.documentType) !== null && _item$documentType5 !== void 0 && _item$documentType5.includes(doc === null || doc === void 0 ? void 0 : doc.code));
      }), currDocs);
      setDocuments(newDoc);
    }
    setSelectedDocument(value);
  };
  function selectfile(e, key) {
    e && setFile(e.file);
    e && setfileArray([].concat(fileArray, [e.file]));
  }
  function getData(e) {
    var _newArr;
    var key = selectedDocument.code;
    var data, newArr;
    if ((e === null || e === void 0 ? void 0 : e.length) > 0) {
      var _formData$documents3, _formData$documents3$;
      data = Object.fromEntries(e);
      newArr = Object.values(data);
      newArr = formData === null || formData === void 0 ? void 0 : (_formData$documents3 = formData.documents) === null || _formData$documents3 === void 0 ? void 0 : (_formData$documents3$ = _formData$documents3.documents) === null || _formData$documents3$ === void 0 ? void 0 : _formData$documents3$.filter(function (ob) {
        return ob.documentType === selectedDocument.code;
      });
      setnewArray(newArr);
      var newfiles = [];
      e === null || e === void 0 ? void 0 : e.map(function (doc, index) {
        var _doc$, _doc$$fileStoreId, _doc$1$fileStoreId, _documents$find;
        newfiles.push({
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          additionalDetails: {
            category: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code.split(".").slice(0, 2).join('_')
          },
          fileStoreId: doc === null || doc === void 0 ? void 0 : (_doc$ = doc[1]) === null || _doc$ === void 0 ? void 0 : (_doc$$fileStoreId = _doc$.fileStoreId) === null || _doc$$fileStoreId === void 0 ? void 0 : _doc$$fileStoreId.fileStoreId,
          documentUid: doc === null || doc === void 0 ? void 0 : (_doc$1$fileStoreId = doc[1].fileStoreId) === null || _doc$1$fileStoreId === void 0 ? void 0 : _doc$1$fileStoreId.fileStoreId,
          fileName: (doc === null || doc === void 0 ? void 0 : doc[0]) || "",
          id: documents ? (_documents$find = documents.find(function (x) {
            return x.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code);
          })) === null || _documents$find === void 0 ? void 0 : _documents$find.id : undefined
        });
      });
      var __documents = [].concat(documents.filter(function (e) {
        return e.documentType !== key;
      }), newfiles);
      setDocuments(__documents);
    } else if ((e === null || e === void 0 ? void 0 : e.length) == 0) {
      var _documents = [].concat(documents.filter(function (e) {
        return e.documentType !== key;
      }));
      setDocuments(_documents);
    }
    (_newArr = newArr) === null || _newArr === void 0 ? void 0 : _newArr.map(function (ob) {
      if (!(ob !== null && ob !== void 0 && ob.file)) {
        ob.file = {};
      }
      ob.file.documentType = key;
      selectfile(ob);
    });
  }
  function setcodeafterupload() {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(function (prev) {

        if (uploadedFile === null || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === undefined || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === null) {
          return prev;
        }
        var filteredDocumentsByFileStoreId = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile.fileStoreId;
        });
        var newfiles = [];
        uploadedfileArray && uploadedfileArray.map(function (doc, index) {
          var _fileArray$index, _documents$find2;
          newfiles.push({
            documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
            fileStoreId: doc.fileStoreId,
            additionalDetails: {
              category: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code.split(".").slice(0, 2).join('_')
            },
            documentUid: doc.fileStoreId,
            fileName: ((_fileArray$index = fileArray[index]) === null || _fileArray$index === void 0 ? void 0 : _fileArray$index.name) || "",
            id: documents ? (_documents$find2 = documents.find(function (x) {
              return x.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code);
            })) === null || _documents$find2 === void 0 ? void 0 : _documents$find2.id : undefined
          });
        });
        return [].concat(filteredDocumentsByFileStoreId, newfiles);
      });
      setuploadedfileArray([]);
    }
  }
  React.useEffect(function () {
    uploadedfileArray.length > 0 && setcodeafterupload();
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(function (prev) {
        var _documents$find3;

        if (uploadedFile === null || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === undefined || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === null) {
          if ((prev === null || prev === void 0 ? void 0 : prev.length) > 0) {
            prev === null || prev === void 0 ? void 0 : prev.forEach(function (data) {
              var _data$documentType, _data$documentType2, _selectedDocument$cod, _selectedDocument$cod2;
              var normalDocumentType = (data === null || data === void 0 ? void 0 : (_data$documentType = data.documentType) === null || _data$documentType === void 0 ? void 0 : _data$documentType.split('.')[0]) + "." + (data === null || data === void 0 ? void 0 : (_data$documentType2 = data.documentType) === null || _data$documentType2 === void 0 ? void 0 : _data$documentType2.split('.')[1]);
              var selectedDocumentType = (selectedDocument === null || selectedDocument === void 0 ? void 0 : (_selectedDocument$cod = selectedDocument.code) === null || _selectedDocument$cod === void 0 ? void 0 : _selectedDocument$cod.split('.')[0]) + "." + (selectedDocument === null || selectedDocument === void 0 ? void 0 : (_selectedDocument$cod2 = selectedDocument.code) === null || _selectedDocument$cod2 === void 0 ? void 0 : _selectedDocument$cod2.split('.')[1]);
              if (normalDocumentType == selectedDocumentType) {
                var _data$file;
                if (data !== null && data !== void 0 && data.documentType) data.documentType = selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code;
                if (data !== null && data !== void 0 && (_data$file = data.file) !== null && _data$file !== void 0 && _data$file.documentType) data.file.documentType = selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code;
              }
            });
          }
          return prev;
        }
        var filteredDocumentsByFileStoreId = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile.fileStoreId;
        });
        return [].concat(filteredDocumentsByFileStoreId, [{
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile.fileStoreId,
          documentUid: uploadedFile.fileStoreId,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || uploadedFile.fileName || "document",
          id: documents ? (_documents$find3 = documents.find(function (x) {
            return x.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code);
          })) === null || _documents$find3 === void 0 ? void 0 : _documents$find3.id : undefined
        }]);
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(function () {
    if (!selectedDocument.code && uploadedFile !== null) setuploadedfileArray([].concat(uploadedfileArray, [uploadedFile]));
  }, [uploadedFile]);
  var allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  var uploadedFilesPreFill = React.useMemo(function () {
    var _formData$documents4, _formData$documents4$;
    var selectedUplDocs = [];
    formData === null || formData === void 0 ? void 0 : (_formData$documents4 = formData.documents) === null || _formData$documents4 === void 0 ? void 0 : (_formData$documents4$ = _formData$documents4.documents) === null || _formData$documents4$ === void 0 ? void 0 : _formData$documents4$.filter(function (ob) {
      return ob.documentType === selectedDocument.code;
    }).forEach(function (e) {
      return selectedUplDocs.push([e.fileName, {
        file: {
          name: e.fileName,
          type: e.documentType
        },
        fileStoreId: {
          fileStoreId: e.fileStoreId,
          tenantId: tenantId
        }
      }]);
    });
    return selectedUplDocs;
  }, [formData]);
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, doc !== null && doc !== void 0 && doc.required ? t(doc === null || doc === void 0 ? void 0 : doc.code) + " *" : "" + t(doc === null || doc === void 0 ? void 0 : doc.code)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    t: t,
    isMandatory: false,
    option: Digit.Utils.locale.sortDropdownNames(doc === null || doc === void 0 ? void 0 : doc.dropdownData, 'i18nKey', t),
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "BPA",
    tenantId: tenantId,
    getFormState: getData,
    setuploadedstate: uploadedFilesPreFill,
    t: t,
    extraStyleName: "OBPS",
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  }), (doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : _doc$uploadedDocument.length) && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    isSendBackFlow: true,
    documents: doc === null || doc === void 0 ? void 0 : doc.uploadedDocuments
  }));
});

function PropertyDocuments(_ref) {
  var documents = _ref.documents,
    _ref$svgStyles = _ref.svgStyles,
    svgStyles = _ref$svgStyles === void 0 ? {} : _ref$svgStyles,
    _ref$isSendBackFlow = _ref.isSendBackFlow,
    isSendBackFlow = _ref$isSendBackFlow === void 0 ? false : _ref$isSendBackFlow;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useState = React.useState(function () {
      return [];
    }),
    filesArray = _useState[0],
    setFilesArray = _useState[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState2 = React.useState({}),
    pdfFiles = _useState2[0],
    setPdfFiles = _useState2[1];
  React.useEffect(function () {
    var _acc;
    var acc = [];
    documents === null || documents === void 0 ? void 0 : documents.forEach(function (element, index, array) {
      acc = [].concat(acc, element.values ? element.values : []);
    });
    setFilesArray((_acc = acc) === null || _acc === void 0 ? void 0 : _acc.map(function (value) {
      return value === null || value === void 0 ? void 0 : value.fileStoreId;
    }));
  }, [documents]);
  React.useEffect(function () {
    if (filesArray !== null && filesArray !== void 0 && filesArray.length) {
      Digit.UploadServices.Filefetch(filesArray, Digit.ULBService.getStateId()).then(function (res) {
        setPdfFiles(res === null || res === void 0 ? void 0 : res.data);
      });
    }
  }, [filesArray]);
  var checkLocation = window.location.href.includes("employee/tl") || window.location.href.includes("/obps");
  var isStakeholderApplication = window.location.href.includes("stakeholder");
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, !isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map(function (document, index) {
    var _document$values;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: checkLocation ? {
        marginTop: "32px",
        marginBottom: "18px",
        color: "#0B0C0C, 100%",
        fontSize: "24px",
        lineHeight: "30px"
      } : {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        flexWrap: "wrap",
        justifyContent: "flex-start"
      }
    }, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values = document.values) === null || _document$values === void 0 ? void 0 : _document$values.map(function (value, index) {
      var _pdfFiles$value$fileS, _value$documentType;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: (_pdfFiles$value$fileS = pdfFiles[value.fileStoreId]) === null || _pdfFiles$value$fileS === void 0 ? void 0 : _pdfFiles$value$fileS.split(",")[0],
        style: {
          minWidth: "80px",
          marginRight: "10px",
          maxWidth: "100px",
          height: "auto"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          display: "flex",
          justifyContent: "center"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), /*#__PURE__*/React__default.createElement("p", {
        style: checkLocation ? {
          marginTop: "8px",
          fontWeight: "bold",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F",
          textAlign: "center"
        } : {
          marginTop: "8px",
          fontWeight: "bold"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), isSendBackFlow ? value !== null && value !== void 0 && (_value$documentType = value.documentType) !== null && _value$documentType !== void 0 && _value$documentType.includes("NOC") ? /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType.split(".")[1])) : /*#__PURE__*/React__default.createElement("p", {
        style: {
          textAlign: "center"
        }
      }, t(value === null || value === void 0 ? void 0 : value.documentType)) : "");
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })), isStakeholderApplication && (documents === null || documents === void 0 ? void 0 : documents.map(function (document, index) {
    var _document$values2;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, document !== null && document !== void 0 && document.title ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "32px",
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(document === null || document === void 0 ? void 0 : document.title)) : null, /*#__PURE__*/React__default.createElement("div", null, document !== null && document !== void 0 && document.values && (document === null || document === void 0 ? void 0 : document.values.length) > 0 ? document === null || document === void 0 ? void 0 : (_document$values2 = document.values) === null || _document$values2 === void 0 ? void 0 : _document$values2.map(function (value, index) {
      var _pdfFiles$value$fileS2;
      return /*#__PURE__*/React__default.createElement("a", {
        target: "_",
        href: (_pdfFiles$value$fileS2 = pdfFiles[value.fileStoreId]) === null || _pdfFiles$value$fileS2 === void 0 ? void 0 : _pdfFiles$value$fileS2.split(",")[0],
        style: {
          minWidth: svgStyles !== null && svgStyles !== void 0 && svgStyles.minWidth ? svgStyles === null || svgStyles === void 0 ? void 0 : svgStyles.minWidth : "160px",
          marginRight: "20px"
        },
        key: index
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          maxWidth: "940px",
          padding: "8px",
          borderRadius: "4px",
          border: "1px solid #D6D5D4",
          background: "#FAFAFA"
        }
      }, /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontWeight: "bold",
          marginBottom: "10px"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)), value !== null && value !== void 0 && value.docInfo ? /*#__PURE__*/React__default.createElement("div", {
        style: {
          fontSize: "12px",
          color: "#505A5F",
          fontWeight: 400,
          lineHeight: "15px",
          marginBottom: "10px"
        }
      }, "" + t(value === null || value === void 0 ? void 0 : value.docInfo)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
        style: {
          marginTop: "8px",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F",
          fontWeight: "400"
        }
      }, "" + t(value === null || value === void 0 ? void 0 : value.title))));
    }) : !window.location.href.includes("citizen") && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("p", null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
  })));
}

var NOCDetails = function NOCDetails(_ref) {
  var _formData$nocDocument, _formData$uiFlow;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$nocDocument = formData.nocDocuments) === null || _formData$nocDocument === void 0 ? void 0 : _formData$nocDocument.nocDocuments) || []),
    nocDocuments = _useState[0],
    setNocDocuments = _useState[1];
  var _useState2 = React.useState(null),
    error = _useState2[0],
    setError = _useState2[1];
  var _useState3 = React.useState([]),
    nocTaxDocuments = _useState3[0],
    setNocTaxDocuments = _useState3[1];
  var _useState4 = React.useState(true);
  var _useState5 = React.useState(false),
    setCheckRequiredFields = _useState5[1];
  var _useState6 = React.useState(formData !== null && formData !== void 0 && formData.PrevStateNocDocuments ? cloneDeep_1(formData === null || formData === void 0 ? void 0 : formData.PrevStateNocDocuments) : []),
    beforeUploadNocDocuments = _useState6[0],
    setBeforeUploadNocDocuments = _useState6[1];
  var checkingFlow = formData === null || formData === void 0 ? void 0 : (_formData$uiFlow = formData.uiFlow) === null || _formData$uiFlow === void 0 ? void 0 : _formData$uiFlow.flow;
  var _useState7 = React.useState(formData === null || formData === void 0 ? void 0 : formData.applicationNo),
    sourceRefId = _useState7[0];
  var _useState8 = React.useState([]),
    nocDatils = _useState8[0],
    setNocDetails = _useState8[1];
  var _useState9 = React.useState([]),
    nocDocumentTypeMaping = _useState9[0],
    setNocDocumentTypeMaping = _useState9[1];
  var _useState10 = React.useState([]),
    commonDocMaping = _useState10[0],
    setCommonDocMaping = _useState10[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useNocDetails(formData === null || formData === void 0 ? void 0 : formData.tenantId, {
      sourceRefId: sourceRefId
    }),
    data = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateId, "NOC", ["DocumentTypeMapping"]),
    nocDocsLoading = _Digit$Hooks$obps$use2.isLoading,
    nocDocs = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["DocumentType"]),
    commonDocs = _Digit$Hooks$obps$use3.data;
  var _Digit$Hooks$useDocum = Digit.Hooks.useDocumentSearch(beforeUploadNocDocuments, {
      enabled: (beforeUploadNocDocuments === null || beforeUploadNocDocuments === void 0 ? void 0 : beforeUploadNocDocuments.length) > 0 ? true : false
    }),
    pdfDetails = _Digit$Hooks$useDocum.data,
    pdfLoading = _Digit$Hooks$useDocum.isLoading;
  React.useEffect(function () {
    var _pdfDetails$pdfFiles;
    if ((pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles === void 0 ? void 0 : _pdfDetails$pdfFiles.length) > 0) {
      var _pdfDetails$pdfFiles2;
      pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles2 = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles2 === void 0 ? void 0 : _pdfDetails$pdfFiles2.forEach(function (resDoc) {
        return resDoc.title = resDoc === null || resDoc === void 0 ? void 0 : resDoc.documentType;
      });
      setBeforeUploadNocDocuments(pdfDetails === null || pdfDetails === void 0 ? void 0 : pdfDetails.pdfFiles);
    }
  }, [pdfDetails === null || pdfDetails === void 0 ? void 0 : pdfDetails.pdfFiles]);
  React.useEffect(function () {
    setNocDetails(data);
  }, [data]);
  React.useEffect(function () {
    var _nocDocs$NOC;
    setNocDocumentTypeMaping(nocDocs === null || nocDocs === void 0 ? void 0 : (_nocDocs$NOC = nocDocs.NOC) === null || _nocDocs$NOC === void 0 ? void 0 : _nocDocs$NOC.DocumentTypeMapping);
  }, [nocDocs]);
  React.useEffect(function () {
    var _commonDocs$commonMa;
    setCommonDocMaping(commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : _commonDocs$commonMa.DocumentType);
  }, [commonDocs]);
  React.useEffect(function () {
    if (nocDatils !== null && nocDatils !== void 0 && nocDatils.length && nocDocumentTypeMaping !== null && nocDocumentTypeMaping !== void 0 && nocDocumentTypeMaping.length) {
      var documents = [];
      nocDatils.map(function (noc) {
        var _filteredData$, _filteredData$$docTyp;
        var filteredData = nocDocumentTypeMaping.filter(function (data) {
          return data.applicationType === noc.applicationType && data.nocType === noc.nocType;
        });
        if (filteredData !== null && filteredData !== void 0 && (_filteredData$ = filteredData[0]) !== null && _filteredData$ !== void 0 && (_filteredData$$docTyp = _filteredData$.docTypes) !== null && _filteredData$$docTyp !== void 0 && _filteredData$$docTyp[0]) {
          filteredData[0].docTypes[0].nocType = filteredData[0].nocType;
          filteredData[0].docTypes[0].additionalDetails = {
            submissionDetails: noc.additionalDetails,
            applicationStatus: noc.applicationStatus,
            appNumberLink: noc.applicationNo,
            nocNo: noc.nocNo
          };
          documents.push(filteredData[0].docTypes[0]);
        }
      });
      var documentsList = [];
      if (documents && documents.length > 0) {
        documents.map(function (doc) {
          var code = doc.documentType;
          doc.dropdownData = [];
          doc.uploadedDocuments = [];
          commonDocMaping && commonDocMaping.forEach(function (value) {
            var values = value.code.slice(0, code.length);
            if (code === values) {
              doc.hasDropdown = true;
              doc.dropdownData.push(value);
            }
          });
          doc.uploadedDocuments[0] = {};
          doc.uploadedDocuments[0].values = [];
          beforeUploadNocDocuments.map(function (upDocs) {
            var _upDocs$documentType, _upDocs$documentType2;
            if (code === (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType = upDocs.documentType) === null || _upDocs$documentType === void 0 ? void 0 : _upDocs$documentType.split('.')[0]) + "." + (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType2 = upDocs.documentType) === null || _upDocs$documentType2 === void 0 ? void 0 : _upDocs$documentType2.split('.')[1])) {
              doc.uploadedDocuments[0].values.push(upDocs);
            }
          });
          documentsList.push(doc);
        });
      }
      documentsList.forEach(function (data) {
        data.code = data.documentType;
        data.dropdownData.forEach(function (dpData) {
          dpData.i18nKey = dpData.code;
        });
      });
      setNocTaxDocuments(documentsList);
    }
  }, [nocDatils, nocDocumentTypeMaping, commonDocMaping, beforeUploadNocDocuments]);
  var handleSubmit = function handleSubmit() {
    var nocDocument = formData.nocDocuments;
    var nocDocumentStep;
    nocDocumentStep = _extends({}, nocDocument, {
      nocDocuments: nocDocuments,
      NocDetails: nocDatils,
      nocTaxDocuments: nocTaxDocuments
    });
    onSelect(config.key, nocDocumentStep);
  };
  var onSkip = function onSkip() {
    var nocDocument = formData.nocDocuments;
    var nocDocumentStep;
    nocDocumentStep = _extends({}, nocDocument, {
      nocDocuments: nocDocuments,
      NocDetails: nocDatils,
      nocTaxDocuments: nocTaxDocuments
    });
    onSelect(config.key, nocDocumentStep);
  };
  function onAdd() {}
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 3,
    flow: checkingFlow === "OCBPA" ? "OCBPA" : ""
  }), !nocDocsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    onAdd: onAdd
  }, nocTaxDocuments === null || nocTaxDocuments === void 0 ? void 0 : nocTaxDocuments.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement(SelectDocument$1, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setNocDocuments: setNocDocuments,
      nocDocuments: nocDocuments,
      setCheckRequiredFields: setCheckRequiredFields,
      formData: formData,
      beforeUploadNocDocuments: beforeUploadNocDocuments,
      pdfLoading: pdfLoading
    });
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    onClose: function onClose() {
      return setError(null);
    },
    error: true
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null));
};
function SelectDocument$1(_ref2) {
  var _doc$dropdownData, _doc$additionalDetail, _doc$uploadedDocument;
  var t = _ref2.t,
    doc = _ref2.document,
    setNocDocuments = _ref2.setNocDocuments,
    nocDocuments = _ref2.nocDocuments,
    formData = _ref2.formData,
    beforeUploadNocDocuments = _ref2.beforeUploadNocDocuments,
    pdfLoading = _ref2.pdfLoading;
  var filteredDocument = (nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.filter(function (item) {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0]) || (beforeUploadNocDocuments === null || beforeUploadNocDocuments === void 0 ? void 0 : beforeUploadNocDocuments.filter(function (item) {
    var _item$documentType2;
    return item === null || item === void 0 ? void 0 : (_item$documentType2 = item.documentType) === null || _item$documentType2 === void 0 ? void 0 : _item$documentType2.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0]);
  var tenantId = Digit.ULBService.getCurrentTenantId(doc);
  var _useState11 = React.useState(doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData[0]),
    selectedDocument = _useState11[0],
    setSelectedDocument = _useState11[1];
  var _useState12 = React.useState(null),
    setFile = _useState12[1];
  var _useState13 = React.useState(function () {
      var _nocDocuments$filter$, _nocDocuments$filter$2;
      return {
        fileStoreId: nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$filter$ = nocDocuments.filter(function (item) {
          var _item$documentType3;
          return item === null || item === void 0 ? void 0 : (_item$documentType3 = item.documentType) === null || _item$documentType3 === void 0 ? void 0 : _item$documentType3.includes(doc === null || doc === void 0 ? void 0 : doc.code);
        })[0]) === null || _nocDocuments$filter$ === void 0 ? void 0 : _nocDocuments$filter$.fileStoreId,
        fileName: nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$filter$2 = nocDocuments.filter(function (item) {
          var _item$documentType4;
          return item === null || item === void 0 ? void 0 : (_item$documentType4 = item.documentType) === null || _item$documentType4 === void 0 ? void 0 : _item$documentType4.includes(doc === null || doc === void 0 ? void 0 : doc.code);
        })[0]) === null || _nocDocuments$filter$2 === void 0 ? void 0 : _nocDocuments$filter$2.fileName
      } || null;
    }),
    uploadedFile = _useState13[0];
  var _useState14 = React.useState([]),
    newArray = _useState14[0],
    setnewArray = _useState14[1];
  var allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfile(e, key) {
    e && setSelectedDocument({
      documentType: key
    });
    e && setFile(e.file);
  }
  function getData(e, key) {
    var _newArr;
    var data, newArr;
    if ((e === null || e === void 0 ? void 0 : e.length) > 0) {
      var _formData$nocDocument2;
      data = Object.fromEntries(e);
      newArr = Object.values(data);
      newArr = formData === null || formData === void 0 ? void 0 : (_formData$nocDocument2 = formData.nocDocuments) === null || _formData$nocDocument2 === void 0 ? void 0 : _formData$nocDocument2.nocDocuments.filter(function (ob) {
        return ob.documentType === key;
      });
      setnewArray(newArr);
      var newfiles = [];
      e === null || e === void 0 ? void 0 : e.map(function (doc, index) {
        var _doc$, _doc$$fileStoreId, _doc$1$fileStoreId, _nocDocuments$find;
        newfiles.push({
          documentType: key,
          fileStoreId: doc === null || doc === void 0 ? void 0 : (_doc$ = doc[1]) === null || _doc$ === void 0 ? void 0 : (_doc$$fileStoreId = _doc$.fileStoreId) === null || _doc$$fileStoreId === void 0 ? void 0 : _doc$$fileStoreId.fileStoreId,
          documentUid: doc === null || doc === void 0 ? void 0 : (_doc$1$fileStoreId = doc[1].fileStoreId) === null || _doc$1$fileStoreId === void 0 ? void 0 : _doc$1$fileStoreId.fileStoreId,
          fileName: (doc === null || doc === void 0 ? void 0 : doc[0]) || "",
          id: nocDocuments ? (_nocDocuments$find = nocDocuments.find(function (x) {
            return x.documentType === key;
          })) === null || _nocDocuments$find === void 0 ? void 0 : _nocDocuments$find.id : undefined
        });
      });
      var __documents = [].concat(nocDocuments.filter(function (e) {
        return e.documentType !== key;
      }), newfiles);
      setNocDocuments(__documents);
    }
    (_newArr = newArr) === null || _newArr === void 0 ? void 0 : _newArr.map(function (ob) {
      if (!(ob !== null && ob !== void 0 && ob.file)) {
        ob.file = {};
      }
      ob.file.documentType = key;
      selectfile(ob, key);
    });
  }
  React.useEffect(function () {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.documentType && (nocDocuments.filter(function (ob) {
      return ob.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length == 0 || newArray.filter(function (ob) {
      var _ob$file;
      return (ob === null || ob === void 0 ? void 0 : (_ob$file = ob.file) === null || _ob$file === void 0 ? void 0 : _ob$file.documentType) === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length !== nocDocuments.filter(function (ob) {
      return ob.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length)) {
      setNocDocuments(function (prev) {
        var _doc$dropdownData2, _doc$dropdownData2$;

        if (uploadedFile === null || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === undefined || (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileStoreId) === null) {
          return prev;
        }
        var filteredDocumentsByFileStoreId = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile.fileStoreId;
        });
        return [].concat(filteredDocumentsByFileStoreId, [{
          documentType: doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : (_doc$dropdownData2$ = _doc$dropdownData2[0]) === null || _doc$dropdownData2$ === void 0 ? void 0 : _doc$dropdownData2$.code,
          fileStoreId: uploadedFile.fileStoreId,
          documentUid: uploadedFile.fileStoreId,
          fileName: (uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.fileName) || ""
        }]);
      });
    }
  }, [uploadedFile, selectedDocument]);
  var uploadedFilesPreFill = React.useMemo(function () {
    var _formData$nocDocument3, _formData$nocDocument4;
    var selectedUplDocs = [];
    var key = selectedDocument.code;
    formData === null || formData === void 0 ? void 0 : (_formData$nocDocument3 = formData.nocDocuments) === null || _formData$nocDocument3 === void 0 ? void 0 : (_formData$nocDocument4 = _formData$nocDocument3.nocDocuments) === null || _formData$nocDocument4 === void 0 ? void 0 : _formData$nocDocument4.filter(function (ob) {
      return ob.documentType === key;
    }).forEach(function (e) {
      return selectedUplDocs.push([e.fileName, {
        file: {
          name: e.fileName,
          type: e.documentType
        },
        fileStoreId: {
          fileStoreId: e.fileStoreId,
          tenantId: tenantId
        }
      }]);
    });
    return selectedUplDocs;
  }, [formData]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "1px solid #D6D5D4",
      padding: "16px 8px 16px 8px",
      background: "#FAFAFA",
      borderRadius: "5px",
      marginBottom: "24px",
      marginTop: "5px"
    }
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("h1", {
    style: {
      color: "#0B0C0C",
      lineHeight: "37px",
      fontWeight: "700",
      fontSize: "32px",
      fontFamily: "Roboto Condensed",
      paddingBottom: "24px"
    }
  }, t("BPA_" + (doc === null || doc === void 0 ? void 0 : doc.nocType) + "_HEADER")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      paddingBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement("h1", {
    style: {
      color: "#0B0C0C",
      lineHeight: "19px",
      fontWeight: "700",
      fontSize: "16px",
      fontFamily: "Roboto",
      marginRight: "10px"
    }
  }, t("BPA_" + (doc === null || doc === void 0 ? void 0 : doc.nocType) + "_LABEL")), /*#__PURE__*/React__default.createElement("h1", null, doc === null || doc === void 0 ? void 0 : (_doc$additionalDetail = doc.additionalDetails) === null || _doc$additionalDetail === void 0 ? void 0 : _doc$additionalDetail.appNumberLink))), !window.location.href.includes("sendbacktocitizen") && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "BPA",
    tenantId: tenantId,
    getFormState: function getFormState(e) {
      return getData(e, doc.dropdownData[0].code);
    },
    setuploadedstate: uploadedFilesPreFill,
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  }), (doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : _doc$uploadedDocument.length) && !pdfLoading && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: doc === null || doc === void 0 ? void 0 : doc.uploadedDocuments,
    svgStyles: {},
    isSendBackFlow: false,
    isHrLine: true,
    titleStyles: {
      fontSize: "18px",
      lineHeight: "24px",
      "fontWeight": 700,
      marginBottom: "10px"
    }
  }));
}

var GIS = function GIS(_ref) {
  var _formData$address, _formData$address2;
  var t = _ref.t,
    onSelect = _ref.onSelect,
    _ref$formData = _ref.formData,
    formData = _ref$formData === void 0 ? {} : _ref$formData,
    handleRemove = _ref.handleRemove,
    _onSave = _ref.onSave;
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$address = formData.address) === null || _formData$address === void 0 ? void 0 : _formData$address.pincode) || ""),
    pincode = _useState[0],
    setPincode = _useState[1];
  var _useState2 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$address2 = formData.address) === null || _formData$address2 === void 0 ? void 0 : _formData$address2.geoLocation) || {}),
    geoLocation = _useState2[0],
    setGeoLocation = _useState2[1];
  var tenants = Digit.Hooks.obps.useTenants();
  var _useState3 = React.useState(null),
    pincodeServicability = _useState3[0],
    setPincodeServicability = _useState3[1];
  var _useState4 = React.useState(""),
    placeName = _useState4[0],
    setPlaceName = _useState4[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var Webview = !Digit.Utils.browser.isMobile();
  var onSkip = function onSkip() {
    return onSelect();
  };
  var _onChange = function onChange(code, location, place) {
    setPincodeServicability(null);
    var foundValue = tenants === null || tenants === void 0 ? void 0 : tenants.find(function (obj) {
      var _obj$pincode;
      return (_obj$pincode = obj.pincode) === null || _obj$pincode === void 0 ? void 0 : _obj$pincode.find(function (item) {
        return item == code;
      });
    });
    if (!foundValue) {
      setPincodeServicability("BPA_COMMON_PINCODE_NOT_SERVICABLE");
      setPincode("");
      setGeoLocation({});
      setPlaceName("");
    } else {
      setPincode(code);
      setGeoLocation(location);
      setPlaceName(place);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      position: "fixed",
      background: "#00000050",
      width: "100%",
      height: "100vh",
      top: "0",
      left: "0"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      position: "relative",
      marginTop: "60px"
    }
  }, /*#__PURE__*/React__default.createElement("svg", {
    style: {
      float: "left",
      position: "relative",
      bottom: "32px",
      marginTop: Webview ? "62px" : "57px",
      marginLeft: Webview ? "26%" : "20px"
    },
    width: "24",
    height: "24",
    viewBox: "0 0 30 30",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M14.9999 9.66666C12.0533 9.66666 9.66658 12.0533 9.66658 15C9.66658 17.9467 12.0533 20.3333 14.9999 20.3333C17.9466 20.3333 20.3333 17.9467 20.3333 15C20.3333 12.0533 17.9466 9.66666 14.9999 9.66666ZM26.9199 13.6667C26.3066 8.10666 21.8933 3.69333 16.3333 3.07999V0.333328H13.6666V3.07999C8.10658 3.69333 3.69325 8.10666 3.07992 13.6667H0.333252V16.3333H3.07992C3.69325 21.8933 8.10658 26.3067 13.6666 26.92V29.6667H16.3333V26.92C21.8933 26.3067 26.3066 21.8933 26.9199 16.3333H29.6666V13.6667H26.9199ZM14.9999 24.3333C9.83992 24.3333 5.66658 20.16 5.66658 15C5.66658 9.83999 9.83992 5.66666 14.9999 5.66666C20.1599 5.66666 24.3333 9.83999 24.3333 15C24.3333 20.16 20.1599 24.3333 14.9999 24.3333Z",
    fill: "#505A5F"
  })), /*#__PURE__*/React__default.createElement("div", {
    style: Webview ? {
      marginLeft: "25%",
      marginRight: "25%"
    } : {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LocationSearchCard, {
    style: {
      position: "relative",
      marginTop: "100px",
      marginBottom: "-100px"
    },
    header: t("BPA_GIS_LABEL"),
    cardText: t(""),
    nextText: t("BPA_PIN_LOCATION_LABEL")
    ,
    skip: onSkip,
    t: t,
    position: geoLocation
    ,
    onSave: function onSave() {
      return _onSave(geoLocation, pincode, placeName);
    },
    onChange: function onChange(code, location, place) {
      return _onChange(code, location, place);
    },
    disabled: pincode === "",
    forcedError: t(pincodeServicability),
    isPlaceRequired: true,
    handleRemove: handleRemove,
    Webview: Webview,
    isPopUp: true
  }))));
};

var LocationDetails = function LocationDetails(_ref) {
  var _formData, _formData$address, _formData2, _formData2$address, _formData3, _formData3$Scrutiny, _formData3$Scrutiny$, _formData5, _formData5$address, _formData6, _formData6$address, _formData7, _formData7$address, _formData8, _formData8$address, _formData9, _formData10, _formData10$data, _formData10$data$edcr, _formData11, _formData12, _formData17;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    userType = _ref.userType,
    formData = _ref.formData;
  var currCity = JSON.parse(sessionStorage.getItem("currentCity")) || {};
  var currPincode = sessionStorage.getItem("currentPincode");
  var currLocality = JSON.parse(sessionStorage.getItem("currentLocality")) || {};
  var allCities = Digit.Hooks.obps.useTenants();
  var _useLocation = reactRouterDom.useLocation();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState(null),
    Pinerror = _useState[0],
    setPinerror = _useState[1];
  var _useState2 = React.useState(false),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];
  var _useState3 = React.useState(currPincode || ((_formData = formData) === null || _formData === void 0 ? void 0 : (_formData$address = _formData.address) === null || _formData$address === void 0 ? void 0 : _formData$address.pincode) || ""),
    pincode = _useState3[0],
    setPincode = _useState3[1];
  var _useState4 = React.useState(((_formData2 = formData) === null || _formData2 === void 0 ? void 0 : (_formData2$address = _formData2.address) === null || _formData2$address === void 0 ? void 0 : _formData2$address.geoLocation) || ""),
    geoLocation = _useState4[0],
    setgeoLocation = _useState4[1];
  var _useState5 = React.useState((_formData3 = formData) === null || _formData3 === void 0 ? void 0 : (_formData3$Scrutiny = _formData3.Scrutiny) === null || _formData3$Scrutiny === void 0 ? void 0 : (_formData3$Scrutiny$ = _formData3$Scrutiny[0]) === null || _formData3$Scrutiny$ === void 0 ? void 0 : _formData3$Scrutiny$.tenantIdData);
  var _useState6 = React.useState(function () {
      var _formData4, _formData4$address;
      return ((_formData4 = formData) === null || _formData4 === void 0 ? void 0 : (_formData4$address = _formData4.address) === null || _formData4$address === void 0 ? void 0 : _formData4$address.city) || currCity || null;
    }),
    selectedCity = _useState6[0],
    setSelectedCity = _useState6[1];
  var _useState7 = React.useState(((_formData5 = formData) === null || _formData5 === void 0 ? void 0 : (_formData5$address = _formData5.address) === null || _formData5$address === void 0 ? void 0 : _formData5$address.street) || ""),
    street = _useState7[0],
    setStreet = _useState7[1];
  var _useState8 = React.useState(((_formData6 = formData) === null || _formData6 === void 0 ? void 0 : (_formData6$address = _formData6.address) === null || _formData6$address === void 0 ? void 0 : _formData6$address.landmark) || ((_formData7 = formData) === null || _formData7 === void 0 ? void 0 : (_formData7$address = _formData7.address) === null || _formData7$address === void 0 ? void 0 : _formData7$address.Landmark) || ""),
    landmark = _useState8[0],
    setLandmark = _useState8[1];
  var _useState9 = React.useState(((_formData8 = formData) === null || _formData8 === void 0 ? void 0 : (_formData8$address = _formData8.address) === null || _formData8$address === void 0 ? void 0 : _formData8$address.placeName) || ((_formData9 = formData) === null || _formData9 === void 0 ? void 0 : _formData9.placeName) || ""),
    placeName = _useState9[0],
    setplaceName = _useState9[1];
  var _useState10 = React.useState(allCities),
    cities = _useState10[0],
    setcitiesopetions = _useState10[1];
  var cityCode = (_formData10 = formData) === null || _formData10 === void 0 ? void 0 : (_formData10$data = _formData10.data) === null || _formData10$data === void 0 ? void 0 : (_formData10$data$edcr = _formData10$data.edcrDetails) === null || _formData10$data$edcr === void 0 ? void 0 : _formData10$data$edcr.tenantId;
  formData = {
    address: _extends({}, (_formData11 = formData) === null || _formData11 === void 0 ? void 0 : _formData11.address)
  };
  React.useEffect(function () {
    if (!selectedCity || !localities) {
      var _cities;
      cities = userType && userType === "employee" ? allCities.filter(function (city) {
        return city.code === tenantId;
      }) : pincode ? allCities.filter(function (city) {
        var _city$pincode;
        return city === null || city === void 0 ? void 0 : (_city$pincode = city.pincode) === null || _city$pincode === void 0 ? void 0 : _city$pincode.some(function (pin) {
          return pin == Number(pincode);
        });
      }) : allCities;
      setcitiesopetions(cities);
      if (((_cities = cities) === null || _cities === void 0 ? void 0 : _cities.length) == 0) {
        setPinerror("BPA_PIN_NOT_VALID_ERROR");
      } else if (cities.length == 1) {
        var _cities2;
        var _selectCity = selectedCity !== null && selectedCity !== void 0 && selectedCity.code ? selectedCity === null || selectedCity === void 0 ? void 0 : selectedCity.code : selectedCity ? selectedCity : "";
        if (((_cities2 = cities) === null || _cities2 === void 0 ? void 0 : _cities2[0].code) != _selectCity) {
          setPinerror("BPA_PIN_NOT_VALID_ERROR");
        }
      }
    }
  }, [pincode]);
  React.useEffect(function () {
    cities.map(function (city, index) {
      if (city.code === cityCode) {
        setSelectedCity(city);
        sessionStorage.setItem("currentCity", JSON.stringify(city));
      }
    });
  }, [cities, (_formData12 = formData) === null || _formData12 === void 0 ? void 0 : _formData12.data]);
  React.useEffect(function () {
    if (cities) {
      var _cities3;
      if (cities.length === 1 && ((_cities3 = cities) === null || _cities3 === void 0 ? void 0 : _cities3[0].code) === (selectedCity === null || selectedCity === void 0 ? void 0 : selectedCity.code)) {
        setSelectedCity(cities[0]);
        sessionStorage.setItem("currentCity", JSON.stringify(cities[0]));
      }
    }
  }, [cities]);
  var _Digit$Hooks$useBound = Digit.Hooks.useBoundaryLocalities(selectedCity === null || selectedCity === void 0 ? void 0 : selectedCity.code, "revenue", {
      enabled: !!selectedCity
    }, t),
    fetchedLocalities = _Digit$Hooks$useBound.data;
  var isEditApplication = window.location.href.includes("editApplication");
  var isSendBackTOCitizen = window.location.href.includes("sendbacktocitizen");
  var _useState11 = React.useState(),
    localities = _useState11[0],
    setLocalities = _useState11[1];
  var _useState12 = React.useState(formData.address.locality || null),
    selectedLocality = _useState12[0],
    setSelectedLocality = _useState12[1];
  React.useEffect(function () {
    if (selectedCity && fetchedLocalities && !Pinerror) {
      var _formData13, _formData13$address, _formData14, _formData14$address, _formData14$address$l, _formData15, _formData15$address, _filteredLocalityList;
      var __localityList = fetchedLocalities;
      var filteredLocalityList = [];
      if ((_formData13 = formData) !== null && _formData13 !== void 0 && (_formData13$address = _formData13.address) !== null && _formData13$address !== void 0 && _formData13$address.locality && ((_formData14 = formData) === null || _formData14 === void 0 ? void 0 : (_formData14$address = _formData14.address) === null || _formData14$address === void 0 ? void 0 : (_formData14$address$l = _formData14$address.locality) === null || _formData14$address$l === void 0 ? void 0 : _formData14$address$l.code) === (selectedLocality === null || selectedLocality === void 0 ? void 0 : selectedLocality.code)) {
        setSelectedLocality(formData.address.locality);
      }
      if (((_formData15 = formData) !== null && _formData15 !== void 0 && (_formData15$address = _formData15.address) !== null && _formData15$address !== void 0 && _formData15$address.pincode || pincode) && !Pinerror) {
        var _formData16, _formData16$address;
        filteredLocalityList = __localityList.filter(function (obj) {
          var _obj$pincode;
          return (_obj$pincode = obj.pincode) === null || _obj$pincode === void 0 ? void 0 : _obj$pincode.find(function (item) {
            return item == pincode;
          });
        });
        if (!((_formData16 = formData) !== null && _formData16 !== void 0 && (_formData16$address = _formData16.address) !== null && _formData16$address !== void 0 && _formData16$address.locality) && filteredLocalityList.length <= 0) setSelectedLocality();
      }
      if (!localities || filteredLocalityList.length > 0 && localities.length !== filteredLocalityList.length || filteredLocalityList.length <= 0 && localities && localities.length !== __localityList.length) {
        setLocalities(function () {
          return filteredLocalityList.length > 0 ? filteredLocalityList : __localityList;
        });
      }
      if (filteredLocalityList.length === 1 && (selectedLocality == null || selectedLocality && ((_filteredLocalityList = filteredLocalityList[0]) === null || _filteredLocalityList === void 0 ? void 0 : _filteredLocalityList.code) !== (selectedLocality === null || selectedLocality === void 0 ? void 0 : selectedLocality.code))) {
        setSelectedLocality(filteredLocalityList[0]);
        sessionStorage.setItem("currLocality", JSON.stringify(filteredLocalityList[0]));
      }
    }
  }, [selectedCity, (_formData17 = formData) === null || _formData17 === void 0 ? void 0 : _formData17.pincode, fetchedLocalities, pincode, geoLocation]);
  var handleGIS = function handleGIS() {
    setIsOpen(!isOpen);
  };
  var handleRemove = function handleRemove() {
    setIsOpen(!isOpen);
  };
  var handleSubmit = function handleSubmit() {
    var address = {};
    address.pincode = pincode;
    address.city = selectedCity;
    address.locality = selectedLocality;
    address.street = street;
    address.landmark = landmark;
    address.geoLocation = geoLocation;
    address.placeName = placeName;
    onSelect(config.key, address);
  };
  function onSave(geoLocation, pincode, placeName) {
    selectPincode(pincode);
    sessionStorage.setItem("currentPincode", pincode);
    setgeoLocation(geoLocation);
    setplaceName(placeName);
    setIsOpen(false);
    setPinerror(null);
  }
  function selectPincode(e) {
    setPinerror(null);
    if ((typeof e === 'object' && e !== null ? e.target.value : e) !== "") if (!(typeof e === 'object' && e !== null ? e.target.value : e).match(/^[1-9][0-9]{5}$/)) {
      setPinerror("BPA_PIN_NOT_VALID_ERROR");
    }
    formData.address["pincode"] = typeof e === 'object' && e !== null ? e.target.value : e;
    setPincode(typeof e === 'object' && e !== null ? e.target.value : e);
    sessionStorage.setItem("currentPincode", typeof e === 'object' && e !== null ? e.target.value : e);
    sessionStorage.setItem("currentCity", JSON.stringify({}));
    sessionStorage.setItem("currLocality", JSON.stringify({}));
    setSelectedLocality(null);
    setLocalities(null);
  }

  function selectStreet(e) {
    setStreet(e.target.value);
  }
  function selectGeolocation(e) {
    formData.address["geoLocation"] = typeof e === 'object' && e !== null ? e.target.value : e;
    setgeoLocation(typeof e === 'object' && e !== null ? e.target.value : e);
    setplaceName(typeof e === 'object' && e !== null ? e.target.value : e);
    sessionStorage.setItem("currentPincode", "");
    sessionStorage.setItem("currentCity", JSON.stringify({}));
    sessionStorage.setItem("currLocality", JSON.stringify({}));
    setPincode("");
    setSelectedLocality(null);
  }

  function selectLandmark(e) {
    setLandmark(e.target.value);
  }
  function selectCity(city) {
    setSelectedLocality(null);
    setLocalities(null);
    setSelectedCity(city);
    sessionStorage.setItem("currentCity", JSON.stringify(city));
    formData.address["city"] = city;
  }
  function selectLocality(locality) {
    var _formData18, _formData18$address;
    if ((_formData18 = formData) !== null && _formData18 !== void 0 && (_formData18$address = _formData18.address) !== null && _formData18$address !== void 0 && _formData18$address.locality) {
      formData.address["locality"] = locality;
    }
    setSelectedLocality(locality);
    sessionStorage.setItem("currLocality", JSON.stringify(locality));
  }
  return /*#__PURE__*/React__default.createElement("div", null, !isOpen && /*#__PURE__*/React__default.createElement(Timeline, null), isOpen && /*#__PURE__*/React__default.createElement(GIS, {
    t: t,
    onSelect: onSelect,
    formData: formData,
    handleRemove: handleRemove,
    onSave: onSave
  }), !isOpen && /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    isDisabled: !selectedCity || !selectedLocality || Pinerror,
    isMultipleAllow: true,
    forcedError: t(Pinerror)
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("BPA_GIS_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    style: {},
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "gis"
    ,
    value: isEditApplication || isSendBackTOCitizen ? geoLocation.latitude !== null ? geoLocation.latitude + ", " + geoLocation.longitude : "" : placeName,
    onChange: selectGeolocation
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement("svg", {
      style: {
        float: "right",
        position: "relative",
        bottom: "32px",
        marginTop: "-20px",
        marginRight: "5px"
      },
      width: "24",
      height: "24",
      viewBox: "0 0 24 24",
      fill: "none",
      xmlns: "http://www.w3.org/2000/svg"
    }, /*#__PURE__*/React__default.createElement("path", {
      d: "M11 7C8.79 7 7 8.79 7 11C7 13.21 8.79 15 11 15C13.21 15 15 13.21 15 11C15 8.79 13.21 7 11 7ZM19.94 10C19.48 5.83 16.17 2.52 12 2.06V0H10V2.06C5.83 2.52 2.52 5.83 2.06 10H0V12H2.06C2.52 16.17 5.83 19.48 10 19.94V22H12V19.94C16.17 19.48 19.48 16.17 19.94 12H22V10H19.94ZM11 18C7.13 18 4 14.87 4 11C4 7.13 7.13 4 11 4C14.87 4 18 7.13 18 11C18 14.87 14.87 18 11 18Z",
      fill: "#505A5F"
    })))),
    style: {},
    onClick: function onClick(e) {
      return handleGIS();
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("BPA_DETAILS_PIN_LABEL")), !isOpen && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    isMandatory: false,
    optionKey: "i18nKey",
    type: "text",
    t: t,
    name: "pincode",
    onChange: selectPincode,
    value: pincode
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_CITY_LABEL") + "*"), !isOpen && /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    options: cities.sort(function (a, b) {
      return a.name.localeCompare(b.name);
    }),
    selectedOption: selectedCity,
    optionKey: "code",
    onSelect: selectCity,
    t: t,
    isDependent: true
    ,
    disabled: true
  }), !isOpen && selectedCity && localities && /*#__PURE__*/React__default.createElement("span", {
    className: "form-pt-dropdown-only"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_LOC_MOHALLA_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    optionCardStyles: {
      maxHeight: "20vmax",
      overflow: "scroll"
    },
    isMandatory: config.isMandatory,
    options: localities.sort(function (a, b) {
      return a.name.localeCompare(b.name);
    }),
    selectedOption: selectedLocality,
    optionKey: "i18nkey",
    onSelect: selectLocality,
    t: t,
    isDependent: true,
    labelKey: stringReplaceAll(selectedCity === null || selectedCity === void 0 ? void 0 : selectedCity.code, ".", "_").toUpperCase() + "_REVENUE"
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("BPA_DETAILS_SRT_NAME_LABEL")), !isOpen && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    style: {},
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "street",
    onChange: selectStreet,
    value: street
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("ES_NEW_APPLICATION_LOCATION_LANDMARK")), !isOpen && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    style: {},
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "landmark",
    onChange: selectLandmark,
    value: landmark
  })));
};

var StakeholderDocsRequired = function StakeholderDocsRequired(_ref) {
  var _data$StakeholderRegi, _data$StakeholderRegi2, _data$StakeholderRegi3, _data$StakeholderRegi4;
  var onSelect = _ref.onSelect;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var history = reactRouterDom.useHistory();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    data = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var isopenlink = window.location.href.includes("/openlink/");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  React.useEffect(function () {
    if (tenantId) Digit.LocalizationService.getLocale({
      modules: ["rainmaker-bpareg"],
      locale: Digit.StoreData.getCurrentLanguage(),
      tenantId: "" + tenantId
    });
  }, [tenantId]);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NEW_BUILDING_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      color: "#0B0C0C",
      marginTop: "12px",
      fontSize: "16px",
      fontWeight: "400",
      lineHeight: "24px"
    }
  }, t("BPA_NEW_BUILDING_PERMIT_DESCRIPTION")), isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, data === null || data === void 0 ? void 0 : (_data$StakeholderRegi = data.StakeholderRegistraition) === null || _data$StakeholderRegi === void 0 ? void 0 : (_data$StakeholderRegi2 = _data$StakeholderRegi.TradeTypetoRoleMapping) === null || _data$StakeholderRegi2 === void 0 ? void 0 : (_data$StakeholderRegi3 = _data$StakeholderRegi2[0]) === null || _data$StakeholderRegi3 === void 0 ? void 0 : (_data$StakeholderRegi4 = _data$StakeholderRegi3.docTypes) === null || _data$StakeholderRegi4 === void 0 ? void 0 : _data$StakeholderRegi4.map(function (doc, index) {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontWeight: 700,
        marginBottom: "8px"
      },
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        minWidth: "20px"
      }
    }, index + 1 + ".", "\xA0"), /*#__PURE__*/React__default.createElement("div", null, " " + t("BPAREG_HEADER_" + (doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')))))), /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginBottom: "16px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        minWidth: "20px"
      }
    }), doc !== null && doc !== void 0 && doc.info ? /*#__PURE__*/React__default.createElement("div", {
      style: {
        color: "#505A5F",
        fontSize: "16px"
      }
    }, "" + t(doc === null || doc === void 0 ? void 0 : doc.info.replace('.', '_'))) : null)));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: onSelect
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
    info: t("CS_FILE_APPLICATION_INFO_LABEL"),
    text: t("OBPS_DOCS_FILE_SIZE"),
    className: "info-banner-wrap-citizen-override"
  })));
};

var OCEDCRDocsRequired = function OCEDCRDocsRequired(_ref) {
  var onSelect = _ref.onSelect;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var data = [{
    code: "BPA_PERMIT_NUMBER_OC_SCRUTINY_LABEL"
  }, {
    code: "BPA_PERMIT_DATE_LABEL"
  }, {
    code: "BPA_OC_PLAN_DXF_FILE"
  }];
  var goNext = function goNext() {
    onSelect();
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      color: "#0B0C0C",
      marginTop: "12px",
      fontSize: "16px",
      fontWeight: "400",
      lineHeight: "24px"
    }
  }, t("OBPS_OCEDCR_BUILDING_PERMIT_DESCRIPTION")), /*#__PURE__*/React__default.createElement(React.Fragment, null, data === null || data === void 0 ? void 0 : data.map(function (doc, index) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        fontWeight: 700
      },
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex"
      }
    }, /*#__PURE__*/React__default.createElement("div", null, index + 1 + ".", "\xA0"), /*#__PURE__*/React__default.createElement("div", null, " " + t(doc === null || doc === void 0 ? void 0 : doc.code.replace('.', '_')))));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: goNext
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
    info: t("CS_FILE_APPLICATION_INFO_LABEL"),
    text: t("OBPS_OC_DOCS_FILE_SIZE"),
    className: "info-banner-wrap-citizen-override"
  }));
};

var OCeDCRScrutiny = function OCeDCRScrutiny(_ref) {
  var _formData$ScrutinyDet, _formData$ScrutinyDet2, _permitEdcrData$planD, _permitEdcrData$planD2, _permitEdcrData$planD3, _permitEdcrData$planD4, _permitEdcrData$planD5, _ref2, _ref3;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$ScrutinyDet = formData.ScrutinyDetails) === null || _formData$ScrutinyDet === void 0 ? void 0 : _formData$ScrutinyDet.ocPermitNumber),
    permitNumber = _useState[0],
    setPermitNumber = _useState[1];
  var _useState2 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$ScrutinyDet2 = formData.ScrutinyDetails) === null || _formData$ScrutinyDet2 === void 0 ? void 0 : _formData$ScrutinyDet2.ocPermitdate),
    permitDate = _useState2[0],
    setPermitDate = _useState2[1];
  var _useState3 = React.useState(formData === null || formData === void 0 ? void 0 : formData.ScrutinyDetails),
    permitEdcrData = _useState3[0],
    setPermitEdcrData = _useState3[1];
  var _useState4 = React.useState(null),
    showToast = _useState4[0],
    setShowToast = _useState4[1];
  var validation = {};
  function setPermitNo(e) {
    setPermitNumber(e.target.value);
  }
  function setOCPermitDate(e) {
    setPermitDate(e);
  }
  function onAdd() {}
  var onSkip = function onSkip() {};
  var handleSubmit = function handleSubmit() {
    var data = {};
    data.file = file;
    onSelect(config.key, data);
  };
  var getSearchResults = function getSearchResults() {
    try {
      setPermitEdcrData({});
      setShowToast(null);
      var queryObj = {
        permitDate: convertDateToEpoch(permitDate),
        approvalNo: permitNumber
      };
      Digit.OBPSService.BPASearch(tenantId, queryObj).then(function (result, err) {
        var _result$BPA, _result$BPA6;
        if ((result === null || result === void 0 ? void 0 : (_result$BPA = result.BPA) === null || _result$BPA === void 0 ? void 0 : _result$BPA.length) > 0) {
          var _result$BPA2, _result$BPA2$, _result$BPA3, _result$BPA3$, _result$BPA4, _result$BPA4$;
          var edcrNumber = result === null || result === void 0 ? void 0 : (_result$BPA2 = result.BPA) === null || _result$BPA2 === void 0 ? void 0 : (_result$BPA2$ = _result$BPA2[0]) === null || _result$BPA2$ === void 0 ? void 0 : _result$BPA2$.edcrNumber;
          var tenantIdForEdcr = result === null || result === void 0 ? void 0 : (_result$BPA3 = result.BPA) === null || _result$BPA3 === void 0 ? void 0 : (_result$BPA3$ = _result$BPA3[0]) === null || _result$BPA3$ === void 0 ? void 0 : _result$BPA3$.tenantId;
          if (permitDate === convertEpochToDate(result === null || result === void 0 ? void 0 : (_result$BPA4 = result.BPA) === null || _result$BPA4 === void 0 ? void 0 : (_result$BPA4$ = _result$BPA4[0]) === null || _result$BPA4$ === void 0 ? void 0 : _result$BPA4$.approvalDate)) {
            Digit.OBPSService.scrutinyDetails(tenantIdForEdcr, {
              edcrNumber: edcrNumber
            }).then(function (response) {
              var _userInfo$info;
              var userInfo = Digit.UserService.getUser();
              var queryObject = {
                0: {
                  tenantId: stateId
                },
                1: {
                  id: userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.id
                }
              };
              Digit.OBPSService.BPAREGSearch(tenantId, queryObject).then(function (License, error) {
                var _userInfo$info2, _response$edcrDetail;
                var architectName = "";
                for (var i = 0; i < License.Licenses.length; i++) {
                  if (License.Licenses[i].status === "APPROVED") {
                    architectName = License.Licenses[i].tradeLicenseDetail.owners[0].name;
                  }
                }
                if (!architectName) architectName = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info2 = userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.name;
                if (!architectName) architectName = License.Licenses[0].tradeLicenseDetail.owners[0].name;
                if ((response === null || response === void 0 ? void 0 : (_response$edcrDetail = response.edcrDetail) === null || _response$edcrDetail === void 0 ? void 0 : _response$edcrDetail.length) > 0) {
                  var _result$BPA5, _result$BPA5$, _result$BPA5$$landInf, _result$BPA5$$landInf2, _isPrimaryOwner$, _response$edcrDetail2;
                  var isPrimaryOwner = result === null || result === void 0 ? void 0 : (_result$BPA5 = result.BPA) === null || _result$BPA5 === void 0 ? void 0 : (_result$BPA5$ = _result$BPA5[0]) === null || _result$BPA5$ === void 0 ? void 0 : (_result$BPA5$$landInf = _result$BPA5$.landInfo) === null || _result$BPA5$$landInf === void 0 ? void 0 : (_result$BPA5$$landInf2 = _result$BPA5$$landInf.owners) === null || _result$BPA5$$landInf2 === void 0 ? void 0 : _result$BPA5$$landInf2.filter(function (data) {
                    return data.isPrimaryOwner && data.isPrimaryOwner != "false";
                  });
                  response.edcrDetail[0].applicantName = isPrimaryOwner === null || isPrimaryOwner === void 0 ? void 0 : (_isPrimaryOwner$ = isPrimaryOwner[0]) === null || _isPrimaryOwner$ === void 0 ? void 0 : _isPrimaryOwner$.name;
                  response.edcrDetail[0].ocPermitNumber = permitNumber;
                  response.edcrDetail[0].ocPermitdate = permitDate;
                  response.edcrDetail[0].appliedBy = architectName;
                  setPermitEdcrData(response === null || response === void 0 ? void 0 : (_response$edcrDetail2 = response.edcrDetail) === null || _response$edcrDetail2 === void 0 ? void 0 : _response$edcrDetail2[0]);
                }
              }).catch(function (e) {
                var _e$response, _e$response$data, _e$response$data$Erro;
                setShowToast({
                  key: "error",
                  error: true,
                  message: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message) || null
                });
              });
            }).catch(function (e) {
              var _e$response2, _e$response2$data, _e$response2$data$Err;
              setShowToast({
                key: "error",
                error: true,
                message: (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : (_e$response2$data$Err = _e$response2$data.Errors[0]) === null || _e$response2$data$Err === void 0 ? void 0 : _e$response2$data$Err.message) || null
              });
            });
          } else {
            setShowToast({
              key: "error",
              warning: true,
              message: t("ERR_FILL_EDCR_PERMIT_INCORRECT_DATE")
            });
          }
        } else if ((result === null || result === void 0 ? void 0 : (_result$BPA6 = result.BPA) === null || _result$BPA6 === void 0 ? void 0 : _result$BPA6.length) == 0) {
          setShowToast({
            key: "error",
            error: true,
            message: t("BPA_NO_REC_FOUND_LABEL")
          });
        }
      }).catch(function (e) {
        var _e$response3, _e$response3$data, _e$response3$data$Err;
        setShowToast({
          key: "error",
          error: true,
          message: (e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : (_e$response3$data$Err = _e$response3$data.Errors[0]) === null || _e$response3$data$Err === void 0 ? void 0 : _e$response3$data$Err.message) || null
        });
      });
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var routeToNextPage = function routeToNextPage() {
    onSelect(config.key, permitEdcrData);
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !permitNumber,
    onAdd: onAdd,
    isMultipleAllow: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardCaption, null, "" + t("BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "" + t("BPA_OC_EDCR_SCRUTINY_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, "" + t("BPA_PROVIDE_BPN_AND_BPD_APP_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("EDCR_BUILDING_PERMIT_NUM_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    isMandatory: false,
    optionKey: "i18nKey",
    t: t,
    name: "permitNumber",
    onChange: setPermitNo,
    value: permitNumber
  }, validation = {
    isRequired: true,
    pattern: getPattern("Name"),
    title: t("BPA_INVALID_NAME")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("EDCR_BUILDING_PERMIT_DATE_LABEL") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
    date: permitDate,
    name: "permitDate",
    onChange: setOCPermitDate
  }), /*#__PURE__*/React__default.createElement("div", {
    onClick: getSearchResults
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("ACTION_TEST_BPA_STAKE_HOLDER_SEARCH"),
    disabled: !permitNumber || !permitDate
  })), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast === null || showToast === void 0 ? void 0 : showToast.error,
    warning: showToast === null || showToast === void 0 ? void 0 : showToast.warning,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    isDleteBtn: true,
    onClose: function onClose() {
      setShowToast(null);
    }
  })), permitEdcrData !== null && permitEdcrData !== void 0 && permitEdcrData.edcrNumber ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !permitNumber,
    onAdd: onAdd,
    isMultipleAllow: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("REPORT_FSM_RESULT_APPLICANTNAME"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.applicantName),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.applicationSubType),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("EDCR_TOTAL_BUILD_UP_AREA_LABEL"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : (_permitEdcrData$planD = permitEdcrData.planDetail) === null || _permitEdcrData$planD === void 0 ? void 0 : (_permitEdcrData$planD2 = _permitEdcrData$planD.virtualBuilding) === null || _permitEdcrData$planD2 === void 0 ? void 0 : _permitEdcrData$planD2.totalBuitUpArea),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("EDCR_BUILDING_HEIGHT_LABEL"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : (_permitEdcrData$planD3 = permitEdcrData.planDetail) === null || _permitEdcrData$planD3 === void 0 ? void 0 : (_permitEdcrData$planD4 = _permitEdcrData$planD3.blocks[0]) === null || _permitEdcrData$planD4 === void 0 ? void 0 : (_permitEdcrData$planD5 = _permitEdcrData$planD4.building) === null || _permitEdcrData$planD5 === void 0 ? void 0 : _permitEdcrData$planD5.buildingHeight),
    className: "border-none"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("BPA_ARCHITECT_NAME_LABEL"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.appliedBy),
    className: "border-none"
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement("h1", {
    style: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "700",
      padding: "0px 0px 16px 0px"
    }
  }, "" + t("BPA_PERMIT_EDCR_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: "" + t("BPA_EDCR_NO_LABEL"),
    text: t(permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.edcrNumber),
    className: "border-none"
  })), /*#__PURE__*/React__default.createElement("h1", {
    style: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "700",
      padding: "0px 0px 16px 0px"
    }
  }, "" + t("BPA_UPLOADED_PLAN_DIAGRAM_LABEL")), /*#__PURE__*/React__default.createElement("a", {
    target: "_",
    href: permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.updatedDxfFile,
    style: {
      minWidth: "160px",
      marginRight: "20px"
    },
    key: permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.updatedDxfFile
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
    style: (_ref2 = {
      marginTop: "8px",
      fontWeight: "bold",
      fontSize: "14px",
      lineHeight: "19px",
      color: "#505A5F"
    }, _ref2["fontWeight"] = "400", _ref2)
  }, t("BPA_UPLOADED_PLAN_DXF"))), /*#__PURE__*/React__default.createElement("h1", {
    style: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "700",
      padding: "0px 0px 16px 0px"
    }
  }, "" + t("BPA_SCRUTINY_REPORT_OUTPUT_LABEL")), /*#__PURE__*/React__default.createElement("a", {
    target: "_",
    href: permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.planReport,
    style: {
      minWidth: "160px",
      marginRight: "20px"
    },
    key: permitEdcrData === null || permitEdcrData === void 0 ? void 0 : permitEdcrData.planReport
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), /*#__PURE__*/React__default.createElement("p", {
    style: (_ref3 = {
      marginTop: "8px",
      fontWeight: "bold",
      fontSize: "14px",
      lineHeight: "19px",
      color: "#505A5F"
    }, _ref3["fontWeight"] = "400", _ref3)
  }, t("BPA_SCRUTINY_REPORT_PDF"))), /*#__PURE__*/React__default.createElement("div", {
    onClick: routeToNextPage
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_PROCEED_OC_SCRUTINY_LABEL")
  }))) : null);
};

var OCUploadPlanDiagram = function OCUploadPlanDiagram(_ref) {
  var _formData$uploadData2;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData,
    isShowToast = _ref.isShowToast,
    isSubmitBtnDisable = _ref.isSubmitBtnDisable,
    setIsShowToast = _ref.setIsShowToast;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState(function () {
      var _formData$uploadData;
      return (formData === null || formData === void 0 ? void 0 : (_formData$uploadData = formData.uploadData) === null || _formData$uploadData === void 0 ? void 0 : _formData$uploadData.file) || null;
    }),
    uploadedFile = _useState[0],
    setUploadedFile = _useState[1];
  var _useState2 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$uploadData2 = formData.uploadData) === null || _formData$uploadData2 === void 0 ? void 0 : _formData$uploadData2.file),
    file = _useState2[0],
    setFile = _useState2[1];
  var _useState3 = React.useState(""),
    uploadMessage = _useState3[0],
    setUploadMessage = _useState3[1];
  var history = reactRouterDom.useHistory();
  function selectfile(e) {
    setUploadedFile(e.target.files[0]);
    setFile(e.target.files[0]);
  }
  var onSkip = function onSkip() {};
  React.useEffect(function () {
    if (uploadMessage || isShowToast) {
      setUploadedFile(null);
      setFile("");
      setUploadMessage("");
    }
    if (isShowToast) {
      history.push("/digit-ui/citizen/obps/edcrscrutiny/oc-apply/acknowledgement", {
        data: isShowToast !== null && isShowToast !== void 0 && isShowToast.label ? isShowToast === null || isShowToast === void 0 ? void 0 : isShowToast.label : "BPA_INTERNAL_SERVER_ERROR",
        type: "ERROR"
      });
    }
  }, [uploadMessage, isShowToast, isSubmitBtnDisable]);
  function onAdd() {}
  var handleSubmit = function handleSubmit() {
    var data = {};
    data.file = file;
    onSelect(config.key, data, true, true);
  };
  if (isSubmitBtnDisable) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: !file || isSubmitBtnDisable,
    onAdd: onAdd,
    isMultipleAllow: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_OC_PLAN_DIAGRAM_DXF") + " *"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    id: "oc-doc",
    extraStyleName: "propertyCreate",
    accept: ".dxf",
    onUpload: selectfile,
    onDelete: function onDelete() {
      setUploadedFile(null);
      setFile("");
    },
    message: uploadedFile ? "1 " + t("PT_ACTION_FILEUPLOADED") : t("ES_NO_FILE_SELECTED_LABEL"),
    uploadMessage: uploadMessage
  }), /*#__PURE__*/React__default.createElement("div", {
    style: {
      disabled: "true",
      height: "30px",
      width: "100%",
      fontSize: "14px"
    }
  }), isShowToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: isShowToast.key,
    label: t(isShowToast.label),
    onClose: function onClose() {
      return setIsShowToast(null);
    },
    isDleteBtn: true
  }));
};

var OCBasicDetails = function OCBasicDetails(_ref) {
  var _formData$data, _formData$data2, _formData$data3, _formData$data4, _mdmsData$BPA, _data$planDetail, _data$planDetail$plot, _data$planDetail2, _data$planDetail9, _data$planDetail9$pla, _mdmsData$BPA5, _data$planDetail10, _data$planDetail10$pl, _data$planDetail11, _data$planDetail12, _data$planDetail12$pl;
  var formData = _ref.formData,
    onSelect = _ref.onSelect,
    config = _ref.config;
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];
  var _useState2 = React.useState(formData === null || formData === void 0 ? void 0 : (_formData$data = formData.data) === null || _formData$data === void 0 ? void 0 : _formData$data.scrutinyNumber),
    scrutinyNumber = _useState2[0],
    setScrutinyNumber = _useState2[1];
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _useState3 = React.useState(formData !== null && formData !== void 0 && (_formData$data2 = formData.data) !== null && _formData$data2 !== void 0 && _formData$data2.scrutinyNumber ? true : false),
    isDisabled = _useState3[0];
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var state = Digit.ULBService.getStateId();
  var _useState4 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$data3 = formData.data) === null || _formData$data3 === void 0 ? void 0 : _formData$data3.bpaData) || {}),
    bpaData = _useState4[0],
    setBpaData = _useState4[1];
  var _useState5 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$data4 = formData.data) === null || _formData$data4 === void 0 ? void 0 : _formData$data4.edcrDetails) || null),
    data = _useState5[0],
    setData = _useState5[1];
  var _useState6 = React.useState(false),
    isLoadingApplication = _useState6[0],
    setIsLoadingApplication = _useState6[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(state, "BPA", ["RiskTypeComputation"]),
    isMdmsLoading = _Digit$Hooks$obps$use.isMdmsLoading,
    mdmsData = _Digit$Hooks$obps$use.data;
  var riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : _mdmsData$BPA.RiskTypeComputation, data === null || data === void 0 ? void 0 : (_data$planDetail = data.planDetail) === null || _data$planDetail === void 0 ? void 0 : (_data$planDetail$plot = _data$planDetail.plot) === null || _data$planDetail$plot === void 0 ? void 0 : _data$planDetail$plot.area, data === null || data === void 0 ? void 0 : (_data$planDetail2 = data.planDetail) === null || _data$planDetail2 === void 0 ? void 0 : _data$planDetail2.blocks);
  React.useEffect(function () {
  }, showToast);
  var getOCEDCRTotalDetails = function getOCEDCRTotalDetails() {
    try {
      setData(null);
      setBpaData(null);
      setIsLoadingApplication(true);
      return Promise.resolve(ocScrutinyDetailsData(scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber, state)).then(function (details) {
        var _otherData$edcrDetail, _otherData$edcrDetail2, _details$ocEdcrDetail;
        setIsLoadingApplication(false);
        if ((details === null || details === void 0 ? void 0 : details.type) == "ERROR") {
          setShowToast({
            key: "true",
            message: details === null || details === void 0 ? void 0 : details.message
          });
          setData(null);
          setBpaData(null);
        }
        var otherData = details === null || details === void 0 ? void 0 : details.otherDetails;
        var ocData = details === null || details === void 0 ? void 0 : details.ocEdcrDetails;
        if (otherData && ocData && ocData !== null && ocData !== void 0 && ocData.tenantId && otherData !== null && otherData !== void 0 && (_otherData$edcrDetail = otherData.edcrDetails) !== null && _otherData$edcrDetail !== void 0 && (_otherData$edcrDetail2 = _otherData$edcrDetail[0]) !== null && _otherData$edcrDetail2 !== void 0 && _otherData$edcrDetail2.tenantId) {
          var _otherData$edcrDetail3, _otherData$edcrDetail4, _otherData$bpaApprova, _otherData$bpaApprova2, _otherData$bpaRespons, _otherData$bpaRespons2, _otherData$bpaRespons3, _otherData$bpaRespons4, _otherData$bpaRespons5, _otherData$bpaRespons6;
          if ((otherData === null || otherData === void 0 ? void 0 : (_otherData$edcrDetail3 = otherData.edcrDetails) === null || _otherData$edcrDetail3 === void 0 ? void 0 : (_otherData$edcrDetail4 = _otherData$edcrDetail3[0]) === null || _otherData$edcrDetail4 === void 0 ? void 0 : _otherData$edcrDetail4.tenantId) != (ocData === null || ocData === void 0 ? void 0 : ocData.tenantId)) {
            setShowToast({
              key: "true",
              message: "BPA_INVALID_PERMIT_CITY"
            });
            return;
          } else if ((otherData === null || otherData === void 0 ? void 0 : (_otherData$bpaApprova = otherData.bpaApprovalResponse) === null || _otherData$bpaApprova === void 0 ? void 0 : (_otherData$bpaApprova2 = _otherData$bpaApprova[0]) === null || _otherData$bpaApprova2 === void 0 ? void 0 : _otherData$bpaApprova2.edcrNumber) === (ocData === null || ocData === void 0 ? void 0 : ocData.edcrNumber) && ((otherData === null || otherData === void 0 ? void 0 : (_otherData$bpaRespons = otherData.bpaResponse) === null || _otherData$bpaRespons === void 0 ? void 0 : (_otherData$bpaRespons2 = _otherData$bpaRespons[0]) === null || _otherData$bpaRespons2 === void 0 ? void 0 : _otherData$bpaRespons2.status) != "REJECTED" && (otherData === null || otherData === void 0 ? void 0 : (_otherData$bpaRespons3 = otherData.bpaResponse) === null || _otherData$bpaRespons3 === void 0 ? void 0 : (_otherData$bpaRespons4 = _otherData$bpaRespons3[0]) === null || _otherData$bpaRespons4 === void 0 ? void 0 : _otherData$bpaRespons4.status) != "PERMIT REVOCATION" || (otherData === null || otherData === void 0 ? void 0 : (_otherData$bpaRespons5 = otherData.bpaResponse) === null || _otherData$bpaRespons5 === void 0 ? void 0 : (_otherData$bpaRespons6 = _otherData$bpaRespons5[0]) === null || _otherData$bpaRespons6 === void 0 ? void 0 : _otherData$bpaRespons6.status) != "INITIATED")) {
            setShowToast({
              key: "true",
              message: "APPLICATION_NUMBER_ALREADY_EXISTS"
            });
            return;
          } else {
            sessionStorage.setItem("checkForProcced", JSON.stringify(false));
            setShowToast(null);
            setData(data);
          }
        }
        if (details !== null && details !== void 0 && (_details$ocEdcrDetail = details.ocEdcrDetails) !== null && _details$ocEdcrDetail !== void 0 && _details$ocEdcrDetail.edcrNumber) {
          setData(details === null || details === void 0 ? void 0 : details.ocEdcrDetails);
          setBpaData(details === null || details === void 0 ? void 0 : details.otherDetails);
          setShowToast(null);
        }
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleKeyPress = function handleKeyPress(event) {
    try {
      var _temp3 = function () {
        var _scrutinyNumber$edcrN;
        if (!(scrutinyNumber !== null && scrutinyNumber !== void 0 && (_scrutinyNumber$edcrN = scrutinyNumber.edcrNumber) !== null && _scrutinyNumber$edcrN !== void 0 && _scrutinyNumber$edcrN.startsWith("OC"))) setShowToast({
          key: "true",
          message: t("BPA_INVALID_OCEDCR_NO"),
          labelName: "Please enter the valid OCeDCR Number."
        });else {
          var _temp4 = function () {
            if (event.key === "Enter") {
              return Promise.resolve(getOCEDCRTotalDetails()).then(function () {});
            }
          }();
          if (_temp4 && _temp4.then) return _temp4.then(function () {});
        }
      }();
      return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var noTocloseToast = function noTocloseToast() {
    setShowToast(null);
  };
  var yesTocloseToast = function yesTocloseToast() {
    sessionStorage.setItem("checkForProcced", JSON.stringify(true));
    handleSubmit();
  };
  var handleSearch = function handleSearch(event) {
    try {
      var _temp6 = function () {
        var _scrutinyNumber$edcrN2;
        if (!(scrutinyNumber !== null && scrutinyNumber !== void 0 && (_scrutinyNumber$edcrN2 = scrutinyNumber.edcrNumber) !== null && _scrutinyNumber$edcrN2 !== void 0 && _scrutinyNumber$edcrN2.startsWith("OC"))) setShowToast({
          key: "true",
          message: t("BPA_INVALID_OCEDCR_NO"),
          labelName: "Please enter the valid OCeDCR Number."
        });else {
          return Promise.resolve(getOCEDCRTotalDetails()).then(function () {});
        }
      }();
      return Promise.resolve(_temp6 && _temp6.then ? _temp6.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var getDetails = function getDetails() {
    return Promise.resolve(getOCEDCRTotalDetails()).then(function () {});
  };
  var disableVlaue = sessionStorage.getItem("isEDCRDisable");
  disableVlaue = JSON.parse(disableVlaue);
  React.useEffect(function () {
    if (disableVlaue) {
      var edcrApi = sessionStorage.getItem("isEDCRAPIType");
      edcrApi = edcrApi ? JSON.parse(edcrApi) : false;
      if (!edcrApi || !data) {
        sessionStorage.setItem("isEDCRAPIType", JSON.stringify(true));
        getDetails();
      }
    }
  }, []);
  var handleSubmit = function handleSubmit(event) {
    var isProccedToNextStep = false;
    if (bpaData && data) {
      var _bpaData$edcrDetails, _ocBpaEdcrDetails$pla, _ocBpaEdcrDetails$pla2, _bpaEdcrDetails$planD, _bpaEdcrDetails$planD2, _ocBpaEdcrDetails$pla3, _ocBpaEdcrDetails$pla4, _bpaEdcrDetails$planD3, _bpaEdcrDetails$planD4, _mdmsData$BPA2, _ocBpaEdcrDetails$pla5, _ocBpaEdcrDetails$pla6, _data$planDetail3, _mdmsData$BPA3, _bpaEdcrDetails$planD5, _bpaEdcrDetails$planD6, _data$planDetail4;
      var bpaEdcrDetails = (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$edcrDetails = bpaData.edcrDetails) === null || _bpaData$edcrDetails === void 0 ? void 0 : _bpaData$edcrDetails[0]) || {};
      var ocBpaEdcrDetails = data || {};
      var ocEdcrKathaNo = ocBpaEdcrDetails === null || ocBpaEdcrDetails === void 0 ? void 0 : (_ocBpaEdcrDetails$pla = ocBpaEdcrDetails.planDetail) === null || _ocBpaEdcrDetails$pla === void 0 ? void 0 : (_ocBpaEdcrDetails$pla2 = _ocBpaEdcrDetails$pla.planInformation) === null || _ocBpaEdcrDetails$pla2 === void 0 ? void 0 : _ocBpaEdcrDetails$pla2.khataNo;
      var edcrKathaNo = bpaEdcrDetails === null || bpaEdcrDetails === void 0 ? void 0 : (_bpaEdcrDetails$planD = bpaEdcrDetails.planDetail) === null || _bpaEdcrDetails$planD === void 0 ? void 0 : (_bpaEdcrDetails$planD2 = _bpaEdcrDetails$planD.planInformation) === null || _bpaEdcrDetails$planD2 === void 0 ? void 0 : _bpaEdcrDetails$planD2.khataNo;
      var ocEdcrPlotNo = ocBpaEdcrDetails === null || ocBpaEdcrDetails === void 0 ? void 0 : (_ocBpaEdcrDetails$pla3 = ocBpaEdcrDetails.planDetail) === null || _ocBpaEdcrDetails$pla3 === void 0 ? void 0 : (_ocBpaEdcrDetails$pla4 = _ocBpaEdcrDetails$pla3.planInformation) === null || _ocBpaEdcrDetails$pla4 === void 0 ? void 0 : _ocBpaEdcrDetails$pla4.plotNo;
      var edcrPlotNo = bpaEdcrDetails === null || bpaEdcrDetails === void 0 ? void 0 : (_bpaEdcrDetails$planD3 = bpaEdcrDetails.planDetail) === null || _bpaEdcrDetails$planD3 === void 0 ? void 0 : (_bpaEdcrDetails$planD4 = _bpaEdcrDetails$planD3.planInformation) === null || _bpaEdcrDetails$planD4 === void 0 ? void 0 : _bpaEdcrDetails$planD4.plotNo;
      var riskTypes = {
        LOW: 0,
        MEDIUM: 1,
        HIGH: 2
      };
      var ocEdcrRiskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, ocBpaEdcrDetails === null || ocBpaEdcrDetails === void 0 ? void 0 : (_ocBpaEdcrDetails$pla5 = ocBpaEdcrDetails.planDetail) === null || _ocBpaEdcrDetails$pla5 === void 0 ? void 0 : (_ocBpaEdcrDetails$pla6 = _ocBpaEdcrDetails$pla5.plot) === null || _ocBpaEdcrDetails$pla6 === void 0 ? void 0 : _ocBpaEdcrDetails$pla6.area, data === null || data === void 0 ? void 0 : (_data$planDetail3 = data.planDetail) === null || _data$planDetail3 === void 0 ? void 0 : _data$planDetail3.blocks);
      var edcrRisktype = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA3 = mdmsData.BPA) === null || _mdmsData$BPA3 === void 0 ? void 0 : _mdmsData$BPA3.RiskTypeComputation, bpaEdcrDetails === null || bpaEdcrDetails === void 0 ? void 0 : (_bpaEdcrDetails$planD5 = bpaEdcrDetails.planDetail) === null || _bpaEdcrDetails$planD5 === void 0 ? void 0 : (_bpaEdcrDetails$planD6 = _bpaEdcrDetails$planD5.plot) === null || _bpaEdcrDetails$planD6 === void 0 ? void 0 : _bpaEdcrDetails$planD6.area, data === null || data === void 0 ? void 0 : (_data$planDetail4 = data.planDetail) === null || _data$planDetail4 === void 0 ? void 0 : _data$planDetail4.blocks);
      if (ocEdcrKathaNo && edcrKathaNo && ocEdcrPlotNo && edcrPlotNo) {
        if (ocEdcrPlotNo == edcrPlotNo && ocEdcrKathaNo == edcrKathaNo) {
          isProccedToNextStep = true;
        } else {
          if (ocEdcrKathaNo != edcrKathaNo && ocEdcrPlotNo == edcrPlotNo) {
            isProccedToNextStep = false;
            setShowToast({
              key: "true",
              message: "Khata number from permit order XXXX(permit order number) is not matching with the khata number from occupancy certificate. You cannot proceed with the application"
            });
          } else if (ocEdcrPlotNo != edcrPlotNo && ocEdcrKathaNo == edcrKathaNo) {
            isProccedToNextStep = false;
            setShowToast({
              key: "true",
              message: "Plot number from permit order XXXX(permit order number) is not matching with the Plot number from occupancy certificate. You cannot proceed with the application"
            });
          } else if (ocEdcrPlotNo != edcrPlotNo && ocEdcrKathaNo != edcrKathaNo) {
            isProccedToNextStep = false;
            setShowToast({
              key: "true",
              message: "Khata No and plot No from permit order XXXX(permit order number) is not matching with the Khata No and plot No from occupancy certificate. You cannot proceed with the application"
            });
          }
          return false;
        }
      }
      if (riskTypes[edcrRisktype] < riskTypes[ocEdcrRiskType]) {
        isProccedToNextStep = false;
        setShowToast({
          key: "true",
          message: t("BPA_RISK_TYPE_VALIDATION_ERROR"),
          labelName: "The Risk type from permit order XXXX(permit order number) to occupancy certificate application is changed from Low to high .You cannot proceed with the application."
        });
      } else if (riskTypes[edcrRisktype] > riskTypes[ocEdcrRiskType]) {
        isProccedToNextStep = JSON.parse(sessionStorage.getItem("checkForProcced"));
        setShowToast({
          warning: "true",
          message: t("BPA_RISK_TYPE_VALIDATION_WARNING"),
          labelName: "The Risk type in permit order XXXX is high where as the risk type in occupancy is Low , do you want to continue"
        });
      } else {
        isProccedToNextStep = true;
      }
    }
    if (isProccedToNextStep) {
      var _data$planDetail5, _data$planDetail5$pla, _data$planDetail6, _data$planDetail6$pla, _mdmsData$BPA4, _data$planDetail7, _data$planDetail7$plo, _data$planDetail8;
      onSelect(config === null || config === void 0 ? void 0 : config.key, {
        scrutinyNumber: scrutinyNumber,
        applicantName: data === null || data === void 0 ? void 0 : (_data$planDetail5 = data.planDetail) === null || _data$planDetail5 === void 0 ? void 0 : (_data$planDetail5$pla = _data$planDetail5.planInformation) === null || _data$planDetail5$pla === void 0 ? void 0 : _data$planDetail5$pla.applicantName,
        occupancyType: data === null || data === void 0 ? void 0 : (_data$planDetail6 = data.planDetail) === null || _data$planDetail6 === void 0 ? void 0 : (_data$planDetail6$pla = _data$planDetail6.planInformation) === null || _data$planDetail6$pla === void 0 ? void 0 : _data$planDetail6$pla.occupancy,
        applicationType: data === null || data === void 0 ? void 0 : data.appliactionType,
        serviceType: data === null || data === void 0 ? void 0 : data.applicationSubType,
        applicationDate: data === null || data === void 0 ? void 0 : data.applicationDate,
        riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA4 = mdmsData.BPA) === null || _mdmsData$BPA4 === void 0 ? void 0 : _mdmsData$BPA4.RiskTypeComputation, data === null || data === void 0 ? void 0 : (_data$planDetail7 = data.planDetail) === null || _data$planDetail7 === void 0 ? void 0 : (_data$planDetail7$plo = _data$planDetail7.plot) === null || _data$planDetail7$plo === void 0 ? void 0 : _data$planDetail7$plo.area, data === null || data === void 0 ? void 0 : (_data$planDetail8 = data.planDetail) === null || _data$planDetail8 === void 0 ? void 0 : _data$planDetail8.blocks),
        bpaData: bpaData,
        edcrDetails: data
      });
    }
  };
  if (isMdmsLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 1,
    flow: "OCBPA"
  }), /*#__PURE__*/React__default.createElement("div", {
    className: isMobile ? "obps-search" : "",
    style: !isMobile ? {
      maxWidth: "960px",
      minWidth: "640px",
      marginRight: "auto"
    } : {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Label, null, t("OBPS_SEARCH_EDCR_NUMBER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    className: "searchInput",
    onKeyPress: handleKeyPress,
    onChange: function onChange(event) {
      return setScrutinyNumber({
        edcrNumber: event.target.value
      });
    },
    value: scrutinyNumber === null || scrutinyNumber === void 0 ? void 0 : scrutinyNumber.edcrNumber,
    signature: true,
    signatureImg: /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchIconSvg, {
      className: "signature-img",
      onClick: !disableVlaue && scrutinyNumber !== null && scrutinyNumber !== void 0 && scrutinyNumber.edcrNumber ? function () {
        return handleSearch();
      } : null
    }),
    disable: isDisabled,
    style: {
      marginBottom: "10px"
    }
  })), isLoadingApplication ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : null, data && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardCaption, null, t("BPA_SCRUTINY_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_BASIC_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APP_DATE_LABEL"),
    text: data !== null && data !== void 0 && data.applicationDate ? format(new Date(data === null || data === void 0 ? void 0 : data.applicationDate), 'dd/MM/yyyy') : data === null || data === void 0 ? void 0 : data.applicationDate
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.appliactionType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(data === null || data === void 0 ? void 0 : data.applicationSubType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$planDetail9 = data.planDetail) === null || _data$planDetail9 === void 0 ? void 0 : (_data$planDetail9$pla = _data$planDetail9.planInformation) === null || _data$planDetail9$pla === void 0 ? void 0 : _data$planDetail9$pla.occupancy
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),
    text: t("WF_BPA_" + Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA5 = mdmsData.BPA) === null || _mdmsData$BPA5 === void 0 ? void 0 : _mdmsData$BPA5.RiskTypeComputation, data === null || data === void 0 ? void 0 : (_data$planDetail10 = data.planDetail) === null || _data$planDetail10 === void 0 ? void 0 : (_data$planDetail10$pl = _data$planDetail10.plot) === null || _data$planDetail10$pl === void 0 ? void 0 : _data$planDetail10$pl.area, data === null || data === void 0 ? void 0 : (_data$planDetail11 = data.planDetail) === null || _data$planDetail11 === void 0 ? void 0 : _data$planDetail11.blocks))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$planDetail12 = data.planDetail) === null || _data$planDetail12 === void 0 ? void 0 : (_data$planDetail12$pl = _data$planDetail12.planInformation) === null || _data$planDetail12$pl === void 0 ? void 0 : _data$planDetail12$pl.applicantName
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_NEXT"),
    onSubmit: handleSubmit
  })), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast !== null && showToast !== void 0 && showToast.key ? true : false,
    warning: showToast !== null && showToast !== void 0 && showToast.warning ? true : false,
    label: t(showToast === null || showToast === void 0 ? void 0 : showToast.message),
    isDleteBtn: true,
    onClose: closeToast,
    onNo: noTocloseToast,
    onYes: yesTocloseToast,
    isWarningButtons: true
  }));
};

var newConfig = [{
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "home",
    component: "EDCRForm",
    nextStep: "",
    hideInEmployee: true,
    key: "ScrutinyDetails",
    texts: {
      headerCaption: "",
      header: "EDCR_COMMON_APPL_NEW",
      cardText: "BPA_PROVIDE_REQ_FOR_NEW_BPA",
      submitBarLabel: "EDCR_SCRUTINY_SUBMIT_BUTTON",
      skipText: "EDCR_CLEAR_FORM"
    }
  }]
}];

var CreateEDCR = function CreateEDCR(_ref) {
  var _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis;
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useLocation = reactRouterDom.useLocation();
  var history = reactRouterDom.useHistory();
  var config = [];
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("EDCR_CREATE", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1];
  var _useState = React.useState(null),
    isShowToast = _useState[0],
    setIsShowToast = _useState[1];
  var _useState2 = React.useState(false),
    isSubmitBtnDisable = _useState2[0],
    setIsSubmitBtnDisable = _useState2[1];
  Digit.SessionStorage.set("EDCR_BACK", "IS_EDCR_BACK");
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig$1 = _Digit$Hooks$obps$Sea.data;
  function handleSelect(key, data, skipStep, index) {
    var _loggedInuserInfo$inf, _loggedInuserInfo$inf2, _data$tenantId;
    setIsSubmitBtnDisable(true);
    var loggedInuserInfo = Digit.UserService.getUser();
    var userInfo = {
      id: loggedInuserInfo === null || loggedInuserInfo === void 0 ? void 0 : (_loggedInuserInfo$inf = loggedInuserInfo.info) === null || _loggedInuserInfo$inf === void 0 ? void 0 : _loggedInuserInfo$inf.uuid,
      tenantId: loggedInuserInfo === null || loggedInuserInfo === void 0 ? void 0 : (_loggedInuserInfo$inf2 = loggedInuserInfo.info) === null || _loggedInuserInfo$inf2 === void 0 ? void 0 : _loggedInuserInfo$inf2.tenantId
    };
    var edcrRequest = {
      transactionNumber: "",
      edcrNumber: "",
      planFile: null,
      tenantId: "",
      RequestInfo: {
        apiId: "",
        ver: "",
        ts: "",
        action: "",
        did: "",
        authToken: "",
        key: "",
        msgId: "",
        correlationId: "",
        userInfo: userInfo
      }
    };
    var applicantName = data === null || data === void 0 ? void 0 : data.applicantName;
    var file = data === null || data === void 0 ? void 0 : data.file;
    var tenantId = data === null || data === void 0 ? void 0 : (_data$tenantId = data.tenantId) === null || _data$tenantId === void 0 ? void 0 : _data$tenantId.code;
    var transactionNumber = uuidv4();
    var appliactionType = "BUILDING_PLAN_SCRUTINY";
    var applicationSubType = "NEW_CONSTRUCTION";
    edcrRequest = _extends({}, edcrRequest, {
      tenantId: tenantId
    });
    edcrRequest = _extends({}, edcrRequest, {
      transactionNumber: transactionNumber
    });
    edcrRequest = _extends({}, edcrRequest, {
      applicantName: applicantName
    });
    edcrRequest = _extends({}, edcrRequest, {
      appliactionType: appliactionType
    });
    edcrRequest = _extends({}, edcrRequest, {
      applicationSubType: applicationSubType
    });
    var bodyFormData = new FormData();
    bodyFormData.append("edcrRequest", JSON.stringify(edcrRequest));
    bodyFormData.append("planFile", file);
    Digit.EDCRService.create({
      data: bodyFormData
    }, tenantId).then(function (result, err) {
      var _result$data;
      setIsSubmitBtnDisable(false);
      if (result !== null && result !== void 0 && (_result$data = result.data) !== null && _result$data !== void 0 && _result$data.edcrDetail) {
        var _result$data2, _result$data3;
        setParams(result === null || result === void 0 ? void 0 : (_result$data2 = result.data) === null || _result$data2 === void 0 ? void 0 : _result$data2.edcrDetail);
        history.replace("/digit-ui/citizen/obps/edcrscrutiny/apply/acknowledgement",
        {
          data: result === null || result === void 0 ? void 0 : (_result$data3 = result.data) === null || _result$data3 === void 0 ? void 0 : _result$data3.edcrDetail
        });
      }
    }).catch(function (e) {
      var _e$response, _e$response$data, _e$response2, _e$response2$data, _e$response3, _e$response3$data, _e$response4, _e$response4$data;
      setParams({
        data: e !== null && e !== void 0 && (_e$response = e.response) !== null && _e$response !== void 0 && (_e$response$data = _e$response.data) !== null && _e$response$data !== void 0 && _e$response$data.errorCode ? e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.errorCode : "BPA_INTERNAL_SERVER_ERROR",
        type: "ERROR"
      });
      setIsSubmitBtnDisable(false);
      setIsShowToast({
        key: true,
        label: e !== null && e !== void 0 && (_e$response3 = e.response) !== null && _e$response3 !== void 0 && (_e$response3$data = _e$response3.data) !== null && _e$response3$data !== void 0 && _e$response3$data.errorCode ? e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.errorCode : "BPA_INTERNAL_SERVER_ERROR"
      });
    });
  }
  var handleSkip = function handleSkip() {};
  var handleMultiple = function handleMultiple() {};
  var onSuccess = function onSuccess() {
    sessionStorage.removeItem("CurrentFinancialYear");
    queryClient.invalidateQueries("TL_CREATE_TRADE");
  };
  newConfig$1 = (_newConfig = newConfig$1) !== null && _newConfig !== void 0 && _newConfig.EdcrConfig ? (_newConfig2 = newConfig$1) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.EdcrConfig : newConfig;
  newConfig$1.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "home";
  var EDCRAcknowledgement = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('EDCRAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: match.path + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params,
      onAdd: handleMultiple,
      isShowToast: isShowToast,
      isSubmitBtnDisable: isSubmitBtnDisable,
      setIsShowToast: setIsShowToast
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: match.path + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(EDCRAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: match.path + "/" + config.indexRoute
  })));
};

var newConfig$1 = [{
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "docs-required",
    component: "OCEDCRDocsRequired",
    key: "data",
    nextStep: "home"
  }, {
    route: "home",
    component: "OCeDCRScrutiny",
    nextStep: "upload-diagram",
    hideInEmployee: true,
    key: "ScrutinyDetails"
  }, {
    route: "upload-diagram",
    component: "OCUploadPlanDiagram",
    nextStep: null,
    hideInEmployee: true,
    key: "uploadData",
    texts: {
      headerCaption: "BPA_OC_NEW_BUILDING_CONSTRUCTION_LABEL",
      header: "BPA_UPLOAD_OC_PLAN_DIAGRAM_LABEL",
      cardText: "",
      submitBarLabel: "BPA_COMMON_BUTTON_SUBMIT",
      skipText: ""
    }
  }]
}];

var CreateOCEDCR = function CreateOCEDCR(_ref) {
  var _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis;
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var _useRouteMatch = reactRouterDom.useRouteMatch(),
    path = _useRouteMatch.path;
  var history = reactRouterDom.useHistory();
  var config = [];
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("OC_EDCR_CREATE", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1];
  var _useState = React.useState(null),
    isShowToast = _useState[0],
    setIsShowToast = _useState[1];
  var _useState2 = React.useState(false),
    isSubmitBtnDisable = _useState2[0],
    setIsSubmitBtnDisable = _useState2[1];
  Digit.SessionStorage.set("EDCR_BACK", "IS_EDCR_BACK");
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  function createOCEdcr(key, uploadData, skipStep, isFromCreateApi) {
    var _loggedInuserInfo$inf, _loggedInuserInfo$inf2, _data$ScrutinyDetails, _data$ScrutinyDetails2, _data$ScrutinyDetails3, _data$ScrutinyDetails4, _data$ScrutinyDetails5, _data$ScrutinyDetails6;
    setIsSubmitBtnDisable(true);
    var data = params;
    var loggedInuserInfo = Digit.UserService.getUser();
    var userInfo = {
      id: loggedInuserInfo === null || loggedInuserInfo === void 0 ? void 0 : (_loggedInuserInfo$inf = loggedInuserInfo.info) === null || _loggedInuserInfo$inf === void 0 ? void 0 : _loggedInuserInfo$inf.uuid,
      tenantId: loggedInuserInfo === null || loggedInuserInfo === void 0 ? void 0 : (_loggedInuserInfo$inf2 = loggedInuserInfo.info) === null || _loggedInuserInfo$inf2 === void 0 ? void 0 : _loggedInuserInfo$inf2.tenantId
    };
    var edcrRequest = {
      transactionNumber: "",
      edcrNumber: "",
      planFile: null,
      tenantId: "",
      RequestInfo: {
        apiId: "",
        ver: "",
        ts: "",
        action: "",
        did: "",
        authToken: "",
        key: "",
        msgId: "",
        correlationId: "",
        userInfo: userInfo
      }
    };
    var transactionNumber = uuidv4();
    var edcrNumber = data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails = data.ScrutinyDetails) === null || _data$ScrutinyDetails === void 0 ? void 0 : _data$ScrutinyDetails.edcrNumber;
    var tenantId = data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails2 = data.ScrutinyDetails) === null || _data$ScrutinyDetails2 === void 0 ? void 0 : _data$ScrutinyDetails2.tenantId;
    var applicantName = data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails3 = data.ScrutinyDetails) === null || _data$ScrutinyDetails3 === void 0 ? void 0 : _data$ScrutinyDetails3.applicantName;
    var appliactionType = "BUILDING_OC_PLAN_SCRUTINY";
    var applicationSubType = "NEW_CONSTRUCTION";
    var permitDate = convertDateToEpoch(data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails4 = data.ScrutinyDetails) === null || _data$ScrutinyDetails4 === void 0 ? void 0 : _data$ScrutinyDetails4.ocPermitdate);
    var permitNumber = data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails5 = data.ScrutinyDetails) === null || _data$ScrutinyDetails5 === void 0 ? void 0 : _data$ScrutinyDetails5.ocPermitNumber;
    var comparisonEdcrNumber = data === null || data === void 0 ? void 0 : (_data$ScrutinyDetails6 = data.ScrutinyDetails) === null || _data$ScrutinyDetails6 === void 0 ? void 0 : _data$ScrutinyDetails6.edcrNumber;
    var file = uploadData === null || uploadData === void 0 ? void 0 : uploadData.file;
    edcrRequest = _extends({}, edcrRequest, {
      transactionNumber: transactionNumber
    });
    edcrRequest = _extends({}, edcrRequest, {
      edcrNumber: edcrNumber
    });
    edcrRequest = _extends({}, edcrRequest, {
      tenantId: tenantId
    });
    edcrRequest = _extends({}, edcrRequest, {
      applicantName: applicantName
    });
    edcrRequest = _extends({}, edcrRequest, {
      appliactionType: appliactionType
    });
    edcrRequest = _extends({}, edcrRequest, {
      applicationSubType: applicationSubType
    });
    edcrRequest = _extends({}, edcrRequest, {
      permitDate: permitDate
    });
    edcrRequest = _extends({}, edcrRequest, {
      permitNumber: permitNumber
    });
    edcrRequest = _extends({}, edcrRequest, {
      comparisonEdcrNumber: comparisonEdcrNumber
    });
    var bodyFormData = new FormData();
    bodyFormData.append("edcrRequest", JSON.stringify(edcrRequest));
    bodyFormData.append("planFile", file);
    Digit.EDCRService.create({
      data: bodyFormData
    }, tenantId).then(function (result, err) {
      var _result$data;
      setIsSubmitBtnDisable(false);
      if (result !== null && result !== void 0 && (_result$data = result.data) !== null && _result$data !== void 0 && _result$data.edcrDetail) {
        var _result$data2, _result$data3;
        setParams(result === null || result === void 0 ? void 0 : (_result$data2 = result.data) === null || _result$data2 === void 0 ? void 0 : _result$data2.edcrDetail);
        history.replace("/digit-ui/citizen/obps/edcrscrutiny/oc-apply/acknowledgement", {
          data: result === null || result === void 0 ? void 0 : (_result$data3 = result.data) === null || _result$data3 === void 0 ? void 0 : _result$data3.edcrDetail
        });
      }
    }).catch(function (e) {
      var _e$response, _e$response$data, _e$response2, _e$response2$data, _e$response3, _e$response3$data, _e$response4, _e$response4$data;
      setParams({
        data: e !== null && e !== void 0 && (_e$response = e.response) !== null && _e$response !== void 0 && (_e$response$data = _e$response.data) !== null && _e$response$data !== void 0 && _e$response$data.errorCode ? e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.errorCode : "BPA_INTERNAL_SERVER_ERROR",
        type: "ERROR"
      });
      setIsSubmitBtnDisable(false);
      setIsShowToast({
        key: true,
        label: e !== null && e !== void 0 && (_e$response3 = e.response) !== null && _e$response3 !== void 0 && (_e$response3$data = _e$response3.data) !== null && _e$response3$data !== void 0 && _e$response3$data.errorCode ? e === null || e === void 0 ? void 0 : (_e$response4 = e.response) === null || _e$response4 === void 0 ? void 0 : (_e$response4$data = _e$response4.data) === null || _e$response4$data === void 0 ? void 0 : _e$response4$data.errorCode : "BPA_INTERNAL_SERVER_ERROR"
      });
    });
  }
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(path + "/check");
    }
    redirectWithHistory(path + "/" + nextStep);
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) createOCEdcr(key, data);else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    if (!skipStep) goNext();
  };
  var handleSkip = function handleSkip() {};
  var handleMultiple = function handleMultiple() {};
  var onSuccess = function onSuccess() {
    sessionStorage.removeItem("CurrentFinancialYear");
    queryClient.invalidateQueries("TL_CREATE_TRADE");
  };
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.OCEdcrConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.OCEdcrConfig : newConfig$1;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "docs-required";
  var EDCRAcknowledgement = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('OCEDCRAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: match.path + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params,
      onAdd: handleMultiple,
      isShowToast: isShowToast,
      isSubmitBtnDisable: isSubmitBtnDisable,
      setIsShowToast: setIsShowToast
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: match.path + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(EDCRAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: match.path + "/" + config.indexRoute
  })));
};

var newConfig$2 = [{
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "docs-required",
    component: "DocsRequired",
    key: "data",
    nextStep: "basic-details"
  }, {
    route: "basic-details",
    component: "BasicDetails",
    key: "data",
    nextStep: "plot-details"
  }, {
    route: "plot-details",
    component: "PlotDetails",
    key: "data",
    nextStep: "scrutiny-details",
    texts: {
      headerCaption: "BPA_SCRUTINY_DETAILS",
      header: "BPA_PLOT_DETAILS_TITLE",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipText: "CORE_COMMON_SKIP_CONTINUE"
    },
    inputs: [{
      label: "BPA_HOLDING_NUMBER_LABEL",
      type: "text",
      validation: {
      },
      name: "holdingNumber"
    }, {
      label: "BPA_BOUNDARY_LAND_REG_DETAIL_LABEL",
      type: "textarea",
      validation: {
      },
      name: "registrationDetails"
    }]
  }, {
    route: "scrutiny-details",
    component: "ScrutinyDetails",
    nextStep: "location",
    hideInEmployee: true,
    key: "subOccupancy",
    texts: {
      headerCaption: "BPA_STEPPER_SCRUTINY_DETAILS_HEADER",
      header: "BPA_STEPPER_SCRUTINY_DETAILS_HEADER",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipText: "CORE_COMMON_SKIP_CONTINUE"
    }
  }, {
    route: "location",
    component: "LocationDetails",
    nextStep: "owner-details",
    hideInEmployee: true,
    key: "address",
    texts: {
      headerCaption: "BPA_STEPPER_SCRUTINY_DETAILS_HEADER",
      header: "BPA_NEW_TRADE_DETAILS_HEADER_DETAILS",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipAndContinueText: ""
    }
  }, {
    route: "owner-details",
    component: "OwnerDetails",
    nextStep: "document-details",
    key: "owners",
    texts: {
      headerCaption: "BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",
      header: "BPA_APPLICANT_DETAILS_HEADER",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "document-details",
    component: "DocumentDetails",
    nextStep: "noc-details",
    key: "documents",
    texts: {
      headerCaption: "BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",
      header: "BPA_DOCUMENT_DETAILS_LABEL",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "noc-details",
    component: "NOCDetails",
    nextStep: null,
    key: "nocDocuments",
    texts: {
      headerCaption: "BPA_NOC_DETAILS_SUMMARY",
      header: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipText: "CORE_COMMON_SKIP_CONTINUE"
    }
  }]
}];

var getPath$1 = function getPath(path, params) {
  params && Object.keys(params).map(function (key) {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
var NewBuildingPermit = function NewBuildingPermit() {
  var _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  var queryClient = reactQuery.useQueryClient();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useRouteMatch = reactRouterDom.useRouteMatch();
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname,
    state = _useLocation.state;
  var match = reactRouterDom.useRouteMatch();
  var history = reactRouterDom.useHistory();
  var location = reactRouterDom.useLocation();
  sessionStorage.removeItem("BPA_SUBMIT_APP");
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT", state !== null && state !== void 0 && state.edcrNumber ? {
      data: {
        scrutinyNumber: {
          edcrNumber: state === null || state === void 0 ? void 0 : state.edcrNumber
        }
      }
    } : {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath$1(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath$1(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(getPath$1(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else if (key === "") setParams(_extends({}, data));else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};

  var config = [];
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.BuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.BuildingPermitConfig : newConfig$2;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "docs-required";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('BPACheckPage');
  var OBPSAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('BPAAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$1(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$1(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$1(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(OBPSAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$1(match.path, match.params) + "/" + config.indexRoute
  })));
};

var newConfig$3 = [{
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "docs-required",
    component: "DocsRequired",
    key: "data",
    nextStep: "basic-details"
  }, {
    route: "basic-details",
    component: "OCBasicDetails",
    key: "data",
    nextStep: "plot-details"
  }, {
    route: "plot-details",
    component: "PlotDetails",
    key: "data",
    nextStep: "scrutiny-details",
    texts: {
      headerCaption: "BPA_SCRUTINY_DETAILS",
      header: "BPA_PLOT_DETAILS_TITLE",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipText: "CORE_COMMON_SKIP_CONTINUE"
    },
    inputs: [{
      label: "BPA_HOLDING_NUMBER_LABEL",
      type: "text",
      validation: {},
      name: "holdingNumber"
    }, {
      label: "BPA_BOUNDARY_LAND_REG_DETAIL_LABEL",
      type: "textarea",
      validation: {},
      name: "registrationDetails"
    }]
  }, {
    route: "scrutiny-details",
    component: "ScrutinyDetails",
    nextStep: "document-details",
    hideInEmployee: true,
    key: "subOccupancy",
    texts: {
      headerCaption: "BPA_STEPPER_SCRUTINY_DETAILS_HEADER",
      header: "BPA_STEPPER_SCRUTINY_DETAILS_HEADER",
      cardText: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipAndContinueText: ""
    }
  }, {
    route: "document-details",
    component: "DocumentDetails",
    nextStep: "noc-details",
    key: "documents",
    texts: {
      headerCaption: "BPA_OWNER_AND_DOCUMENT_DETAILS_LABEL",
      header: "BPA_DOCUMENT_DETAILS_LABEL",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }, {
    route: "noc-details",
    component: "NOCDetails",
    nextStep: null,
    key: "nocDocuments",
    texts: {
      headerCaption: "BPA_NOC_DETAILS_SUMMARY",
      header: "",
      submitBarLabel: "CS_COMMON_NEXT",
      skipText: "CORE_COMMON_SKIP_CONTINUE"
    }
  }]
}];

var getPath$2 = function getPath(path, params) {
  params && Object.keys(params).map(function (key) {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
var OCBuildingPermit = function OCBuildingPermit() {
  var _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  var queryClient = reactQuery.useQueryClient();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useRouteMatch = reactRouterDom.useRouteMatch();
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname,
    state = _useLocation.state;
  var history = reactRouterDom.useHistory();
  var match = reactRouterDom.useRouteMatch();
  sessionStorage.removeItem("BPA_SUBMIT_APP");
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT", state !== null && state !== void 0 && state.edcrNumber ? {
      data: {
        scrutinyNumber: {
          edcrNumber: state === null || state === void 0 ? void 0 : state.edcrNumber
        }
      }
    } : {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath$2(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath$2(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(getPath$2(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else if (key === "") setParams(_extends({}, data));else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};
  var config = [];
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.OCBuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.OCBuildingPermitConfig : newConfig$3;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "docs-required";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('OCBPACheckPage');
  var OBPSAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('OCBPAAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$2(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$2(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$2(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(OBPSAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$2(match.path, match.params) + "/" + config.indexRoute
  })));
};

var newConfig$4 = [{
  head: "ES_NEW_APPLICATION_PROPERTY_ASSESSMENT",
  body: [{
    route: "stakeholder-docs-required",
    component: "StakeholderDocsRequired",
    key: "data",
    nextStep: "provide-license-type"
  }, {
    type: "component",
    route: "provide-license-type",
    isMandatory: true,
    component: "LicenseType",
    texts: {
      headerCaption: "BPA_LICENSE_DET_CAPTION",
      header: "BPA_LICENSE_TYPE",
      cardText: "BPA_LICENSE_TYPE_TEXT",
      submitBarLabel: "CS_COMMON_NEXT"
    },
    nextStep: "license-details",
    key: "LicneseType",
    withoutLabel: true,
    hideInEmployee: true
  }, {
    type: "component",
    route: "license-details",
    isMandatory: true,
    component: "LicenseDetails",
    texts: {
      headerCaption: "BPA_LICENSE_DET_CAPTION",
      header: "BPA_LICENSE_DET_CAPTION",
      cardText: "BPA_LICENSE_DETAILS_TEXT",
      submitBarLabel: "CS_COMMON_NEXT"
    },
    nextStep: "Permanent-address",
    key: "LicneseDetails",
    withoutLabel: true,
    hideInEmployee: true
  }, {
    type: "component",
    route: "Permanent-address",
    isMandatory: true,
    component: "PermanentAddress",
    texts: {
      headerCaption: "BPA_NEW_ADDRESS_HEADER_DETAILS",
      header: "BPA_LICENSEE_PERM_ADDR_HEADER",
      cardText: "BPA_LICENSEE_PERMANENT_TEXT",
      submitBarLabel: "CS_COMMON_NEXT"
    },
    nextStep: "correspondence-address",
    key: "LicneseDetails",
    withoutLabel: true,
    hideInEmployee: true
  }, {
    type: "component",
    route: "correspondence-address",
    isMandatory: true,
    component: "CorrospondenceAddress",
    texts: {
      headerCaption: "BPA_NEW_ADDRESS_HEADER_DETAILS",
      header: "BPA_LICENSEE_CORRESPONDENCE_LABEL",
      cardText: "BPA_LICENSEE_CORRESPONDENCE_TEXT",
      submitBarLabel: "CS_COMMON_NEXT"
    },
    nextStep: "stakeholder-document-details",
    key: "LicneseDetails",
    withoutLabel: true,
    hideInEmployee: true
  }, {
    route: "stakeholder-document-details",
    component: "StakeholderDocuments",
    nextStep: null,
    key: "documents",
    texts: {
      headerCaption: "BPA_DOCUMENT_DETAILS_LABEL",
      header: "BPA_LICENSEE_DOCUMENT_DETAILS_HEADER",
      submitBarLabel: "CS_COMMON_NEXT"
    }
  }]
}];

var StakeholderRegistration = function StakeholderRegistration() {
  var _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  var queryClient = reactQuery.useQueryClient();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useRouteMatch = reactRouterDom.useRouteMatch(),
    path = _useRouteMatch.path;
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname,
    state = _useLocation.state;
  var history = reactRouterDom.useHistory();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT", state !== null && state !== void 0 && state.edcrNumber ? {
      data: {
        scrutinyNumber: {
          edcrNumber: state === null || state === void 0 ? void 0 : state.edcrNumber
        }
      }
    } : {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(path + "/check");
    }
    redirectWithHistory(path + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    clearParams();
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(path + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else if (key === "") setParams(_extends({}, data));else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};

  var config = [];
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.StakeholderConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.StakeholderConfig : newConfig$4;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "stakeholder-docs-required";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('StakeholderCheckPage');
  var StakeholderAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('StakeholderAcknowledgement');
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: path + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: path + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(StakeholderAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: path + "/" + config.indexRoute
  })));
};

var BPAApplicationTimeline = function BPAApplicationTimeline(props) {
  var _props$application, _props$application2, _data$timeline, _data$timeline2, _data$timeline$;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var businessService = (_props$application = props.application) === null || _props$application === void 0 ? void 0 : _props$application.businessService;
  var _Digit$Hooks$useWorkf = Digit.Hooks.useWorkflowDetails({
      tenantId: (_props$application2 = props.application) === null || _props$application2 === void 0 ? void 0 : _props$application2.tenantId,
      id: props.id,
      moduleCode: businessService
    }),
    isLoading = _Digit$Hooks$useWorkf.isLoading,
    data = _Digit$Hooks$useWorkf.data;
  function OpenImage(imageSource, index, thumbnailsToShow) {
    var _thumbnailsToShow$ful;
    window.open(thumbnailsToShow === null || thumbnailsToShow === void 0 ? void 0 : (_thumbnailsToShow$ful = thumbnailsToShow.fullImage) === null || _thumbnailsToShow$ful === void 0 ? void 0 : _thumbnailsToShow$ful[0], "_blank");
  }
  var getTimelineCaptions = function getTimelineCaptions(checkpoint) {
    var _checkpoint$auditDeta, _checkpoint$assignes, _checkpoint$assignes$, _checkpoint$assignes2, _checkpoint$assignes3;
    var caption = {
      date: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$auditDeta = checkpoint.auditDetails) === null || _checkpoint$auditDeta === void 0 ? void 0 : _checkpoint$auditDeta.lastModified,
      name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes = checkpoint.assignes) === null || _checkpoint$assignes === void 0 ? void 0 : (_checkpoint$assignes$ = _checkpoint$assignes[0]) === null || _checkpoint$assignes$ === void 0 ? void 0 : _checkpoint$assignes$.name,
      mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes2 = checkpoint.assignes) === null || _checkpoint$assignes2 === void 0 ? void 0 : (_checkpoint$assignes3 = _checkpoint$assignes2[0]) === null || _checkpoint$assignes3 === void 0 ? void 0 : _checkpoint$assignes3.mobileNumber,
      comment: t(checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.comment),
      wfComment: checkpoint.wfComment,
      thumbnailsToShow: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.thumbnailsToShow
    };
    return /*#__PURE__*/React__default.createElement(BPACaption, {
      data: caption,
      OpenImage: OpenImage
    });
  };

  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !isLoading && /*#__PURE__*/React__default.createElement(React.Fragment, null, (data === null || data === void 0 ? void 0 : (_data$timeline = data.timeline) === null || _data$timeline === void 0 ? void 0 : _data$timeline.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px",
      marginTop: "32px"
    }
  }, t("CS_APPLICATION_DETAILS_APPLICATION_TIMELINE")), data !== null && data !== void 0 && data.timeline && (data === null || data === void 0 ? void 0 : (_data$timeline2 = data.timeline) === null || _data$timeline2 === void 0 ? void 0 : _data$timeline2.length) === 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
    isCompleted: true,
    label: t((data === null || data === void 0 ? void 0 : (_data$timeline$ = data.timeline[0]) === null || _data$timeline$ === void 0 ? void 0 : _data$timeline$.state) && "WF_" + businessService + "_" + data.timeline[0].state || "NA"),
    customChild: getTimelineCaptions(data === null || data === void 0 ? void 0 : data.timeline[0])
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ConnectingCheckPoints, null, (data === null || data === void 0 ? void 0 : data.timeline) && (data === null || data === void 0 ? void 0 : data.timeline.map(function (checkpoint, index, arr) {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
      keyValue: index,
      isCompleted: index === 0,
      label: checkpoint.state ? t("WF_" + businessService + "_" + checkpoint.state) : "NA",
      customChild: getTimelineCaptions(checkpoint)
    }));
  })))));
};

var configAcceptApplication = function configAcceptApplication(_ref) {
  var t = _ref.t,
    action = _ref.action,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    error = _ref.error,
    _ref$isCommentRequire = _ref.isCommentRequired,
    isCommentRequired = _ref$isCommentRequire === void 0 ? true : _ref$isCommentRequire,
    setUploadedFile = _ref.setUploadedFile;
  return {
    label: {
      heading: "BPA_FORWARD_APPLICATION_HEADER",
      submit: "BPA_" + action + "_BUTTON",
      cancel: "CS_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: t("ES_OBPS_ACTION_COMMENTS"),
        isMandatory: isCommentRequired,
        type: "textarea",
        populators: {
          name: "comments",
          validation: {
            required: isCommentRequired
          }
        }
      }, {
        label: "" + t("WF_APPROVAL_UPLOAD_HEAD"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

var configTermsAndConditions = function configTermsAndConditions(_ref) {
  var t = _ref.t,
    applicationData = _ref.applicationData;
  var data = getCheckBoxLabelData(t, applicationData);
  return {
    label: {
      heading: "",
      submit: null,
      cancel: null,
      hideSubmit: true
    },
    data: [data]
  };
};

var Heading = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
var Close = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    width: "24",
    height: "24",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",
    fill: "#0B0C0C"
  }));
};
var CloseBtn = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick,
    style: {
      backgroundColor: "#FFFFFF"
    }
  }, /*#__PURE__*/React__default.createElement(Close, null));
};
var ActionModal = function ActionModal(_ref) {
  var _config$label, _config$label2, _config$label3, _config$label4, _config$data;
  var t = _ref.t,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    action = _ref.action,
    applicationData = _ref.applicationData;
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState(null),
    file = _useState2[0],
    setFile = _useState2[1];
  var _useState3 = React.useState(null),
    uploadedFile = _useState3[0],
    setUploadedFile = _useState3[1];
  var _useState4 = React.useState({}),
    defaultValues = _useState4[0];
  var _useState5 = React.useState(null),
    error = _useState5[0],
    setError = _useState5[1];
  var _useState6 = React.useState(false),
    termsData = _useState6[0],
    setTermsData = _useState6[1];
  var mobileView = Digit.Utils.browser.isMobile() ? true : false;
  var selectFile = function selectFile(e) {
    setFile(e.target.files[0]);
  };
  React.useEffect(function () {
    var _configAcceptApplicat2, _configAcceptApplicat3;
    switch (action) {
      case "APPROVE":
        {
          var _configAcceptApplicat;
          setConfig(configAcceptApplication((_configAcceptApplicat = {
            t: t,
            action: action,
            selectFile: selectFile,
            uploadedFile: uploadedFile,
            error: error,
            isCommentRequired: false,
            setUploadedFile: setUploadedFile,
            file: file
          }, _configAcceptApplicat["error"] = error, _configAcceptApplicat)));
          break;
        }
      case "SEND_TO_ARCHITECT":
        setConfig(configAcceptApplication((_configAcceptApplicat2 = {
          t: t,
          action: action,
          selectFile: selectFile,
          uploadedFile: uploadedFile,
          error: error,
          setUploadedFile: setUploadedFile,
          file: file
        }, _configAcceptApplicat2["error"] = error, _configAcceptApplicat2)));
        break;
      case "TERMS_AND_CONDITIONS":
        setTermsData(true);
        setConfig(configTermsAndConditions({
          t: t,
          applicationData: applicationData
        }));
        break;
      default:
        setConfig(configAcceptApplication((_configAcceptApplicat3 = {
          t: t,
          action: action,
          selectFile: selectFile,
          uploadedFile: uploadedFile,
          error: error,
          isCommentRequired: false,
          setUploadedFile: setUploadedFile,
          file: file
        }, _configAcceptApplicat3["error"] = error, _configAcceptApplicat3)));
    }
  }, [action, uploadedFile, error]);
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      setUploadedFile(null);
                      return Promise.resolve(Digit.UploadServices.Filestorage("BPA", file, Digit.ULBService.getStateId())).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  var submit = function submit(data) {
    var workflow = {
      action: action
    };
    if (uploadedFile) {
      workflow.varificationDocuments = [{
        documentType: "Document - 1",
        fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
        fileStoreId: uploadedFile
      }];
    }
    if (!(data !== null && data !== void 0 && data.comments)) delete data.comments;
    submitAction(_extends({}, data, workflow));
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading, {
      label: t(config === null || config === void 0 ? void 0 : (_config$label = config.label) === null || _config$label === void 0 ? void 0 : _config$label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config === null || config === void 0 ? void 0 : (_config$label2 = config.label) === null || _config$label2 === void 0 ? void 0 : _config$label2.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config === null || config === void 0 ? void 0 : (_config$label3 = config.label) === null || _config$label3 === void 0 ? void 0 : _config$label3.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {},
    formId: "modal-action",
    isDisabled: false
    ,
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      minHeight: "45px",
      height: "auto",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      minHeight: "45px",
      height: "auto",
      width: "160px"
    },
    hideSubmit: config !== null && config !== void 0 && (_config$label4 = config.label) !== null && _config$label4 !== void 0 && _config$label4.hideSubmit ? true : false,
    popupModuleMianStyles: action == "TERMS_AND_CONDITIONS" ? {
      height: "92%",
      boxSizing: "border-box"
    } : mobileView ? {
      paddingLeft: "0px"
    } : {},
    headerBarMainStyle: action == "TERMS_AND_CONDITIONS" ? {
      margin: "0px",
      height: "35px"
    } : {}
  }, config !== null && config !== void 0 && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    cardStyle: {
      minWidth: "unset",
      paddingRight: "unset",
      marginRight: "18px",
      paddingBottom: "64px"
    },
    config: config === null || config === void 0 ? void 0 : config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  }) : null, termsData ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      height: "100%"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      height: "95%"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      fontSize: "18px",
      paddingBottom: "16px",
      color: "#000000",
      fontWeight: "700"
    }
  }, t("TERMS_AND_CONDITIONS")), (config === null || config === void 0 ? void 0 : config.data) && (config === null || config === void 0 ? void 0 : (_config$data = config.data) === null || _config$data === void 0 ? void 0 : _config$data.map(function (value, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        height: "90%",
        overflow: "auto"
      }
    }, "" + value);
  }))), /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      justifyContent: "center",
      minHeight: "5%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.ButtonSelector, {
    label: t("BPA_GO_BACK_LABEL"),
    onSubmit: closeModal,
    style: {
      minWidth: "240px"
    }
  }))) : null);
};

function OBPSDocument(_ref) {
  var _ref$value = _ref.value,
    value = _ref$value === void 0 ? {} : _ref$value,
    Code = _ref.Code,
    index = _ref.index,
    _ref$isNOC = _ref.isNOC,
    isNOC = _ref$isNOC === void 0 ? false : _ref$isNOC,
    _ref$isStakeHolder = _ref.isStakeHolder,
    isStakeHolder = _ref$isStakeHolder === void 0 ? false : _ref$isStakeHolder;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useOBPSDocumentSearch({
      value: value
    }, {
      value: value
    }, Code, index, isNOC),
    isLoading = _Digit$Hooks$obps$use.isLoading,
    data = _Digit$Hooks$obps$use.data;
  var documents = [];
  if (isNOC) {
    var _value$nocDocuments, _value$nocDocuments2;
    value !== null && value !== void 0 && value.nocDocuments ? (value === null || value === void 0 ? void 0 : (_value$nocDocuments = value.nocDocuments) === null || _value$nocDocuments === void 0 ? void 0 : _value$nocDocuments.nocDocuments.length) > 0 && (value === null || value === void 0 ? void 0 : (_value$nocDocuments2 = value.nocDocuments) === null || _value$nocDocuments2 === void 0 ? void 0 : _value$nocDocuments2.nocDocuments.filter(function (ob) {
      var _ob$documentType;
      return ob === null || ob === void 0 ? void 0 : (_ob$documentType = ob.documentType) === null || _ob$documentType === void 0 ? void 0 : _ob$documentType.includes(Code);
    }).map(function (ob) {
      documents.push(ob);
    })) : (value === null || value === void 0 ? void 0 : value.length) > 0 && (value === null || value === void 0 ? void 0 : value.filter(function (ob) {
      var _ob$documentType2;
      return ob === null || ob === void 0 ? void 0 : (_ob$documentType2 = ob.documentType) === null || _ob$documentType2 === void 0 ? void 0 : _ob$documentType2.includes(Code);
    }).map(function (ob) {
      documents.push(ob);
    }));
  } else {
    var _value$documents;
    value !== null && value !== void 0 && value.documents ? value === null || value === void 0 ? void 0 : (_value$documents = value.documents) === null || _value$documents === void 0 ? void 0 : _value$documents.documents.filter(function (doc) {
      return (doc === null || doc === void 0 ? void 0 : doc.documentType) === Code;
    }).map(function (ob) {
      documents.push(ob);
    }) : value.filter(function (doc) {
      return (doc === null || doc === void 0 ? void 0 : doc.documentType) === Code;
    }).map(function (ob) {
      documents.push(ob);
    });
  }
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "19px"
    }
  }, /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      flexWrap: "wrap"
    }
  }, documents.length > 0 ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      display: "flex",
      justifyContent: "flex-start",
      flexWrap: "wrap"
    }
  }, documents === null || documents === void 0 ? void 0 : documents.map(function (document, index) {
    var documentLink = pdfDownloadLink(data.pdfFiles, document === null || document === void 0 ? void 0 : document.fileStoreId);
    return /*#__PURE__*/React__default.createElement("a", {
      target: "_blank",
      href: documentLink,
      style: {
        minWidth: "80px",
        marginRight: "10px",
        maxWidth: "100px",
        height: "auto"
      },
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        display: "flex",
        justifyContent: "center"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)), isStakeHolder ? /*#__PURE__*/React__default.createElement("p", {
      style: {
        marginTop: "8px",
        textAlign: "center",
        color: "#505A5F"
      }
    }, t("BPAREG_HEADER_" + stringReplaceAll(Code === null || Code === void 0 ? void 0 : Code.toUpperCase(), ".", "_"))) : null, "  ", !isStakeHolder ? /*#__PURE__*/React__default.createElement("p", {
      style: {
        marginTop: "8px",
        textAlign: "center",
        color: "#505A5F"
      }
    }, "" + t(Code)) : null);
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
}

var SubOccupancyTable = function SubOccupancyTable(_ref) {
  var _edcrDetails$values, _edcrDetails$subOccup, _edcrDetails$subOccup2, _edcrDetails$subOccup3, _edcrDetails$subOccup4;
  var edcrDetails = _ref.edcrDetails,
    applicationData = _ref.applicationData;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  var tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  var accessData = function accessData(plot) {
    var name = plot;
    return function (originalRow, rowIndex, columns) {
      return originalRow[name];
    };
  };
  var tableColumns = React.useMemo(function () {
    return tableHeader.map(function (ob) {
      return {
        Header: t("" + ob.name),
        accessor: accessData(ob.id),
        id: ob.id
      };
    });
  });
  function getFloorData(block) {
    var _block$building;
    var floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : _block$building.floors.map(function (ob) {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  var stringReplaceAll = function stringReplaceAll(str, searcher, replaceWith) {
    if (str === void 0) {
      str = "";
    }
    if (searcher === void 0) {
      searcher = "";
    }
    if (replaceWith === void 0) {
      replaceWith = "";
    }
    if (searcher == "") return str;
    while (str.includes(searcher)) {
      str = str.replace(searcher, replaceWith);
    }
    return str;
  };
  function getSubOccupancyValues(index) {
    var _applicationData$land;
    var values = applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$land = applicationData.landInfo) === null || _applicationData$land === void 0 ? void 0 : _applicationData$land.unit;
    var returnValue = "";
    if ((values === null || values === void 0 ? void 0 : values.length) > 0) {
      var _values$index, _values$index$usageCa;
      var splitArray = (_values$index = values[index]) === null || _values$index === void 0 ? void 0 : (_values$index$usageCa = _values$index.usageCategory) === null || _values$index$usageCa === void 0 ? void 0 : _values$index$usageCa.split(',');
      if (splitArray !== null && splitArray !== void 0 && splitArray.length) {
        var returnValueArray = splitArray.map(function (data) {
          return data ? "" + t("BPA_SUBOCCUPANCYTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.toUpperCase(), "-", "_")) : "NA";
        });
        returnValue = returnValueArray.join(', ');
      }
    }
    return returnValue ? returnValue : "NA";
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      padding: "8px",
      borderRadius: "4px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$values = edcrDetails.values) === null || _edcrDetails$values === void 0 ? void 0 : _edcrDetails$values.map(function (value, index) {
    if (value !== null && value !== void 0 && value.isHeader) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      labelStyle: {
        width: "100%",
        fontSize: "20px"
      },
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.value ? value === null || value === void 0 ? void 0 : value.value : ""
    });
  })), edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$subOccup = edcrDetails.subOccupancyTableDetails) === null || _edcrDetails$subOccup === void 0 ? void 0 : (_edcrDetails$subOccup2 = _edcrDetails$subOccup[0]) === null || _edcrDetails$subOccup2 === void 0 ? void 0 : (_edcrDetails$subOccup3 = _edcrDetails$subOccup2.value) === null || _edcrDetails$subOccup3 === void 0 ? void 0 : (_edcrDetails$subOccup4 = _edcrDetails$subOccup3.planDetail) === null || _edcrDetails$subOccup4 === void 0 ? void 0 : _edcrDetails$subOccup4.blocks.map(function (block, index) {
    var _edcrDetails$subOccup5, _edcrDetails$subOccup6, _edcrDetails$subOccup7, _edcrDetails$subOccup8, _edcrDetails$subOccup9;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (edcrDetails === null || edcrDetails === void 0 ? void 0 : (_edcrDetails$subOccup5 = edcrDetails.subOccupancyTableDetails) === null || _edcrDetails$subOccup5 === void 0 ? void 0 : (_edcrDetails$subOccup6 = _edcrDetails$subOccup5[0]) === null || _edcrDetails$subOccup6 === void 0 ? void 0 : (_edcrDetails$subOccup7 = _edcrDetails$subOccup6.value) === null || _edcrDetails$subOccup7 === void 0 ? void 0 : (_edcrDetails$subOccup8 = _edcrDetails$subOccup7.planDetail) === null || _edcrDetails$subOccup8 === void 0 ? void 0 : (_edcrDetails$subOccup9 = _edcrDetails$subOccup8.blocks) === null || _edcrDetails$subOccup9 === void 0 ? void 0 : _edcrDetails$subOccup9.length) > 0 ? {
        marginBottom: "30px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        maxWidth: "950px",
        minWidth: "280px"
      } : {
        marginBottom: "30px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "8px",
        paddingBottom: "9px",
        color: "#0B0C0C",
        fontSize: "18px",
        lineHeight: "19px"
      }
    }, t("BPA_BLOCK_SUBHEADER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: {
        wordBreak: "break-word"
      },
      label: "" + t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getSubOccupancyValues(index)
    })), /*#__PURE__*/React__default.createElement("div", {
      style: window.location.href.includes("citizen") || isMobile ? {
        overflow: "scroll"
      } : {
        maxWidth: "950px",
        maxHeight: "280px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false,
      initSortId: "S N ",
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: function getCellProps(cellInfo) {
        return {
          style: {}
        };
      }
    })));
  })));
};

var getDocuments = function getDocuments(fiDocuments) {
  var returnDocuments = [{
    title: "BPA_DOCUMENT_DETAILS_LABEL",
    values: fiDocuments === null || fiDocuments === void 0 ? void 0 : fiDocuments.map(function (doc) {
      var _doc$documentType;
      return {
        title: doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.replaceAll('.', '_'),
        documentType: doc === null || doc === void 0 ? void 0 : doc.documentType,
        documentUid: doc === null || doc === void 0 ? void 0 : doc.documentUid,
        fileStoreId: doc === null || doc === void 0 ? void 0 : doc.fileStoreId,
        id: doc === null || doc === void 0 ? void 0 : doc.id,
        url: doc === null || doc === void 0 ? void 0 : doc.url
      };
    })
  }];
  return returnDocuments;
};
function InspectionReport(_ref) {
  var fiReport = _ref.fiReport,
    _ref$isCitizen = _ref.isCitizen,
    isCitizen = _ref$isCitizen === void 0 ? false : _ref$isCitizen;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "10px"
    }
  }, isCitizen ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    style: {
      fontSize: "24px"
    }
  }, "" + t("BPA_FI_REPORT")) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      fontSize: "24px"
    }
  }, "" + t("BPA_FI_REPORT")), fiReport.map(function (fiData, index) {
    var _fiData$date, _fiData$date2, _fiData$date3, _fiData$questions, _fiData$questions2;
    return /*#__PURE__*/React__default.createElement("div", {
      style: {
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        padding: "8px",
        borderRadius: "4px",
        maxWidth: "950px",
        minWidth: "280px",
        marginBottom: "24px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        fontSize: "20px"
      }
    }, (fiReport === null || fiReport === void 0 ? void 0 : fiReport.length) == 1 ? "" + t("BPA_FI_REPORT") : t("BPA_FI_REPORT") + " - " + (index + 1)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_FI_DATE_LABEL"),
      text: fiData !== null && fiData !== void 0 && fiData.date ? fiData.date.includes("-") ? ((_fiData$date = fiData.date) === null || _fiData$date === void 0 ? void 0 : _fiData$date.split("-")[2]) + "/" + ((_fiData$date2 = fiData.date) === null || _fiData$date2 === void 0 ? void 0 : _fiData$date2.split("-")[1]) + "/" + ((_fiData$date3 = fiData.date) === null || _fiData$date3 === void 0 ? void 0 : _fiData$date3.split("-")[0]) : fiData === null || fiData === void 0 ? void 0 : fiData.date : "NA"
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_FI_TIME_LABEL"),
      text: fiData !== null && fiData !== void 0 && fiData.time ? fiData === null || fiData === void 0 ? void 0 : fiData.time : "NA"
    }), (fiData === null || fiData === void 0 ? void 0 : (_fiData$questions = fiData.questions) === null || _fiData$questions === void 0 ? void 0 : _fiData$questions.length) && (fiData === null || fiData === void 0 ? void 0 : (_fiData$questions2 = fiData.questions) === null || _fiData$questions2 === void 0 ? void 0 : _fiData$questions2.map(function (qstn) {
      return /*#__PURE__*/React__default.createElement("div", {
        style: {
          background: "white",
          border: "1px solid #D6D5D4",
          padding: "8px",
          borderRadius: "4px",
          marginTop: "10px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: "" + t("" + qstn.question),
        text: qstn !== null && qstn !== void 0 && qstn.value ? qstn === null || qstn === void 0 ? void 0 : qstn.value : "NA"
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: "" + t("BPA_ENTER_REMARKS"),
        text: qstn.remarks ? qstn.remarks : "NA"
      }));
    })), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getDocuments(fiData === null || fiData === void 0 ? void 0 : fiData.docs),
      svgStyles: {
        width: "100px",
        height: "100px",
        viewBox: "0 0 25 25",
        minWidth: "100px"
      }
    })));
  })));
}

var ScruntinyDetails = function ScruntinyDetails(_ref) {
  var _scrutinyDetails$valu, _scrutinyDetails$perm, _scrutinyDetails$scru;
  var scrutinyDetails = _ref.scrutinyDetails;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var getTextValues = function getTextValues(data) {
    if (data !== null && data !== void 0 && data.value && data !== null && data !== void 0 && data.isTransLate) return /*#__PURE__*/React__default.createElement("span", {
      style: {
        color: "#00703C"
      }
    }, t(data === null || data === void 0 ? void 0 : data.value));else if (data !== null && data !== void 0 && data.value && data !== null && data !== void 0 && data.isTransLate) return t(data === null || data === void 0 ? void 0 : data.value);else if (data !== null && data !== void 0 && data.value) return data === null || data === void 0 ? void 0 : data.value;else t("NA");
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, !(scrutinyDetails !== null && scrutinyDetails !== void 0 && scrutinyDetails.isChecklist) && /*#__PURE__*/React__default.createElement("div", {
    style: {
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      padding: "8px",
      borderRadius: "4px",
      maxWidth: "950px",
      minWidth: "280px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement("div", null, scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$valu = scrutinyDetails.values) === null || _scrutinyDetails$valu === void 0 ? void 0 : _scrutinyDetails$valu.map(function (value, index) {
    if (value !== null && value !== void 0 && value.isUnit) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: (value === null || value === void 0 ? void 0 : value.value) === "Paid" ? {
        color: "darkgreen"
      } : (value === null || value === void 0 ? void 0 : value.value) === "Unpaid" ? {
        color: "red"
      } : {},
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: value !== null && value !== void 0 && value.value ? getTextValues(value) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("NA"),
      labelStyle: value !== null && value !== void 0 && value.isHeader ? {
        fontSize: "20px"
      } : {}
    });else if (value !== null && value !== void 0 && value.isHeader && !(value !== null && value !== void 0 && value.isUnit)) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else if (value !== null && value !== void 0 && value.isSubTitle && !(value !== null && value !== void 0 && value.isUnit)) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "20px",
        paddingBottom: "10px",
        margin: "0px"
      }
    }, t(value === null || value === void 0 ? void 0 : value.title));else return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: (value === null || value === void 0 ? void 0 : value.value) === "Paid" ? {
        color: "darkgreen"
      } : (value === null || value === void 0 ? void 0 : value.value) === "Unpaid" ? {
        color: "red"
      } : {},
      key: "" + value.title,
      label: "" + t("" + value.title),
      text: getTextValues(value),
      labelStyle: value !== null && value !== void 0 && value.isHeader ? {
        fontSize: "20px"
      } : {}
    });
  }), scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$perm = scrutinyDetails.permit) === null || _scrutinyDetails$perm === void 0 ? void 0 : _scrutinyDetails$perm.map(function (value, ind) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        fontWeight: "400"
      }
    }, value === null || value === void 0 ? void 0 : value.title);
  })), /*#__PURE__*/React__default.createElement("div", null, scrutinyDetails === null || scrutinyDetails === void 0 ? void 0 : (_scrutinyDetails$scru = scrutinyDetails.scruntinyDetails) === null || _scrutinyDetails$scru === void 0 ? void 0 : _scrutinyDetails$scru.map(function (report, index) {
    return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t(report === null || report === void 0 ? void 0 : report.title),
      labelStyle: {
        width: "150%"
      }
    }), /*#__PURE__*/React__default.createElement("a", {
      href: report === null || report === void 0 ? void 0 : report.value
    }, " ", /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null), " "), /*#__PURE__*/React__default.createElement("p", {
      style: {
        margin: "8px 0px",
        fontWeight: "bold",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#505A5F"
      }
    }, t(report === null || report === void 0 ? void 0 : report.text)));
  })))));
};

var _excluded$1 = ["tenantId"],
  _excluded2$1 = ["tenantId", "payments"];
var BpaApplicationDetail = function BpaApplicationDetail() {
  var _data$applicationData, _data$applicationData2, _workflowDetails2, _workflowDetails2$dat, _workflowDetails2$dat2, _data$applicationData18, _workflowDetails5, _workflowDetails5$dat, _workflowDetails5$dat2, _workflowDetails5$dat3, _data$collectionBillD, _data$applicationData31, _data$collectionBillD2, _data$applicationData36, _data$collectionBillD3, _workflowDetails8, _workflowDetails8$dat, _workflowDetails8$dat2, _data$applicationDeta6, _data$applicationDeta9, _data$applicationDeta10, _workflowDetails23, _workflowDetails23$da;
  var getRevocationPDFSearch = function getRevocationPDFSearch(_ref3) {
    var tenantId = _ref3.tenantId,
      params = _objectWithoutPropertiesLoose(_ref3, _excluded$1);
    try {
      var requestData = _extends({}, data === null || data === void 0 ? void 0 : data.applicationData);
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Bpa: [requestData]
      }, "bpa-revocation")).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var getPermitOccupancyOrderSearch = function getPermitOccupancyOrderSearch(_ref2, order, mode) {
    var tenantId = _ref2.tenantId;
    if (mode === void 0) {
      mode = "download";
    }
    try {
      var currentDate = new Date();
      data.applicationData.additionalDetails.runDate = convertDateToEpoch(currentDate.getFullYear() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getDate());
      var requestData = _extends({}, data === null || data === void 0 ? void 0 : data.applicationData, {
        edcrDetail: [_extends({}, data === null || data === void 0 ? void 0 : data.edcrDetails)]
      });
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Bpa: [requestData]
      }, order)).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          var _data$applicationData46, _data$applicationData47;
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
          requestData["applicationType"] = data === null || data === void 0 ? void 0 : (_data$applicationData46 = data.applicationData) === null || _data$applicationData46 === void 0 ? void 0 : (_data$applicationData47 = _data$applicationData46.additionalDetails) === null || _data$applicationData47 === void 0 ? void 0 : _data$applicationData47.applicationType;
          return Promise.resolve(Digit.OBPSService.edcr_report_download({
            BPA: _extends({}, requestData)
          })).then(function (edcrResponse) {
            var responseStatus = parseInt(edcrResponse.status, 10);
            if (responseStatus === 201 || responseStatus === 200) {
              mode == "print" ? printPdf(new Blob([edcrResponse.data], {
                type: "application/pdf"
              })) : downloadPdf(new Blob([edcrResponse.data], {
                type: "application/pdf"
              }), "edcrReport.pdf");
            }
          });
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var getRecieptSearch = function getRecieptSearch(_ref4) {
    var tenantId = _ref4.tenantId,
      payments = _ref4.payments,
      params = _objectWithoutPropertiesLoose(_ref4, _excluded2$1);
    try {
      var response = {
        filestoreIds: [payments === null || payments === void 0 ? void 0 : payments.fileStoreId]
      };
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Payments: [_extends({}, payments)]
      }, "consolidatedreceipt")).then(function (_Digit$PaymentService) {
        response = _Digit$PaymentService;
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          var _response;
          window.open(fileStore[(_response = response) === null || _response === void 0 ? void 0 : _response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var _useParams = reactRouterDom.useParams(),
    id = _useParams.id;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateCode = Digit.ULBService.getStateId();
  var queryClient = reactQuery.useQueryClient();
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];
  var _useState2 = React.useState(false),
    isTocAccepted = _useState2[0],
    setIsTocAccepted = _useState2[1];
  var _useState3 = React.useState(false),
    displayMenu = _useState3[0],
    setDisplayMenu = _useState3[1];
  var _useState4 = React.useState(false),
    showModal = _useState4[0],
    setShowModal = _useState4[1];
  var _useState5 = React.useState(false),
    showTermsModal = _useState5[0],
    setShowTermsModal = _useState5[1];
  var _useState6 = React.useState(null),
    selectedAction = _useState6[0],
    setSelectedAction = _useState6[1];
  var _useState7 = React.useState(false),
    showOptions = _useState7[0],
    setShowOptions = _useState7[1];
  var _useState8 = React.useState(false),
    checkBoxVisible = _useState8[0],
    setCheckBoxVisible = _useState8[1];
  var _useState9 = React.useState(false),
    isEnableLoader = _useState9[0],
    setIsEnableLoader = _useState9[1];
  sessionStorage.removeItem("BPA_SUBMIT_APP");
  sessionStorage.setItem("isEDCRDisable", JSON.stringify(true));
  sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS", JSON.stringify(false));
  var history = reactRouterDom.useHistory();
  sessionStorage.setItem("bpaApplicationDetails", false);
  var isFromSendBack = false;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    stakeHolderDetails = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["DocTypeMapping"]),
    bpaDocsLoading = _Digit$Hooks$obps$use2.isLoading,
    bpaDocs = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useBPADetailsPage(tenantId, {
      applicationNo: id
    }),
    data = _Digit$Hooks$obps$use3.data,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useMDMS(tenantId.split(".")[0], "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use4.data;
  var mutation = Digit.Hooks.obps.useObpsAPI(data === null || data === void 0 ? void 0 : (_data$applicationData = data.applicationData) === null || _data$applicationData === void 0 ? void 0 : _data$applicationData.tenantId, false);
  var workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData2 = data.applicationData) === null || _data$applicationData2 === void 0 ? void 0 : _data$applicationData2.tenantId,
    id: id,
    moduleCode: "OBPS",
    config: {
      enabled: !!data
    }
  });
  React.useEffect(function () {
    if (!bpaDocsLoading && !isLoading) {
      var _bpaDocs$BPA;
      var filtredBpaDocs = [];
      if (bpaDocs !== null && bpaDocs !== void 0 && (_bpaDocs$BPA = bpaDocs.BPA) !== null && _bpaDocs$BPA !== void 0 && _bpaDocs$BPA.DocTypeMapping) {
        var _bpaDocs$BPA2, _bpaDocs$BPA2$DocType, _data$applicationDeta, _data$applicationDeta2, _data$applicationDeta3, _data$applicationDeta4, _data$applicationDeta5, _filtredBpaDocs, _filtredBpaDocs$, _filtredBpaDocs2, _filtredBpaDocs2$;
        filtredBpaDocs = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA2 = bpaDocs.BPA) === null || _bpaDocs$BPA2 === void 0 ? void 0 : (_bpaDocs$BPA2$DocType = _bpaDocs$BPA2.DocTypeMapping) === null || _bpaDocs$BPA2$DocType === void 0 ? void 0 : _bpaDocs$BPA2$DocType.filter(function (ob) {
          var _data$applicationData6, _data$applicationData7, _data$applicationData8, _data$applicationData9, _data$applicationData10;
          return ob.WFState == "INPROGRESS" && ob.RiskType == (data === null || data === void 0 ? void 0 : (_data$applicationData6 = data.applicationData) === null || _data$applicationData6 === void 0 ? void 0 : _data$applicationData6.riskType) && ob.ServiceType == (data === null || data === void 0 ? void 0 : (_data$applicationData7 = data.applicationData) === null || _data$applicationData7 === void 0 ? void 0 : (_data$applicationData8 = _data$applicationData7.additionalDetails) === null || _data$applicationData8 === void 0 ? void 0 : _data$applicationData8.serviceType) && ob.applicationType == (data === null || data === void 0 ? void 0 : (_data$applicationData9 = data.applicationData) === null || _data$applicationData9 === void 0 ? void 0 : (_data$applicationData10 = _data$applicationData9.additionalDetails) === null || _data$applicationData10 === void 0 ? void 0 : _data$applicationData10.applicationType);
        });
        var documents = data === null || data === void 0 ? void 0 : (_data$applicationDeta = data.applicationDetails) === null || _data$applicationDeta === void 0 ? void 0 : (_data$applicationDeta2 = _data$applicationDeta.filter(function (ob) {
          return ob.title === "BPA_DOCUMENT_DETAILS_LABEL";
        })[0]) === null || _data$applicationDeta2 === void 0 ? void 0 : (_data$applicationDeta3 = _data$applicationDeta2.additionalDetails) === null || _data$applicationDeta3 === void 0 ? void 0 : (_data$applicationDeta4 = _data$applicationDeta3.obpsDocuments) === null || _data$applicationDeta4 === void 0 ? void 0 : (_data$applicationDeta5 = _data$applicationDeta4[0]) === null || _data$applicationDeta5 === void 0 ? void 0 : _data$applicationDeta5.values;
        var RealignedDocument = [];
        filtredBpaDocs && ((_filtredBpaDocs = filtredBpaDocs) === null || _filtredBpaDocs === void 0 ? void 0 : (_filtredBpaDocs$ = _filtredBpaDocs[0]) === null || _filtredBpaDocs$ === void 0 ? void 0 : _filtredBpaDocs$.docTypes) && ((_filtredBpaDocs2 = filtredBpaDocs) === null || _filtredBpaDocs2 === void 0 ? void 0 : (_filtredBpaDocs2$ = _filtredBpaDocs2[0]) === null || _filtredBpaDocs2$ === void 0 ? void 0 : _filtredBpaDocs2$.docTypes.map(function (ob) {
          documents && documents.filter(function (x) {
            return ob.code === x.documentType.slice(0, x.documentType.lastIndexOf("."));
          }).map(function (doc) {
            RealignedDocument.push(doc);
          });
        }));
        var newApplicationDetails = data === null || data === void 0 ? void 0 : data.applicationDetails.map(function (obj) {
          if (obj.title === "BPA_DOCUMENT_DETAILS_LABEL") {
            return _extends({}, obj, {
              additionalDetails: {
                obpsDocuments: [{
                  title: "",
                  values: RealignedDocument
                }]
              }
            });
          }
          return obj;
        });
        data.applicationDetails = [].concat(newApplicationDetails);
      }
    }
  }, [bpaDocs, data]);
  React.useEffect(function () {
    var _data$applicationData11, _data$applicationData12;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData11 = data.applicationData) === null || _data$applicationData11 === void 0 ? void 0 : _data$applicationData11.status) == "CITIZEN_APPROVAL_INPROCESS" || (data === null || data === void 0 ? void 0 : (_data$applicationData12 = data.applicationData) === null || _data$applicationData12 === void 0 ? void 0 : _data$applicationData12.status) == "INPROGRESS") setCheckBoxVisible(true);else setCheckBoxVisible(false);
  }, [data]);
  var getTranslatedValues = function getTranslatedValues(dataValue, isNotTranslated) {
    if (dataValue) {
      return !isNotTranslated ? t(dataValue) : dataValue;
    } else {
      return t("NA");
    }
  };
  React.useEffect(function () {
    switch (selectedAction) {
      case "APPROVE":
      case "SEND_TO_ARCHITECT":
      case "APPLY":
      case "SKIP_PAYMENT":
        setShowModal(true);
    }
  }, [selectedAction]);
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var downloadDiagram = function downloadDiagram(val) {
    location.href = val;
  };
  var closeModal = function closeModal() {
    setSelectedAction(null);
    setShowModal(false);
  };
  var closeTermsModal = function closeTermsModal() {
    setShowTermsModal(false);
  };
  function onActionSelect(action) {
    var _data$applicationData13;
    var path = (data === null || data === void 0 ? void 0 : (_data$applicationData13 = data.applicationData) === null || _data$applicationData13 === void 0 ? void 0 : _data$applicationData13.businessService) == "BPA_OC" ? "ocbpa" : "bpa";
    if (action === "FORWARD") {
      var _data$applicationData14, _data$applicationData15;
      history.replace("/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/" + (data === null || data === void 0 ? void 0 : (_data$applicationData14 = data.applicationData) === null || _data$applicationData14 === void 0 ? void 0 : _data$applicationData14.tenantId) + "/" + (data === null || data === void 0 ? void 0 : (_data$applicationData15 = data.applicationData) === null || _data$applicationData15 === void 0 ? void 0 : _data$applicationData15.applicationNo) + "/check", {
        data: data === null || data === void 0 ? void 0 : data.applicationData,
        edcrDetails: data === null || data === void 0 ? void 0 : data.edcrDetails
      });
    }
    if (action === "PAY") {
      window.location.assign(window.location.origin + "/digit-ui/citizen/payment/collect/" + (getBusinessServices(data === null || data === void 0 ? void 0 : data.businessService, data === null || data === void 0 ? void 0 : data.applicationStatus) + "/" + id + "/" + (data === null || data === void 0 ? void 0 : data.tenantId) + "?tenantId=" + (data === null || data === void 0 ? void 0 : data.tenantId)));
    }
    if (action === "SEND_TO_CITIZEN") {
      var _workflowDetails, _workflowDetails$data, _workflowDetails$data2;
      if (((_workflowDetails = workflowDetails) === null || _workflowDetails === void 0 ? void 0 : (_workflowDetails$data = _workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.processInstances) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.length) > 2) {
        var _data$applicationData16, _data$applicationData17;
        window.location.replace("/digit-ui/citizen/obps/editApplication/" + path + "/" + (data === null || data === void 0 ? void 0 : (_data$applicationData16 = data.applicationData) === null || _data$applicationData16 === void 0 ? void 0 : _data$applicationData16.tenantId) + "/" + (data === null || data === void 0 ? void 0 : (_data$applicationData17 = data.applicationData) === null || _data$applicationData17 === void 0 ? void 0 : _data$applicationData17.applicationNo));
      } else {
        getBPAFormData(data === null || data === void 0 ? void 0 : data.applicationData, mdmsData, history, t);
      }
    }
    setSelectedAction(action);
    setDisplayMenu(false);
  }
  function checkForSubmitDisable() {
    if (checkBoxVisible) return isFromSendBack ? !isFromSendBack : !isTocAccepted;else return false;
  }
  var submitAction = function submitAction(workflow) {
    setIsEnableLoader(true);
    mutation.mutate({
      BPA: _extends({}, data === null || data === void 0 ? void 0 : data.applicationData, {
        workflow: workflow
      })
    }, {
      onError: function onError(error, variables) {
        var _error$response, _error$response$data, _error$response$data$, _error$response2, _error$response2$data, _error$response2$data2;
        setIsEnableLoader(false);
        setShowModal(false);
        setShowToast({
          key: "error",
          action: error !== null && error !== void 0 && (_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && (_error$response$data$ = _error$response$data.Errors[0]) !== null && _error$response$data$ !== void 0 && _error$response$data$.message ? error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.Errors[0]) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2.message : error
        });
        setTimeout(closeToast, 5000);
      },
      onSuccess: function onSuccess(data, variables) {
        setIsEnableLoader(false);
        history.replace("/digit-ui/citizen/obps/response", {
          data: data
        });
        setShowModal(false);
        setShowToast({
          key: "success",
          action: selectedAction
        });
        setTimeout(closeToast, 5000);
        queryClient.invalidateQueries("BPA_DETAILS_PAGE");
        queryClient.invalidateQueries("workFlowDetails");
      }
    });
  };
  if (((_workflowDetails2 = workflowDetails) === null || _workflowDetails2 === void 0 ? void 0 : (_workflowDetails2$dat = _workflowDetails2.data) === null || _workflowDetails2$dat === void 0 ? void 0 : (_workflowDetails2$dat2 = _workflowDetails2$dat.nextActions) === null || _workflowDetails2$dat2 === void 0 ? void 0 : _workflowDetails2$dat2.length) > 0 && (data === null || data === void 0 ? void 0 : (_data$applicationData18 = data.applicationData) === null || _data$applicationData18 === void 0 ? void 0 : _data$applicationData18.status) == "CITIZEN_APPROVAL_INPROCESS") {
    var _userInfo$info, _data$applicationData19, _data$applicationData20;
    var userInfo = Digit.UserService.getUser();
    var rolearray = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.roles;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData19 = data.applicationData) === null || _data$applicationData19 === void 0 ? void 0 : _data$applicationData19.status) == "CITIZEN_APPROVAL_INPROCESS") {
      var _rolearray$;
      if ((rolearray === null || rolearray === void 0 ? void 0 : rolearray.length) == 1 && (rolearray === null || rolearray === void 0 ? void 0 : (_rolearray$ = rolearray[0]) === null || _rolearray$ === void 0 ? void 0 : _rolearray$.code) == "CITIZEN") {
        var _workflowDetails3, _workflowDetails3$dat;
        workflowDetails.data.nextActions = (_workflowDetails3 = workflowDetails) === null || _workflowDetails3 === void 0 ? void 0 : (_workflowDetails3$dat = _workflowDetails3.data) === null || _workflowDetails3$dat === void 0 ? void 0 : _workflowDetails3$dat.nextActions;
      } else {
        workflowDetails.data.nextActions = [];
      }
    } else if ((data === null || data === void 0 ? void 0 : (_data$applicationData20 = data.applicationData) === null || _data$applicationData20 === void 0 ? void 0 : _data$applicationData20.status) == "INPROGRESS") {
      var _stakeHolderDetails$S, _stakeHolderDetails$S2;
      var isArchitect = false;
      stakeHolderDetails === null || stakeHolderDetails === void 0 ? void 0 : (_stakeHolderDetails$S = stakeHolderDetails.StakeholderRegistraition) === null || _stakeHolderDetails$S === void 0 ? void 0 : (_stakeHolderDetails$S2 = _stakeHolderDetails$S.TradeTypetoRoleMapping) === null || _stakeHolderDetails$S2 === void 0 ? void 0 : _stakeHolderDetails$S2.map(function (type) {
        var _type$role;
        type === null || type === void 0 ? void 0 : (_type$role = type.role) === null || _type$role === void 0 ? void 0 : _type$role.map(function (role) {
          roles.push(role);
        });
      });
      var uniqueRoles = roles.filter(function (item, i, ar) {
        return ar.indexOf(item) === i;
      });
      if ((rolearray === null || rolearray === void 0 ? void 0 : rolearray.length) > 1) {
        rolearray.forEach(function (role) {
          if (uniqueRoles.includes(role.code)) {
            isArchitect = true;
          }
        });
      }
      if (isArchitect) {
        var _workflowDetails4, _workflowDetails4$dat;
        workflowDetails.data.nextActions = (_workflowDetails4 = workflowDetails) === null || _workflowDetails4 === void 0 ? void 0 : (_workflowDetails4$dat = _workflowDetails4.data) === null || _workflowDetails4$dat === void 0 ? void 0 : _workflowDetails4$dat.nextActions;
      } else {
        workflowDetails.data.nextActions = [];
      }
    }
  }
  if (((_workflowDetails5 = workflowDetails) === null || _workflowDetails5 === void 0 ? void 0 : (_workflowDetails5$dat = _workflowDetails5.data) === null || _workflowDetails5$dat === void 0 ? void 0 : (_workflowDetails5$dat2 = _workflowDetails5$dat.processInstances) === null || _workflowDetails5$dat2 === void 0 ? void 0 : (_workflowDetails5$dat3 = _workflowDetails5$dat2[0]) === null || _workflowDetails5$dat3 === void 0 ? void 0 : _workflowDetails5$dat3.action) === "SEND_BACK_TO_CITIZEN") {
    var _userInfo$info2;
    if (isTocAccepted) setIsTocAccepted(true);
    isFromSendBack = true;
    var _userInfo = Digit.UserService.getUser();
    var _rolearray = _userInfo === null || _userInfo === void 0 ? void 0 : (_userInfo$info2 = _userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.roles;
    if ((_rolearray === null || _rolearray === void 0 ? void 0 : _rolearray.length) !== 1) {
      var _workflowDetails6, _workflowDetails7, _extends2;
      workflowDetails = _extends({}, workflowDetails, (_extends2 = {
        data: _extends({}, (_workflowDetails6 = workflowDetails) === null || _workflowDetails6 === void 0 ? void 0 : _workflowDetails6.data, {
          actionState: {
            nextActions: []
          }
        })
      }, _extends2["data"] = _extends({}, (_workflowDetails7 = workflowDetails) === null || _workflowDetails7 === void 0 ? void 0 : _workflowDetails7.data, {
        nextActions: []
      }), _extends2));
    }
  }
  if (isLoading || isEnableLoader) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  var dowloadOptions = [];
  if ((data === null || data === void 0 ? void 0 : (_data$collectionBillD = data.collectionBillDetails) === null || _data$collectionBillD === void 0 ? void 0 : _data$collectionBillD.length) > 0) {
    var bpaPayments = cloneDeep_1(data === null || data === void 0 ? void 0 : data.collectionBillDetails);
    bpaPayments.forEach(function (pay) {
      var _pay$paymentDetails$, _pay$paymentDetails$2, _pay$paymentDetails$3, _pay$paymentDetails$4, _pay$paymentDetails$5;
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$ = pay.paymentDetails[0]) === null || _pay$paymentDetails$ === void 0 ? void 0 : _pay$paymentDetails$.businessService) === "BPA.NC_OC_APP_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_APP_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData21, _data$applicationData22;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData21 = data.applicationData) === null || _data$applicationData21 === void 0 ? void 0 : _data$applicationData21.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData22 = data.applicationData) === null || _data$applicationData22 === void 0 ? void 0 : _data$applicationData22.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$2 = pay.paymentDetails[0]) === null || _pay$paymentDetails$2 === void 0 ? void 0 : _pay$paymentDetails$2.businessService) === "BPA.NC_OC_SAN_FEE") {
        dowloadOptions.push({
          order: 2,
          label: t("BPA_OC_DEV_PEN_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData23, _data$applicationData24;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData23 = data.applicationData) === null || _data$applicationData23 === void 0 ? void 0 : _data$applicationData23.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData24 = data.applicationData) === null || _data$applicationData24 === void 0 ? void 0 : _data$applicationData24.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$3 = pay.paymentDetails[0]) === null || _pay$paymentDetails$3 === void 0 ? void 0 : _pay$paymentDetails$3.businessService) === "BPA.LOW_RISK_PERMIT_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData25, _data$applicationData26;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData25 = data.applicationData) === null || _data$applicationData25 === void 0 ? void 0 : _data$applicationData25.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData26 = data.applicationData) === null || _data$applicationData26 === void 0 ? void 0 : _data$applicationData26.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$4 = pay.paymentDetails[0]) === null || _pay$paymentDetails$4 === void 0 ? void 0 : _pay$paymentDetails$4.businessService) === "BPA.NC_APP_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_APP_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData27, _data$applicationData28;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData27 = data.applicationData) === null || _data$applicationData27 === void 0 ? void 0 : _data$applicationData27.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData28 = data.applicationData) === null || _data$applicationData28 === void 0 ? void 0 : _data$applicationData28.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$5 = pay.paymentDetails[0]) === null || _pay$paymentDetails$5 === void 0 ? void 0 : _pay$paymentDetails$5.businessService) === "BPA.NC_SAN_FEE") {
        dowloadOptions.push({
          order: 2,
          label: t("BPA_SAN_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData29, _data$applicationData30;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData29 = data.applicationData) === null || _data$applicationData29 === void 0 ? void 0 : _data$applicationData29.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData30 = data.applicationData) === null || _data$applicationData30 === void 0 ? void 0 : _data$applicationData30.applicationNo
            });
          }
        });
      }
    });
  }
  if (data && (data === null || data === void 0 ? void 0 : (_data$applicationData31 = data.applicationData) === null || _data$applicationData31 === void 0 ? void 0 : _data$applicationData31.businessService) === "BPA_LOW" && (data === null || data === void 0 ? void 0 : (_data$collectionBillD2 = data.collectionBillDetails) === null || _data$collectionBillD2 === void 0 ? void 0 : _data$collectionBillD2.length) > 0) {
    var _data$applicationData32, _data$applicationData34;
    !(data !== null && data !== void 0 && (_data$applicationData32 = data.applicationData) !== null && _data$applicationData32 !== void 0 && _data$applicationData32.status.includes("REVOCATION")) && dowloadOptions.push({
      order: 3,
      label: t("BPA_PERMIT_ORDER"),
      onClick: function onClick() {
        var _data$applicationData33;
        return getPermitOccupancyOrderSearch({
          tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData33 = data.applicationData) === null || _data$applicationData33 === void 0 ? void 0 : _data$applicationData33.tenantId
        }, "buildingpermit-low");
      }
    });
    (data === null || data === void 0 ? void 0 : (_data$applicationData34 = data.applicationData) === null || _data$applicationData34 === void 0 ? void 0 : _data$applicationData34.status.includes("REVOCATION")) && dowloadOptions.push({
      order: 3,
      label: t("BPA_REVOCATION_PDF_LABEL"),
      onClick: function onClick() {
        var _data$applicationData35;
        return getRevocationPDFSearch({
          tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData35 = data.applicationData) === null || _data$applicationData35 === void 0 ? void 0 : _data$applicationData35.tenantId
        });
      }
    });
  } else if (data && (data === null || data === void 0 ? void 0 : (_data$applicationData36 = data.applicationData) === null || _data$applicationData36 === void 0 ? void 0 : _data$applicationData36.businessService) === "BPA" && (data === null || data === void 0 ? void 0 : (_data$collectionBillD3 = data.collectionBillDetails) === null || _data$collectionBillD3 === void 0 ? void 0 : _data$collectionBillD3.length) > 0) {
    var _data$applicationData37;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData37 = data.applicationData) === null || _data$applicationData37 === void 0 ? void 0 : _data$applicationData37.status) === "APPROVED") {
      dowloadOptions.push({
        order: 3,
        label: t("BPA_PERMIT_ORDER"),
        onClick: function onClick() {
          var _data$applicationData38;
          return getPermitOccupancyOrderSearch({
            tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData38 = data.applicationData) === null || _data$applicationData38 === void 0 ? void 0 : _data$applicationData38.tenantId
          }, "buildingpermit");
        }
      });
    }
  } else {
    var _data$applicationData39;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData39 = data.applicationData) === null || _data$applicationData39 === void 0 ? void 0 : _data$applicationData39.status) === "APPROVED") {
      dowloadOptions.push({
        order: 3,
        label: t("BPA_OC_CERTIFICATE"),
        onClick: function onClick() {
          var _data$applicationData40;
          return getPermitOccupancyOrderSearch({
            tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData40 = data.applicationData) === null || _data$applicationData40 === void 0 ? void 0 : _data$applicationData40.tenantId
          }, "occupancy-certificate");
        }
      });
    }
  }
  if (data !== null && data !== void 0 && data.comparisionReport) {
    dowloadOptions.push({
      order: 4,
      label: t("BPA_COMPARISON_REPORT_LABEL"),
      onClick: function onClick() {
        var _data$comparisionRepo;
        return window.open(data === null || data === void 0 ? void 0 : (_data$comparisionRepo = data.comparisionReport) === null || _data$comparisionRepo === void 0 ? void 0 : _data$comparisionRepo.comparisonReport, "_blank");
      }
    });
  }
  dowloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  if (((_workflowDetails8 = workflowDetails) === null || _workflowDetails8 === void 0 ? void 0 : (_workflowDetails8$dat = _workflowDetails8.data) === null || _workflowDetails8$dat === void 0 ? void 0 : (_workflowDetails8$dat2 = _workflowDetails8$dat.nextActions) === null || _workflowDetails8$dat2 === void 0 ? void 0 : _workflowDetails8$dat2.length) > 0) {
    var _workflowDetails9, _workflowDetails9$dat, _workflowDetails9$dat2, _workflowDetails10, _workflowDetails10$da, _workflowDetails10$da2, _workflowDetails11, _workflowDetails11$da, _workflowDetails11$da2;
    workflowDetails.data.nextActions = (_workflowDetails9 = workflowDetails) === null || _workflowDetails9 === void 0 ? void 0 : (_workflowDetails9$dat = _workflowDetails9.data) === null || _workflowDetails9$dat === void 0 ? void 0 : (_workflowDetails9$dat2 = _workflowDetails9$dat.nextActions) === null || _workflowDetails9$dat2 === void 0 ? void 0 : _workflowDetails9$dat2.filter(function (actn) {
      return actn.action !== "INITIATE";
    });
    workflowDetails.data.nextActions = (_workflowDetails10 = workflowDetails) === null || _workflowDetails10 === void 0 ? void 0 : (_workflowDetails10$da = _workflowDetails10.data) === null || _workflowDetails10$da === void 0 ? void 0 : (_workflowDetails10$da2 = _workflowDetails10$da.nextActions) === null || _workflowDetails10$da2 === void 0 ? void 0 : _workflowDetails10$da2.filter(function (actn) {
      return actn.action !== "ADHOC";
    });
    workflowDetails.data.nextActions = (_workflowDetails11 = workflowDetails) === null || _workflowDetails11 === void 0 ? void 0 : (_workflowDetails11$da = _workflowDetails11.data) === null || _workflowDetails11$da === void 0 ? void 0 : (_workflowDetails11$da2 = _workflowDetails11$da.nextActions) === null || _workflowDetails11$da2 === void 0 ? void 0 : _workflowDetails11$da2.filter(function (actn) {
      return actn.action !== "SKIP_PAYMENT";
    });
  }
  if ((data === null || data === void 0 ? void 0 : (_data$applicationDeta6 = data.applicationDetails) === null || _data$applicationDeta6 === void 0 ? void 0 : _data$applicationDeta6.length) > 0) {
    var _data$applicationDeta7, _data$applicationDeta8;
    data.applicationDetails = (data === null || data === void 0 ? void 0 : (_data$applicationDeta7 = data.applicationDetails) === null || _data$applicationDeta7 === void 0 ? void 0 : _data$applicationDeta7.length) > 0 && (data === null || data === void 0 ? void 0 : (_data$applicationDeta8 = data.applicationDetails) === null || _data$applicationDeta8 === void 0 ? void 0 : _data$applicationDeta8.filter(function (bpaData) {
      return Object.keys(bpaData).length !== 0;
    }));
  }
  var getCheckBoxLable = function getCheckBoxLable() {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", null, t("BPA_I_AGREE_THE_LABEL") + " "), /*#__PURE__*/React__default.createElement("span", {
      style: {
        color: "#F47738",
        cursor: "pointer"
      },
      onClick: function onClick() {
        return setShowTermsModal(!showTermsModal);
      }
    }, t("BPA_TERMS_AND_CONDITIONS_LABEL")));
  };
  var results = data === null || data === void 0 ? void 0 : (_data$applicationDeta9 = data.applicationDetails) === null || _data$applicationDeta9 === void 0 ? void 0 : _data$applicationDeta9.filter(function (element) {
    if (Object.keys(element).length !== 0) {
      return true;
    }
    return false;
  });
  if ((results === null || results === void 0 ? void 0 : results.length) > 0) {
    data.applicationDetails = results;
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "cardHeaderWithOptions",
    style: {
      marginRight: "auto",
      maxWidth: "960px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("CS_TITLE_APPLICATION_DETAILS")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper",
    onHeadClick: function onHeadClick() {
      return setShowOptions(!showOptions);
    },
    displayOptions: showOptions,
    options: dowloadOptions
  })), data === null || data === void 0 ? void 0 : (_data$applicationDeta10 = data.applicationDetails) === null || _data$applicationDeta10 === void 0 ? void 0 : _data$applicationDeta10.filter(function (ob) {
    return Object.keys(ob).length > 0;
  }).map(function (detail, index, arr) {
    var _detail$additionalDet, _detail$values, _detail$values2, _detail$additionalDet2, _detail$additionalDet3, _detail$additionalDet4, _detail$additionalDet5, _detail$additionalDet6, _detail$additionalDet7, _detail$additionalDet8, _detail$additionalDet9, _detail$additionalDet10, _detail$additionalDet11, _detail$additionalDet12, _detail$additionalDet17, _detail$additionalDet18, _detail$additionalDet19, _detail$additionalDet20, _detail$additionalDet21, _detail$additionalDet22, _data$applicationData41, _data$applicationData42, _data$applicationData43, _data$applicationData44, _data$applicationData45, _detail$additionalDet23, _detail$additionalDet24, _detail$additionalDet25, _detail$additionalDet28, _detail$additionalDet29, _detail$additionalDet30, _detail$additionalDet31, _detail$additionalDet32, _workflowDetails12, _workflowDetails13, _workflowDetails13$da, _workflowDetails13$da2, _workflowDetails14, _workflowDetails15, _workflowDetails15$da, _workflowDetails15$da2, _workflowDetails16, _workflowDetails16$da, _workflowDetails17, _workflowDetails17$da, _workflowDetails18, _workflowDetails19, _workflowDetails19$da, _workflowDetails19$da2, _workflowDetails20, _workflowDetails20$da, _workflowDetails20$da2, _workflowDetails20$da3, _workflowDetails21, _workflowDetails21$da, _workflowDetails21$da2, _workflowDetails21$da3, _workflowDetails22, _workflowDetails22$da, _workflowDetails22$da2, _workflowDetails22$da3;
    return /*#__PURE__*/React__default.createElement("div", null, !(detail !== null && detail !== void 0 && detail.isNotAllowed) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
      key: index,
      style: !(detail !== null && detail !== void 0 && (_detail$additionalDet = detail.additionalDetails) !== null && _detail$additionalDet !== void 0 && _detail$additionalDet.fiReport) && (detail === null || detail === void 0 ? void 0 : detail.title) === "" ? {
        marginTop: "-30px"
      } : {}
    }, !(detail !== null && detail !== void 0 && detail.isTitleVisible) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        fontSize: "24px"
      }
    }, t(detail === null || detail === void 0 ? void 0 : detail.title)) : null, /*#__PURE__*/React__default.createElement("div", {
      style: detail !== null && detail !== void 0 && detail.isBackGroundColor ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "950px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, detail !== null && detail !== void 0 && detail.isCommon && (detail === null || detail === void 0 ? void 0 : (_detail$values = detail.values) === null || _detail$values === void 0 ? void 0 : _detail$values.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$values2 = detail.values) === null || _detail$values2 === void 0 ? void 0 : _detail$values2.map(function (value) {
      if (value !== null && value !== void 0 && value.isUnit) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(value === null || value === void 0 ? void 0 : value.title),
        text: value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("CS_NA")
      });
      if (value !== null && value !== void 0 && value.isLink) return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(value === null || value === void 0 ? void 0 : value.title),
        text: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
          to: value === null || value === void 0 ? void 0 : value.to
        }, /*#__PURE__*/React__default.createElement("span", {
          className: "link",
          style: {
            color: "#F47738"
          }
        }, value === null || value === void 0 ? void 0 : value.value)))
      });else return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(value === null || value === void 0 ? void 0 : value.title),
        text: getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) || t("CS_NA")
      });
    }) : null, !(detail !== null && detail !== void 0 && detail.isFeeDetails) && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet2 = detail.additionalDetails) === null || _detail$additionalDet2 === void 0 ? void 0 : (_detail$additionalDet3 = _detail$additionalDet2.values) === null || _detail$additionalDet3 === void 0 ? void 0 : _detail$additionalDet3.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$additionalDet4 = detail.additionalDetails) === null || _detail$additionalDet4 === void 0 ? void 0 : (_detail$additionalDet5 = _detail$additionalDet4.values) === null || _detail$additionalDet5 === void 0 ? void 0 : _detail$additionalDet5.map(function (value) {
      return /*#__PURE__*/React__default.createElement("div", null, !(detail !== null && detail !== void 0 && detail.isTitleRepeat) && !(value !== null && value !== void 0 && value.isHeader) && !(value !== null && value !== void 0 && value.isUnit) ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(value === null || value === void 0 ? void 0 : value.title),
        textStyle: (value === null || value === void 0 ? void 0 : value.value) === "Paid" ? {
          color: "darkgreen"
        } : (value === null || value === void 0 ? void 0 : value.value) === "Unpaid" ? {
          color: "red"
        } : {},
        text: value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) : t("CS_NA")
      }) : null, !(detail !== null && detail !== void 0 && detail.isTitleRepeat) && value !== null && value !== void 0 && value.isUnit ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(value === null || value === void 0 ? void 0 : value.title),
        text: value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("CS_NA")
      }) : null, !(detail !== null && detail !== void 0 && detail.isTitleRepeat) && value !== null && value !== void 0 && value.isHeader ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
        style: {
          fontSize: "20px"
        }
      }, t(value === null || value === void 0 ? void 0 : value.title)) : null);
    }) : null, detail !== null && detail !== void 0 && detail.isSubOccupancyTable && detail !== null && detail !== void 0 && (_detail$additionalDet6 = detail.additionalDetails) !== null && _detail$additionalDet6 !== void 0 && _detail$additionalDet6.subOccupancyTableDetails ? /*#__PURE__*/React__default.createElement(SubOccupancyTable, {
      edcrDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      applicationData: data === null || data === void 0 ? void 0 : data.applicationData
    }) : null, detail !== null && detail !== void 0 && detail.isScrutinyDetails && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet7 = detail.additionalDetails) === null || _detail$additionalDet7 === void 0 ? void 0 : (_detail$additionalDet8 = _detail$additionalDet7.scruntinyDetails) === null || _detail$additionalDet8 === void 0 ? void 0 : _detail$additionalDet8.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$additionalDet9 = detail.additionalDetails) === null || _detail$additionalDet9 === void 0 ? void 0 : _detail$additionalDet9.scruntinyDetails.map(function (scrutiny) {
      var _ref;
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t(scrutiny === null || scrutiny === void 0 ? void 0 : scrutiny.title)
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
        onClick: function onClick() {
          return downloadDiagram(scrutiny === null || scrutiny === void 0 ? void 0 : scrutiny.value);
        },
        label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null)
      }), /*#__PURE__*/React__default.createElement("p", {
        style: (_ref = {
          marginTop: "8px",
          marginBottom: "20px",
          fontWeight: "bold",
          fontSize: "16px",
          lineHeight: "19px",
          color: "#505A5F"
        }, _ref["fontWeight"] = "400", _ref)
      }, t(scrutiny === null || scrutiny === void 0 ? void 0 : scrutiny.text)));
    }) : null, detail !== null && detail !== void 0 && detail.isOwnerDetails && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet10 = detail.additionalDetails) === null || _detail$additionalDet10 === void 0 ? void 0 : (_detail$additionalDet11 = _detail$additionalDet10.owners) === null || _detail$additionalDet11 === void 0 ? void 0 : _detail$additionalDet11.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$additionalDet12 = detail.additionalDetails) === null || _detail$additionalDet12 === void 0 ? void 0 : _detail$additionalDet12.owners.map(function (owner, index) {
      var _detail$additionalDet13, _detail$additionalDet14, _detail$additionalDet15, _detail$additionalDet16;
      return /*#__PURE__*/React__default.createElement("div", {
        key: index,
        style: (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet13 = detail.additionalDetails) === null || _detail$additionalDet13 === void 0 ? void 0 : (_detail$additionalDet14 = _detail$additionalDet13.owners) === null || _detail$additionalDet14 === void 0 ? void 0 : _detail$additionalDet14.length) > 1 ? {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "950px",
          minWidth: "280px"
        } : {}
      }, (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet15 = detail.additionalDetails) === null || _detail$additionalDet15 === void 0 ? void 0 : (_detail$additionalDet16 = _detail$additionalDet15.owners) === null || _detail$additionalDet16 === void 0 ? void 0 : _detail$additionalDet16.length) > 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("Owner") + " - " + (index + 1)
      }) : null, owner === null || owner === void 0 ? void 0 : owner.values.map(function (value) {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          className: "border-none",
          label: t(value === null || value === void 0 ? void 0 : value.title),
          text: getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) || t("CS_NA")
        });
      }));
    }) : null, (detail === null || detail === void 0 ? void 0 : detail.isDocumentDetails) && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet17 = detail.additionalDetails) === null || _detail$additionalDet17 === void 0 ? void 0 : (_detail$additionalDet18 = _detail$additionalDet17.obpsDocuments) === null || _detail$additionalDet18 === void 0 ? void 0 : (_detail$additionalDet19 = _detail$additionalDet18[0]) === null || _detail$additionalDet19 === void 0 ? void 0 : _detail$additionalDet19.values) && /*#__PURE__*/React__default.createElement("div", {
      style: {
        marginTop: "-8px"
      }
    }, /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getOrderDocuments(detail === null || detail === void 0 ? void 0 : (_detail$additionalDet20 = detail.additionalDetails) === null || _detail$additionalDet20 === void 0 ? void 0 : (_detail$additionalDet21 = _detail$additionalDet20.obpsDocuments) === null || _detail$additionalDet21 === void 0 ? void 0 : (_detail$additionalDet22 = _detail$additionalDet21[0]) === null || _detail$additionalDet22 === void 0 ? void 0 : _detail$additionalDet22.values),
      svgStyles: {},
      isSendBackFlow: false,
      isHrLine: true,
      titleStyles: {
        fontSize: "20px",
        lineHeight: "24px",
        "fontWeight": 700,
        marginBottom: "10px"
      }
    })), detail !== null && detail !== void 0 && detail.isFieldInspection && (data === null || data === void 0 ? void 0 : (_data$applicationData41 = data.applicationData) === null || _data$applicationData41 === void 0 ? void 0 : (_data$applicationData42 = _data$applicationData41.additionalDetails) === null || _data$applicationData42 === void 0 ? void 0 : (_data$applicationData43 = _data$applicationData42.fieldinspection_pending) === null || _data$applicationData43 === void 0 ? void 0 : _data$applicationData43.length) > 0 ? /*#__PURE__*/React__default.createElement(InspectionReport, {
      isCitizen: true,
      fiReport: data === null || data === void 0 ? void 0 : (_data$applicationData44 = data.applicationData) === null || _data$applicationData44 === void 0 ? void 0 : (_data$applicationData45 = _data$applicationData44.additionalDetails) === null || _data$applicationData45 === void 0 ? void 0 : _data$applicationData45.fieldinspection_pending
    }) : null, (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet23 = detail.additionalDetails) === null || _detail$additionalDet23 === void 0 ? void 0 : (_detail$additionalDet24 = _detail$additionalDet23.noc) === null || _detail$additionalDet24 === void 0 ? void 0 : _detail$additionalDet24.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$additionalDet25 = detail.additionalDetails) === null || _detail$additionalDet25 === void 0 ? void 0 : _detail$additionalDet25.noc.map(function (nocob, ind) {
      var _detail$additionalDet26, _detail$additionalDet27, _detail$values3, _detail$values3$, _detail$values4, _detail$values4$, _detail$values5, _detail$values5$, _detail$values6, _detail$values6$, _detail$values7, _detail$values7$, _detail$values8, _detail$values8$, _detail$values9, _detail$values9$, _detail$values10, _detail$values10$, _detail$values11, _detail$values11$, _detail$values12, _detail$values12$, _detail$values13, _detail$values13$, _detail$values14, _detail$values14$, _detail$values15, _detail$values15$, _detail$values16, _detail$values16$, _detail$values17, _detail$values17$, _detail$values18, _detail$values18$, _detail$values19, _detail$values19$, _detail$values20, _detail$values20$, _detail$values21, _detail$values21$, _detail$values22, _detail$values22$;
      return /*#__PURE__*/React__default.createElement("div", {
        key: ind,
        style: {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "960px",
          minWidth: "280px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + ("BPA_" + (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet26 = detail.additionalDetails) === null || _detail$additionalDet26 === void 0 ? void 0 : (_detail$additionalDet27 = _detail$additionalDet26.data) === null || _detail$additionalDet27 === void 0 ? void 0 : _detail$additionalDet27.nocType) + "_HEADER")),
        labelStyle: {
          fontSize: "20px"
        }
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (detail === null || detail === void 0 ? void 0 : (_detail$values3 = detail.values) === null || _detail$values3 === void 0 ? void 0 : (_detail$values3$ = _detail$values3[0]) === null || _detail$values3$ === void 0 ? void 0 : _detail$values3$.title)),
        textStyle: {
          marginLeft: "10px"
        },
        text: getTranslatedValues(detail === null || detail === void 0 ? void 0 : (_detail$values4 = detail.values) === null || _detail$values4 === void 0 ? void 0 : (_detail$values4$ = _detail$values4[0]) === null || _detail$values4$ === void 0 ? void 0 : _detail$values4$.value, detail === null || detail === void 0 ? void 0 : (_detail$values5 = detail.values) === null || _detail$values5 === void 0 ? void 0 : (_detail$values5$ = _detail$values5[0]) === null || _detail$values5$ === void 0 ? void 0 : _detail$values5$.isNotTranslated)
      }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (detail === null || detail === void 0 ? void 0 : (_detail$values6 = detail.values) === null || _detail$values6 === void 0 ? void 0 : (_detail$values6$ = _detail$values6[1]) === null || _detail$values6$ === void 0 ? void 0 : _detail$values6$.title)),
        textStyle: (detail === null || detail === void 0 ? void 0 : (_detail$values7 = detail.values) === null || _detail$values7 === void 0 ? void 0 : (_detail$values7$ = _detail$values7[1]) === null || _detail$values7$ === void 0 ? void 0 : _detail$values7$.value) == "APPROVED" || (detail === null || detail === void 0 ? void 0 : (_detail$values8 = detail.values) === null || _detail$values8 === void 0 ? void 0 : (_detail$values8$ = _detail$values8[1]) === null || _detail$values8$ === void 0 ? void 0 : _detail$values8$.value) == "AUTO_APPROVED" ? {
          marginLeft: "10px",
          color: "#00703C"
        } : {
          marginLeft: "10px",
          color: "#D4351C"
        },
        text: getTranslatedValues(detail === null || detail === void 0 ? void 0 : (_detail$values9 = detail.values) === null || _detail$values9 === void 0 ? void 0 : (_detail$values9$ = _detail$values9[1]) === null || _detail$values9$ === void 0 ? void 0 : _detail$values9$.value, detail === null || detail === void 0 ? void 0 : (_detail$values10 = detail.values) === null || _detail$values10 === void 0 ? void 0 : (_detail$values10$ = _detail$values10[1]) === null || _detail$values10$ === void 0 ? void 0 : _detail$values10$.isNotTranslated)
      }), detail !== null && detail !== void 0 && (_detail$values11 = detail.values) !== null && _detail$values11 !== void 0 && (_detail$values11$ = _detail$values11[2]) !== null && _detail$values11$ !== void 0 && _detail$values11$.value ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (detail === null || detail === void 0 ? void 0 : (_detail$values12 = detail.values) === null || _detail$values12 === void 0 ? void 0 : (_detail$values12$ = _detail$values12[2]) === null || _detail$values12$ === void 0 ? void 0 : _detail$values12$.title)),
        textStyle: {
          marginLeft: "10px"
        },
        text: getTranslatedValues(detail === null || detail === void 0 ? void 0 : (_detail$values13 = detail.values) === null || _detail$values13 === void 0 ? void 0 : (_detail$values13$ = _detail$values13[2]) === null || _detail$values13$ === void 0 ? void 0 : _detail$values13$.value, detail === null || detail === void 0 ? void 0 : (_detail$values14 = detail.values) === null || _detail$values14 === void 0 ? void 0 : (_detail$values14$ = _detail$values14[2]) === null || _detail$values14$ === void 0 ? void 0 : _detail$values14$.isNotTranslated)
      }) : null, detail !== null && detail !== void 0 && (_detail$values15 = detail.values) !== null && _detail$values15 !== void 0 && (_detail$values15$ = _detail$values15[3]) !== null && _detail$values15$ !== void 0 && _detail$values15$.value ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (detail === null || detail === void 0 ? void 0 : (_detail$values16 = detail.values) === null || _detail$values16 === void 0 ? void 0 : (_detail$values16$ = _detail$values16[3]) === null || _detail$values16$ === void 0 ? void 0 : _detail$values16$.title)),
        textStyle: {
          marginLeft: "10px"
        },
        text: getTranslatedValues(detail === null || detail === void 0 ? void 0 : (_detail$values17 = detail.values) === null || _detail$values17 === void 0 ? void 0 : (_detail$values17$ = _detail$values17[3]) === null || _detail$values17$ === void 0 ? void 0 : _detail$values17$.value, detail === null || detail === void 0 ? void 0 : (_detail$values18 = detail.values) === null || _detail$values18 === void 0 ? void 0 : (_detail$values18$ = _detail$values18[3]) === null || _detail$values18$ === void 0 ? void 0 : _detail$values18$.isNotTranslated)
      }) : null, detail !== null && detail !== void 0 && (_detail$values19 = detail.values) !== null && _detail$values19 !== void 0 && (_detail$values19$ = _detail$values19[3]) !== null && _detail$values19$ !== void 0 && _detail$values19$.value ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (detail === null || detail === void 0 ? void 0 : (_detail$values20 = detail.values) === null || _detail$values20 === void 0 ? void 0 : (_detail$values20$ = _detail$values20[4]) === null || _detail$values20$ === void 0 ? void 0 : _detail$values20$.title)),
        textStyle: {
          marginLeft: "10px"
        },
        text: getTranslatedValues(detail === null || detail === void 0 ? void 0 : (_detail$values21 = detail.values) === null || _detail$values21 === void 0 ? void 0 : (_detail$values21$ = _detail$values21[4]) === null || _detail$values21$ === void 0 ? void 0 : _detail$values21$.value, detail === null || detail === void 0 ? void 0 : (_detail$values22 = detail.values) === null || _detail$values22 === void 0 ? void 0 : (_detail$values22$ = _detail$values22[4]) === null || _detail$values22$ === void 0 ? void 0 : _detail$values22$.isNotTranslated)
      }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        className: "border-none",
        label: t("" + (nocob === null || nocob === void 0 ? void 0 : nocob.title))
      })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, nocob !== null && nocob !== void 0 && nocob.values ? /*#__PURE__*/React__default.createElement(DocumentsPreview, {
        documents: getOrderDocuments(nocob === null || nocob === void 0 ? void 0 : nocob.values, true),
        svgStyles: {},
        isSendBackFlow: false,
        isHrLine: true,
        titleStyles: {
          fontSize: "18px",
          lineHeight: "24px",
          "fontWeight": 700,
          marginBottom: "10px"
        }
      }) : /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("BPA_NO_DOCUMENTS_UPLOADED_LABEL")))));
    }) : null, !(detail !== null && detail !== void 0 && detail.isTitleVisible) && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet28 = detail.additionalDetails) === null || _detail$additionalDet28 === void 0 ? void 0 : (_detail$additionalDet29 = _detail$additionalDet28.permit) === null || _detail$additionalDet29 === void 0 ? void 0 : _detail$additionalDet29.length) > 0 ? detail === null || detail === void 0 ? void 0 : (_detail$additionalDet30 = detail.additionalDetails) === null || _detail$additionalDet30 === void 0 ? void 0 : (_detail$additionalDet31 = _detail$additionalDet30.permit) === null || _detail$additionalDet31 === void 0 ? void 0 : _detail$additionalDet31.map(function (value) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, value === null || value === void 0 ? void 0 : value.title);
    }) : null, (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet32 = detail.additionalDetails) === null || _detail$additionalDet32 === void 0 ? void 0 : _detail$additionalDet32.inspectionReport) && (detail === null || detail === void 0 ? void 0 : detail.isFeeDetails) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      paymentsList: []
    })))) : null, index === arr.length - 1 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(BPAApplicationTimeline, {
      application: data === null || data === void 0 ? void 0 : data.applicationData,
      id: id
    }), !((_workflowDetails12 = workflowDetails) !== null && _workflowDetails12 !== void 0 && _workflowDetails12.isLoading) && ((_workflowDetails13 = workflowDetails) === null || _workflowDetails13 === void 0 ? void 0 : (_workflowDetails13$da = _workflowDetails13.data) === null || _workflowDetails13$da === void 0 ? void 0 : (_workflowDetails13$da2 = _workflowDetails13$da.nextActions) === null || _workflowDetails13$da2 === void 0 ? void 0 : _workflowDetails13$da2.length) > 0 && !isFromSendBack && checkBoxVisible && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
      styles: {
        margin: "20px 0 40px",
        paddingTop: "10px"
      },
      checked: isTocAccepted,
      label: getCheckBoxLable()
      ,
      onChange: function onChange() {
        setIsTocAccepted(!isTocAccepted);
        isTocAccepted ? setDisplayMenu(!isTocAccepted) : "";
      }
    }), !((_workflowDetails14 = workflowDetails) !== null && _workflowDetails14 !== void 0 && _workflowDetails14.isLoading) && ((_workflowDetails15 = workflowDetails) === null || _workflowDetails15 === void 0 ? void 0 : (_workflowDetails15$da = _workflowDetails15.data) === null || _workflowDetails15$da === void 0 ? void 0 : (_workflowDetails15$da2 = _workflowDetails15$da.nextActions) === null || _workflowDetails15$da2 === void 0 ? void 0 : _workflowDetails15$da2.length) > 1 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
      style: {
        position: "relative",
        boxShadow: "none",
        minWidth: "240px",
        maxWidth: "310px",
        padding: "0px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        width: "100%"
      }
    }, displayMenu && (_workflowDetails16 = workflowDetails) !== null && _workflowDetails16 !== void 0 && (_workflowDetails16$da = _workflowDetails16.data) !== null && _workflowDetails16$da !== void 0 && _workflowDetails16$da.nextActions ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Menu, {
      style: {
        bottom: "37px",
        minWidth: "240px",
        maxWidth: "310px",
        width: "100%",
        right: "0px"
      },
      localeKeyPrefix: "WF_BPA",
      options: (_workflowDetails17 = workflowDetails) === null || _workflowDetails17 === void 0 ? void 0 : (_workflowDetails17$da = _workflowDetails17.data) === null || _workflowDetails17$da === void 0 ? void 0 : _workflowDetails17$da.nextActions.map(function (action) {
        return action.action;
      }),
      t: t,
      onSelect: onActionSelect
    }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      style: {
        width: "100%"
      },
      disabled: checkForSubmitDisable(),
      label: t("ES_COMMON_TAKE_ACTION"),
      onSubmit: function onSubmit() {
        return setDisplayMenu(!displayMenu);
      }
    }))), !((_workflowDetails18 = workflowDetails) !== null && _workflowDetails18 !== void 0 && _workflowDetails18.isLoading) && ((_workflowDetails19 = workflowDetails) === null || _workflowDetails19 === void 0 ? void 0 : (_workflowDetails19$da = _workflowDetails19.data) === null || _workflowDetails19$da === void 0 ? void 0 : (_workflowDetails19$da2 = _workflowDetails19$da.nextActions) === null || _workflowDetails19$da2 === void 0 ? void 0 : _workflowDetails19$da2.length) == 1 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
      style: {
        position: "relative",
        boxShadow: "none",
        minWidth: "240px",
        maxWidth: "310px",
        padding: "0px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        width: "100%"
      }
    }, /*#__PURE__*/React__default.createElement("button", {
      style: {
        width: "100%",
        color: "#FFFFFF",
        fontSize: "19px"
      },
      className: "" + (checkForSubmitDisable() ? "submit-bar-disabled" : "submit-bar"),
      disabled: checkForSubmitDisable(),
      name: (_workflowDetails20 = workflowDetails) === null || _workflowDetails20 === void 0 ? void 0 : (_workflowDetails20$da = _workflowDetails20.data) === null || _workflowDetails20$da === void 0 ? void 0 : (_workflowDetails20$da2 = _workflowDetails20$da.nextActions) === null || _workflowDetails20$da2 === void 0 ? void 0 : (_workflowDetails20$da3 = _workflowDetails20$da2[0]) === null || _workflowDetails20$da3 === void 0 ? void 0 : _workflowDetails20$da3.action,
      value: (_workflowDetails21 = workflowDetails) === null || _workflowDetails21 === void 0 ? void 0 : (_workflowDetails21$da = _workflowDetails21.data) === null || _workflowDetails21$da === void 0 ? void 0 : (_workflowDetails21$da2 = _workflowDetails21$da.nextActions) === null || _workflowDetails21$da2 === void 0 ? void 0 : (_workflowDetails21$da3 = _workflowDetails21$da2[0]) === null || _workflowDetails21$da3 === void 0 ? void 0 : _workflowDetails21$da3.action,
      onClick: function onClick(e) {
        onActionSelect(e.target.value);
      }
    }, t("WF_BPA_" + ((_workflowDetails22 = workflowDetails) === null || _workflowDetails22 === void 0 ? void 0 : (_workflowDetails22$da = _workflowDetails22.data) === null || _workflowDetails22$da === void 0 ? void 0 : (_workflowDetails22$da2 = _workflowDetails22$da.nextActions) === null || _workflowDetails22$da2 === void 0 ? void 0 : (_workflowDetails22$da3 = _workflowDetails22$da2[0]) === null || _workflowDetails22$da3 === void 0 ? void 0 : _workflowDetails22$da3.action))))))));
  }), showTermsModal ? /*#__PURE__*/React__default.createElement(ActionModal, {
    t: t,
    action: "TERMS_AND_CONDITIONS",
    tenantId: tenantId,
    id: id,
    closeModal: closeTermsModal,
    submitAction: submitAction,
    applicationData: (data === null || data === void 0 ? void 0 : data.applicationData) || {}
  }) : null, showModal ? /*#__PURE__*/React__default.createElement(ActionModal, {
    t: t,
    action: selectedAction,
    tenantId: tenantId
    ,
    id: id,
    closeModal: closeModal,
    submitAction: submitAction,
    actionData: (_workflowDetails23 = workflowDetails) === null || _workflowDetails23 === void 0 ? void 0 : (_workflowDetails23$da = _workflowDetails23.data) === null || _workflowDetails23$da === void 0 ? void 0 : _workflowDetails23$da.timeline
  }) : null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key === "error" ? true : false,
    label: t(showToast.key === "success" ? "ES_OBPS_" + showToast.action + "_UPDATE_SUCCESS" : showToast.action),
    onClose: closeToast,
    style: {
      zIndex: "1000"
    }
  }));
};

var getPath$3 = function getPath(path, params) {
  params && Object.keys(params).map(function (key) {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
var getBPAEditDetails$1 = function getBPAEditDetails(data, APIScrutinyDetails, mdmsData, nocdata, t) {
  try {
    var _data$landInfo, _data$landInfo2, _data$landInfo3, _data$landInfo3$addre, _data$landInfo4, _data$landInfo4$addre, _data$landInfo4$addre2, _data$landInfo5, _data$landInfo5$addre, _data$landInfo6, _data$landInfo6$addre, _data$landInfo6$addre2, _APIScrutinyDetails$p, _APIScrutinyDetails$p2, _data$auditDetails, _data$additionalDetai, _APIScrutinyDetails$p3, _APIScrutinyDetails$p4, _data$additionalDetai2, _mdmsData$BPA, _APIScrutinyDetails$p5, _APIScrutinyDetails$p6, _APIScrutinyDetails$p7, _data$additionalDetai3, _data$landInfo7, _data$landInfo8, _data$landInfo9, _mdmsData$BPA2, _APIScrutinyDetails$p8, _APIScrutinyDetails$p9, _APIScrutinyDetails$p10, _data$landInfo10, _data$businessService, _data$businessService2, _data$additionalDetai4, _data$additionalDetai5;
    var getBlockIds = function getBlockIds(unit) {
      var blocks = {};
      unit && unit.map(function (ob, index) {
        blocks["Block_" + (index + 1)] = ob.id;
      });
      return blocks;
    };
    var getBlocksforFlow = function getBlocksforFlow(unit) {
      var arr = [];
      var subBlocks = [];
      var subOcc = {};
      unit && unit.map(function (un, index) {
        var _un$usageCategory;
        arr = un === null || un === void 0 ? void 0 : (_un$usageCategory = un.usageCategory) === null || _un$usageCategory === void 0 ? void 0 : _un$usageCategory.split(",");
        subBlocks = [];
        arr && arr.map(function (ob, ind) {
          subBlocks.push({
            code: ob,
            i18nKey: "BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"),
            name: t("BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"))
          });
        });
        subOcc["Block_" + (index + 1)] = subBlocks;
      });
      return subOcc;
    };
    data.BlockIds = getBlockIds(data === null || data === void 0 ? void 0 : (_data$landInfo = data.landInfo) === null || _data$landInfo === void 0 ? void 0 : _data$landInfo.unit);
    data.address = data === null || data === void 0 ? void 0 : (_data$landInfo2 = data.landInfo) === null || _data$landInfo2 === void 0 ? void 0 : _data$landInfo2.address;
    data.address.city = {
      code: data === null || data === void 0 ? void 0 : (_data$landInfo3 = data.landInfo) === null || _data$landInfo3 === void 0 ? void 0 : (_data$landInfo3$addre = _data$landInfo3.address) === null || _data$landInfo3$addre === void 0 ? void 0 : _data$landInfo3$addre.city,
      name: data === null || data === void 0 ? void 0 : (_data$landInfo4 = data.landInfo) === null || _data$landInfo4 === void 0 ? void 0 : (_data$landInfo4$addre = _data$landInfo4.address) === null || _data$landInfo4$addre === void 0 ? void 0 : (_data$landInfo4$addre2 = _data$landInfo4$addre.city) === null || _data$landInfo4$addre2 === void 0 ? void 0 : _data$landInfo4$addre2.split(".")[1]
    };
    data.address.locality = _extends({}, data === null || data === void 0 ? void 0 : (_data$landInfo5 = data.landInfo) === null || _data$landInfo5 === void 0 ? void 0 : (_data$landInfo5$addre = _data$landInfo5.address) === null || _data$landInfo5$addre === void 0 ? void 0 : _data$landInfo5$addre.locality, {
      "i18nkey": data === null || data === void 0 ? void 0 : (_data$landInfo6 = data.landInfo) === null || _data$landInfo6 === void 0 ? void 0 : (_data$landInfo6$addre = _data$landInfo6.address) === null || _data$landInfo6$addre === void 0 ? void 0 : (_data$landInfo6$addre2 = _data$landInfo6$addre.locality) === null || _data$landInfo6$addre2 === void 0 ? void 0 : _data$landInfo6$addre2.name
    });
    data.data = {
      applicantName: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p === void 0 ? void 0 : (_APIScrutinyDetails$p2 = _APIScrutinyDetails$p.planInformation) === null || _APIScrutinyDetails$p2 === void 0 ? void 0 : _APIScrutinyDetails$p2.applicantName,
      applicationDate: data === null || data === void 0 ? void 0 : (_data$auditDetails = data.auditDetails) === null || _data$auditDetails === void 0 ? void 0 : _data$auditDetails.createdTime,
      applicationType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType,
      holdingNumber: data === null || data === void 0 ? void 0 : (_data$additionalDetai = data.additionalDetails) === null || _data$additionalDetai === void 0 ? void 0 : _data$additionalDetai.holdingNo,
      occupancyType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p3 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p3 === void 0 ? void 0 : (_APIScrutinyDetails$p4 = _APIScrutinyDetails$p3.planInformation) === null || _APIScrutinyDetails$p4 === void 0 ? void 0 : _APIScrutinyDetails$p4.occupancy,
      registrationDetails: data === null || data === void 0 ? void 0 : (_data$additionalDetai2 = data.additionalDetails) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.registrationDetails,
      riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : _mdmsData$BPA.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p5 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p5 === void 0 ? void 0 : (_APIScrutinyDetails$p6 = _APIScrutinyDetails$p5.plot) === null || _APIScrutinyDetails$p6 === void 0 ? void 0 : _APIScrutinyDetails$p6.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p7 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p7 === void 0 ? void 0 : _APIScrutinyDetails$p7.blocks),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai3 = data.additionalDetails) === null || _data$additionalDetai3 === void 0 ? void 0 : _data$additionalDetai3.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType),
      scrutinyNumber: {
        edcrNumber: data === null || data === void 0 ? void 0 : data.edcrNumber
      }
    };
    data["PrevStateDocuments"] = data === null || data === void 0 ? void 0 : data.documents;
    data.documents = {
      documents: []
    };
    var nocDocs = [];
    nocdata && nocdata.map(function (a, index) {
      a.documents && a.documents.map(function (b, index) {
        nocDocs.push(b);
      });
    });
    data["PrevStateNocDocuments"] = nocDocs;
    data.nocDocuments = {
      NocDetails: nocdata,
      nocDocuments: []
    };
    data === null || data === void 0 ? void 0 : data.landInfo.owners.map(function (owner, ind) {
      owner.gender = {
        active: true,
        code: owner.gender,
        i18nKey: "COMMON_GENDER_" + owner.gender
      };
    });
    data.owners = {
      owners: data === null || data === void 0 ? void 0 : (_data$landInfo7 = data.landInfo) === null || _data$landInfo7 === void 0 ? void 0 : _data$landInfo7.owners,
      ownershipCategory: {
        active: true,
        code: data === null || data === void 0 ? void 0 : (_data$landInfo8 = data.landInfo) === null || _data$landInfo8 === void 0 ? void 0 : _data$landInfo8.ownershipCategory,
        i18nKey: "COMMON_MASTERS_OWNERSHIPCATEGORY_" + (data === null || data === void 0 ? void 0 : (_data$landInfo9 = data.landInfo) === null || _data$landInfo9 === void 0 ? void 0 : _data$landInfo9.ownershipCategory.replaceAll(".", "_"))
      }
    };
    data.riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p8 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p8 === void 0 ? void 0 : (_APIScrutinyDetails$p9 = _APIScrutinyDetails$p8.plot) === null || _APIScrutinyDetails$p9 === void 0 ? void 0 : _APIScrutinyDetails$p9.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p10 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p10 === void 0 ? void 0 : _APIScrutinyDetails$p10.blocks);
    data.subOccupancy = getBlocksforFlow(data === null || data === void 0 ? void 0 : (_data$landInfo10 = data.landInfo) === null || _data$landInfo10 === void 0 ? void 0 : _data$landInfo10.unit);
    data.uiFlow = {
      flow: data === null || data === void 0 ? void 0 : (_data$businessService = data.businessService) === null || _data$businessService === void 0 ? void 0 : (_data$businessService2 = _data$businessService.split(".")) === null || _data$businessService2 === void 0 ? void 0 : _data$businessService2[0],
      applicationType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai4 = data.additionalDetails) === null || _data$additionalDetai4 === void 0 ? void 0 : _data$additionalDetai4.applicationType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai5 = data.additionalDetails) === null || _data$additionalDetai5 === void 0 ? void 0 : _data$additionalDetai5.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
    };
    sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS", JSON.stringify(true));
    return Promise.resolve(data);
  } catch (e) {
    return Promise.reject(e);
  }
};
var BPASendToArchitect = function BPASendToArchitect(_ref) {
  var _bpaData$, _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  sessionStorage.setItem("BPA_SUBMIT_APP", JSON.stringify("BPA_SUBMIT_APP"));
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useParams = reactRouterDom.useParams(),
    applicationNo = _useParams.applicationNo,
    tenantId = _useParams.tenantId;
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var history = reactRouterDom.useHistory();
  var config = [];
  var application = {};
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(), "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPASearch(tenantId, {
      applicationNo: applicationNo
    }),
    bpaData = _Digit$Hooks$obps$use2.data,
    isBpaSearchLoading = _Digit$Hooks$obps$use2.isLoading;
  var scrutinyNumber = {
    edcrNumber: bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$ = bpaData[0]) === null || _bpaData$ === void 0 ? void 0 : _bpaData$.edcrNumber
  };
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useScrutinyDetails(Digit.ULBService.getStateId(), scrutinyNumber, {
      enabled: scrutinyNumber["edcrNumber"] ? true : false
    }),
    data1 = _Digit$Hooks$obps$use3.data,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  var sourceRefId = applicationNo;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useNocDetails(tenantId, {
      sourceRefId: sourceRefId
    }),
    nocdata = _Digit$Hooks$obps$use4.data,
    isNocLoading = _Digit$Hooks$obps$use4.isLoading;
  var editApplication = window.location.href.includes("editApplication");
  React.useEffect(function () {
    try {
      var isAlready = sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");
      isAlready = isAlready ? JSON.parse(isAlready) : true;
      var _temp3 = function () {
        if (!isAlready && !isNocLoading && !isBpaSearchLoading && !isLoading) {
          application = bpaData ? bpaData[0] : {};
          var _temp4 = function () {
            if (data1 && nocdata) {
              application = bpaData[0];
              if (editApplication) {
                application.isEditApplication = true;
              }
              sessionStorage.setItem("bpaInitialObject", JSON.stringify(_extends({}, application)));
              return Promise.resolve(getBPAEditDetails$1(application, data1, mdmsData, nocdata, t)).then(function (bpaEditDetails) {
                setParams(_extends({}, params, bpaEditDetails));
              });
            }
          }();
          if (_temp4 && _temp4.then) return _temp4.then(function () {});
        }
      }();
      return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [bpaData, data1, mdmsData, nocdata]);
  var goNext = function goNext(skipStep) {
    var _pathname$split;
    var currentPath = pathname === null || pathname === void 0 ? void 0 : (_pathname$split = pathname.split("/")) === null || _pathname$split === void 0 ? void 0 : _pathname$split.pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath$3(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath$3(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(getPath$3(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.BuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.BuildingPermitConfig : newConfig$2;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "check";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('BPACheckPage');
  var OBPSAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('BPAAcknowledgement');
  if (isNocLoading || isBpaSearchLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$3(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$3(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$3(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(OBPSAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, data1 && /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$3(match.path, match.params) + "/" + config.indexRoute
  })));
};

var getPath$4 = function getPath(path, params) {
  params && Object.keys(params).map(function (key) {
    path = path.replace(":" + key, params[key]);
  });
  return path;
};
var getBPAEditDetails$2 = function getBPAEditDetails(data, APIScrutinyDetails, mdmsData, nocdata, t, OCData) {
  try {
    var _data$landInfo, _data$additionalDetai, _data$landInfo2, _data$additionalDetai2, _APIScrutinyDetails$p, _APIScrutinyDetails$p2, _data$auditDetails, _data$additionalDetai3, _APIScrutinyDetails$p3, _APIScrutinyDetails$p4, _data$additionalDetai4, _mdmsData$BPA, _APIScrutinyDetails$p5, _APIScrutinyDetails$p6, _APIScrutinyDetails$p7, _data$additionalDetai5, _mdmsData$BPA2, _APIScrutinyDetails$p8, _APIScrutinyDetails$p9, _APIScrutinyDetails$p10, _data$landInfo3, _data$additionalDetai6, _data$additionalDetai7;
    var getBlocksforFlow = function getBlocksforFlow(unit) {
      var arr = [];
      var subBlocks = [];
      var subOcc = {};
      unit && unit.map(function (un, index) {
        var _un$usageCategory;
        arr = un === null || un === void 0 ? void 0 : (_un$usageCategory = un.usageCategory) === null || _un$usageCategory === void 0 ? void 0 : _un$usageCategory.split(",");
        subBlocks = [];
        arr && arr.map(function (ob, ind) {
          subBlocks.push({
            code: ob,
            i18nKey: "BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"),
            name: t("BPA_SUBOCCUPANCYTYPE_" + ob.replaceAll(".", "_"))
          });
        });
        subOcc["Block_" + (index + 1)] = subBlocks;
      });
      return subOcc;
    };

    data.address = data === null || data === void 0 ? void 0 : (_data$landInfo = data.landInfo) === null || _data$landInfo === void 0 ? void 0 : _data$landInfo.address;
    data.additionalDetails = _extends({}, data === null || data === void 0 ? void 0 : data.additionalDetails, {
      applicationType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType,
      holdingNo: data === null || data === void 0 ? void 0 : (_data$additionalDetai = data.additionalDetails) === null || _data$additionalDetai === void 0 ? void 0 : _data$additionalDetai.holdingNo,
      landId: data === null || data === void 0 ? void 0 : (_data$landInfo2 = data.landInfo) === null || _data$landInfo2 === void 0 ? void 0 : _data$landInfo2.id,
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai2 = data.additionalDetails) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
    });
    data.data = {
      applicantName: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p === void 0 ? void 0 : (_APIScrutinyDetails$p2 = _APIScrutinyDetails$p.planInformation) === null || _APIScrutinyDetails$p2 === void 0 ? void 0 : _APIScrutinyDetails$p2.applicantName,
      applicationDate: data === null || data === void 0 ? void 0 : (_data$auditDetails = data.auditDetails) === null || _data$auditDetails === void 0 ? void 0 : _data$auditDetails.createdTime,
      applicationType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType,
      holdingNumber: data === null || data === void 0 ? void 0 : (_data$additionalDetai3 = data.additionalDetails) === null || _data$additionalDetai3 === void 0 ? void 0 : _data$additionalDetai3.holdingNo,
      bpaData: OCData,
      occupancyType: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p3 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p3 === void 0 ? void 0 : (_APIScrutinyDetails$p4 = _APIScrutinyDetails$p3.planInformation) === null || _APIScrutinyDetails$p4 === void 0 ? void 0 : _APIScrutinyDetails$p4.occupancy,
      registrationDetails: data === null || data === void 0 ? void 0 : (_data$additionalDetai4 = data.additionalDetails) === null || _data$additionalDetai4 === void 0 ? void 0 : _data$additionalDetai4.registrationDetails,
      riskType: Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA = mdmsData.BPA) === null || _mdmsData$BPA === void 0 ? void 0 : _mdmsData$BPA.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p5 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p5 === void 0 ? void 0 : (_APIScrutinyDetails$p6 = _APIScrutinyDetails$p5.plot) === null || _APIScrutinyDetails$p6 === void 0 ? void 0 : _APIScrutinyDetails$p6.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p7 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p7 === void 0 ? void 0 : _APIScrutinyDetails$p7.blocks),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai5 = data.additionalDetails) === null || _data$additionalDetai5 === void 0 ? void 0 : _data$additionalDetai5.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType),
      edcrDetails: APIScrutinyDetails,
      scrutinyNumber: {
        edcrNumber: APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.edcrNumber
      }
    };
    data["PrevStateDocuments"] = data === null || data === void 0 ? void 0 : data.documents;
    data.documents = {
      documents: []
    };
    var nocDocs = [];
    nocdata && nocdata.map(function (a, index) {
      a.documents && a.documents.map(function (b, index) {
        nocDocs.push(b);
      });
    });
    data["PrevStateNocDocuments"] = nocDocs;
    data.nocDocuments = {
      NocDetails: nocdata,
      nocDocuments: []
    };
    data.riskType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p8 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p8 === void 0 ? void 0 : (_APIScrutinyDetails$p9 = _APIScrutinyDetails$p8.plot) === null || _APIScrutinyDetails$p9 === void 0 ? void 0 : _APIScrutinyDetails$p9.area, APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : (_APIScrutinyDetails$p10 = APIScrutinyDetails.planDetail) === null || _APIScrutinyDetails$p10 === void 0 ? void 0 : _APIScrutinyDetails$p10.blocks);
    data.subOccupancy = getBlocksforFlow(data === null || data === void 0 ? void 0 : (_data$landInfo3 = data.landInfo) === null || _data$landInfo3 === void 0 ? void 0 : _data$landInfo3.unit);
    data.uiFlow = {
      flow: "OCBPA",
      applicationType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai6 = data.additionalDetails) === null || _data$additionalDetai6 === void 0 ? void 0 : _data$additionalDetai6.applicationType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.appliactionType),
      serviceType: (data === null || data === void 0 ? void 0 : (_data$additionalDetai7 = data.additionalDetails) === null || _data$additionalDetai7 === void 0 ? void 0 : _data$additionalDetai7.serviceType) || (APIScrutinyDetails === null || APIScrutinyDetails === void 0 ? void 0 : APIScrutinyDetails.applicationSubType)
    };
    sessionStorage.setItem("BPA_IS_ALREADY_WENT_OFF_DETAILS", JSON.stringify(true));
    return Promise.resolve(data);
  } catch (e) {
    return Promise.reject(e);
  }
};
var OCSendToArchitect = function OCSendToArchitect(_ref) {
  var _bpaData$, _bpaData$2, _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  sessionStorage.setItem("BPA_SUBMIT_APP", JSON.stringify("BPA_SUBMIT_APP"));
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useParams = reactRouterDom.useParams(),
    applicationNo = _useParams.applicationNo,
    tenantId = _useParams.tenantId;
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var history = reactRouterDom.useHistory();
  var config = [];
  var application = {};
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("OC_BUILDING_PERMIT_EDITFLOW", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(Digit.ULBService.getStateId(), "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPASearch(tenantId, {
      applicationNo: applicationNo
    }),
    bpaData = _Digit$Hooks$obps$use2.data,
    isBpaSearchLoading = _Digit$Hooks$obps$use2.isLoading;
  var scrutinyNumber = {
    edcrNumber: bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$ = bpaData[0]) === null || _bpaData$ === void 0 ? void 0 : _bpaData$.edcrNumber
  };
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useScrutinyDetails(Digit.ULBService.getStateId(), scrutinyNumber, {
      enabled: bpaData !== null && bpaData !== void 0 && (_bpaData$2 = bpaData[0]) !== null && _bpaData$2 !== void 0 && _bpaData$2.edcrNumber ? true : false
    }),
    data1 = _Digit$Hooks$obps$use3.data,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  var approvalNo = data1 === null || data1 === void 0 ? void 0 : data1.permitNumber;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useOCEdcrSearch(tenantId, {
      approvalNo: approvalNo
    }, {
      enabled: approvalNo && data1 !== null && data1 !== void 0 && data1.permitNumber ? true : false
    }, scrutinyNumber),
    OCData = _Digit$Hooks$obps$use4.data;
  var sourceRefId = applicationNo;
  var _Digit$Hooks$obps$use5 = Digit.Hooks.obps.useNocDetails(tenantId, {
      sourceRefId: sourceRefId
    }),
    nocdata = _Digit$Hooks$obps$use5.data,
    isNocLoading = _Digit$Hooks$obps$use5.isLoading;
  var editApplication = window.location.href.includes("editApplication");
  var tlTrade = JSON.parse(sessionStorage.getItem("tl-trade")) || {};
  React.useEffect(function () {
    try {
      var isAlready = sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");
      isAlready = isAlready ? JSON.parse(isAlready) : true;
      var _temp3 = function () {
        if (!isAlready && !isNocLoading && !isBpaSearchLoading && !isLoading) {
          application = bpaData ? bpaData[0] : {};
          var _temp4 = function () {
            if (data1 && OCData) {
              application = bpaData[0];
              if (editApplication) {
                application.isEditApplication = true;
              }
              sessionStorage.setItem("bpaInitialObject", JSON.stringify(_extends({}, application)));
              return Promise.resolve(getBPAEditDetails$2(application, data1, mdmsData, nocdata, t, OCData)).then(function (bpaEditDetails) {
                setParams(_extends({}, params, bpaEditDetails));
              });
            }
          }();
          if (_temp4 && _temp4.then) return _temp4.then(function () {});
        }
      }();
      return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [bpaData, data1, mdmsData, nocdata, OCData]);
  var goNext = function goNext(skipStep) {
    var _pathname$split;
    var currentPath = pathname === null || pathname === void 0 ? void 0 : (_pathname$split = pathname.split("/")) === null || _pathname$split === void 0 ? void 0 : _pathname$split.pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath$4(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath$4(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(getPath$4(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.OCBuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.OCBuildingPermitConfig : newConfig$3;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "check";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('OCBPACheckPage');
  var OBPSAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('OCBPAAcknowledgement');
  if (isNocLoading || isBpaSearchLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath$4(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$4(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath$4(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(OBPSAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, data1 && OCData && /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath$4(match.path, match.params) + "/" + config.indexRoute
  })));
};

var BPASendBackToCitizen = function BPASendBackToCitizen(_ref) {
  var _bpaData$, _bpaData$2, _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var history = reactRouterDom.useHistory();
  var stateCode = Digit.ULBService.getStateId();
  var _useParams = reactRouterDom.useParams(),
    applicationNo = _useParams.applicationNo,
    tenantId = _useParams.tenantId;
  sessionStorage.setItem("BPA_SUBMIT_APP", JSON.stringify("BPA_SUBMIT_APP"));
  var config = [],
    application = {};
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPASearch(tenantId, {
      applicationNo: applicationNo
    }),
    bpaData = _Digit$Hooks$obps$use2.data,
    isBpaSearchLoading = _Digit$Hooks$obps$use2.isLoading;
  var scrutinyNumber = {
      edcrNumber: bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$ = bpaData[0]) === null || _bpaData$ === void 0 ? void 0 : _bpaData$.edcrNumber
    },
    sourceRefId = applicationNo;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useScrutinyDetails(stateCode, scrutinyNumber, {
      enabled: bpaData !== null && bpaData !== void 0 && (_bpaData$2 = bpaData[0]) !== null && _bpaData$2 !== void 0 && _bpaData$2.edcrNumber ? true : false
    }),
    edcrDetails = _Digit$Hooks$obps$use3.data,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useNocDetails(tenantId, {
      sourceRefId: sourceRefId
    }),
    nocdata = _Digit$Hooks$obps$use4.data,
    isNocLoading = _Digit$Hooks$obps$use4.isLoading;
  var editApplication = window.location.href.includes("editApplication");
  React.useEffect(function () {
    try {
      var isAlready = sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");
      isAlready = isAlready ? JSON.parse(isAlready) : true;
      var _temp3 = function () {
        if (!isAlready && !isNocLoading && !isBpaSearchLoading && !isLoading) {
          application = bpaData ? bpaData[0] : {};
          var _temp4 = function () {
            if (bpaData && application && edcrDetails && mdmsData && nocdata) {
              application = bpaData[0];
              if (editApplication) {
                application.isEditApplication = true;
              }
              sessionStorage.setItem("bpaInitialObject", JSON.stringify(_extends({}, application)));
              return Promise.resolve(getBPAEditDetails(application, edcrDetails, mdmsData, nocdata, t)).then(function (bpaEditDetails) {
                setParams(_extends({}, params, bpaEditDetails));
              });
            }
          }();
          if (_temp4 && _temp4.then) return _temp4.then(function () {});
        }
      }();
      return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [bpaData, edcrDetails, mdmsData, nocdata]);
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    try {
      history.push(getPath(match.path, match.params) + "/acknowledgement");
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.BuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.BuildingPermitConfig : newConfig$2;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "check";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('OCBPASendBackCheckPage');
  var OBPSAcknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('OCSendBackAcknowledgement');
  if (isNocLoading || isBpaSearchLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(OBPSAcknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath(match.path, match.params) + "/" + config.indexRoute
  })));
};

var OCSendBackToCitizen = function OCSendBackToCitizen(_ref) {
  var _bpaData$, _bpaData$2, _newConfig, _newConfig2, _Digit, _Digit$ComponentRegis, _Digit2, _Digit2$ComponentRegi;
  sessionStorage.setItem("BPA_SUBMIT_APP", JSON.stringify("BPA_SUBMIT_APP"));
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var queryClient = reactQuery.useQueryClient();
  var match = reactRouterDom.useRouteMatch();
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var history = reactRouterDom.useHistory();
  var stateCode = Digit.ULBService.getStateId();
  var _useParams = reactRouterDom.useParams(),
    applicationNo = _useParams.applicationNo,
    tenantId = _useParams.tenantId;
  var config = [],
    application = {};
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("BUILDING_PERMIT_EDITFLOW", {}),
    params = _Digit$Hooks$useSessi[0],
    setParams = _Digit$Hooks$useSessi[1],
    clearParams = _Digit$Hooks$useSessi[2];
  var stateId = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateCode, "BPA", ["RiskTypeComputation", "homePageUrlLinks"]),
    isMdmsLoading = _Digit$Hooks$obps$use.isMdmsLoading,
    mdmsData = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPASearch(tenantId, {
      applicationNo: applicationNo
    }),
    bpaData = _Digit$Hooks$obps$use2.data,
    isBpaSearchLoading = _Digit$Hooks$obps$use2.isLoading;
  var scrutinyNumber = {
      edcrNumber: bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$ = bpaData[0]) === null || _bpaData$ === void 0 ? void 0 : _bpaData$.edcrNumber
    },
    sourceRefId = applicationNo;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useScrutinyDetails(stateCode, scrutinyNumber, {
      enabled: bpaData !== null && bpaData !== void 0 && (_bpaData$2 = bpaData[0]) !== null && _bpaData$2 !== void 0 && _bpaData$2.edcrNumber ? true : false
    }),
    edcrDetails = _Digit$Hooks$obps$use3.data,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  var _Digit$Hooks$obps$use4 = Digit.Hooks.obps.useNocDetails(tenantId, {
      sourceRefId: sourceRefId
    }),
    nocdata = _Digit$Hooks$obps$use4.data,
    isNocLoading = _Digit$Hooks$obps$use4.isLoading;
  var editApplication = window.location.href.includes("editApplication");
  React.useEffect(function () {
    try {
      var isAlready = sessionStorage.getItem("BPA_IS_ALREADY_WENT_OFF_DETAILS");
      isAlready = isAlready ? JSON.parse(isAlready) : true;
      var _temp3 = function () {
        if (!isAlready && !isNocLoading && !isBpaSearchLoading && !isLoading && !isMdmsLoading) {
          application = bpaData ? bpaData[0] : {};
          var _temp4 = function () {
            if (bpaData && application && edcrDetails && mdmsData && nocdata) {
              application = bpaData[0];
              if (editApplication) {
                application.isEditApplication = true;
              }
              sessionStorage.setItem("bpaInitialObject", JSON.stringify(_extends({}, application)));
              return Promise.resolve(getBPAEditDetails(application, edcrDetails, mdmsData, nocdata, t)).then(function (bpaEditDetails) {
                setParams(_extends({}, params, bpaEditDetails));
              });
            }
          }();
          if (_temp4 && _temp4.then) return _temp4.then(function () {});
        }
      }();
      return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function () {}) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  }, [bpaData, edcrDetails, mdmsData, nocdata]);
  var goNext = function goNext(skipStep) {
    var currentPath = pathname.split("/").pop();
    var _config$find = config.find(function (routeObj) {
        return routeObj.route === currentPath;
      }),
      nextStep = _config$find.nextStep;
    var redirectWithHistory = history.push;
    if (nextStep === null) {
      return redirectWithHistory(getPath(match.path, match.params) + "/check");
    }
    redirectWithHistory(getPath(match.path, match.params) + "/" + nextStep);
  };
  var onSuccess = function onSuccess() {
    queryClient.invalidateQueries("PT_CREATE_PROPERTY");
  };
  var createApplication = function createApplication() {
    return Promise.resolve();
  };
  var handleSelect = function handleSelect(key, data, skipStep, isFromCreateApi) {
    var _extends2;
    if (isFromCreateApi) setParams(data);else setParams(_extends({}, params, (_extends2 = {}, _extends2[key] = _extends({}, params[key], data), _extends2)));
    goNext();
  };
  var handleSkip = function handleSkip() {};
  newConfig = (_newConfig = newConfig) !== null && _newConfig !== void 0 && _newConfig.OCBuildingPermitConfig ? (_newConfig2 = newConfig) === null || _newConfig2 === void 0 ? void 0 : _newConfig2.OCBuildingPermitConfig : newConfig$3;
  newConfig.forEach(function (obj) {
    config = config.concat(obj.body.filter(function (a) {
      return !a.hideInCitizen;
    }));
  });
  config.indexRoute = "check";
  React.useEffect(function () {
    if (sessionStorage.getItem("isPermitApplication") && sessionStorage.getItem("isPermitApplication") == "true") {
      clearParams();
      sessionStorage.setItem("isPermitApplication", false);
    }
  }, []);
  var CheckPage = (_Digit = Digit) === null || _Digit === void 0 ? void 0 : (_Digit$ComponentRegis = _Digit.ComponentRegistryService) === null || _Digit$ComponentRegis === void 0 ? void 0 : _Digit$ComponentRegis.getComponent('OCBPASendBackCheckPage');
  var Acknowledgement = (_Digit2 = Digit) === null || _Digit2 === void 0 ? void 0 : (_Digit2$ComponentRegi = _Digit2.ComponentRegistryService) === null || _Digit2$ComponentRegi === void 0 ? void 0 : _Digit2$ComponentRegi.getComponent('OCSendBackAcknowledgement');
  if (isNocLoading || isBpaSearchLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, config.map(function (routeObj, index) {
    var component = routeObj.component,
      texts = routeObj.texts,
      inputs = routeObj.inputs,
      key = routeObj.key;
    var Component = typeof component === "string" ? Digit.ComponentRegistryService.getComponent(component) : component;
    return /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
      path: getPath(match.path, match.params) + "/" + routeObj.route,
      key: index
    }, /*#__PURE__*/React__default.createElement(Component, {
      config: {
        texts: texts,
        inputs: inputs,
        key: key
      },
      onSelect: handleSelect,
      onSkip: handleSkip,
      t: t,
      formData: params
    }));
  }), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/check"
  }, /*#__PURE__*/React__default.createElement(CheckPage, {
    onSubmit: createApplication,
    value: params
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, {
    path: getPath(match.path, match.params) + "/acknowledgement"
  }, /*#__PURE__*/React__default.createElement(Acknowledgement, {
    data: params,
    onSuccess: onSuccess
  })), /*#__PURE__*/React__default.createElement(reactRouterDom.Route, null, /*#__PURE__*/React__default.createElement(reactRouterDom.Redirect, {
    to: getPath(match.path, match.params) + "/" + config.indexRoute
  })));
};

var FilterFormFieldsComponent$2 = function FilterFormFieldsComponent(_ref) {
  var controlFilterForm = _ref.controlFilterForm;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.useApplicationTypes(tenantId),
    applicationTypesOfBPA = _Digit$Hooks$obps$Sea.data,
    loadingApplicationTypesOfBPA = _Digit$Hooks$obps$Sea.isLoading;
  var availableOptions = [{
    code: "Accepted",
    name: "" + t("EDCR_ACCEPTED")
  }, {
    code: "Not Accepted",
    name: "" + t("EDCR_NOT_ACCEPTED")
  }];
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "status",
    control: controlFilterForm,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontWeight: "400",
          fontSize: "16px"
        }
      }, t("BPA_COMMON_TABLE_COL_APP_STATUS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
        onSelect: function onSelect(e) {
          props.onChange(e.code);
          Digit.SessionStorage.set("EDCR_BACK", "");
        },
        selectedOption: availableOptions.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionsKey: "name",
        name: "status",
        options: availableOptions
      }));
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FilterFormField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "appliactionType",
    control: controlFilterForm,
    render: function render(props) {
      return loadingApplicationTypesOfBPA ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
        className: "filter-label sub-filter-label",
        style: {
          fontWeight: "400",
          fontSize: "16px"
        }
      }, t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
        t: t,
        option: applicationTypesOfBPA,
        selected: applicationTypesOfBPA.filter(function (option) {
          return option.code === props.value;
        })[0],
        optionKey: "i18nKey",
        select: function select(e) {
          props.onChange(e.code);
          Digit.SessionStorage.set("EDCR_BACK", "");
        }
      }));
    }
  })));
};

var SearchFormFieldsComponents$2 = function SearchFormFieldsComponents(_ref) {
  var registerRef = _ref.registerRef,
    searchFieldComponents = _ref.searchFieldComponents;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  if (!isMobile) {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
      className: "search-container",
      style: {
        width: "auto",
        marginLeft: "24px"
      }
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "search-complaint-container"
    }, /*#__PURE__*/React__default.createElement("div", {
      className: "complaint-input-container",
      style: {
        textAlign: "start"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      name: "applicationNumber",
      inputRef: registerRef({})
    })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_EDCR_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      name: "edcrNumber",
      inputRef: registerRef({})
    })), /*#__PURE__*/React__default.createElement("div", {
      className: "search-action-wrapper",
      style: {
        width: "100%"
      }
    }, searchFieldComponents)))));
  }
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_APPLICATION_NUMBER_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    name: "applicationNumber",
    inputRef: registerRef({})
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement("label", null, t("BPA_EDCR_NO_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    name: "edcrNumber",
    inputRef: registerRef({})
  })));
};

var useInboxMobileCardsData$2 = function useInboxMobileCardsData(_ref) {
  var table = _ref.table;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var dataForMobileInboxCards = table === null || table === void 0 ? void 0 : table.map(function (_ref2) {
    var _ref3;
    var applicationId = _ref2.applicationId,
      edcrNumber = _ref2.edcrNumber,
      date = _ref2.date,
      planReportUrl = _ref2.planReportUrl,
      dxfFileurl = _ref2.dxfFileurl,
      locality = _ref2.locality,
      status = _ref2.status,
      owner = _ref2.owner;
    return _ref3 = {}, _ref3[t("EDCR_COMMON_TABLE_APPL_NO")] = applicationId, _ref3[t("CS_APPLICATION_DETAILS_APPLICATION_DATE")] = date ? format(new Date(date), "dd/MM/yyyy") : "NA", _ref3[t("EDCR_COMMON_TABLE_CITY_LABEL")] = t(locality), _ref3[t("EDCR_COMMON_TABLE_APPL_NAME")] = owner, _ref3[t("EDCR_COMMON_TABLE_SCRUTINY_NO")] = edcrNumber, _ref3[t("EDCR_COMMON_TABLE_COL_STATUS")] = status === "Accepted" ? /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-success ",
      style: {
        background: "none",
        padding: "0px"
      }
    }, status) : /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-error",
      style: {
        background: "none",
        padding: "0px"
      }
    }, status), _ref3[t("BPA_UPLOADED_PLAN_DXF")] = /*#__PURE__*/React__default.createElement("a", {
      href: "" + dxfFileurl
    }, /*#__PURE__*/React__default.createElement("span", {
      className: "link"
    }, t("BPA_DOWNLOAD"))), _ref3[t("EDCR_SCUTINY_REPORT")] = /*#__PURE__*/React__default.createElement("a", {
      href: "" + planReportUrl
    }, /*#__PURE__*/React__default.createElement("span", {
      className: "link"
    }, t("BPA_DOWNLOAD"))), _ref3;
  });
  var MobileSortFormValues = function MobileSortFormValues() {
    var sortOrderOptions = [{
      code: "DESC",
      i18nKey: "ES_INBOX_DATE_LATEST_FIRST"
    }, {
      code: "ASC",
      i18nKey: "ES_INBOX_DATE_LATEST_LAST"
    }];
    var _useFormContext = reactHookForm.useFormContext(),
      controlSortForm = _useFormContext.control;
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.SearchField, null, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      name: "sortOrder",
      control: controlSortForm,
      render: function render(_ref4) {
        var onChange = _ref4.onChange,
          value = _ref4.value;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          onSelect: function onSelect(e) {
            onChange(e.code);
          },
          selectedOption: sortOrderOptions.filter(function (option) {
            return option.code === value;
          })[0],
          optionsKey: "i18nKey",
          name: "sortOrder",
          options: sortOrderOptions
        });
      }
    }));
  };
  return {
    data: dataForMobileInboxCards,
    isTwoDynamicPrefix: true,
    getRedirectionLink: function getRedirectionLink() {},
    handleClickEnabled: false,
    serviceRequestIdKey: "applicationNo",
    MobileSortFormValues: MobileSortFormValues
  };
};

var Download = function Download(_ref) {
  var dowloadOptions = _ref.dowloadOptions;
  var _useState = React.useState(false),
    showOptions = _useState[0],
    setShowOptions = _useState[1];
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper",
    onHeadClick: function onHeadClick() {
      return setShowOptions(!showOptions);
    },
    displayOptions: showOptions,
    showOptions: setShowOptions,
    options: dowloadOptions,
    style: {
      right: "0",
      position: "unset",
      top: "0px",
      margin: "0px"
    },
    optionsStyle: {
      right: "10px",
      top: "unset",
      margin: "0px",
      position: "absolute"
    }
  }));
};
var useInboxTableConfig$2 = function useInboxTableConfig(_ref2) {
  var _formState$tableForm, _formState$tableForm2, _formState$tableForm7, _formState$searchForm;
  var onPageSizeChange = _ref2.onPageSizeChange,
    formState = _ref2.formState,
    totalCount = _ref2.totalCount,
    table = _ref2.table,
    dispatch = _ref2.dispatch,
    onSortingByData = _ref2.onSortingByData;
  var GetCell = function GetCell(value) {
    return /*#__PURE__*/React__default.createElement("span", {
      className: "cell-text styled-cell"
    }, value);
  };
  var GetStatusCell = function GetStatusCell(value) {
    return value === "Accepted" ? /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-success ",
      style: {
        background: "none",
        padding: "unset"
      }
    }, value) : /*#__PURE__*/React__default.createElement("span", {
      className: "sla-cell-error",
      style: {
        background: "none",
        padding: "unset"
      }
    }, value);
  };
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tableColumnConfig = React.useMemo(function () {
    return [{
      Header: t("EDCR_COMMON_TABLE_APPL_NO"),
      disableSortBy: true,
      Cell: function Cell(_ref3) {
        var row = _ref3.row;
        return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", {
          className: ""
        }, row.original["applicationId"]));
      }
    }, {
      Header: t("CS_APPLICATION_DETAILS_APPLICATION_DATE"),
      accessor: "createdDate",
      Cell: function Cell(_ref4) {
        var _row$original, _row$original2;
        var row = _ref4.row;
        return (_row$original = row.original) !== null && _row$original !== void 0 && _row$original["date"] ? GetCell(format(new Date((_row$original2 = row.original) === null || _row$original2 === void 0 ? void 0 : _row$original2["date"]), "dd/MM/yyyy")) : "";
      }
    }, {
      Header: t("EDCR_COMMON_TABLE_CITY_LABEL"),
      accessor: function accessor(row) {
        return t(row === null || row === void 0 ? void 0 : row.locality);
      },
      disableSortBy: true
    }, {
      Header: t("EDCR_COMMON_TABLE_APPL_NAME"),
      accessor: function accessor(row) {
        return row === null || row === void 0 ? void 0 : row.owner;
      },
      disableSortBy: true
    }, {
      Header: t("EDCR_COMMON_TABLE_SCRUTINY_NO"),
      disableSortBy: true,
      Cell: function Cell(_ref5) {
        var _row$original3;
        var row = _ref5.row;
        return /*#__PURE__*/React__default.createElement("div", null, ((_row$original3 = row.original) === null || _row$original3 === void 0 ? void 0 : _row$original3.edcrNumber) !== "null" ? /*#__PURE__*/React__default.createElement("span", {
          className: ""
        }, row.original["edcrNumber"]) : "NA");
      }
    }, {
      Header: t("EDCR_COMMON_TABLE_COL_STATUS"),
      accessor: function accessor(row) {
        return GetStatusCell(row === null || row === void 0 ? void 0 : row.status);
      },
      disableSortBy: true
    }, {
      Header: t("PT_COMMON_TABLE_COL_ACTION_LABEL"),
      Cell: function Cell(_ref6) {
        var row = _ref6.row;
        return /*#__PURE__*/React__default.createElement(Download, {
          dowloadOptions: [{
            label: t("BPA_UPLOADED_PLAN_DXF"),
            onClick: function onClick() {
              return window.open("" + row.original["dxfFileurl"]);
            }
          }, {
            label: t("EDCR_SCUTINY_REPORT"),
            onClick: function onClick() {
              return window.open("" + row.original["planReportUrl"]);
            }
          }]
        });
      },
      disableSortBy: true
    }];
  });
  return {
    getCellProps: function getCellProps(cellInfo) {
      return {
        style: {
          padding: "20px 18px",
          fontSize: "16px"
        }
      };
    },
    className: "table edcr-citizen-inbox",
    disableSort: false,
    autoSort: false,
    manualPagination: true,
    initSortId: "createdDate",
    onPageSizeChange: onPageSizeChange,
    currentPage: ((_formState$tableForm = formState.tableForm) === null || _formState$tableForm === void 0 ? void 0 : _formState$tableForm.offset) / ((_formState$tableForm2 = formState.tableForm) === null || _formState$tableForm2 === void 0 ? void 0 : _formState$tableForm2.limit),
    onNextPage: function onNextPage() {
      var _formState$tableForm3, _formState$tableForm4;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm3 = formState.tableForm) === null || _formState$tableForm3 === void 0 ? void 0 : _formState$tableForm3.offset) + parseInt((_formState$tableForm4 = formState.tableForm) === null || _formState$tableForm4 === void 0 ? void 0 : _formState$tableForm4.limit)
        })
      });
    },
    onPrevPage: function onPrevPage() {
      var _formState$tableForm5, _formState$tableForm6;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: parseInt((_formState$tableForm5 = formState.tableForm) === null || _formState$tableForm5 === void 0 ? void 0 : _formState$tableForm5.offset) - parseInt((_formState$tableForm6 = formState.tableForm) === null || _formState$tableForm6 === void 0 ? void 0 : _formState$tableForm6.limit)
        })
      });
    },
    pageSizeLimit: (_formState$tableForm7 = formState.tableForm) === null || _formState$tableForm7 === void 0 ? void 0 : _formState$tableForm7.limit,
    onSort: onSortingByData,
    totalRecords: totalCount,
    onSearch: formState === null || formState === void 0 ? void 0 : (_formState$searchForm = formState.searchForm) === null || _formState$searchForm === void 0 ? void 0 : _formState$searchForm.message,
    onLastPage: function onLastPage() {
      var _formState$tableForm8;
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: Math.ceil(totalCount / 10) * 10 - parseInt((_formState$tableForm8 = formState.tableForm) === null || _formState$tableForm8 === void 0 ? void 0 : _formState$tableForm8.limit)
        })
      });
    },
    onFirstPage: function onFirstPage() {
      return dispatch({
        action: "mutateTableForm",
        data: _extends({}, formState.tableForm, {
          offset: 0
        })
      });
    },
    data: table,
    columns: tableColumnConfig
  };
};

var Inbox$2 = function Inbox(_ref) {
  var parentRoute = _ref.parentRoute;
  window.scroll(0, 0);
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var searchFormDefaultValues = {};
  var filterFormDefaultValues = {
    appliactionType: "",
    status: ""
  };
  var tableOrderFormDefaultValues = {
    sortBy: "createdDate",
    limit: Digit.Utils.browser.isMobile() ? 50 : 10,
    offset: 0,
    sortOrder: "DESC"
  };
  function formReducer(state, payload) {
    switch (payload.action) {
      case "mutateSearchForm":
        Digit.SessionStorage.set("EDCR.INBOX", _extends({}, state, {
          searchForm: payload.data
        }));
        return _extends({}, state, {
          searchForm: payload.data
        });
      case "mutateFilterForm":
        Digit.SessionStorage.set("EDCR.INBOX", _extends({}, state, {
          filterForm: payload.data
        }));
        return _extends({}, state, {
          filterForm: payload.data
        });
      case "mutateTableForm":
        Digit.SessionStorage.set("EDCR.INBOX", _extends({}, state, {
          tableForm: payload.data
        }));
        return _extends({}, state, {
          tableForm: payload.data
        });
    }
  }
  var InboxObjectInSessionStorage = Digit.SessionStorage.get("EDCR.INBOX");
  var onSearchFormReset = function onSearchFormReset(setSearchFormValue) {
    setSearchFormValue("edcrNumber", null);
    setSearchFormValue("applicationNumber", null);
    dispatch({
      action: "mutateSearchForm",
      data: searchFormDefaultValues
    });
  };
  var onFilterFormReset = function onFilterFormReset(setFilterFormValue) {
    setFilterFormValue("status", "");
    setFilterFormValue("appliactionType", "");
    dispatch({
      action: "mutateFilterForm",
      data: filterFormDefaultValues
    });
  };
  var onSortFormReset = function onSortFormReset(setSortFormValue) {
    setSortFormValue("sortOrder", "DESC");
    dispatch({
      action: "mutateTableForm",
      data: tableOrderFormDefaultValues
    });
  };
  var formInitValue = React.useMemo(function () {
    var inboxFromhomePage = Digit.SessionStorage.get("EDCR_BACK");
    if (inboxFromhomePage === "IS_EDCR_BACK") {
      return {
        filterForm: filterFormDefaultValues,
        searchForm: searchFormDefaultValues,
        tableForm: tableOrderFormDefaultValues
      };
    }
    return InboxObjectInSessionStorage || {
      filterForm: filterFormDefaultValues,
      searchForm: searchFormDefaultValues,
      tableForm: tableOrderFormDefaultValues
    };
  }, [Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.filterForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.searchForm) || {}), Object.values((InboxObjectInSessionStorage === null || InboxObjectInSessionStorage === void 0 ? void 0 : InboxObjectInSessionStorage.tableForm) || {})]);
  var _useReducer = React.useReducer(formReducer, formInitValue),
    formState = _useReducer[0],
    dispatch = _useReducer[1];
  var onPageSizeChange = function onPageSizeChange(e) {
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        limit: e.target.value
      })
    });
  };
  var onSortingByData = function onSortingByData(e) {
    if (e.length > 0) {
      var _e$ = e[0],
        id = _e$.id,
        desc = _e$.desc;
      var sortOrder = desc ? "DESC" : "ASC";
      var sortBy = id;
      if (!(formState.tableForm.sortBy === sortBy && formState.tableForm.sortOrder === sortOrder)) {
        dispatch({
          action: "mutateTableForm",
          data: _extends({}, formState.tableForm, {
            sortBy: id,
            sortOrder: desc ? "DESC" : "ASC"
          })
        });
      }
    }
  };
  var onMobileSortOrderData = function onMobileSortOrderData(data) {
    var sortOrder = data.sortOrder;
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, formState.tableForm, {
        sortOrder: sortOrder
      })
    });
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useEDCRInbox({
      tenantId: tenantId,
      filters: _extends({}, formState)
    }),
    isInboxLoading = _Digit$Hooks$obps$use.isLoading,
    _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use.data;
  _Digit$Hooks$obps$use2 = _Digit$Hooks$obps$use2 === void 0 ? {} : _Digit$Hooks$obps$use2;
  var table = _Digit$Hooks$obps$use2.table,
    totalCount = _Digit$Hooks$obps$use2.totalCount;
  var PropsForInboxLinks = {
    logoIcon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.CaseIcon, null),
    headerText: "ACTION_TEST_EDCR_SCRUTINY",
    links: [{
      link: "/digit-ui/citizen/obps/edcrscrutiny/apply",
      text: t("BPA_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")
    }, {
      link: "/digit-ui/citizen/obps/edcrscrutiny/oc-apply",
      text: t("BPA_OC_PLAN_SCRUTINY_FOR_NEW_CONSTRUCTION_LABEL")
    }]
  };
  var SearchFormFields = React.useCallback(function (_ref2) {
    var registerRef = _ref2.registerRef,
      searchFormState = _ref2.searchFormState,
      searchFieldComponents = _ref2.searchFieldComponents;
    return /*#__PURE__*/React__default.createElement(SearchFormFieldsComponents$2, {
      registerRef: registerRef,
      searchFormState: searchFormState,
      searchFieldComponents: searchFieldComponents
    });
  }, []);
  var FilterFormFields = React.useCallback(function (_ref3) {
    var registerRef = _ref3.registerRef,
      controlFilterForm = _ref3.controlFilterForm,
      setFilterFormValue = _ref3.setFilterFormValue,
      getFilterFormValue = _ref3.getFilterFormValue;
    return /*#__PURE__*/React__default.createElement(FilterFormFieldsComponent$2, {
      isInboxLoading: isInboxLoading,
      registerRef: registerRef,
      controlFilterForm: controlFilterForm,
      setFilterFormValue: setFilterFormValue,
      filterFormState: formState === null || formState === void 0 ? void 0 : formState.filterForm,
      getFilterFormValue: getFilterFormValue
    });
  }, [isInboxLoading]);
  var onSearchFormSubmit = function onSearchFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateSearchForm",
      data: data
    });
  };
  var onFilterFormSubmit = function onFilterFormSubmit(data) {
    data.hasOwnProperty("") && (data === null || data === void 0 ? true : delete data[""]);
    dispatch({
      action: "mutateTableForm",
      data: _extends({}, tableOrderFormDefaultValues)
    });
    dispatch({
      action: "mutateFilterForm",
      data: data
    });
  };
  var propsForSearchForm = {
    SearchFormFields: SearchFormFields,
    onSearchFormSubmit: onSearchFormSubmit,
    searchFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.searchForm,
    resetSearchFormDefaultValues: searchFormDefaultValues,
    onSearchFormReset: onSearchFormReset
  };
  var propsForFilterForm = {
    FilterFormFields: FilterFormFields,
    onFilterFormSubmit: onFilterFormSubmit,
    filterFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.filterForm,
    resetFilterFormDefaultValues: filterFormDefaultValues,
    onFilterFormReset: onFilterFormReset
  };
  var propsForInboxTable = useInboxTableConfig$2(_extends({}, {
    parentRoute: parentRoute,
    onPageSizeChange: onPageSizeChange,
    formState: formState,
    totalCount: totalCount,
    table: table,
    dispatch: dispatch,
    onSortingByData: onSortingByData
  }));
  var propsForInboxMobileCards = useInboxMobileCardsData$2({
    table: table
  });
  var propsForMobileSortForm = {
    onMobileSortOrderData: onMobileSortOrderData,
    sortFormDefaultValues: formState === null || formState === void 0 ? void 0 : formState.tableForm,
    onSortFormReset: onSortFormReset
  };
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("ES_COMMON_INBOX"), totalCount ? /*#__PURE__*/React__default.createElement("p", {
    className: "inbox-count"
  }, totalCount) : null), /*#__PURE__*/React__default.createElement(digitUiReactComponents.InboxComposer, _extends({
    isInboxLoading: isInboxLoading,
    PropsForInboxLinks: PropsForInboxLinks
  }, propsForSearchForm, propsForFilterForm, propsForMobileSortForm, {
    propsForInboxTable: propsForInboxTable,
    propsForInboxMobileCards: propsForInboxMobileCards,
    formState: formState
  })));
};

var LicenseType = function LicenseType(_ref) {
  var _formData, _formData$LicneseType, _formData2, _formData2$formData, _formData2$formData$L, _formData3, _formData3$LicneseTyp, _formData4, _formData4$formData, _formData4$formData$L;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  if (JSON.parse(sessionStorage.getItem("BPAREGintermediateValue")) !== null) {
    formData = JSON.parse(sessionStorage.getItem("BPAREGintermediateValue"));
    sessionStorage.setItem("BPAREGintermediateValue", null);
  } else formData = formData;
  var index = window.location.href.split("/").pop();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState(((_formData = formData) === null || _formData === void 0 ? void 0 : (_formData$LicneseType = _formData.LicneseType) === null || _formData$LicneseType === void 0 ? void 0 : _formData$LicneseType.LicenseType) || ((_formData2 = formData) === null || _formData2 === void 0 ? void 0 : (_formData2$formData = _formData2.formData) === null || _formData2$formData === void 0 ? void 0 : (_formData2$formData$L = _formData2$formData.LicneseType) === null || _formData2$formData$L === void 0 ? void 0 : _formData2$formData$L.LicenseType) || ""),
    LicenseType = _useState[0],
    setLicenseType = _useState[1];
  var _useState2 = React.useState(((_formData3 = formData) === null || _formData3 === void 0 ? void 0 : (_formData3$LicneseTyp = _formData3.LicneseType) === null || _formData3$LicneseTyp === void 0 ? void 0 : _formData3$LicneseTyp.ArchitectNo) || ((_formData4 = formData) === null || _formData4 === void 0 ? void 0 : (_formData4$formData = _formData4.formData) === null || _formData4$formData === void 0 ? void 0 : (_formData4$formData$L = _formData4$formData.LicneseType) === null || _formData4$formData$L === void 0 ? void 0 : _formData4$formData$L.ArchitectNo) || null),
    ArchitectNo = _useState2[0],
    setArchitectNo = _useState2[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    data = _Digit$Hooks$obps$use.data;
  var isopenlink = window.location.href.includes("/openlink/");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  if (isopenlink) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  function getLicenseType() {
    var _data$StakeholderRegi;
    var list = [];
    var found = false;
    data === null || data === void 0 ? void 0 : (_data$StakeholderRegi = data.StakeholderRegistraition) === null || _data$StakeholderRegi === void 0 ? void 0 : _data$StakeholderRegi.TradeTypetoRoleMapping.map(function (ob) {
      found = list.some(function (el) {
        return el.i18nKey.includes(ob.tradeType.split(".")[0]);
      });
      if (!found) list.push({
        role: ob.role,
        i18nKey: "TRADELICENSE_TRADETYPE_" + ob.tradeType.split(".")[0],
        tradeType: ob.tradeType
      });
    });
    return list;
  }
  var onSkip = function onSkip() {
    return onSelect();
  };
  function selectLicenseType(value) {
    setLicenseType(value);
  }
  function selectArchitectNo(e) {
    setArchitectNo(e.target.value);
  }
  function goNext() {
    var _formData5, _formData6, _formData6$result, _formData6$result$Lic;
    if (!((_formData5 = formData) !== null && _formData5 !== void 0 && _formData5.result && (_formData6 = formData) !== null && _formData6 !== void 0 && (_formData6$result = _formData6.result) !== null && _formData6$result !== void 0 && (_formData6$result$Lic = _formData6$result.Licenses[0]) !== null && _formData6$result$Lic !== void 0 && _formData6$result$Lic.id)) onSelect(config.key, {
      LicenseType: LicenseType,
      ArchitectNo: ArchitectNo
    });else {
      var _formData7;
      var _data = (_formData7 = formData) === null || _formData7 === void 0 ? void 0 : _formData7.formData;
      _data.LicneseType.LicenseType = LicenseType;
      _data.LicneseType.ArchitectNo = ArchitectNo;
      onSelect("", formData);
    }
  }
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, isopenlink && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 1,
    flow: "STAKEHOLDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    isDisabled: LicenseType && LicenseType !== null && LicenseType !== void 0 && LicenseType.i18nKey.includes("ARCHITECT") ? !LicenseType || !ArchitectNo : !LicenseType
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_LICENSE_TYPE"), "*"), /*#__PURE__*/React__default.createElement("div", {
    className: "form-pt-dropdown-only"
  }, data && /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioOrSelect, {
    t: t,
    optionKey: "i18nKey",
    isMandatory: config.isMandatory,
    options: getLicenseType() || {},
    selectedOption: LicenseType,
    onSelect: selectLicenseType
  })), LicenseType && (LicenseType === null || LicenseType === void 0 ? void 0 : LicenseType.i18nKey.includes("ARCHITECT")) && /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_COUNCIL_NUMBER") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    t: t,
    type: "text",
    isMandatory: false,
    optionKey: "i18nKey",
    name: "ArchitectNo",
    value: ArchitectNo,
    onChange: selectArchitectNo
  })))));
};

var LicenseDetails = function LicenseDetails(_ref) {
  var _userInfo$info, _formData$LicneseDeta, _formData$formData, _formData$formData$Li, _formData$LicneseDeta2, _formData$formData2, _formData$formData2$L, _formData$LicneseDeta3, _formData$formData3, _formData$formData3$L, _userInfo$info2, _formData$LicneseDeta4, _formData$formData4, _formData$formData4$L, _formData$LicneseDeta5, _formData$formData5, _formData$formData5$L, _React$createElement;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var _useLocation = reactRouterDom.useLocation();
  var userInfo = Digit.UserService.getUser();
  var validation = {};
  var isOpenLinkFlow = window.location.href.includes("openlink");
  var _useState = React.useState((!isOpenLinkFlow ? userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.name : "") || (formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta = formData.LicneseDetails) === null || _formData$LicneseDeta === void 0 ? void 0 : _formData$LicneseDeta.name) || (formData === null || formData === void 0 ? void 0 : (_formData$formData = formData.formData) === null || _formData$formData === void 0 ? void 0 : (_formData$formData$Li = _formData$formData.LicneseDetails) === null || _formData$formData$Li === void 0 ? void 0 : _formData$formData$Li.name) || ""),
    name = _useState[0],
    setName = _useState[1];
  var _useState2 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta2 = formData.LicneseDetails) === null || _formData$LicneseDeta2 === void 0 ? void 0 : _formData$LicneseDeta2.email) || (formData === null || formData === void 0 ? void 0 : (_formData$formData2 = formData.formData) === null || _formData$formData2 === void 0 ? void 0 : (_formData$formData2$L = _formData$formData2.LicneseDetails) === null || _formData$formData2$L === void 0 ? void 0 : _formData$formData2$L.email) || ""),
    email = _useState2[0],
    setEmail = _useState2[1];
  var _useState3 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta3 = formData.LicneseDetails) === null || _formData$LicneseDeta3 === void 0 ? void 0 : _formData$LicneseDeta3.gender) || (formData === null || formData === void 0 ? void 0 : (_formData$formData3 = formData.formData) === null || _formData$formData3 === void 0 ? void 0 : (_formData$formData3$L = _formData$formData3.LicneseDetails) === null || _formData$formData3$L === void 0 ? void 0 : _formData$formData3$L.gender)),
    gender = _useState3[0],
    setGender = _useState3[1];
  var _useState4 = React.useState((!isOpenLinkFlow ? userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info2 = userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.mobileNumber : "") || (formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta4 = formData.LicneseDetails) === null || _formData$LicneseDeta4 === void 0 ? void 0 : _formData$LicneseDeta4.mobileNumber) || (formData === null || formData === void 0 ? void 0 : (_formData$formData4 = formData.formData) === null || _formData$formData4 === void 0 ? void 0 : (_formData$formData4$L = _formData$formData4.LicneseDetails) === null || _formData$formData4$L === void 0 ? void 0 : _formData$formData4$L.mobileNumber) || ""),
    mobileNumber = _useState4[0],
    setMobileNumber = _useState4[1];
  var _useState5 = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta5 = formData.LicneseDetails) === null || _formData$LicneseDeta5 === void 0 ? void 0 : _formData$LicneseDeta5.PanNumber) || (formData === null || formData === void 0 ? void 0 : (_formData$formData5 = formData.formData) === null || _formData$formData5 === void 0 ? void 0 : (_formData$formData5$L = _formData$formData5.LicneseDetails) === null || _formData$formData5$L === void 0 ? void 0 : _formData$formData5$L.PanNumber) || ""),
    PanNumber = _useState5[0],
    setPanNumber = _useState5[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  if (isOpenLinkFlow) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["GenderType"]),
    isLoading = _Digit$Hooks$obps$use.isLoading,
    genderTypeData = _Digit$Hooks$obps$use.data;
  var menu = [];
  genderTypeData && genderTypeData["common-masters"].GenderType.filter(function (data) {
    return data.active;
  }).map(function (genderDetails) {
    menu.push({
      i18nKey: "COMMON_GENDER_" + genderDetails.code,
      code: "" + genderDetails.code,
      value: "" + genderDetails.code
    });
  });

  function SelectName(e) {
    setName(e.target.value);
  }
  function selectEmail(e) {
    setEmail(e.target.value);
  }
  function setGenderName(value) {
    setGender(value);
  }
  function setMobileNo(e) {
    setMobileNumber(e.target.value);
  }
  function selectPanNumber(e) {
    setPanNumber(e.target.value);
  }
  var goNext = function goNext() {
    var _formData$result, _formData$result$Lice;
    if (!(formData !== null && formData !== void 0 && formData.result && formData !== null && formData !== void 0 && (_formData$result = formData.result) !== null && _formData$result !== void 0 && (_formData$result$Lice = _formData$result.Licenses[0]) !== null && _formData$result$Lice !== void 0 && _formData$result$Lice.id)) {
      var licenseDet = {
        name: name,
        mobileNumber: mobileNumber,
        gender: gender,
        email: email,
        PanNumber: PanNumber
      };
      onSelect(config.key, licenseDet);
    } else {
      var data = formData === null || formData === void 0 ? void 0 : formData.formData;
      data.LicneseDetails.name = name;
      data.LicneseDetails.mobileNumber = mobileNumber;
      data.LicneseDetails.gender = gender;
      data.LicneseDetails.email = email;
      data.LicneseDetails.PanNumber = PanNumber;
      onSelect("", formData);
    }
  };
  var onSkip = function onSkip() {
    return onSelect();
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: isOpenLinkFlow ? "OpenlinkContainer" : ""
  }, isOpenLinkFlow && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 1,
    flow: "STAKEHOLDER"
  }), !isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    t: t,
    isDisabled: !name || !mobileNumber || !gender
  }, /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_APPLICANT_NAME_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, _extends({
    t: t,
    type: "text",
    isMandatory: false,
    optionKey: "i18nKey",
    name: "name",
    value: name,
    onChange: SelectName,
    disable: name && !isOpenLinkFlow ? true : false
  }, validation = {
    isRequired: true,
    pattern: "^[a-zA-Z-.`' ]*$",
    type: "text",
    title: t("PT_NAME_ERROR_MESSAGE")
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_APPLICANT_GENDER_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
    t: t,
    options: menu,
    optionsKey: "code",
    name: "gender",
    value: gender,
    selectedOption: gender,
    onSelect: setGenderName,
    isDependent: true,
    labelKey: "COMMON_GENDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_OWNER_MOBILE_NO_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.MobileNumber, {
    value: mobileNumber,
    name: "mobileNumber",
    onChange: function onChange(value) {
      return setMobileNo({
        target: {
          value: value
        }
      });
    },
    disable: mobileNumber && !isOpenLinkFlow ? true : false,
    required: true,
    pattern: "[6-9]{1}[0-9]{9}",
    type: "tel",
    title: t("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_APPLICANT_EMAIL_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, (_React$createElement = {
    t: t,
    type: "email",
    isMandatory: false,
    optionKey: "i18nKey",
    name: "email",
    value: email,
    onChange: selectEmail
    ,
    required: true,
    pattern: "[A-Za-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
  }, _React$createElement["type"] = "email", _React$createElement.title = t("CORE_COMMON_APPLICANT_MOBILE_NUMBER_INVALID"), _React$createElement)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("BPA_APPLICANT_PAN_NO")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
    t: t,
    type: "text",
    isMandatory: false,
    optionKey: "i18nKey",
    name: "PanNumber",
    value: PanNumber,
    onChange: selectPanNumber,
    required: true,
    pattern: "[A-Z]{5}[0-9]{4}[A-Z]{1}",
    title: t("BPA_INVALID_PAN_NO")
  }))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null)));
};

var CorrospondenceAddress = function CorrospondenceAddress(_ref) {
  var _formData$formData, _formData$formData2;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var onSkip = function onSkip() {
    return onSelect();
  };
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : formData.Correspondenceaddress) || (formData === null || formData === void 0 ? void 0 : (_formData$formData = formData.formData) === null || _formData$formData === void 0 ? void 0 : _formData$formData.Correspondenceaddress) || ""),
    Correspondenceaddress = _useState[0],
    setCorrespondenceaddress = _useState[1];
  var _useState2 = React.useState((formData === null || formData === void 0 ? void 0 : formData.isAddressSame) || (formData === null || formData === void 0 ? void 0 : (_formData$formData2 = formData.formData) === null || _formData$formData2 === void 0 ? void 0 : _formData$formData2.isAddressSame) || false),
    isAddressSame = _useState2[0],
    setisAddressSame = _useState2[1];
  var _useState3 = React.useState(null),
    error = _useState3[0],
    setError = _useState3[1];
  var _useState4 = React.useState(null),
    showToast = _useState4[0],
    setShowToast = _useState4[1];
  var _useState5 = React.useState(false),
    isDisableForNext = _useState5[0],
    setIsDisableForNext = _useState5[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var isopenlink = window.location.href.includes("/openlink/");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  if (isopenlink) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  function selectChecked(e) {
    if (isAddressSame == false) {
      var _formData$LicneseDeta, _formData$LicneseDeta2, _formData$formData3, _formData$formData3$L;
      setisAddressSame(true);
      setCorrespondenceaddress(formData !== null && formData !== void 0 && (_formData$LicneseDeta = formData.LicneseDetails) !== null && _formData$LicneseDeta !== void 0 && _formData$LicneseDeta.PermanentAddress ? formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta2 = formData.LicneseDetails) === null || _formData$LicneseDeta2 === void 0 ? void 0 : _formData$LicneseDeta2.PermanentAddress : formData === null || formData === void 0 ? void 0 : (_formData$formData3 = formData.formData) === null || _formData$formData3 === void 0 ? void 0 : (_formData$formData3$L = _formData$formData3.LicneseDetails) === null || _formData$formData3$L === void 0 ? void 0 : _formData$formData3$L.PermanentAddress);
    } else {
      Array.from(document.querySelectorAll("input")).forEach(function (input) {
        return input.value = "";
      });
      setisAddressSame(false);
      setCorrespondenceaddress("");
    }
  }
  function selectCorrespondenceaddress(e) {
    setCorrespondenceaddress(e.target.value);
  }
  var goNext = function goNext() {
    var _formData$result, _formData$result$Lice;
    if (!(formData !== null && formData !== void 0 && formData.result && formData !== null && formData !== void 0 && (_formData$result = formData.result) !== null && _formData$result !== void 0 && (_formData$result$Lice = _formData$result.Licenses[0]) !== null && _formData$result$Lice !== void 0 && _formData$result$Lice.id)) {
      var _formData$LicneseDeta3, _formData$LicneseDeta4, _formData$LicneseDeta5, _formData$LicneseDeta6, _formData$LicneseDeta7, _formData$LicneseDeta8, _formData$LicneseDeta9, _formData$LicneseType, _formData$LicneseType2, _formData$LicneseType3;
      setIsDisableForNext(true);
      var payload = {
        "Licenses": [{
          "tradeLicenseDetail": {
            "owners": [{
              "gender": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta3 = formData.LicneseDetails) === null || _formData$LicneseDeta3 === void 0 ? void 0 : (_formData$LicneseDeta4 = _formData$LicneseDeta3.gender) === null || _formData$LicneseDeta4 === void 0 ? void 0 : _formData$LicneseDeta4.code,
              "mobileNumber": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta5 = formData.LicneseDetails) === null || _formData$LicneseDeta5 === void 0 ? void 0 : _formData$LicneseDeta5.mobileNumber,
              "name": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta6 = formData.LicneseDetails) === null || _formData$LicneseDeta6 === void 0 ? void 0 : _formData$LicneseDeta6.name,
              "dob": null,
              "emailId": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta7 = formData.LicneseDetails) === null || _formData$LicneseDeta7 === void 0 ? void 0 : _formData$LicneseDeta7.email,
              "permanentAddress": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta8 = formData.LicneseDetails) === null || _formData$LicneseDeta8 === void 0 ? void 0 : _formData$LicneseDeta8.PermanentAddress,
              "correspondenceAddress": Correspondenceaddress,
              "pan": formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta9 = formData.LicneseDetails) === null || _formData$LicneseDeta9 === void 0 ? void 0 : _formData$LicneseDeta9.PanNumber
            }],

            "subOwnerShipCategory": "INDIVIDUAL",
            "tradeUnits": [{
              "tradeType": formData === null || formData === void 0 ? void 0 : (_formData$LicneseType = formData.LicneseType) === null || _formData$LicneseType === void 0 ? void 0 : (_formData$LicneseType2 = _formData$LicneseType.LicenseType) === null || _formData$LicneseType2 === void 0 ? void 0 : _formData$LicneseType2.tradeType
            }],
            "additionalDetail": {
              "counsilForArchNo": formData === null || formData === void 0 ? void 0 : (_formData$LicneseType3 = formData.LicneseType) === null || _formData$LicneseType3 === void 0 ? void 0 : _formData$LicneseType3.ArchitectNo
            },
            "address": {
              "city": "",
              "landmark": "",
              "pincode": ""
            },
            "institution": null,
            "applicationDocuments": null
          },
          "licenseType": "PERMANENT",
          "businessService": "BPAREG",
          "tenantId": stateId,
          "action": "NOWORKFLOW"
        }]
      };
      Digit.OBPSService.BPAREGCreate(payload, tenantId).then(function (result, err) {
        setIsDisableForNext(false);
        var data = {
          result: result,
          formData: formData,
          Correspondenceaddress: Correspondenceaddress,
          isAddressSame: isAddressSame
        };
        onSelect("", data, "", true);
      }).catch(function (e) {
        var _e$response, _e$response$data, _e$response$data$Erro;
        setIsDisableForNext(false);
        setShowToast({
          key: "error"
        });
        setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : (_e$response$data$Erro = _e$response$data.Errors[0]) === null || _e$response$data$Erro === void 0 ? void 0 : _e$response$data$Erro.message) || null);
      });
    } else {
      formData.Correspondenceaddress = Correspondenceaddress;
      formData.isAddressSame = isAddressSame;
      onSelect("", formData, "", true);
    }
  };

  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, isopenlink && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2,
    flow: "STAKEHOLDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    t: t,
    isDisabled: isDisableForNext
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
    label: t("BPA_SAME_AS_PERMANENT_ADDRESS"),
    onChange: function onChange(e) {
      return selectChecked();
    }
    ,
    checked: isAddressSame,
    style: {
      paddingBottom: "10px",
      paddingTop: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, "" + t("BPA_APPLICANT_CORRESPONDENCE_ADDRESS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextArea, {
    t: t,
    isMandatory: false,
    type: "text",
    optionKey: "i18nKey",
    name: "Correspondenceaddress",
    onChange: selectCorrespondenceaddress,
    value: Correspondenceaddress,
    disable: isAddressSame
  }))), /*#__PURE__*/React__default.createElement("div", {
    style: {
      disabled: "true",
      height: "30px",
      width: "100%",
      fontSize: "14px"
    }
  }), showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? true : false,
    label: error,
    isDleteBtn: true,
    onClose: function onClose() {
      setShowToast(null);
      setError(null);
    }
  }));
};

var PermanentAddress = function PermanentAddress(_ref) {
  var _formData$LicneseDeta, _formData$formData, _formData$formData$Li;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var onSkip = function onSkip() {
    return onSelect();
  };
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta = formData.LicneseDetails) === null || _formData$LicneseDeta === void 0 ? void 0 : _formData$LicneseDeta.PermanentAddress) || (formData === null || formData === void 0 ? void 0 : (_formData$formData = formData.formData) === null || _formData$formData === void 0 ? void 0 : (_formData$formData$Li = _formData$formData.LicneseDetails) === null || _formData$formData$Li === void 0 ? void 0 : _formData$formData$Li.PermanentAddress)),
    PermanentAddress = _useState[0],
    setPermanentAddress = _useState[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var isopenlink = window.location.href.includes("/openlink/");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;

  if (isopenlink) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  function selectPermanentAddress(e) {
    setPermanentAddress(e.target.value);
  }
  var goNext = function goNext() {
    var _formData$result, _formData$result$Lice;
    if (!(formData !== null && formData !== void 0 && formData.result && formData !== null && formData !== void 0 && (_formData$result = formData.result) !== null && _formData$result !== void 0 && (_formData$result$Lice = _formData$result.Licenses[0]) !== null && _formData$result$Lice !== void 0 && _formData$result$Lice.id)) onSelect(config.key, {
      PermanentAddress: PermanentAddress
    });else {
      var data = formData === null || formData === void 0 ? void 0 : formData.formData;
      data.LicneseDetails.PermanentAddress = PermanentAddress;
      onSelect("", formData);
    }
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, isopenlink && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 2,
    flow: "STAKEHOLDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    config: config,
    onSelect: goNext,
    onSkip: onSkip,
    t: t,
    isDisabled: !PermanentAddress
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, null, t("BPA_PERMANANT_ADDRESS_LABEL") + "*"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextArea, {
    t: t,
    isMandatory: false,
    type: "text",
    optionKey: "i18nKey",
    name: "PermanentAddress",
    onChange: selectPermanentAddress,
    value: PermanentAddress
  }))));
};

var StakeholderDocuments = function StakeholderDocuments(_ref) {
  var _formData$documents, _formData$result, _formData$result$Lice, _formData$result$Lice2;
  var t = _ref.t,
    config = _ref.config,
    onSelect = _ref.onSelect,
    formData = _ref.formData;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : _formData$documents.documents) || []),
    documents = _useState[0],
    setDocuments = _useState[1];
  var _useState2 = React.useState(null),
    error = _useState2[0],
    setError = _useState2[1];
  var _useState3 = React.useState([]),
    bpaTaxDocuments = _useState3[0],
    setBpaTaxDocuments = _useState3[1];
  var _useState4 = React.useState(true),
    enableSubmit = _useState4[0],
    setEnableSubmit = _useState4[1];
  var _useState5 = React.useState(false),
    checkRequiredFields = _useState5[0],
    setCheckRequiredFields = _useState5[1];
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  var isopenlink = window.location.href.includes("/openlink/");
  if (isopenlink) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "StakeholderRegistraition", "TradeTypetoRoleMapping"),
    data = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  React.useEffect(function () {
    var _data$StakeholderRegi, _filtredBpaDocs, _filtredBpaDocs$, _filtredBpaDocs$$docT;
    var filtredBpaDocs = [];
    if (data !== null && data !== void 0 && (_data$StakeholderRegi = data.StakeholderRegistraition) !== null && _data$StakeholderRegi !== void 0 && _data$StakeholderRegi.TradeTypetoRoleMapping) {
      var _data$StakeholderRegi2, _data$StakeholderRegi3;
      filtredBpaDocs = data === null || data === void 0 ? void 0 : (_data$StakeholderRegi2 = data.StakeholderRegistraition) === null || _data$StakeholderRegi2 === void 0 ? void 0 : (_data$StakeholderRegi3 = _data$StakeholderRegi2.TradeTypetoRoleMapping) === null || _data$StakeholderRegi3 === void 0 ? void 0 : _data$StakeholderRegi3.filter(function (ob) {
        var _formData$formData, _formData$formData$Li, _formData$formData$Li2;
        return ob.tradeType === (formData === null || formData === void 0 ? void 0 : (_formData$formData = formData.formData) === null || _formData$formData === void 0 ? void 0 : (_formData$formData$Li = _formData$formData.LicneseType) === null || _formData$formData$Li === void 0 ? void 0 : (_formData$formData$Li2 = _formData$formData$Li.LicenseType) === null || _formData$formData$Li2 === void 0 ? void 0 : _formData$formData$Li2.tradeType);
      });
    }
    var documentsList = [];
    (_filtredBpaDocs = filtredBpaDocs) === null || _filtredBpaDocs === void 0 ? void 0 : (_filtredBpaDocs$ = _filtredBpaDocs[0]) === null || _filtredBpaDocs$ === void 0 ? void 0 : (_filtredBpaDocs$$docT = _filtredBpaDocs$.docTypes) === null || _filtredBpaDocs$$docT === void 0 ? void 0 : _filtredBpaDocs$$docT.forEach(function (doc) {
      documentsList.push(doc);
    });
    setBpaTaxDocuments(documentsList);
  }, [!isLoading]);
  var handleSubmit = function handleSubmit() {
    var document = formData.documents;
    var documentStep;
    var regularDocs = [];
    bpaTaxDocuments && documents && documents !== null && bpaTaxDocuments.map(function (initialob, index) {
      var docobject = documents.find(function (ob) {
        return ob && ob !== null && ob.documentType === initialob.code;
      });
      if (docobject) regularDocs.push(docobject);
    });
    documentStep = _extends({}, document, {
      documents: regularDocs
    });
    onSelect(config.key, documentStep);
  };
  var onSkip = function onSkip() {
    return onSelect();
  };
  function onAdd() {}
  React.useEffect(function () {
    var count = 0;
    bpaTaxDocuments.map(function (doc) {
      var isRequired = false;
      documents.map(function (data) {
        if (doc.required && data !== null && data && doc.code == data.documentType.split('.')[0] + "." + data.documentType.split('.')[1]) {
          isRequired = true;
        }
      });
      if (!isRequired && doc.required) {
        count = count + 1;
      }
    });
    if ((count == "0" || count == 0) && documents.length > 0) setEnableSubmit(false);else setEnableSubmit(true);
  }, [documents, checkRequiredFields]);
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, isopenlink && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 3,
    flow: "STAKEHOLDER"
  }), !isLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormStep, {
    t: t,
    config: config,
    onSelect: handleSubmit,
    onSkip: onSkip,
    isDisabled: enableSubmit,
    onAdd: onAdd,
    cardStyle: {
      paddingRight: "16px"
    }
  }, bpaTaxDocuments === null || bpaTaxDocuments === void 0 ? void 0 : bpaTaxDocuments.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement(SelectDocument$2, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields,
      isCitizenUrl: isCitizenUrl
    });
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    isDleteBtn: true,
    onClose: function onClose() {
      return setError(null);
    },
    error: true
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), !(formData !== null && formData !== void 0 && formData.initiationFlow) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
    info: t("CS_FILE_APPLICATION_INFO_LABEL"),
    text: t("BPA_APPLICATION_NUMBER_LABEL") + " " + (formData === null || formData === void 0 ? void 0 : (_formData$result = formData.result) === null || _formData$result === void 0 ? void 0 : (_formData$result$Lice = _formData$result.Licenses) === null || _formData$result$Lice === void 0 ? void 0 : (_formData$result$Lice2 = _formData$result$Lice[0]) === null || _formData$result$Lice2 === void 0 ? void 0 : _formData$result$Lice2.applicationNumber) + " " + t("BPA_DOCS_INFORMATION"),
    className: "info-banner-wrap-citizen-override"
  })))
  ;
};

function SelectDocument$2(_ref2) {
  var _doc$dropdownData, _doc$code, _doc$code2;
  var t = _ref2.t,
    doc = _ref2.document,
    setDocuments = _ref2.setDocuments,
    error = _ref2.error,
    setError = _ref2.setError,
    documents = _ref2.documents,
    setCheckRequiredFields = _ref2.setCheckRequiredFields;
  var filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState6 = React.useState(filteredDocument ? _extends({}, filteredDocument, {
      active: true,
      code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
      i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
    }) : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {});
  var _useState7 = React.useState(null),
    file = _useState7[0],
    setFile = _useState7[1];
  var _useState8 = React.useState(function () {
      return (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null;
    }),
    uploadedFile = _useState8[0],
    setUploadedFile = _useState8[1];
  function selectfile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    setDocuments(function (prev) {
      var filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
        return (item === null || item === void 0 ? void 0 : item.documentType) !== (doc === null || doc === void 0 ? void 0 : doc.code);
      });
      if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) {
        return filteredDocumentsByDocumentType;
      }
      var filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(function (item) {
        return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile;
      });
      return [].concat(filteredDocumentsByFileStoreId, [{
        documentType: doc === null || doc === void 0 ? void 0 : doc.code,
        fileStoreId: uploadedFile,
        documentUid: uploadedFile,
        fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
        info: (doc === null || doc === void 0 ? void 0 : doc.info) || ""
      }]);
    });
  }, [uploadedFile, file]);
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      setUploadedFile(null);
                      return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0])).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginBottom: "10px"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t("BPAREG_HEADER_" + (doc === null || doc === void 0 ? void 0 : (_doc$code = doc.code) === null || _doc$code === void 0 ? void 0 : _doc$code.replace('.', '_'))) + " *" : "" + t("BPAREG_HEADER_" + (doc === null || doc === void 0 ? void 0 : (_doc$code2 = doc.code) === null || _doc$code2 === void 0 ? void 0 : _doc$code2.replace('.', '_')))), doc !== null && doc !== void 0 && doc.info ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      fontSize: "12px",
      color: "#505A5F",
      fontWeight: 400,
      lineHeight: "15px",
      marginBottom: "10px"
    }
  }, "" + t(doc === null || doc === void 0 ? void 0 : doc.info)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
    extraStyleName: "OBPS",
    accept: "image/*, .pdf, .png, .jpeg, .jpg",
    onUpload: selectfile,
    onDelete: function onDelete() {
      setUploadedFile(null);
      setCheckRequiredFields(true);
    },
    message: uploadedFile ? "1 " + t("CS_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
    iserror: error
  }));
}

var StakeholderResponse = function StakeholderResponse(props) {
  var _state$data, _state$data$Licenses, _bparegData$tradeLice, _bparegData$tradeLice2, _bparegData$tradeLice3, _bparegData$tradeLice4;
  var state = props.location.state;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var bparegData = state === null || state === void 0 ? void 0 : (_state$data = state.data) === null || _state$data === void 0 ? void 0 : (_state$data$Licenses = _state$data.Licenses) === null || _state$data$Licenses === void 0 ? void 0 : _state$data$Licenses[0];
  var typeofStakeholder = bparegData === null || bparegData === void 0 ? void 0 : (_bparegData$tradeLice = bparegData.tradeLicenseDetail) === null || _bparegData$tradeLice === void 0 ? void 0 : (_bparegData$tradeLice2 = _bparegData$tradeLice.tradeUnits) === null || _bparegData$tradeLice2 === void 0 ? void 0 : (_bparegData$tradeLice3 = _bparegData$tradeLice2[0]) === null || _bparegData$tradeLice3 === void 0 ? void 0 : (_bparegData$tradeLice4 = _bparegData$tradeLice3.tradeType) === null || _bparegData$tradeLice4 === void 0 ? void 0 : _bparegData$tradeLice4.split('.')[0];
  var getHeaderMessage = function getHeaderMessage() {
    return t("BPA_ARCHITECT_" + (bparegData === null || bparegData === void 0 ? void 0 : bparegData.status) + "_MAIN_HEAD");
  };
  var getSubHeaderMessage = function getSubHeaderMessage() {
    return t("BPA_ARCHITECT_" + (bparegData === null || bparegData === void 0 ? void 0 : bparegData.status) + "_SUB_MAIN_HEAD");
  };
  var onSubmit = function onSubmit() {
    history.push("/digit-ui/employee");
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: getHeaderMessage(),
    applicationNumber: bparegData === null || bparegData === void 0 ? void 0 : bparegData.applicationNumber,
    info: t("BPA_NEW_STAKEHOLDER_REGISTRATION_APP_LABEL"),
    successful: (bparegData === null || bparegData === void 0 ? void 0 : bparegData.status) == "REJECTED" ? false : true,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      paddingBottom: "10px",
      marginBottom: "10px"
    }
  }, getSubHeaderMessage()), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: {
      display: "flex",
      justifyContent: "flex-end",
      alignItems: "baseline"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME"),
    onSubmit: onSubmit
  }))));
};

var OBPSBreadCrumbs = function OBPSBreadCrumbs(_ref) {
  var location = _ref.location;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var crumbs = [{
    path: "/digit-ui/employee",
    content: t("ES_COMMON_HOME"),
    show: true
  }, {
    path: "/digit-ui/employee/obps/inbox",
    content: t("ES_COMMON_OBPS_INBOX_LABEL"),
    show: location.pathname.includes("obps/inbox") ? true : false
  }, {
    path: "/digit-ui/employee/obps/stakeholder-inbox",
    content: t("ES_COMMON_STAKEHOLDER_INBOX_LABEL"),
    show: location.pathname.includes("obps/stakeholder-inbox") ? true : false
  }, {
    path: "/digit-ui/employee/obps/inbox/bpa/:id",
    content: t("ES_OBPS_SEARCH_BPA"),
    show: location.pathname.includes("obps/inbox/bpa") ? true : false
  }, {
    path: "/digit-ui/employee/obps/inbox/stakeholder/:id",
    content: t("ES_OBPS_SEARCH_BPA"),
    show: location.pathname.includes("obps/stakeholder-inbox/stakeholder") ? true : false
  }, {
    path: "/digit-ui/employee/obps/search/application",
    content: t("ES_OBPS_SEARCH"),
    show: location.pathname.includes("/obps/search/application") ? true : false
  }, {
    path: "/digit-ui/employee/obps/search/application/bpa/:id",
    content: t("ES_OBPS_SEARCH_BPA"),
    show: location.pathname.includes("/obps/search/application/bpa") ? true : false
  }, {
    path: "/digit-ui/employee/obps/search/application/stakeholder/:id",
    content: t("ES_OBPS_SEARCH_BPA"),
    show: location.pathname.includes("/obps/search/application/stakeholder/") ? true : false
  }];
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreadCrumb, {
    crumbs: crumbs
  });
};
var EmployeeApp = function EmployeeApp(_ref2) {
  var path = _ref2.path;
  var location = reactRouterDom.useLocation();
  var _useTranslation2 = reactI18next.useTranslation(),
    t = _useTranslation2.t;
  var Inbox = Digit.ComponentRegistryService.getComponent("BPAInbox");
  var StakeholderInbox = Digit.ComponentRegistryService.getComponent("StakeholderInbox");
  var ApplicationDetail = Digit.ComponentRegistryService.getComponent("ObpsEmpApplicationDetail");
  var BpaApplicationDetail = Digit.ComponentRegistryService.getComponent("ObpsEmployeeBpaApplicationDetail");
  var isLocation = window.location.href.includes("bpa") || window.location.href.includes("stakeholder-inbox/stakeholder") || window.location.href.includes("application");
  var isFromNoc = window.location.href.includes("digit-ui/employee/obps/bpa/");
  var isRes = window.location.href.includes("obps/response") || window.location.href.includes("obps/stakeholder-response");
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, !isFromNoc && !isRes ? /*#__PURE__*/React__default.createElement("div", {
    style: isLocation ? {
      marginLeft: "10px"
    } : {}
  }, /*#__PURE__*/React__default.createElement(OBPSBreadCrumbs, {
    location: location
  })) : null, isFromNoc ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none",
      margin: "0",
      padding: "0"
    }
  }, t("CS_COMMON_BACK")) : null, /*#__PURE__*/React__default.createElement(reactRouterDom.Switch, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/stakeholder-inbox/stakeholder/:id",
    component: ApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/search/application/stakeholder/:id",
    component: ApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/search/application/bpa/:id",
    component: BpaApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/search/application",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(Search, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/inbox/bpa/:id",
    component: BpaApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/inbox",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(Inbox, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/stakeholder-inbox",
    component: function component(props) {
      return /*#__PURE__*/React__default.createElement(StakeholderInbox, _extends({}, props, {
        parentRoute: path
      }));
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/bpa/:id",
    component: BpaApplicationDetail
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/response",
    component: OBPSResponse
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.PrivateRoute, {
    path: path + "/stakeholder-response",
    component: StakeholderResponse
  })));
};

var lodash = createCommonjsModule(function (module, exports) {
  (function () {
    var undefined$1;

    var VERSION = '4.17.21';

    var LARGE_ARRAY_SIZE = 200;

    var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',
      FUNC_ERROR_TEXT = 'Expected a function',
      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';

    var HASH_UNDEFINED = '__lodash_hash_undefined__';

    var MAX_MEMOIZE_SIZE = 500;

    var PLACEHOLDER = '__lodash_placeholder__';

    var CLONE_DEEP_FLAG = 1,
      CLONE_FLAT_FLAG = 2,
      CLONE_SYMBOLS_FLAG = 4;

    var COMPARE_PARTIAL_FLAG = 1,
      COMPARE_UNORDERED_FLAG = 2;

    var WRAP_BIND_FLAG = 1,
      WRAP_BIND_KEY_FLAG = 2,
      WRAP_CURRY_BOUND_FLAG = 4,
      WRAP_CURRY_FLAG = 8,
      WRAP_CURRY_RIGHT_FLAG = 16,
      WRAP_PARTIAL_FLAG = 32,
      WRAP_PARTIAL_RIGHT_FLAG = 64,
      WRAP_ARY_FLAG = 128,
      WRAP_REARG_FLAG = 256,
      WRAP_FLIP_FLAG = 512;

    var DEFAULT_TRUNC_LENGTH = 30,
      DEFAULT_TRUNC_OMISSION = '...';

    var HOT_COUNT = 800,
      HOT_SPAN = 16;

    var LAZY_FILTER_FLAG = 1,
      LAZY_MAP_FLAG = 2,
      LAZY_WHILE_FLAG = 3;

    var INFINITY = 1 / 0,
      MAX_SAFE_INTEGER = 9007199254740991,
      MAX_INTEGER = 1.7976931348623157e+308,
      NAN = 0 / 0;

    var MAX_ARRAY_LENGTH = 4294967295,
      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,
      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

    var wrapFlags = [['ary', WRAP_ARY_FLAG], ['bind', WRAP_BIND_FLAG], ['bindKey', WRAP_BIND_KEY_FLAG], ['curry', WRAP_CURRY_FLAG], ['curryRight', WRAP_CURRY_RIGHT_FLAG], ['flip', WRAP_FLIP_FLAG], ['partial', WRAP_PARTIAL_FLAG], ['partialRight', WRAP_PARTIAL_RIGHT_FLAG], ['rearg', WRAP_REARG_FLAG]];

    var argsTag = '[object Arguments]',
      arrayTag = '[object Array]',
      asyncTag = '[object AsyncFunction]',
      boolTag = '[object Boolean]',
      dateTag = '[object Date]',
      domExcTag = '[object DOMException]',
      errorTag = '[object Error]',
      funcTag = '[object Function]',
      genTag = '[object GeneratorFunction]',
      mapTag = '[object Map]',
      numberTag = '[object Number]',
      nullTag = '[object Null]',
      objectTag = '[object Object]',
      promiseTag = '[object Promise]',
      proxyTag = '[object Proxy]',
      regexpTag = '[object RegExp]',
      setTag = '[object Set]',
      stringTag = '[object String]',
      symbolTag = '[object Symbol]',
      undefinedTag = '[object Undefined]',
      weakMapTag = '[object WeakMap]',
      weakSetTag = '[object WeakSet]';
    var arrayBufferTag = '[object ArrayBuffer]',
      dataViewTag = '[object DataView]',
      float32Tag = '[object Float32Array]',
      float64Tag = '[object Float64Array]',
      int8Tag = '[object Int8Array]',
      int16Tag = '[object Int16Array]',
      int32Tag = '[object Int32Array]',
      uint8Tag = '[object Uint8Array]',
      uint8ClampedTag = '[object Uint8ClampedArray]',
      uint16Tag = '[object Uint16Array]',
      uint32Tag = '[object Uint32Array]';

    var reEmptyStringLeading = /\b__p \+= '';/g,
      reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
      reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

    var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,
      reUnescapedHtml = /[&<>"']/g,
      reHasEscapedHtml = RegExp(reEscapedHtml.source),
      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

    var reEscape = /<%-([\s\S]+?)%>/g,
      reEvaluate = /<%([\s\S]+?)%>/g,
      reInterpolate = /<%=([\s\S]+?)%>/g;

    var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
      reIsPlainProp = /^\w*$/,
      rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

    var reRegExpChar = /[\\^$.*+?()[\]{}|]/g,
      reHasRegExpChar = RegExp(reRegExpChar.source);

    var reTrimStart = /^\s+/;

    var reWhitespace = /\s/;

    var reWrapComment = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
      reWrapDetails = /\{\n\/\* \[wrapped with (.+)\] \*/,
      reSplitDetails = /,? & /;

    var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;

    var reForbiddenIdentifierChars = /[()=,{}\[\]\/\s]/;

    var reEscapeChar = /\\(\\)?/g;

    var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

    var reFlags = /\w*$/;

    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

    var reIsBinary = /^0b[01]+$/i;

    var reIsHostCtor = /^\[object .+?Constructor\]$/;

    var reIsOctal = /^0o[0-7]+$/i;

    var reIsUint = /^(?:0|[1-9]\d*)$/;

    var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;

    var reNoMatch = /($^)/;

    var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

    var rsAstralRange = "\\ud800-\\udfff",
      rsComboMarksRange = "\\u0300-\\u036f",
      reComboHalfMarksRange = "\\ufe20-\\ufe2f",
      rsComboSymbolsRange = "\\u20d0-\\u20ff",
      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
      rsDingbatRange = "\\u2700-\\u27bf",
      rsLowerRange = 'a-z\\xdf-\\xf6\\xf8-\\xff',
      rsMathOpRange = '\\xac\\xb1\\xd7\\xf7',
      rsNonCharRange = '\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf',
      rsPunctuationRange = "\\u2000-\\u206f",
      rsSpaceRange = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
      rsUpperRange = 'A-Z\\xc0-\\xd6\\xd8-\\xde',
      rsVarRange = "\\ufe0e\\ufe0f",
      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;

    var rsApos = "['\u2019]",
      rsAstral = '[' + rsAstralRange + ']',
      rsBreak = '[' + rsBreakRange + ']',
      rsCombo = '[' + rsComboRange + ']',
      rsDigits = '\\d+',
      rsDingbat = '[' + rsDingbatRange + ']',
      rsLower = '[' + rsLowerRange + ']',
      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',
      rsFitz = "\\ud83c[\\udffb-\\udfff]",
      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
      rsNonAstral = '[^' + rsAstralRange + ']',
      rsRegional = "(?:\\ud83c[\\udde6-\\uddff]){2}",
      rsSurrPair = "[\\ud800-\\udbff][\\udc00-\\udfff]",
      rsUpper = '[' + rsUpperRange + ']',
      rsZWJ = "\\u200d";

    var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',
      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',
      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',
      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',
      reOptMod = rsModifier + '?',
      rsOptVar = '[' + rsVarRange + ']?',
      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
      rsOrdLower = '\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])',
      rsOrdUpper = '\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])',
      rsSeq = rsOptVar + reOptMod + rsOptJoin,
      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,
      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';

    var reApos = RegExp(rsApos, 'g');

    var reComboMark = RegExp(rsCombo, 'g');

    var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

    var reUnicodeWord = RegExp([rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')', rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')', rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower, rsUpper + '+' + rsOptContrUpper, rsOrdUpper, rsOrdLower, rsDigits, rsEmoji].join('|'), 'g');

    var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + ']');

    var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;

    var contextProps = ['Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array', 'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object', 'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array', 'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap', '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'];

    var templateCounter = -1;

    var typedArrayTags = {};
    typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
    typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

    var cloneableTags = {};
    cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
    cloneableTags[errorTag] = cloneableTags[funcTag] = cloneableTags[weakMapTag] = false;

    var deburredLetters = {
      '\xc0': 'A',
      '\xc1': 'A',
      '\xc2': 'A',
      '\xc3': 'A',
      '\xc4': 'A',
      '\xc5': 'A',
      '\xe0': 'a',
      '\xe1': 'a',
      '\xe2': 'a',
      '\xe3': 'a',
      '\xe4': 'a',
      '\xe5': 'a',
      '\xc7': 'C',
      '\xe7': 'c',
      '\xd0': 'D',
      '\xf0': 'd',
      '\xc8': 'E',
      '\xc9': 'E',
      '\xca': 'E',
      '\xcb': 'E',
      '\xe8': 'e',
      '\xe9': 'e',
      '\xea': 'e',
      '\xeb': 'e',
      '\xcc': 'I',
      '\xcd': 'I',
      '\xce': 'I',
      '\xcf': 'I',
      '\xec': 'i',
      '\xed': 'i',
      '\xee': 'i',
      '\xef': 'i',
      '\xd1': 'N',
      '\xf1': 'n',
      '\xd2': 'O',
      '\xd3': 'O',
      '\xd4': 'O',
      '\xd5': 'O',
      '\xd6': 'O',
      '\xd8': 'O',
      '\xf2': 'o',
      '\xf3': 'o',
      '\xf4': 'o',
      '\xf5': 'o',
      '\xf6': 'o',
      '\xf8': 'o',
      '\xd9': 'U',
      '\xda': 'U',
      '\xdb': 'U',
      '\xdc': 'U',
      '\xf9': 'u',
      '\xfa': 'u',
      '\xfb': 'u',
      '\xfc': 'u',
      '\xdd': 'Y',
      '\xfd': 'y',
      '\xff': 'y',
      '\xc6': 'Ae',
      '\xe6': 'ae',
      '\xde': 'Th',
      '\xfe': 'th',
      '\xdf': 'ss',
      "\u0100": 'A',
      "\u0102": 'A',
      "\u0104": 'A',
      "\u0101": 'a',
      "\u0103": 'a',
      "\u0105": 'a',
      "\u0106": 'C',
      "\u0108": 'C',
      "\u010A": 'C',
      "\u010C": 'C',
      "\u0107": 'c',
      "\u0109": 'c',
      "\u010B": 'c',
      "\u010D": 'c',
      "\u010E": 'D',
      "\u0110": 'D',
      "\u010F": 'd',
      "\u0111": 'd',
      "\u0112": 'E',
      "\u0114": 'E',
      "\u0116": 'E',
      "\u0118": 'E',
      "\u011A": 'E',
      "\u0113": 'e',
      "\u0115": 'e',
      "\u0117": 'e',
      "\u0119": 'e',
      "\u011B": 'e',
      "\u011C": 'G',
      "\u011E": 'G',
      "\u0120": 'G',
      "\u0122": 'G',
      "\u011D": 'g',
      "\u011F": 'g',
      "\u0121": 'g',
      "\u0123": 'g',
      "\u0124": 'H',
      "\u0126": 'H',
      "\u0125": 'h',
      "\u0127": 'h',
      "\u0128": 'I',
      "\u012A": 'I',
      "\u012C": 'I',
      "\u012E": 'I',
      "\u0130": 'I',
      "\u0129": 'i',
      "\u012B": 'i',
      "\u012D": 'i',
      "\u012F": 'i',
      "\u0131": 'i',
      "\u0134": 'J',
      "\u0135": 'j',
      "\u0136": 'K',
      "\u0137": 'k',
      "\u0138": 'k',
      "\u0139": 'L',
      "\u013B": 'L',
      "\u013D": 'L',
      "\u013F": 'L',
      "\u0141": 'L',
      "\u013A": 'l',
      "\u013C": 'l',
      "\u013E": 'l',
      "\u0140": 'l',
      "\u0142": 'l',
      "\u0143": 'N',
      "\u0145": 'N',
      "\u0147": 'N',
      "\u014A": 'N',
      "\u0144": 'n',
      "\u0146": 'n',
      "\u0148": 'n',
      "\u014B": 'n',
      "\u014C": 'O',
      "\u014E": 'O',
      "\u0150": 'O',
      "\u014D": 'o',
      "\u014F": 'o',
      "\u0151": 'o',
      "\u0154": 'R',
      "\u0156": 'R',
      "\u0158": 'R',
      "\u0155": 'r',
      "\u0157": 'r',
      "\u0159": 'r',
      "\u015A": 'S',
      "\u015C": 'S',
      "\u015E": 'S',
      "\u0160": 'S',
      "\u015B": 's',
      "\u015D": 's',
      "\u015F": 's',
      "\u0161": 's',
      "\u0162": 'T',
      "\u0164": 'T',
      "\u0166": 'T',
      "\u0163": 't',
      "\u0165": 't',
      "\u0167": 't',
      "\u0168": 'U',
      "\u016A": 'U',
      "\u016C": 'U',
      "\u016E": 'U',
      "\u0170": 'U',
      "\u0172": 'U',
      "\u0169": 'u',
      "\u016B": 'u',
      "\u016D": 'u',
      "\u016F": 'u',
      "\u0171": 'u',
      "\u0173": 'u',
      "\u0174": 'W',
      "\u0175": 'w',
      "\u0176": 'Y',
      "\u0177": 'y',
      "\u0178": 'Y',
      "\u0179": 'Z',
      "\u017B": 'Z',
      "\u017D": 'Z',
      "\u017A": 'z',
      "\u017C": 'z',
      "\u017E": 'z',
      "\u0132": 'IJ',
      "\u0133": 'ij',
      "\u0152": 'Oe',
      "\u0153": 'oe',
      "\u0149": "'n",
      "\u017F": 's'
    };

    var htmlEscapes = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };

    var htmlUnescapes = {
      '&amp;': '&',
      '&lt;': '<',
      '&gt;': '>',
      '&quot;': '"',
      '&#39;': "'"
    };

    var stringEscapes = {
      '\\': '\\',
      "'": "'",
      '\n': 'n',
      '\r': 'r',
      "\u2028": 'u2028',
      "\u2029": 'u2029'
    };

    var freeParseFloat = parseFloat,
      freeParseInt = parseInt;

    var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;

    var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

    var root = freeGlobal || freeSelf || Function('return this')();

    var freeExports =  exports && !exports.nodeType && exports;

    var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

    var moduleExports = freeModule && freeModule.exports === freeExports;

    var freeProcess = moduleExports && freeGlobal.process;

    var nodeUtil = function () {
      try {
        var types = freeModule && freeModule.require && freeModule.require('util').types;
        if (types) {
          return types;
        }

        return freeProcess && freeProcess.binding && freeProcess.binding('util');
      } catch (e) {}
    }();

    var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,
      nodeIsDate = nodeUtil && nodeUtil.isDate,
      nodeIsMap = nodeUtil && nodeUtil.isMap,
      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,
      nodeIsSet = nodeUtil && nodeUtil.isSet,
      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

    function apply(func, thisArg, args) {
      switch (args.length) {
        case 0:
          return func.call(thisArg);
        case 1:
          return func.call(thisArg, args[0]);
        case 2:
          return func.call(thisArg, args[0], args[1]);
        case 3:
          return func.call(thisArg, args[0], args[1], args[2]);
      }
      return func.apply(thisArg, args);
    }

    function arrayAggregator(array, setter, iteratee, accumulator) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        var value = array[index];
        setter(accumulator, value, iteratee(value), array);
      }
      return accumulator;
    }

    function arrayEach(array, iteratee) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (iteratee(array[index], index, array) === false) {
          break;
        }
      }
      return array;
    }

    function arrayEachRight(array, iteratee) {
      var length = array == null ? 0 : array.length;
      while (length--) {
        if (iteratee(array[length], length, array) === false) {
          break;
        }
      }
      return array;
    }

    function arrayEvery(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (!predicate(array[index], index, array)) {
          return false;
        }
      }
      return true;
    }

    function arrayFilter(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length,
        resIndex = 0,
        result = [];
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[resIndex++] = value;
        }
      }
      return result;
    }

    function arrayIncludes(array, value) {
      var length = array == null ? 0 : array.length;
      return !!length && baseIndexOf(array, value, 0) > -1;
    }

    function arrayIncludesWith(array, value, comparator) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (comparator(value, array[index])) {
          return true;
        }
      }
      return false;
    }

    function arrayMap(array, iteratee) {
      var index = -1,
        length = array == null ? 0 : array.length,
        result = Array(length);
      while (++index < length) {
        result[index] = iteratee(array[index], index, array);
      }
      return result;
    }

    function arrayPush(array, values) {
      var index = -1,
        length = values.length,
        offset = array.length;
      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }

    function arrayReduce(array, iteratee, accumulator, initAccum) {
      var index = -1,
        length = array == null ? 0 : array.length;
      if (initAccum && length) {
        accumulator = array[++index];
      }
      while (++index < length) {
        accumulator = iteratee(accumulator, array[index], index, array);
      }
      return accumulator;
    }

    function arrayReduceRight(array, iteratee, accumulator, initAccum) {
      var length = array == null ? 0 : array.length;
      if (initAccum && length) {
        accumulator = array[--length];
      }
      while (length--) {
        accumulator = iteratee(accumulator, array[length], length, array);
      }
      return accumulator;
    }

    function arraySome(array, predicate) {
      var index = -1,
        length = array == null ? 0 : array.length;
      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }

    var asciiSize = baseProperty('length');

    function asciiToArray(string) {
      return string.split('');
    }

    function asciiWords(string) {
      return string.match(reAsciiWord) || [];
    }

    function baseFindKey(collection, predicate, eachFunc) {
      var result;
      eachFunc(collection, function (value, key, collection) {
        if (predicate(value, key, collection)) {
          result = key;
          return false;
        }
      });
      return result;
    }

    function baseFindIndex(array, predicate, fromIndex, fromRight) {
      var length = array.length,
        index = fromIndex + (fromRight ? 1 : -1);
      while (fromRight ? index-- : ++index < length) {
        if (predicate(array[index], index, array)) {
          return index;
        }
      }
      return -1;
    }

    function baseIndexOf(array, value, fromIndex) {
      return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
    }

    function baseIndexOfWith(array, value, fromIndex, comparator) {
      var index = fromIndex - 1,
        length = array.length;
      while (++index < length) {
        if (comparator(array[index], value)) {
          return index;
        }
      }
      return -1;
    }

    function baseIsNaN(value) {
      return value !== value;
    }

    function baseMean(array, iteratee) {
      var length = array == null ? 0 : array.length;
      return length ? baseSum(array, iteratee) / length : NAN;
    }

    function baseProperty(key) {
      return function (object) {
        return object == null ? undefined$1 : object[key];
      };
    }

    function basePropertyOf(object) {
      return function (key) {
        return object == null ? undefined$1 : object[key];
      };
    }

    function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
      eachFunc(collection, function (value, index, collection) {
        accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index, collection);
      });
      return accumulator;
    }

    function baseSortBy(array, comparer) {
      var length = array.length;
      array.sort(comparer);
      while (length--) {
        array[length] = array[length].value;
      }
      return array;
    }

    function baseSum(array, iteratee) {
      var result,
        index = -1,
        length = array.length;
      while (++index < length) {
        var current = iteratee(array[index]);
        if (current !== undefined$1) {
          result = result === undefined$1 ? current : result + current;
        }
      }
      return result;
    }

    function baseTimes(n, iteratee) {
      var index = -1,
        result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }

    function baseToPairs(object, props) {
      return arrayMap(props, function (key) {
        return [key, object[key]];
      });
    }

    function baseTrim(string) {
      return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '') : string;
    }

    function baseUnary(func) {
      return function (value) {
        return func(value);
      };
    }

    function baseValues(object, props) {
      return arrayMap(props, function (key) {
        return object[key];
      });
    }

    function cacheHas(cache, key) {
      return cache.has(key);
    }

    function charsStartIndex(strSymbols, chrSymbols) {
      var index = -1,
        length = strSymbols.length;
      while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
      return index;
    }

    function charsEndIndex(strSymbols, chrSymbols) {
      var index = strSymbols.length;
      while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}
      return index;
    }

    function countHolders(array, placeholder) {
      var length = array.length,
        result = 0;
      while (length--) {
        if (array[length] === placeholder) {
          ++result;
        }
      }
      return result;
    }

    var deburrLetter = basePropertyOf(deburredLetters);

    var escapeHtmlChar = basePropertyOf(htmlEscapes);

    function escapeStringChar(chr) {
      return '\\' + stringEscapes[chr];
    }

    function getValue(object, key) {
      return object == null ? undefined$1 : object[key];
    }

    function hasUnicode(string) {
      return reHasUnicode.test(string);
    }

    function hasUnicodeWord(string) {
      return reHasUnicodeWord.test(string);
    }

    function iteratorToArray(iterator) {
      var data,
        result = [];
      while (!(data = iterator.next()).done) {
        result.push(data.value);
      }
      return result;
    }

    function mapToArray(map) {
      var index = -1,
        result = Array(map.size);
      map.forEach(function (value, key) {
        result[++index] = [key, value];
      });
      return result;
    }

    function overArg(func, transform) {
      return function (arg) {
        return func(transform(arg));
      };
    }

    function replaceHolders(array, placeholder) {
      var index = -1,
        length = array.length,
        resIndex = 0,
        result = [];
      while (++index < length) {
        var value = array[index];
        if (value === placeholder || value === PLACEHOLDER) {
          array[index] = PLACEHOLDER;
          result[resIndex++] = index;
        }
      }
      return result;
    }

    function setToArray(set) {
      var index = -1,
        result = Array(set.size);
      set.forEach(function (value) {
        result[++index] = value;
      });
      return result;
    }

    function setToPairs(set) {
      var index = -1,
        result = Array(set.size);
      set.forEach(function (value) {
        result[++index] = [value, value];
      });
      return result;
    }

    function strictIndexOf(array, value, fromIndex) {
      var index = fromIndex - 1,
        length = array.length;
      while (++index < length) {
        if (array[index] === value) {
          return index;
        }
      }
      return -1;
    }

    function strictLastIndexOf(array, value, fromIndex) {
      var index = fromIndex + 1;
      while (index--) {
        if (array[index] === value) {
          return index;
        }
      }
      return index;
    }

    function stringSize(string) {
      return hasUnicode(string) ? unicodeSize(string) : asciiSize(string);
    }

    function stringToArray(string) {
      return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);
    }

    function trimmedEndIndex(string) {
      var index = string.length;
      while (index-- && reWhitespace.test(string.charAt(index))) {}
      return index;
    }

    var unescapeHtmlChar = basePropertyOf(htmlUnescapes);

    function unicodeSize(string) {
      var result = reUnicode.lastIndex = 0;
      while (reUnicode.test(string)) {
        ++result;
      }
      return result;
    }

    function unicodeToArray(string) {
      return string.match(reUnicode) || [];
    }

    function unicodeWords(string) {
      return string.match(reUnicodeWord) || [];
    }

    var runInContext = function runInContext(context) {
      context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));

      var Array = context.Array,
        Date = context.Date,
        Error = context.Error,
        Function = context.Function,
        Math = context.Math,
        Object = context.Object,
        RegExp = context.RegExp,
        String = context.String,
        TypeError = context.TypeError;

      var arrayProto = Array.prototype,
        funcProto = Function.prototype,
        objectProto = Object.prototype;

      var coreJsData = context['__core-js_shared__'];

      var funcToString = funcProto.toString;

      var hasOwnProperty = objectProto.hasOwnProperty;

      var idCounter = 0;

      var maskSrcKey = function () {
        var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
        return uid ? 'Symbol(src)_1.' + uid : '';
      }();

      var nativeObjectToString = objectProto.toString;

      var objectCtorString = funcToString.call(Object);

      var oldDash = root._;

      var reIsNative = RegExp('^' + funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');

      var Buffer = moduleExports ? context.Buffer : undefined$1,
        Symbol = context.Symbol,
        Uint8Array = context.Uint8Array,
        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined$1,
        getPrototype = overArg(Object.getPrototypeOf, Object),
        objectCreate = Object.create,
        propertyIsEnumerable = objectProto.propertyIsEnumerable,
        splice = arrayProto.splice,
        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined$1,
        symIterator = Symbol ? Symbol.iterator : undefined$1,
        symToStringTag = Symbol ? Symbol.toStringTag : undefined$1;
      var defineProperty = function () {
        try {
          var func = getNative(Object, 'defineProperty');
          func({}, '', {});
          return func;
        } catch (e) {}
      }();

      var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,
        ctxNow = Date && Date.now !== root.Date.now && Date.now,
        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;

      var nativeCeil = Math.ceil,
        nativeFloor = Math.floor,
        nativeGetSymbols = Object.getOwnPropertySymbols,
        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined$1,
        nativeIsFinite = context.isFinite,
        nativeJoin = arrayProto.join,
        nativeKeys = overArg(Object.keys, Object),
        nativeMax = Math.max,
        nativeMin = Math.min,
        nativeNow = Date.now,
        nativeParseInt = context.parseInt,
        nativeRandom = Math.random,
        nativeReverse = arrayProto.reverse;

      var DataView = getNative(context, 'DataView'),
        Map = getNative(context, 'Map'),
        Promise = getNative(context, 'Promise'),
        Set = getNative(context, 'Set'),
        WeakMap = getNative(context, 'WeakMap'),
        nativeCreate = getNative(Object, 'create');

      var metaMap = WeakMap && new WeakMap();

      var realNames = {};

      var dataViewCtorString = toSource(DataView),
        mapCtorString = toSource(Map),
        promiseCtorString = toSource(Promise),
        setCtorString = toSource(Set),
        weakMapCtorString = toSource(WeakMap);

      var symbolProto = Symbol ? Symbol.prototype : undefined$1,
        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined$1,
        symbolToString = symbolProto ? symbolProto.toString : undefined$1;

      function lodash(value) {
        if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {
          if (value instanceof LodashWrapper) {
            return value;
          }
          if (hasOwnProperty.call(value, '__wrapped__')) {
            return wrapperClone(value);
          }
        }
        return new LodashWrapper(value);
      }

      var baseCreate = function () {
        function object() {}
        return function (proto) {
          if (!isObject(proto)) {
            return {};
          }
          if (objectCreate) {
            return objectCreate(proto);
          }
          object.prototype = proto;
          var result = new object();
          object.prototype = undefined$1;
          return result;
        };
      }();

      function baseLodash() {
      }

      function LodashWrapper(value, chainAll) {
        this.__wrapped__ = value;
        this.__actions__ = [];
        this.__chain__ = !!chainAll;
        this.__index__ = 0;
        this.__values__ = undefined$1;
      }

      lodash.templateSettings = {
        'escape': reEscape,
        'evaluate': reEvaluate,
        'interpolate': reInterpolate,
        'variable': '',
        'imports': {
          '_': lodash
        }
      };

      lodash.prototype = baseLodash.prototype;
      lodash.prototype.constructor = lodash;
      LodashWrapper.prototype = baseCreate(baseLodash.prototype);
      LodashWrapper.prototype.constructor = LodashWrapper;

      function LazyWrapper(value) {
        this.__wrapped__ = value;
        this.__actions__ = [];
        this.__dir__ = 1;
        this.__filtered__ = false;
        this.__iteratees__ = [];
        this.__takeCount__ = MAX_ARRAY_LENGTH;
        this.__views__ = [];
      }

      function lazyClone() {
        var result = new LazyWrapper(this.__wrapped__);
        result.__actions__ = copyArray(this.__actions__);
        result.__dir__ = this.__dir__;
        result.__filtered__ = this.__filtered__;
        result.__iteratees__ = copyArray(this.__iteratees__);
        result.__takeCount__ = this.__takeCount__;
        result.__views__ = copyArray(this.__views__);
        return result;
      }

      function lazyReverse() {
        if (this.__filtered__) {
          var result = new LazyWrapper(this);
          result.__dir__ = -1;
          result.__filtered__ = true;
        } else {
          result = this.clone();
          result.__dir__ *= -1;
        }
        return result;
      }

      function lazyValue() {
        var array = this.__wrapped__.value(),
          dir = this.__dir__,
          isArr = isArray(array),
          isRight = dir < 0,
          arrLength = isArr ? array.length : 0,
          view = getView(0, arrLength, this.__views__),
          start = view.start,
          end = view.end,
          length = end - start,
          index = isRight ? end : start - 1,
          iteratees = this.__iteratees__,
          iterLength = iteratees.length,
          resIndex = 0,
          takeCount = nativeMin(length, this.__takeCount__);
        if (!isArr || !isRight && arrLength == length && takeCount == length) {
          return baseWrapperValue(array, this.__actions__);
        }
        var result = [];
        outer: while (length-- && resIndex < takeCount) {
          index += dir;
          var iterIndex = -1,
            value = array[index];
          while (++iterIndex < iterLength) {
            var data = iteratees[iterIndex],
              iteratee = data.iteratee,
              type = data.type,
              computed = iteratee(value);
            if (type == LAZY_MAP_FLAG) {
              value = computed;
            } else if (!computed) {
              if (type == LAZY_FILTER_FLAG) {
                continue outer;
              } else {
                break outer;
              }
            }
          }
          result[resIndex++] = value;
        }
        return result;
      }

      LazyWrapper.prototype = baseCreate(baseLodash.prototype);
      LazyWrapper.prototype.constructor = LazyWrapper;

      function Hash(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }

      function hashClear() {
        this.__data__ = nativeCreate ? nativeCreate(null) : {};
        this.size = 0;
      }

      function hashDelete(key) {
        var result = this.has(key) && delete this.__data__[key];
        this.size -= result ? 1 : 0;
        return result;
      }

      function hashGet(key) {
        var data = this.__data__;
        if (nativeCreate) {
          var result = data[key];
          return result === HASH_UNDEFINED ? undefined$1 : result;
        }
        return hasOwnProperty.call(data, key) ? data[key] : undefined$1;
      }

      function hashHas(key) {
        var data = this.__data__;
        return nativeCreate ? data[key] !== undefined$1 : hasOwnProperty.call(data, key);
      }

      function hashSet(key, value) {
        var data = this.__data__;
        this.size += this.has(key) ? 0 : 1;
        data[key] = nativeCreate && value === undefined$1 ? HASH_UNDEFINED : value;
        return this;
      }

      Hash.prototype.clear = hashClear;
      Hash.prototype['delete'] = hashDelete;
      Hash.prototype.get = hashGet;
      Hash.prototype.has = hashHas;
      Hash.prototype.set = hashSet;

      function ListCache(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }

      function listCacheClear() {
        this.__data__ = [];
        this.size = 0;
      }

      function listCacheDelete(key) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        if (index < 0) {
          return false;
        }
        var lastIndex = data.length - 1;
        if (index == lastIndex) {
          data.pop();
        } else {
          splice.call(data, index, 1);
        }
        --this.size;
        return true;
      }

      function listCacheGet(key) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        return index < 0 ? undefined$1 : data[index][1];
      }

      function listCacheHas(key) {
        return assocIndexOf(this.__data__, key) > -1;
      }

      function listCacheSet(key, value) {
        var data = this.__data__,
          index = assocIndexOf(data, key);
        if (index < 0) {
          ++this.size;
          data.push([key, value]);
        } else {
          data[index][1] = value;
        }
        return this;
      }

      ListCache.prototype.clear = listCacheClear;
      ListCache.prototype['delete'] = listCacheDelete;
      ListCache.prototype.get = listCacheGet;
      ListCache.prototype.has = listCacheHas;
      ListCache.prototype.set = listCacheSet;

      function MapCache(entries) {
        var index = -1,
          length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }

      function mapCacheClear() {
        this.size = 0;
        this.__data__ = {
          'hash': new Hash(),
          'map': new (Map || ListCache)(),
          'string': new Hash()
        };
      }

      function mapCacheDelete(key) {
        var result = getMapData(this, key)['delete'](key);
        this.size -= result ? 1 : 0;
        return result;
      }

      function mapCacheGet(key) {
        return getMapData(this, key).get(key);
      }

      function mapCacheHas(key) {
        return getMapData(this, key).has(key);
      }

      function mapCacheSet(key, value) {
        var data = getMapData(this, key),
          size = data.size;
        data.set(key, value);
        this.size += data.size == size ? 0 : 1;
        return this;
      }

      MapCache.prototype.clear = mapCacheClear;
      MapCache.prototype['delete'] = mapCacheDelete;
      MapCache.prototype.get = mapCacheGet;
      MapCache.prototype.has = mapCacheHas;
      MapCache.prototype.set = mapCacheSet;

      function SetCache(values) {
        var index = -1,
          length = values == null ? 0 : values.length;
        this.__data__ = new MapCache();
        while (++index < length) {
          this.add(values[index]);
        }
      }

      function setCacheAdd(value) {
        this.__data__.set(value, HASH_UNDEFINED);
        return this;
      }

      function setCacheHas(value) {
        return this.__data__.has(value);
      }

      SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
      SetCache.prototype.has = setCacheHas;

      function Stack(entries) {
        var data = this.__data__ = new ListCache(entries);
        this.size = data.size;
      }

      function stackClear() {
        this.__data__ = new ListCache();
        this.size = 0;
      }

      function stackDelete(key) {
        var data = this.__data__,
          result = data['delete'](key);
        this.size = data.size;
        return result;
      }

      function stackGet(key) {
        return this.__data__.get(key);
      }

      function stackHas(key) {
        return this.__data__.has(key);
      }

      function stackSet(key, value) {
        var data = this.__data__;
        if (data instanceof ListCache) {
          var pairs = data.__data__;
          if (!Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
            pairs.push([key, value]);
            this.size = ++data.size;
            return this;
          }
          data = this.__data__ = new MapCache(pairs);
        }
        data.set(key, value);
        this.size = data.size;
        return this;
      }

      Stack.prototype.clear = stackClear;
      Stack.prototype['delete'] = stackDelete;
      Stack.prototype.get = stackGet;
      Stack.prototype.has = stackHas;
      Stack.prototype.set = stackSet;

      function arrayLikeKeys(value, inherited) {
        var isArr = isArray(value),
          isArg = !isArr && isArguments(value),
          isBuff = !isArr && !isArg && isBuffer(value),
          isType = !isArr && !isArg && !isBuff && isTypedArray(value),
          skipIndexes = isArr || isArg || isBuff || isType,
          result = skipIndexes ? baseTimes(value.length, String) : [],
          length = result.length;
        for (var key in value) {
          if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (
          key == 'length' ||
          isBuff && (key == 'offset' || key == 'parent') ||
          isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset') ||
          isIndex(key, length)))) {
            result.push(key);
          }
        }
        return result;
      }

      function arraySample(array) {
        var length = array.length;
        return length ? array[baseRandom(0, length - 1)] : undefined$1;
      }

      function arraySampleSize(array, n) {
        return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));
      }

      function arrayShuffle(array) {
        return shuffleSelf(copyArray(array));
      }

      function assignMergeValue(object, key, value) {
        if (value !== undefined$1 && !eq(object[key], value) || value === undefined$1 && !(key in object)) {
          baseAssignValue(object, key, value);
        }
      }

      function assignValue(object, key, value) {
        var objValue = object[key];
        if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) || value === undefined$1 && !(key in object)) {
          baseAssignValue(object, key, value);
        }
      }

      function assocIndexOf(array, key) {
        var length = array.length;
        while (length--) {
          if (eq(array[length][0], key)) {
            return length;
          }
        }
        return -1;
      }

      function baseAggregator(collection, setter, iteratee, accumulator) {
        baseEach(collection, function (value, key, collection) {
          setter(accumulator, value, iteratee(value), collection);
        });
        return accumulator;
      }

      function baseAssign(object, source) {
        return object && copyObject(source, keys(source), object);
      }

      function baseAssignIn(object, source) {
        return object && copyObject(source, keysIn(source), object);
      }

      function baseAssignValue(object, key, value) {
        if (key == '__proto__' && defineProperty) {
          defineProperty(object, key, {
            'configurable': true,
            'enumerable': true,
            'value': value,
            'writable': true
          });
        } else {
          object[key] = value;
        }
      }

      function baseAt(object, paths) {
        var index = -1,
          length = paths.length,
          result = Array(length),
          skip = object == null;
        while (++index < length) {
          result[index] = skip ? undefined$1 : get(object, paths[index]);
        }
        return result;
      }

      function baseClamp(number, lower, upper) {
        if (number === number) {
          if (upper !== undefined$1) {
            number = number <= upper ? number : upper;
          }
          if (lower !== undefined$1) {
            number = number >= lower ? number : lower;
          }
        }
        return number;
      }

      function baseClone(value, bitmask, customizer, key, object, stack) {
        var result,
          isDeep = bitmask & CLONE_DEEP_FLAG,
          isFlat = bitmask & CLONE_FLAT_FLAG,
          isFull = bitmask & CLONE_SYMBOLS_FLAG;
        if (customizer) {
          result = object ? customizer(value, key, object, stack) : customizer(value);
        }
        if (result !== undefined$1) {
          return result;
        }
        if (!isObject(value)) {
          return value;
        }
        var isArr = isArray(value);
        if (isArr) {
          result = initCloneArray(value);
          if (!isDeep) {
            return copyArray(value, result);
          }
        } else {
          var tag = getTag(value),
            isFunc = tag == funcTag || tag == genTag;
          if (isBuffer(value)) {
            return cloneBuffer(value, isDeep);
          }
          if (tag == objectTag || tag == argsTag || isFunc && !object) {
            result = isFlat || isFunc ? {} : initCloneObject(value);
            if (!isDeep) {
              return isFlat ? copySymbolsIn(value, baseAssignIn(result, value)) : copySymbols(value, baseAssign(result, value));
            }
          } else {
            if (!cloneableTags[tag]) {
              return object ? value : {};
            }
            result = initCloneByTag(value, tag, isDeep);
          }
        }
        stack || (stack = new Stack());
        var stacked = stack.get(value);
        if (stacked) {
          return stacked;
        }
        stack.set(value, result);
        if (isSet(value)) {
          value.forEach(function (subValue) {
            result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
          });
        } else if (isMap(value)) {
          value.forEach(function (subValue, key) {
            result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));
          });
        }
        var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;
        var props = isArr ? undefined$1 : keysFunc(value);
        arrayEach(props || value, function (subValue, key) {
          if (props) {
            key = subValue;
            subValue = value[key];
          }
          assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));
        });
        return result;
      }

      function baseConforms(source) {
        var props = keys(source);
        return function (object) {
          return baseConformsTo(object, source, props);
        };
      }

      function baseConformsTo(object, source, props) {
        var length = props.length;
        if (object == null) {
          return !length;
        }
        object = Object(object);
        while (length--) {
          var key = props[length],
            predicate = source[key],
            value = object[key];
          if (value === undefined$1 && !(key in object) || !predicate(value)) {
            return false;
          }
        }
        return true;
      }

      function baseDelay(func, wait, args) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        return setTimeout(function () {
          func.apply(undefined$1, args);
        }, wait);
      }

      function baseDifference(array, values, iteratee, comparator) {
        var index = -1,
          includes = arrayIncludes,
          isCommon = true,
          length = array.length,
          result = [],
          valuesLength = values.length;
        if (!length) {
          return result;
        }
        if (iteratee) {
          values = arrayMap(values, baseUnary(iteratee));
        }
        if (comparator) {
          includes = arrayIncludesWith;
          isCommon = false;
        } else if (values.length >= LARGE_ARRAY_SIZE) {
          includes = cacheHas;
          isCommon = false;
          values = new SetCache(values);
        }
        outer: while (++index < length) {
          var value = array[index],
            computed = iteratee == null ? value : iteratee(value);
          value = comparator || value !== 0 ? value : 0;
          if (isCommon && computed === computed) {
            var valuesIndex = valuesLength;
            while (valuesIndex--) {
              if (values[valuesIndex] === computed) {
                continue outer;
              }
            }
            result.push(value);
          } else if (!includes(values, computed, comparator)) {
            result.push(value);
          }
        }
        return result;
      }

      var baseEach = createBaseEach(baseForOwn);

      var baseEachRight = createBaseEach(baseForOwnRight, true);

      function baseEvery(collection, predicate) {
        var result = true;
        baseEach(collection, function (value, index, collection) {
          result = !!predicate(value, index, collection);
          return result;
        });
        return result;
      }

      function baseExtremum(array, iteratee, comparator) {
        var index = -1,
          length = array.length;
        while (++index < length) {
          var value = array[index],
            current = iteratee(value);
          if (current != null && (computed === undefined$1 ? current === current && !isSymbol(current) : comparator(current, computed))) {
            var computed = current,
              result = value;
          }
        }
        return result;
      }

      function baseFill(array, value, start, end) {
        var length = array.length;
        start = toInteger(start);
        if (start < 0) {
          start = -start > length ? 0 : length + start;
        }
        end = end === undefined$1 || end > length ? length : toInteger(end);
        if (end < 0) {
          end += length;
        }
        end = start > end ? 0 : toLength(end);
        while (start < end) {
          array[start++] = value;
        }
        return array;
      }

      function baseFilter(collection, predicate) {
        var result = [];
        baseEach(collection, function (value, index, collection) {
          if (predicate(value, index, collection)) {
            result.push(value);
          }
        });
        return result;
      }

      function baseFlatten(array, depth, predicate, isStrict, result) {
        var index = -1,
          length = array.length;
        predicate || (predicate = isFlattenable);
        result || (result = []);
        while (++index < length) {
          var value = array[index];
          if (depth > 0 && predicate(value)) {
            if (depth > 1) {
              baseFlatten(value, depth - 1, predicate, isStrict, result);
            } else {
              arrayPush(result, value);
            }
          } else if (!isStrict) {
            result[result.length] = value;
          }
        }
        return result;
      }

      var baseFor = createBaseFor();

      var baseForRight = createBaseFor(true);

      function baseForOwn(object, iteratee) {
        return object && baseFor(object, iteratee, keys);
      }

      function baseForOwnRight(object, iteratee) {
        return object && baseForRight(object, iteratee, keys);
      }

      function baseFunctions(object, props) {
        return arrayFilter(props, function (key) {
          return isFunction(object[key]);
        });
      }

      function baseGet(object, path) {
        path = castPath(path, object);
        var index = 0,
          length = path.length;
        while (object != null && index < length) {
          object = object[toKey(path[index++])];
        }
        return index && index == length ? object : undefined$1;
      }

      function baseGetAllKeys(object, keysFunc, symbolsFunc) {
        var result = keysFunc(object);
        return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
      }

      function baseGetTag(value) {
        if (value == null) {
          return value === undefined$1 ? undefinedTag : nullTag;
        }
        return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
      }

      function baseGt(value, other) {
        return value > other;
      }

      function baseHas(object, key) {
        return object != null && hasOwnProperty.call(object, key);
      }

      function baseHasIn(object, key) {
        return object != null && key in Object(object);
      }

      function baseInRange(number, start, end) {
        return number >= nativeMin(start, end) && number < nativeMax(start, end);
      }

      function baseIntersection(arrays, iteratee, comparator) {
        var includes = comparator ? arrayIncludesWith : arrayIncludes,
          length = arrays[0].length,
          othLength = arrays.length,
          othIndex = othLength,
          caches = Array(othLength),
          maxLength = Infinity,
          result = [];
        while (othIndex--) {
          var array = arrays[othIndex];
          if (othIndex && iteratee) {
            array = arrayMap(array, baseUnary(iteratee));
          }
          maxLength = nativeMin(array.length, maxLength);
          caches[othIndex] = !comparator && (iteratee || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : undefined$1;
        }
        array = arrays[0];
        var index = -1,
          seen = caches[0];
        outer: while (++index < length && result.length < maxLength) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          value = comparator || value !== 0 ? value : 0;
          if (!(seen ? cacheHas(seen, computed) : includes(result, computed, comparator))) {
            othIndex = othLength;
            while (--othIndex) {
              var cache = caches[othIndex];
              if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed, comparator))) {
                continue outer;
              }
            }
            if (seen) {
              seen.push(computed);
            }
            result.push(value);
          }
        }
        return result;
      }

      function baseInverter(object, setter, iteratee, accumulator) {
        baseForOwn(object, function (value, key, object) {
          setter(accumulator, iteratee(value), key, object);
        });
        return accumulator;
      }

      function baseInvoke(object, path, args) {
        path = castPath(path, object);
        object = parent(object, path);
        var func = object == null ? object : object[toKey(last(path))];
        return func == null ? undefined$1 : apply(func, object, args);
      }

      function baseIsArguments(value) {
        return isObjectLike(value) && baseGetTag(value) == argsTag;
      }

      function baseIsArrayBuffer(value) {
        return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;
      }

      function baseIsDate(value) {
        return isObjectLike(value) && baseGetTag(value) == dateTag;
      }

      function baseIsEqual(value, other, bitmask, customizer, stack) {
        if (value === other) {
          return true;
        }
        if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
          return value !== value && other !== other;
        }
        return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
      }

      function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
        var objIsArr = isArray(object),
          othIsArr = isArray(other),
          objTag = objIsArr ? arrayTag : getTag(object),
          othTag = othIsArr ? arrayTag : getTag(other);
        objTag = objTag == argsTag ? objectTag : objTag;
        othTag = othTag == argsTag ? objectTag : othTag;
        var objIsObj = objTag == objectTag,
          othIsObj = othTag == objectTag,
          isSameTag = objTag == othTag;
        if (isSameTag && isBuffer(object)) {
          if (!isBuffer(other)) {
            return false;
          }
          objIsArr = true;
          objIsObj = false;
        }
        if (isSameTag && !objIsObj) {
          stack || (stack = new Stack());
          return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
        }
        if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
          var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');
          if (objIsWrapped || othIsWrapped) {
            var objUnwrapped = objIsWrapped ? object.value() : object,
              othUnwrapped = othIsWrapped ? other.value() : other;
            stack || (stack = new Stack());
            return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
          }
        }
        if (!isSameTag) {
          return false;
        }
        stack || (stack = new Stack());
        return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
      }

      function baseIsMap(value) {
        return isObjectLike(value) && getTag(value) == mapTag;
      }

      function baseIsMatch(object, source, matchData, customizer) {
        var index = matchData.length,
          length = index,
          noCustomizer = !customizer;
        if (object == null) {
          return !length;
        }
        object = Object(object);
        while (index--) {
          var data = matchData[index];
          if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
            return false;
          }
        }
        while (++index < length) {
          data = matchData[index];
          var key = data[0],
            objValue = object[key],
            srcValue = data[1];
          if (noCustomizer && data[2]) {
            if (objValue === undefined$1 && !(key in object)) {
              return false;
            }
          } else {
            var stack = new Stack();
            if (customizer) {
              var result = customizer(objValue, srcValue, key, object, source, stack);
            }
            if (!(result === undefined$1 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result)) {
              return false;
            }
          }
        }
        return true;
      }

      function baseIsNative(value) {
        if (!isObject(value) || isMasked(value)) {
          return false;
        }
        var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
        return pattern.test(toSource(value));
      }

      function baseIsRegExp(value) {
        return isObjectLike(value) && baseGetTag(value) == regexpTag;
      }

      function baseIsSet(value) {
        return isObjectLike(value) && getTag(value) == setTag;
      }

      function baseIsTypedArray(value) {
        return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
      }

      function baseIteratee(value) {
        if (typeof value == 'function') {
          return value;
        }
        if (value == null) {
          return identity;
        }
        if (typeof value == 'object') {
          return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
        }
        return property(value);
      }

      function baseKeys(object) {
        if (!isPrototype(object)) {
          return nativeKeys(object);
        }
        var result = [];
        for (var key in Object(object)) {
          if (hasOwnProperty.call(object, key) && key != 'constructor') {
            result.push(key);
          }
        }
        return result;
      }

      function baseKeysIn(object) {
        if (!isObject(object)) {
          return nativeKeysIn(object);
        }
        var isProto = isPrototype(object),
          result = [];
        for (var key in object) {
          if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
            result.push(key);
          }
        }
        return result;
      }

      function baseLt(value, other) {
        return value < other;
      }

      function baseMap(collection, iteratee) {
        var index = -1,
          result = isArrayLike(collection) ? Array(collection.length) : [];
        baseEach(collection, function (value, key, collection) {
          result[++index] = iteratee(value, key, collection);
        });
        return result;
      }

      function baseMatches(source) {
        var matchData = getMatchData(source);
        if (matchData.length == 1 && matchData[0][2]) {
          return matchesStrictComparable(matchData[0][0], matchData[0][1]);
        }
        return function (object) {
          return object === source || baseIsMatch(object, source, matchData);
        };
      }

      function baseMatchesProperty(path, srcValue) {
        if (isKey(path) && isStrictComparable(srcValue)) {
          return matchesStrictComparable(toKey(path), srcValue);
        }
        return function (object) {
          var objValue = get(object, path);
          return objValue === undefined$1 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
        };
      }

      function baseMerge(object, source, srcIndex, customizer, stack) {
        if (object === source) {
          return;
        }
        baseFor(source, function (srcValue, key) {
          stack || (stack = new Stack());
          if (isObject(srcValue)) {
            baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
          } else {
            var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + '', object, source, stack) : undefined$1;
            if (newValue === undefined$1) {
              newValue = srcValue;
            }
            assignMergeValue(object, key, newValue);
          }
        }, keysIn);
      }

      function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
        var objValue = safeGet(object, key),
          srcValue = safeGet(source, key),
          stacked = stack.get(srcValue);
        if (stacked) {
          assignMergeValue(object, key, stacked);
          return;
        }
        var newValue = customizer ? customizer(objValue, srcValue, key + '', object, source, stack) : undefined$1;
        var isCommon = newValue === undefined$1;
        if (isCommon) {
          var isArr = isArray(srcValue),
            isBuff = !isArr && isBuffer(srcValue),
            isTyped = !isArr && !isBuff && isTypedArray(srcValue);
          newValue = srcValue;
          if (isArr || isBuff || isTyped) {
            if (isArray(objValue)) {
              newValue = objValue;
            } else if (isArrayLikeObject(objValue)) {
              newValue = copyArray(objValue);
            } else if (isBuff) {
              isCommon = false;
              newValue = cloneBuffer(srcValue, true);
            } else if (isTyped) {
              isCommon = false;
              newValue = cloneTypedArray(srcValue, true);
            } else {
              newValue = [];
            }
          } else if (isPlainObject(srcValue) || isArguments(srcValue)) {
            newValue = objValue;
            if (isArguments(objValue)) {
              newValue = toPlainObject(objValue);
            } else if (!isObject(objValue) || isFunction(objValue)) {
              newValue = initCloneObject(srcValue);
            }
          } else {
            isCommon = false;
          }
        }
        if (isCommon) {
          stack.set(srcValue, newValue);
          mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
          stack['delete'](srcValue);
        }
        assignMergeValue(object, key, newValue);
      }

      function baseNth(array, n) {
        var length = array.length;
        if (!length) {
          return;
        }
        n += n < 0 ? length : 0;
        return isIndex(n, length) ? array[n] : undefined$1;
      }

      function baseOrderBy(collection, iteratees, orders) {
        if (iteratees.length) {
          iteratees = arrayMap(iteratees, function (iteratee) {
            if (isArray(iteratee)) {
              return function (value) {
                return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);
              };
            }
            return iteratee;
          });
        } else {
          iteratees = [identity];
        }
        var index = -1;
        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));
        var result = baseMap(collection, function (value, key, collection) {
          var criteria = arrayMap(iteratees, function (iteratee) {
            return iteratee(value);
          });
          return {
            'criteria': criteria,
            'index': ++index,
            'value': value
          };
        });
        return baseSortBy(result, function (object, other) {
          return compareMultiple(object, other, orders);
        });
      }

      function basePick(object, paths) {
        return basePickBy(object, paths, function (value, path) {
          return hasIn(object, path);
        });
      }

      function basePickBy(object, paths, predicate) {
        var index = -1,
          length = paths.length,
          result = {};
        while (++index < length) {
          var path = paths[index],
            value = baseGet(object, path);
          if (predicate(value, path)) {
            baseSet(result, castPath(path, object), value);
          }
        }
        return result;
      }

      function basePropertyDeep(path) {
        return function (object) {
          return baseGet(object, path);
        };
      }

      function basePullAll(array, values, iteratee, comparator) {
        var indexOf = comparator ? baseIndexOfWith : baseIndexOf,
          index = -1,
          length = values.length,
          seen = array;
        if (array === values) {
          values = copyArray(values);
        }
        if (iteratee) {
          seen = arrayMap(array, baseUnary(iteratee));
        }
        while (++index < length) {
          var fromIndex = 0,
            value = values[index],
            computed = iteratee ? iteratee(value) : value;
          while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {
            if (seen !== array) {
              splice.call(seen, fromIndex, 1);
            }
            splice.call(array, fromIndex, 1);
          }
        }
        return array;
      }

      function basePullAt(array, indexes) {
        var length = array ? indexes.length : 0,
          lastIndex = length - 1;
        while (length--) {
          var index = indexes[length];
          if (length == lastIndex || index !== previous) {
            var previous = index;
            if (isIndex(index)) {
              splice.call(array, index, 1);
            } else {
              baseUnset(array, index);
            }
          }
        }
        return array;
      }

      function baseRandom(lower, upper) {
        return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
      }

      function baseRange(start, end, step, fromRight) {
        var index = -1,
          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),
          result = Array(length);
        while (length--) {
          result[fromRight ? length : ++index] = start;
          start += step;
        }
        return result;
      }

      function baseRepeat(string, n) {
        var result = '';
        if (!string || n < 1 || n > MAX_SAFE_INTEGER) {
          return result;
        }
        do {
          if (n % 2) {
            result += string;
          }
          n = nativeFloor(n / 2);
          if (n) {
            string += string;
          }
        } while (n);
        return result;
      }

      function baseRest(func, start) {
        return setToString(overRest(func, start, identity), func + '');
      }

      function baseSample(collection) {
        return arraySample(values(collection));
      }

      function baseSampleSize(collection, n) {
        var array = values(collection);
        return shuffleSelf(array, baseClamp(n, 0, array.length));
      }

      function baseSet(object, path, value, customizer) {
        if (!isObject(object)) {
          return object;
        }
        path = castPath(path, object);
        var index = -1,
          length = path.length,
          lastIndex = length - 1,
          nested = object;
        while (nested != null && ++index < length) {
          var key = toKey(path[index]),
            newValue = value;
          if (key === '__proto__' || key === 'constructor' || key === 'prototype') {
            return object;
          }
          if (index != lastIndex) {
            var objValue = nested[key];
            newValue = customizer ? customizer(objValue, key, nested) : undefined$1;
            if (newValue === undefined$1) {
              newValue = isObject(objValue) ? objValue : isIndex(path[index + 1]) ? [] : {};
            }
          }
          assignValue(nested, key, newValue);
          nested = nested[key];
        }
        return object;
      }

      var baseSetData = !metaMap ? identity : function (func, data) {
        metaMap.set(func, data);
        return func;
      };

      var baseSetToString = !defineProperty ? identity : function (func, string) {
        return defineProperty(func, 'toString', {
          'configurable': true,
          'enumerable': false,
          'value': constant(string),
          'writable': true
        });
      };

      function baseShuffle(collection) {
        return shuffleSelf(values(collection));
      }

      function baseSlice(array, start, end) {
        var index = -1,
          length = array.length;
        if (start < 0) {
          start = -start > length ? 0 : length + start;
        }
        end = end > length ? length : end;
        if (end < 0) {
          end += length;
        }
        length = start > end ? 0 : end - start >>> 0;
        start >>>= 0;
        var result = Array(length);
        while (++index < length) {
          result[index] = array[index + start];
        }
        return result;
      }

      function baseSome(collection, predicate) {
        var result;
        baseEach(collection, function (value, index, collection) {
          result = predicate(value, index, collection);
          return !result;
        });
        return !!result;
      }

      function baseSortedIndex(array, value, retHighest) {
        var low = 0,
          high = array == null ? low : array.length;
        if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
          while (low < high) {
            var mid = low + high >>> 1,
              computed = array[mid];
            if (computed !== null && !isSymbol(computed) && (retHighest ? computed <= value : computed < value)) {
              low = mid + 1;
            } else {
              high = mid;
            }
          }
          return high;
        }
        return baseSortedIndexBy(array, value, identity, retHighest);
      }

      function baseSortedIndexBy(array, value, iteratee, retHighest) {
        var low = 0,
          high = array == null ? 0 : array.length;
        if (high === 0) {
          return 0;
        }
        value = iteratee(value);
        var valIsNaN = value !== value,
          valIsNull = value === null,
          valIsSymbol = isSymbol(value),
          valIsUndefined = value === undefined$1;
        while (low < high) {
          var mid = nativeFloor((low + high) / 2),
            computed = iteratee(array[mid]),
            othIsDefined = computed !== undefined$1,
            othIsNull = computed === null,
            othIsReflexive = computed === computed,
            othIsSymbol = isSymbol(computed);
          if (valIsNaN) {
            var setLow = retHighest || othIsReflexive;
          } else if (valIsUndefined) {
            setLow = othIsReflexive && (retHighest || othIsDefined);
          } else if (valIsNull) {
            setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
          } else if (valIsSymbol) {
            setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
          } else if (othIsNull || othIsSymbol) {
            setLow = false;
          } else {
            setLow = retHighest ? computed <= value : computed < value;
          }
          if (setLow) {
            low = mid + 1;
          } else {
            high = mid;
          }
        }
        return nativeMin(high, MAX_ARRAY_INDEX);
      }

      function baseSortedUniq(array, iteratee) {
        var index = -1,
          length = array.length,
          resIndex = 0,
          result = [];
        while (++index < length) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          if (!index || !eq(computed, seen)) {
            var seen = computed;
            result[resIndex++] = value === 0 ? 0 : value;
          }
        }
        return result;
      }

      function baseToNumber(value) {
        if (typeof value == 'number') {
          return value;
        }
        if (isSymbol(value)) {
          return NAN;
        }
        return +value;
      }

      function baseToString(value) {
        if (typeof value == 'string') {
          return value;
        }
        if (isArray(value)) {
          return arrayMap(value, baseToString) + '';
        }
        if (isSymbol(value)) {
          return symbolToString ? symbolToString.call(value) : '';
        }
        var result = value + '';
        return result == '0' && 1 / value == -INFINITY ? '-0' : result;
      }

      function baseUniq(array, iteratee, comparator) {
        var index = -1,
          includes = arrayIncludes,
          length = array.length,
          isCommon = true,
          result = [],
          seen = result;
        if (comparator) {
          isCommon = false;
          includes = arrayIncludesWith;
        } else if (length >= LARGE_ARRAY_SIZE) {
          var set = iteratee ? null : createSet(array);
          if (set) {
            return setToArray(set);
          }
          isCommon = false;
          includes = cacheHas;
          seen = new SetCache();
        } else {
          seen = iteratee ? [] : result;
        }
        outer: while (++index < length) {
          var value = array[index],
            computed = iteratee ? iteratee(value) : value;
          value = comparator || value !== 0 ? value : 0;
          if (isCommon && computed === computed) {
            var seenIndex = seen.length;
            while (seenIndex--) {
              if (seen[seenIndex] === computed) {
                continue outer;
              }
            }
            if (iteratee) {
              seen.push(computed);
            }
            result.push(value);
          } else if (!includes(seen, computed, comparator)) {
            if (seen !== result) {
              seen.push(computed);
            }
            result.push(value);
          }
        }
        return result;
      }

      function baseUnset(object, path) {
        path = castPath(path, object);
        object = parent(object, path);
        return object == null || delete object[toKey(last(path))];
      }

      function baseUpdate(object, path, updater, customizer) {
        return baseSet(object, path, updater(baseGet(object, path)), customizer);
      }

      function baseWhile(array, predicate, isDrop, fromRight) {
        var length = array.length,
          index = fromRight ? length : -1;
        while ((fromRight ? index-- : ++index < length) && predicate(array[index], index, array)) {}
        return isDrop ? baseSlice(array, fromRight ? 0 : index, fromRight ? index + 1 : length) : baseSlice(array, fromRight ? index + 1 : 0, fromRight ? length : index);
      }

      function baseWrapperValue(value, actions) {
        var result = value;
        if (result instanceof LazyWrapper) {
          result = result.value();
        }
        return arrayReduce(actions, function (result, action) {
          return action.func.apply(action.thisArg, arrayPush([result], action.args));
        }, result);
      }

      function baseXor(arrays, iteratee, comparator) {
        var length = arrays.length;
        if (length < 2) {
          return length ? baseUniq(arrays[0]) : [];
        }
        var index = -1,
          result = Array(length);
        while (++index < length) {
          var array = arrays[index],
            othIndex = -1;
          while (++othIndex < length) {
            if (othIndex != index) {
              result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);
            }
          }
        }
        return baseUniq(baseFlatten(result, 1), iteratee, comparator);
      }

      function baseZipObject(props, values, assignFunc) {
        var index = -1,
          length = props.length,
          valsLength = values.length,
          result = {};
        while (++index < length) {
          var value = index < valsLength ? values[index] : undefined$1;
          assignFunc(result, props[index], value);
        }
        return result;
      }

      function castArrayLikeObject(value) {
        return isArrayLikeObject(value) ? value : [];
      }

      function castFunction(value) {
        return typeof value == 'function' ? value : identity;
      }

      function castPath(value, object) {
        if (isArray(value)) {
          return value;
        }
        return isKey(value, object) ? [value] : stringToPath(toString(value));
      }

      var castRest = baseRest;

      function castSlice(array, start, end) {
        var length = array.length;
        end = end === undefined$1 ? length : end;
        return !start && end >= length ? array : baseSlice(array, start, end);
      }

      var clearTimeout = ctxClearTimeout || function (id) {
        return root.clearTimeout(id);
      };

      function cloneBuffer(buffer, isDeep) {
        if (isDeep) {
          return buffer.slice();
        }
        var length = buffer.length,
          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
        buffer.copy(result);
        return result;
      }

      function cloneArrayBuffer(arrayBuffer) {
        var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
        new Uint8Array(result).set(new Uint8Array(arrayBuffer));
        return result;
      }

      function cloneDataView(dataView, isDeep) {
        var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;
        return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
      }

      function cloneRegExp(regexp) {
        var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));
        result.lastIndex = regexp.lastIndex;
        return result;
      }

      function cloneSymbol(symbol) {
        return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};
      }

      function cloneTypedArray(typedArray, isDeep) {
        var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
        return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
      }

      function compareAscending(value, other) {
        if (value !== other) {
          var valIsDefined = value !== undefined$1,
            valIsNull = value === null,
            valIsReflexive = value === value,
            valIsSymbol = isSymbol(value);
          var othIsDefined = other !== undefined$1,
            othIsNull = other === null,
            othIsReflexive = other === other,
            othIsSymbol = isSymbol(other);
          if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
            return 1;
          }
          if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
            return -1;
          }
        }
        return 0;
      }

      function compareMultiple(object, other, orders) {
        var index = -1,
          objCriteria = object.criteria,
          othCriteria = other.criteria,
          length = objCriteria.length,
          ordersLength = orders.length;
        while (++index < length) {
          var result = compareAscending(objCriteria[index], othCriteria[index]);
          if (result) {
            if (index >= ordersLength) {
              return result;
            }
            var order = orders[index];
            return result * (order == 'desc' ? -1 : 1);
          }
        }
        return object.index - other.index;
      }

      function composeArgs(args, partials, holders, isCurried) {
        var argsIndex = -1,
          argsLength = args.length,
          holdersLength = holders.length,
          leftIndex = -1,
          leftLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(leftLength + rangeLength),
          isUncurried = !isCurried;
        while (++leftIndex < leftLength) {
          result[leftIndex] = partials[leftIndex];
        }
        while (++argsIndex < holdersLength) {
          if (isUncurried || argsIndex < argsLength) {
            result[holders[argsIndex]] = args[argsIndex];
          }
        }
        while (rangeLength--) {
          result[leftIndex++] = args[argsIndex++];
        }
        return result;
      }

      function composeArgsRight(args, partials, holders, isCurried) {
        var argsIndex = -1,
          argsLength = args.length,
          holdersIndex = -1,
          holdersLength = holders.length,
          rightIndex = -1,
          rightLength = partials.length,
          rangeLength = nativeMax(argsLength - holdersLength, 0),
          result = Array(rangeLength + rightLength),
          isUncurried = !isCurried;
        while (++argsIndex < rangeLength) {
          result[argsIndex] = args[argsIndex];
        }
        var offset = argsIndex;
        while (++rightIndex < rightLength) {
          result[offset + rightIndex] = partials[rightIndex];
        }
        while (++holdersIndex < holdersLength) {
          if (isUncurried || argsIndex < argsLength) {
            result[offset + holders[holdersIndex]] = args[argsIndex++];
          }
        }
        return result;
      }

      function copyArray(source, array) {
        var index = -1,
          length = source.length;
        array || (array = Array(length));
        while (++index < length) {
          array[index] = source[index];
        }
        return array;
      }

      function copyObject(source, props, object, customizer) {
        var isNew = !object;
        object || (object = {});
        var index = -1,
          length = props.length;
        while (++index < length) {
          var key = props[index];
          var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined$1;
          if (newValue === undefined$1) {
            newValue = source[key];
          }
          if (isNew) {
            baseAssignValue(object, key, newValue);
          } else {
            assignValue(object, key, newValue);
          }
        }
        return object;
      }

      function copySymbols(source, object) {
        return copyObject(source, getSymbols(source), object);
      }

      function copySymbolsIn(source, object) {
        return copyObject(source, getSymbolsIn(source), object);
      }

      function createAggregator(setter, initializer) {
        return function (collection, iteratee) {
          var func = isArray(collection) ? arrayAggregator : baseAggregator,
            accumulator = initializer ? initializer() : {};
          return func(collection, setter, getIteratee(iteratee, 2), accumulator);
        };
      }

      function createAssigner(assigner) {
        return baseRest(function (object, sources) {
          var index = -1,
            length = sources.length,
            customizer = length > 1 ? sources[length - 1] : undefined$1,
            guard = length > 2 ? sources[2] : undefined$1;
          customizer = assigner.length > 3 && typeof customizer == 'function' ? (length--, customizer) : undefined$1;
          if (guard && isIterateeCall(sources[0], sources[1], guard)) {
            customizer = length < 3 ? undefined$1 : customizer;
            length = 1;
          }
          object = Object(object);
          while (++index < length) {
            var source = sources[index];
            if (source) {
              assigner(object, source, index, customizer);
            }
          }
          return object;
        });
      }

      function createBaseEach(eachFunc, fromRight) {
        return function (collection, iteratee) {
          if (collection == null) {
            return collection;
          }
          if (!isArrayLike(collection)) {
            return eachFunc(collection, iteratee);
          }
          var length = collection.length,
            index = fromRight ? length : -1,
            iterable = Object(collection);
          while (fromRight ? index-- : ++index < length) {
            if (iteratee(iterable[index], index, iterable) === false) {
              break;
            }
          }
          return collection;
        };
      }

      function createBaseFor(fromRight) {
        return function (object, iteratee, keysFunc) {
          var index = -1,
            iterable = Object(object),
            props = keysFunc(object),
            length = props.length;
          while (length--) {
            var key = props[fromRight ? length : ++index];
            if (iteratee(iterable[key], key, iterable) === false) {
              break;
            }
          }
          return object;
        };
      }

      function createBind(func, bitmask, thisArg) {
        var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);
        function wrapper() {
          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          return fn.apply(isBind ? thisArg : this, arguments);
        }
        return wrapper;
      }

      function createCaseFirst(methodName) {
        return function (string) {
          string = toString(string);
          var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined$1;
          var chr = strSymbols ? strSymbols[0] : string.charAt(0);
          var trailing = strSymbols ? castSlice(strSymbols, 1).join('') : string.slice(1);
          return chr[methodName]() + trailing;
        };
      }

      function createCompounder(callback) {
        return function (string) {
          return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');
        };
      }

      function createCtor(Ctor) {
        return function () {
          var args = arguments;
          switch (args.length) {
            case 0:
              return new Ctor();
            case 1:
              return new Ctor(args[0]);
            case 2:
              return new Ctor(args[0], args[1]);
            case 3:
              return new Ctor(args[0], args[1], args[2]);
            case 4:
              return new Ctor(args[0], args[1], args[2], args[3]);
            case 5:
              return new Ctor(args[0], args[1], args[2], args[3], args[4]);
            case 6:
              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
            case 7:
              return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
          }
          var thisBinding = baseCreate(Ctor.prototype),
            result = Ctor.apply(thisBinding, args);

          return isObject(result) ? result : thisBinding;
        };
      }

      function createCurry(func, bitmask, arity) {
        var Ctor = createCtor(func);
        function wrapper() {
          var length = arguments.length,
            args = Array(length),
            index = length,
            placeholder = getHolder(wrapper);
          while (index--) {
            args[index] = arguments[index];
          }
          var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);
          length -= holders.length;
          if (length < arity) {
            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, undefined$1, args, holders, undefined$1, undefined$1, arity - length);
          }
          var fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          return apply(fn, this, args);
        }
        return wrapper;
      }

      function createFind(findIndexFunc) {
        return function (collection, predicate, fromIndex) {
          var iterable = Object(collection);
          if (!isArrayLike(collection)) {
            var iteratee = getIteratee(predicate, 3);
            collection = keys(collection);
            predicate = function predicate(key) {
              return iteratee(iterable[key], key, iterable);
            };
          }
          var index = findIndexFunc(collection, predicate, fromIndex);
          return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined$1;
        };
      }

      function createFlow(fromRight) {
        return flatRest(function (funcs) {
          var length = funcs.length,
            index = length,
            prereq = LodashWrapper.prototype.thru;
          if (fromRight) {
            funcs.reverse();
          }
          while (index--) {
            var func = funcs[index];
            if (typeof func != 'function') {
              throw new TypeError(FUNC_ERROR_TEXT);
            }
            if (prereq && !wrapper && getFuncName(func) == 'wrapper') {
              var wrapper = new LodashWrapper([], true);
            }
          }
          index = wrapper ? index : length;
          while (++index < length) {
            func = funcs[index];
            var funcName = getFuncName(func),
              data = funcName == 'wrapper' ? getData(func) : undefined$1;
            if (data && isLaziable(data[0]) && data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) && !data[4].length && data[9] == 1) {
              wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
            } else {
              wrapper = func.length == 1 && isLaziable(func) ? wrapper[funcName]() : wrapper.thru(func);
            }
          }
          return function () {
            var args = arguments,
              value = args[0];
            if (wrapper && args.length == 1 && isArray(value)) {
              return wrapper.plant(value).value();
            }
            var index = 0,
              result = length ? funcs[index].apply(this, args) : value;
            while (++index < length) {
              result = funcs[index].call(this, result);
            }
            return result;
          };
        });
      }

      function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {
        var isAry = bitmask & WRAP_ARY_FLAG,
          isBind = bitmask & WRAP_BIND_FLAG,
          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,
          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),
          isFlip = bitmask & WRAP_FLIP_FLAG,
          Ctor = isBindKey ? undefined$1 : createCtor(func);
        function wrapper() {
          var length = arguments.length,
            args = Array(length),
            index = length;
          while (index--) {
            args[index] = arguments[index];
          }
          if (isCurried) {
            var placeholder = getHolder(wrapper),
              holdersCount = countHolders(args, placeholder);
          }
          if (partials) {
            args = composeArgs(args, partials, holders, isCurried);
          }
          if (partialsRight) {
            args = composeArgsRight(args, partialsRight, holdersRight, isCurried);
          }
          length -= holdersCount;
          if (isCurried && length < arity) {
            var newHolders = replaceHolders(args, placeholder);
            return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, thisArg, args, newHolders, argPos, ary, arity - length);
          }
          var thisBinding = isBind ? thisArg : this,
            fn = isBindKey ? thisBinding[func] : func;
          length = args.length;
          if (argPos) {
            args = reorder(args, argPos);
          } else if (isFlip && length > 1) {
            args.reverse();
          }
          if (isAry && ary < length) {
            args.length = ary;
          }
          if (this && this !== root && this instanceof wrapper) {
            fn = Ctor || createCtor(fn);
          }
          return fn.apply(thisBinding, args);
        }
        return wrapper;
      }

      function createInverter(setter, toIteratee) {
        return function (object, iteratee) {
          return baseInverter(object, setter, toIteratee(iteratee), {});
        };
      }

      function createMathOperation(operator, defaultValue) {
        return function (value, other) {
          var result;
          if (value === undefined$1 && other === undefined$1) {
            return defaultValue;
          }
          if (value !== undefined$1) {
            result = value;
          }
          if (other !== undefined$1) {
            if (result === undefined$1) {
              return other;
            }
            if (typeof value == 'string' || typeof other == 'string') {
              value = baseToString(value);
              other = baseToString(other);
            } else {
              value = baseToNumber(value);
              other = baseToNumber(other);
            }
            result = operator(value, other);
          }
          return result;
        };
      }

      function createOver(arrayFunc) {
        return flatRest(function (iteratees) {
          iteratees = arrayMap(iteratees, baseUnary(getIteratee()));
          return baseRest(function (args) {
            var thisArg = this;
            return arrayFunc(iteratees, function (iteratee) {
              return apply(iteratee, thisArg, args);
            });
          });
        });
      }

      function createPadding(length, chars) {
        chars = chars === undefined$1 ? ' ' : baseToString(chars);
        var charsLength = chars.length;
        if (charsLength < 2) {
          return charsLength ? baseRepeat(chars, length) : chars;
        }
        var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));
        return hasUnicode(chars) ? castSlice(stringToArray(result), 0, length).join('') : result.slice(0, length);
      }

      function createPartial(func, bitmask, thisArg, partials) {
        var isBind = bitmask & WRAP_BIND_FLAG,
          Ctor = createCtor(func);
        function wrapper() {
          var argsIndex = -1,
            argsLength = arguments.length,
            leftIndex = -1,
            leftLength = partials.length,
            args = Array(leftLength + argsLength),
            fn = this && this !== root && this instanceof wrapper ? Ctor : func;
          while (++leftIndex < leftLength) {
            args[leftIndex] = partials[leftIndex];
          }
          while (argsLength--) {
            args[leftIndex++] = arguments[++argsIndex];
          }
          return apply(fn, isBind ? thisArg : this, args);
        }
        return wrapper;
      }

      function createRange(fromRight) {
        return function (start, end, step) {
          if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {
            end = step = undefined$1;
          }
          start = toFinite(start);
          if (end === undefined$1) {
            end = start;
            start = 0;
          } else {
            end = toFinite(end);
          }
          step = step === undefined$1 ? start < end ? 1 : -1 : toFinite(step);
          return baseRange(start, end, step, fromRight);
        };
      }

      function createRelationalOperation(operator) {
        return function (value, other) {
          if (!(typeof value == 'string' && typeof other == 'string')) {
            value = toNumber(value);
            other = toNumber(other);
          }
          return operator(value, other);
        };
      }

      function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {
        var isCurry = bitmask & WRAP_CURRY_FLAG,
          newHolders = isCurry ? holders : undefined$1,
          newHoldersRight = isCurry ? undefined$1 : holders,
          newPartials = isCurry ? partials : undefined$1,
          newPartialsRight = isCurry ? undefined$1 : partials;
        bitmask |= isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG;
        bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);
        if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {
          bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);
        }
        var newData = [func, bitmask, thisArg, newPartials, newHolders, newPartialsRight, newHoldersRight, argPos, ary, arity];
        var result = wrapFunc.apply(undefined$1, newData);
        if (isLaziable(func)) {
          setData(result, newData);
        }
        result.placeholder = placeholder;
        return setWrapToString(result, func, bitmask);
      }

      function createRound(methodName) {
        var func = Math[methodName];
        return function (number, precision) {
          number = toNumber(number);
          precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);
          if (precision && nativeIsFinite(number)) {
            var pair = (toString(number) + 'e').split('e'),
              value = func(pair[0] + 'e' + (+pair[1] + precision));
            pair = (toString(value) + 'e').split('e');
            return +(pair[0] + 'e' + (+pair[1] - precision));
          }
          return func(number);
        };
      }

      var createSet = !(Set && 1 / setToArray(new Set([, -0]))[1] == INFINITY) ? noop : function (values) {
        return new Set(values);
      };

      function createToPairs(keysFunc) {
        return function (object) {
          var tag = getTag(object);
          if (tag == mapTag) {
            return mapToArray(object);
          }
          if (tag == setTag) {
            return setToPairs(object);
          }
          return baseToPairs(object, keysFunc(object));
        };
      }

      function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {
        var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;
        if (!isBindKey && typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        var length = partials ? partials.length : 0;
        if (!length) {
          bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);
          partials = holders = undefined$1;
        }
        ary = ary === undefined$1 ? ary : nativeMax(toInteger(ary), 0);
        arity = arity === undefined$1 ? arity : toInteger(arity);
        length -= holders ? holders.length : 0;
        if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {
          var partialsRight = partials,
            holdersRight = holders;
          partials = holders = undefined$1;
        }
        var data = isBindKey ? undefined$1 : getData(func);
        var newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];
        if (data) {
          mergeData(newData, data);
        }
        func = newData[0];
        bitmask = newData[1];
        thisArg = newData[2];
        partials = newData[3];
        holders = newData[4];
        arity = newData[9] = newData[9] === undefined$1 ? isBindKey ? 0 : func.length : nativeMax(newData[9] - length, 0);
        if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {
          bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);
        }
        if (!bitmask || bitmask == WRAP_BIND_FLAG) {
          var result = createBind(func, bitmask, thisArg);
        } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {
          result = createCurry(func, bitmask, arity);
        } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {
          result = createPartial(func, bitmask, thisArg, partials);
        } else {
          result = createHybrid.apply(undefined$1, newData);
        }
        var setter = data ? baseSetData : setData;
        return setWrapToString(setter(result, newData), func, bitmask);
      }

      function customDefaultsAssignIn(objValue, srcValue, key, object) {
        if (objValue === undefined$1 || eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key)) {
          return srcValue;
        }
        return objValue;
      }

      function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {
        if (isObject(objValue) && isObject(srcValue)) {
          stack.set(srcValue, objValue);
          baseMerge(objValue, srcValue, undefined$1, customDefaultsMerge, stack);
          stack['delete'](srcValue);
        }
        return objValue;
      }

      function customOmitClone(value) {
        return isPlainObject(value) ? undefined$1 : value;
      }

      function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
        var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          arrLength = array.length,
          othLength = other.length;
        if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
          return false;
        }
        var arrStacked = stack.get(array);
        var othStacked = stack.get(other);
        if (arrStacked && othStacked) {
          return arrStacked == other && othStacked == array;
        }
        var index = -1,
          result = true,
          seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined$1;
        stack.set(array, other);
        stack.set(other, array);

        while (++index < arrLength) {
          var arrValue = array[index],
            othValue = other[index];
          if (customizer) {
            var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
          }
          if (compared !== undefined$1) {
            if (compared) {
              continue;
            }
            result = false;
            break;
          }
          if (seen) {
            if (!arraySome(other, function (othValue, othIndex) {
              if (!cacheHas(seen, othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
                return seen.push(othIndex);
              }
            })) {
              result = false;
              break;
            }
          } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
            result = false;
            break;
          }
        }
        stack['delete'](array);
        stack['delete'](other);
        return result;
      }

      function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
        switch (tag) {
          case dataViewTag:
            if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
              return false;
            }
            object = object.buffer;
            other = other.buffer;
          case arrayBufferTag:
            if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
              return false;
            }
            return true;
          case boolTag:
          case dateTag:
          case numberTag:
            return eq(+object, +other);
          case errorTag:
            return object.name == other.name && object.message == other.message;
          case regexpTag:
          case stringTag:
            return object == other + '';
          case mapTag:
            var convert = mapToArray;
          case setTag:
            var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
            convert || (convert = setToArray);
            if (object.size != other.size && !isPartial) {
              return false;
            }
            var stacked = stack.get(object);
            if (stacked) {
              return stacked == other;
            }
            bitmask |= COMPARE_UNORDERED_FLAG;

            stack.set(object, other);
            var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
            stack['delete'](object);
            return result;
          case symbolTag:
            if (symbolValueOf) {
              return symbolValueOf.call(object) == symbolValueOf.call(other);
            }
        }
        return false;
      }

      function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
        var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
          objProps = getAllKeys(object),
          objLength = objProps.length,
          othProps = getAllKeys(other),
          othLength = othProps.length;
        if (objLength != othLength && !isPartial) {
          return false;
        }
        var index = objLength;
        while (index--) {
          var key = objProps[index];
          if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
            return false;
          }
        }
        var objStacked = stack.get(object);
        var othStacked = stack.get(other);
        if (objStacked && othStacked) {
          return objStacked == other && othStacked == object;
        }
        var result = true;
        stack.set(object, other);
        stack.set(other, object);
        var skipCtor = isPartial;
        while (++index < objLength) {
          key = objProps[index];
          var objValue = object[key],
            othValue = other[key];
          if (customizer) {
            var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
          }
          if (!(compared === undefined$1 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
            result = false;
            break;
          }
          skipCtor || (skipCtor = key == 'constructor');
        }
        if (result && !skipCtor) {
          var objCtor = object.constructor,
            othCtor = other.constructor;

          if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor == 'function' && objCtor instanceof objCtor && typeof othCtor == 'function' && othCtor instanceof othCtor)) {
            result = false;
          }
        }
        stack['delete'](object);
        stack['delete'](other);
        return result;
      }

      function flatRest(func) {
        return setToString(overRest(func, undefined$1, flatten), func + '');
      }

      function getAllKeys(object) {
        return baseGetAllKeys(object, keys, getSymbols);
      }

      function getAllKeysIn(object) {
        return baseGetAllKeys(object, keysIn, getSymbolsIn);
      }

      var getData = !metaMap ? noop : function (func) {
        return metaMap.get(func);
      };

      function getFuncName(func) {
        var result = func.name + '',
          array = realNames[result],
          length = hasOwnProperty.call(realNames, result) ? array.length : 0;
        while (length--) {
          var data = array[length],
            otherFunc = data.func;
          if (otherFunc == null || otherFunc == func) {
            return data.name;
          }
        }
        return result;
      }

      function getHolder(func) {
        var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;
        return object.placeholder;
      }

      function getIteratee() {
        var result = lodash.iteratee || iteratee;
        result = result === iteratee ? baseIteratee : result;
        return arguments.length ? result(arguments[0], arguments[1]) : result;
      }

      function getMapData(map, key) {
        var data = map.__data__;
        return isKeyable(key) ? data[typeof key == 'string' ? 'string' : 'hash'] : data.map;
      }

      function getMatchData(object) {
        var result = keys(object),
          length = result.length;
        while (length--) {
          var key = result[length],
            value = object[key];
          result[length] = [key, value, isStrictComparable(value)];
        }
        return result;
      }

      function getNative(object, key) {
        var value = getValue(object, key);
        return baseIsNative(value) ? value : undefined$1;
      }

      function getRawTag(value) {
        var isOwn = hasOwnProperty.call(value, symToStringTag),
          tag = value[symToStringTag];
        try {
          value[symToStringTag] = undefined$1;
          var unmasked = true;
        } catch (e) {}
        var result = nativeObjectToString.call(value);
        if (unmasked) {
          if (isOwn) {
            value[symToStringTag] = tag;
          } else {
            delete value[symToStringTag];
          }
        }
        return result;
      }

      var getSymbols = !nativeGetSymbols ? stubArray : function (object) {
        if (object == null) {
          return [];
        }
        object = Object(object);
        return arrayFilter(nativeGetSymbols(object), function (symbol) {
          return propertyIsEnumerable.call(object, symbol);
        });
      };

      var getSymbolsIn = !nativeGetSymbols ? stubArray : function (object) {
        var result = [];
        while (object) {
          arrayPush(result, getSymbols(object));
          object = getPrototype(object);
        }
        return result;
      };

      var getTag = baseGetTag;

      if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map && getTag(new Map()) != mapTag || Promise && getTag(Promise.resolve()) != promiseTag || Set && getTag(new Set()) != setTag || WeakMap && getTag(new WeakMap()) != weakMapTag) {
        getTag = function getTag(value) {
          var result = baseGetTag(value),
            Ctor = result == objectTag ? value.constructor : undefined$1,
            ctorString = Ctor ? toSource(Ctor) : '';
          if (ctorString) {
            switch (ctorString) {
              case dataViewCtorString:
                return dataViewTag;
              case mapCtorString:
                return mapTag;
              case promiseCtorString:
                return promiseTag;
              case setCtorString:
                return setTag;
              case weakMapCtorString:
                return weakMapTag;
            }
          }
          return result;
        };
      }

      function getView(start, end, transforms) {
        var index = -1,
          length = transforms.length;
        while (++index < length) {
          var data = transforms[index],
            size = data.size;
          switch (data.type) {
            case 'drop':
              start += size;
              break;
            case 'dropRight':
              end -= size;
              break;
            case 'take':
              end = nativeMin(end, start + size);
              break;
            case 'takeRight':
              start = nativeMax(start, end - size);
              break;
          }
        }
        return {
          'start': start,
          'end': end
        };
      }

      function getWrapDetails(source) {
        var match = source.match(reWrapDetails);
        return match ? match[1].split(reSplitDetails) : [];
      }

      function hasPath(object, path, hasFunc) {
        path = castPath(path, object);
        var index = -1,
          length = path.length,
          result = false;
        while (++index < length) {
          var key = toKey(path[index]);
          if (!(result = object != null && hasFunc(object, key))) {
            break;
          }
          object = object[key];
        }
        if (result || ++index != length) {
          return result;
        }
        length = object == null ? 0 : object.length;
        return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));
      }

      function initCloneArray(array) {
        var length = array.length,
          result = new array.constructor(length);

        if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {
          result.index = array.index;
          result.input = array.input;
        }
        return result;
      }

      function initCloneObject(object) {
        return typeof object.constructor == 'function' && !isPrototype(object) ? baseCreate(getPrototype(object)) : {};
      }

      function initCloneByTag(object, tag, isDeep) {
        var Ctor = object.constructor;
        switch (tag) {
          case arrayBufferTag:
            return cloneArrayBuffer(object);
          case boolTag:
          case dateTag:
            return new Ctor(+object);
          case dataViewTag:
            return cloneDataView(object, isDeep);
          case float32Tag:
          case float64Tag:
          case int8Tag:
          case int16Tag:
          case int32Tag:
          case uint8Tag:
          case uint8ClampedTag:
          case uint16Tag:
          case uint32Tag:
            return cloneTypedArray(object, isDeep);
          case mapTag:
            return new Ctor();
          case numberTag:
          case stringTag:
            return new Ctor(object);
          case regexpTag:
            return cloneRegExp(object);
          case setTag:
            return new Ctor();
          case symbolTag:
            return cloneSymbol(object);
        }
      }

      function insertWrapDetails(source, details) {
        var length = details.length;
        if (!length) {
          return source;
        }
        var lastIndex = length - 1;
        details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];
        details = details.join(length > 2 ? ', ' : ' ');
        return source.replace(reWrapComment, '{\n/* [wrapped with ' + details + '] */\n');
      }

      function isFlattenable(value) {
        return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
      }

      function isIndex(value, length) {
        var type = typeof value;
        length = length == null ? MAX_SAFE_INTEGER : length;
        return !!length && (type == 'number' || type != 'symbol' && reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
      }

      function isIterateeCall(value, index, object) {
        if (!isObject(object)) {
          return false;
        }
        var type = typeof index;
        if (type == 'number' ? isArrayLike(object) && isIndex(index, object.length) : type == 'string' && index in object) {
          return eq(object[index], value);
        }
        return false;
      }

      function isKey(value, object) {
        if (isArray(value)) {
          return false;
        }
        var type = typeof value;
        if (type == 'number' || type == 'symbol' || type == 'boolean' || value == null || isSymbol(value)) {
          return true;
        }
        return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
      }

      function isKeyable(value) {
        var type = typeof value;
        return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ? value !== '__proto__' : value === null;
      }

      function isLaziable(func) {
        var funcName = getFuncName(func),
          other = lodash[funcName];
        if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {
          return false;
        }
        if (func === other) {
          return true;
        }
        var data = getData(other);
        return !!data && func === data[0];
      }

      function isMasked(func) {
        return !!maskSrcKey && maskSrcKey in func;
      }

      var isMaskable = coreJsData ? isFunction : stubFalse;

      function isPrototype(value) {
        var Ctor = value && value.constructor,
          proto = typeof Ctor == 'function' && Ctor.prototype || objectProto;
        return value === proto;
      }

      function isStrictComparable(value) {
        return value === value && !isObject(value);
      }

      function matchesStrictComparable(key, srcValue) {
        return function (object) {
          if (object == null) {
            return false;
          }
          return object[key] === srcValue && (srcValue !== undefined$1 || key in Object(object));
        };
      }

      function memoizeCapped(func) {
        var result = memoize(func, function (key) {
          if (cache.size === MAX_MEMOIZE_SIZE) {
            cache.clear();
          }
          return key;
        });
        var cache = result.cache;
        return result;
      }

      function mergeData(data, source) {
        var bitmask = data[1],
          srcBitmask = source[1],
          newBitmask = bitmask | srcBitmask,
          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);
        var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;

        if (!(isCommon || isCombo)) {
          return data;
        }
        if (srcBitmask & WRAP_BIND_FLAG) {
          data[2] = source[2];
          newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
        }
        var value = source[3];
        if (value) {
          var partials = data[3];
          data[3] = partials ? composeArgs(partials, value, source[4]) : value;
          data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
        }
        value = source[5];
        if (value) {
          partials = data[5];
          data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
          data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
        }
        value = source[7];
        if (value) {
          data[7] = value;
        }
        if (srcBitmask & WRAP_ARY_FLAG) {
          data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
        }
        if (data[9] == null) {
          data[9] = source[9];
        }
        data[0] = source[0];
        data[1] = newBitmask;
        return data;
      }

      function nativeKeysIn(object) {
        var result = [];
        if (object != null) {
          for (var key in Object(object)) {
            result.push(key);
          }
        }
        return result;
      }

      function objectToString(value) {
        return nativeObjectToString.call(value);
      }

      function overRest(func, start, transform) {
        start = nativeMax(start === undefined$1 ? func.length - 1 : start, 0);
        return function () {
          var args = arguments,
            index = -1,
            length = nativeMax(args.length - start, 0),
            array = Array(length);
          while (++index < length) {
            array[index] = args[start + index];
          }
          index = -1;
          var otherArgs = Array(start + 1);
          while (++index < start) {
            otherArgs[index] = args[index];
          }
          otherArgs[start] = transform(array);
          return apply(func, this, otherArgs);
        };
      }

      function parent(object, path) {
        return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
      }

      function reorder(array, indexes) {
        var arrLength = array.length,
          length = nativeMin(indexes.length, arrLength),
          oldArray = copyArray(array);
        while (length--) {
          var index = indexes[length];
          array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined$1;
        }
        return array;
      }

      function safeGet(object, key) {
        if (key === 'constructor' && typeof object[key] === 'function') {
          return;
        }
        if (key == '__proto__') {
          return;
        }
        return object[key];
      }

      var setData = shortOut(baseSetData);

      var setTimeout = ctxSetTimeout || function (func, wait) {
        return root.setTimeout(func, wait);
      };

      var setToString = shortOut(baseSetToString);

      function setWrapToString(wrapper, reference, bitmask) {
        var source = reference + '';
        return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));
      }

      function shortOut(func) {
        var count = 0,
          lastCalled = 0;
        return function () {
          var stamp = nativeNow(),
            remaining = HOT_SPAN - (stamp - lastCalled);
          lastCalled = stamp;
          if (remaining > 0) {
            if (++count >= HOT_COUNT) {
              return arguments[0];
            }
          } else {
            count = 0;
          }
          return func.apply(undefined$1, arguments);
        };
      }

      function shuffleSelf(array, size) {
        var index = -1,
          length = array.length,
          lastIndex = length - 1;
        size = size === undefined$1 ? length : size;
        while (++index < size) {
          var rand = baseRandom(index, lastIndex),
            value = array[rand];
          array[rand] = array[index];
          array[index] = value;
        }
        array.length = size;
        return array;
      }

      var stringToPath = memoizeCapped(function (string) {
        var result = [];
        if (string.charCodeAt(0) === 46) {
          result.push('');
        }
        string.replace(rePropName, function (match, number, quote, subString) {
          result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);
        });
        return result;
      });

      function toKey(value) {
        if (typeof value == 'string' || isSymbol(value)) {
          return value;
        }
        var result = value + '';
        return result == '0' && 1 / value == -INFINITY ? '-0' : result;
      }

      function toSource(func) {
        if (func != null) {
          try {
            return funcToString.call(func);
          } catch (e) {}
          try {
            return func + '';
          } catch (e) {}
        }
        return '';
      }

      function updateWrapDetails(details, bitmask) {
        arrayEach(wrapFlags, function (pair) {
          var value = '_.' + pair[0];
          if (bitmask & pair[1] && !arrayIncludes(details, value)) {
            details.push(value);
          }
        });
        return details.sort();
      }

      function wrapperClone(wrapper) {
        if (wrapper instanceof LazyWrapper) {
          return wrapper.clone();
        }
        var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);
        result.__actions__ = copyArray(wrapper.__actions__);
        result.__index__ = wrapper.__index__;
        result.__values__ = wrapper.__values__;
        return result;
      }

      function chunk(array, size, guard) {
        if (guard ? isIterateeCall(array, size, guard) : size === undefined$1) {
          size = 1;
        } else {
          size = nativeMax(toInteger(size), 0);
        }
        var length = array == null ? 0 : array.length;
        if (!length || size < 1) {
          return [];
        }
        var index = 0,
          resIndex = 0,
          result = Array(nativeCeil(length / size));
        while (index < length) {
          result[resIndex++] = baseSlice(array, index, index += size);
        }
        return result;
      }

      function compact(array) {
        var index = -1,
          length = array == null ? 0 : array.length,
          resIndex = 0,
          result = [];
        while (++index < length) {
          var value = array[index];
          if (value) {
            result[resIndex++] = value;
          }
        }
        return result;
      }

      function concat() {
        var length = arguments.length;
        if (!length) {
          return [];
        }
        var args = Array(length - 1),
          array = arguments[0],
          index = length;
        while (index--) {
          args[index - 1] = arguments[index];
        }
        return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));
      }

      var difference = baseRest(function (array, values) {
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true)) : [];
      });

      var differenceBy = baseRest(function (array, values) {
        var iteratee = last(values);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2)) : [];
      });

      var differenceWith = baseRest(function (array, values) {
        var comparator = last(values);
        if (isArrayLikeObject(comparator)) {
          comparator = undefined$1;
        }
        return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined$1, comparator) : [];
      });

      function drop(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        return baseSlice(array, n < 0 ? 0 : n, length);
      }

      function dropRight(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        n = length - n;
        return baseSlice(array, 0, n < 0 ? 0 : n);
      }

      function dropRightWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true, true) : [];
      }

      function dropWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true) : [];
      }

      function fill(array, value, start, end) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
          start = 0;
          end = length;
        }
        return baseFill(array, value, start, end);
      }

      function findIndex(array, predicate, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = fromIndex == null ? 0 : toInteger(fromIndex);
        if (index < 0) {
          index = nativeMax(length + index, 0);
        }
        return baseFindIndex(array, getIteratee(predicate, 3), index);
      }

      function findLastIndex(array, predicate, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = length - 1;
        if (fromIndex !== undefined$1) {
          index = toInteger(fromIndex);
          index = fromIndex < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
        }
        return baseFindIndex(array, getIteratee(predicate, 3), index, true);
      }

      function flatten(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseFlatten(array, 1) : [];
      }

      function flattenDeep(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseFlatten(array, INFINITY) : [];
      }

      function flattenDepth(array, depth) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        depth = depth === undefined$1 ? 1 : toInteger(depth);
        return baseFlatten(array, depth);
      }

      function fromPairs(pairs) {
        var index = -1,
          length = pairs == null ? 0 : pairs.length,
          result = {};
        while (++index < length) {
          var pair = pairs[index];
          result[pair[0]] = pair[1];
        }
        return result;
      }

      function head(array) {
        return array && array.length ? array[0] : undefined$1;
      }

      function indexOf(array, value, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = fromIndex == null ? 0 : toInteger(fromIndex);
        if (index < 0) {
          index = nativeMax(length + index, 0);
        }
        return baseIndexOf(array, value, index);
      }

      function initial(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseSlice(array, 0, -1) : [];
      }

      var intersection = baseRest(function (arrays) {
        var mapped = arrayMap(arrays, castArrayLikeObject);
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
      });

      var intersectionBy = baseRest(function (arrays) {
        var iteratee = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);
        if (iteratee === last(mapped)) {
          iteratee = undefined$1;
        } else {
          mapped.pop();
        }
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, getIteratee(iteratee, 2)) : [];
      });

      var intersectionWith = baseRest(function (arrays) {
        var comparator = last(arrays),
          mapped = arrayMap(arrays, castArrayLikeObject);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        if (comparator) {
          mapped.pop();
        }
        return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, undefined$1, comparator) : [];
      });

      function join(array, separator) {
        return array == null ? '' : nativeJoin.call(array, separator);
      }

      function last(array) {
        var length = array == null ? 0 : array.length;
        return length ? array[length - 1] : undefined$1;
      }

      function lastIndexOf(array, value, fromIndex) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return -1;
        }
        var index = length;
        if (fromIndex !== undefined$1) {
          index = toInteger(fromIndex);
          index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
        }
        return value === value ? strictLastIndexOf(array, value, index) : baseFindIndex(array, baseIsNaN, index, true);
      }

      function nth(array, n) {
        return array && array.length ? baseNth(array, toInteger(n)) : undefined$1;
      }

      var pull = baseRest(pullAll);

      function pullAll(array, values) {
        return array && array.length && values && values.length ? basePullAll(array, values) : array;
      }

      function pullAllBy(array, values, iteratee) {
        return array && array.length && values && values.length ? basePullAll(array, values, getIteratee(iteratee, 2)) : array;
      }

      function pullAllWith(array, values, comparator) {
        return array && array.length && values && values.length ? basePullAll(array, values, undefined$1, comparator) : array;
      }

      var pullAt = flatRest(function (array, indexes) {
        var length = array == null ? 0 : array.length,
          result = baseAt(array, indexes);
        basePullAt(array, arrayMap(indexes, function (index) {
          return isIndex(index, length) ? +index : index;
        }).sort(compareAscending));
        return result;
      });

      function remove(array, predicate) {
        var result = [];
        if (!(array && array.length)) {
          return result;
        }
        var index = -1,
          indexes = [],
          length = array.length;
        predicate = getIteratee(predicate, 3);
        while (++index < length) {
          var value = array[index];
          if (predicate(value, index, array)) {
            result.push(value);
            indexes.push(index);
          }
        }
        basePullAt(array, indexes);
        return result;
      }

      function reverse(array) {
        return array == null ? array : nativeReverse.call(array);
      }

      function slice(array, start, end) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
          start = 0;
          end = length;
        } else {
          start = start == null ? 0 : toInteger(start);
          end = end === undefined$1 ? length : toInteger(end);
        }
        return baseSlice(array, start, end);
      }

      function sortedIndex(array, value) {
        return baseSortedIndex(array, value);
      }

      function sortedIndexBy(array, value, iteratee) {
        return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));
      }

      function sortedIndexOf(array, value) {
        var length = array == null ? 0 : array.length;
        if (length) {
          var index = baseSortedIndex(array, value);
          if (index < length && eq(array[index], value)) {
            return index;
          }
        }
        return -1;
      }

      function sortedLastIndex(array, value) {
        return baseSortedIndex(array, value, true);
      }

      function sortedLastIndexBy(array, value, iteratee) {
        return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);
      }

      function sortedLastIndexOf(array, value) {
        var length = array == null ? 0 : array.length;
        if (length) {
          var index = baseSortedIndex(array, value, true) - 1;
          if (eq(array[index], value)) {
            return index;
          }
        }
        return -1;
      }

      function sortedUniq(array) {
        return array && array.length ? baseSortedUniq(array) : [];
      }

      function sortedUniqBy(array, iteratee) {
        return array && array.length ? baseSortedUniq(array, getIteratee(iteratee, 2)) : [];
      }

      function tail(array) {
        var length = array == null ? 0 : array.length;
        return length ? baseSlice(array, 1, length) : [];
      }

      function take(array, n, guard) {
        if (!(array && array.length)) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        return baseSlice(array, 0, n < 0 ? 0 : n);
      }

      function takeRight(array, n, guard) {
        var length = array == null ? 0 : array.length;
        if (!length) {
          return [];
        }
        n = guard || n === undefined$1 ? 1 : toInteger(n);
        n = length - n;
        return baseSlice(array, n < 0 ? 0 : n, length);
      }

      function takeRightWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3), false, true) : [];
      }

      function takeWhile(array, predicate) {
        return array && array.length ? baseWhile(array, getIteratee(predicate, 3)) : [];
      }

      var union = baseRest(function (arrays) {
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));
      });

      var unionBy = baseRest(function (arrays) {
        var iteratee = last(arrays);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));
      });

      var unionWith = baseRest(function (arrays) {
        var comparator = last(arrays);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined$1, comparator);
      });

      function uniq(array) {
        return array && array.length ? baseUniq(array) : [];
      }

      function uniqBy(array, iteratee) {
        return array && array.length ? baseUniq(array, getIteratee(iteratee, 2)) : [];
      }

      function uniqWith(array, comparator) {
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return array && array.length ? baseUniq(array, undefined$1, comparator) : [];
      }

      function unzip(array) {
        if (!(array && array.length)) {
          return [];
        }
        var length = 0;
        array = arrayFilter(array, function (group) {
          if (isArrayLikeObject(group)) {
            length = nativeMax(group.length, length);
            return true;
          }
        });
        return baseTimes(length, function (index) {
          return arrayMap(array, baseProperty(index));
        });
      }

      function unzipWith(array, iteratee) {
        if (!(array && array.length)) {
          return [];
        }
        var result = unzip(array);
        if (iteratee == null) {
          return result;
        }
        return arrayMap(result, function (group) {
          return apply(iteratee, undefined$1, group);
        });
      }

      var without = baseRest(function (array, values) {
        return isArrayLikeObject(array) ? baseDifference(array, values) : [];
      });

      var xor = baseRest(function (arrays) {
        return baseXor(arrayFilter(arrays, isArrayLikeObject));
      });

      var xorBy = baseRest(function (arrays) {
        var iteratee = last(arrays);
        if (isArrayLikeObject(iteratee)) {
          iteratee = undefined$1;
        }
        return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));
      });

      var xorWith = baseRest(function (arrays) {
        var comparator = last(arrays);
        comparator = typeof comparator == 'function' ? comparator : undefined$1;
        return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined$1, comparator);
      });

      var zip = baseRest(unzip);

      function zipObject(props, values) {
        return baseZipObject(props || [], values || [], assignValue);
      }

      function zipObjectDeep(props, values) {
        return baseZipObject(props || [], values || [], baseSet);
      }

      var zipWith = baseRest(function (arrays) {
        var length = arrays.length,
          iteratee = length > 1 ? arrays[length - 1] : undefined$1;
        iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined$1;
        return unzipWith(arrays, iteratee);
      });

      function chain(value) {
        var result = lodash(value);
        result.__chain__ = true;
        return result;
      }

      function tap(value, interceptor) {
        interceptor(value);
        return value;
      }

      function thru(value, interceptor) {
        return interceptor(value);
      }

      var wrapperAt = flatRest(function (paths) {
        var length = paths.length,
          start = length ? paths[0] : 0,
          value = this.__wrapped__,
          interceptor = function interceptor(object) {
            return baseAt(object, paths);
          };
        if (length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex(start)) {
          return this.thru(interceptor);
        }
        value = value.slice(start, +start + (length ? 1 : 0));
        value.__actions__.push({
          'func': thru,
          'args': [interceptor],
          'thisArg': undefined$1
        });
        return new LodashWrapper(value, this.__chain__).thru(function (array) {
          if (length && !array.length) {
            array.push(undefined$1);
          }
          return array;
        });
      });

      function wrapperChain() {
        return chain(this);
      }

      function wrapperCommit() {
        return new LodashWrapper(this.value(), this.__chain__);
      }

      function wrapperNext() {
        if (this.__values__ === undefined$1) {
          this.__values__ = toArray(this.value());
        }
        var done = this.__index__ >= this.__values__.length,
          value = done ? undefined$1 : this.__values__[this.__index__++];
        return {
          'done': done,
          'value': value
        };
      }

      function wrapperToIterator() {
        return this;
      }

      function wrapperPlant(value) {
        var result,
          parent = this;
        while (parent instanceof baseLodash) {
          var clone = wrapperClone(parent);
          clone.__index__ = 0;
          clone.__values__ = undefined$1;
          if (result) {
            previous.__wrapped__ = clone;
          } else {
            result = clone;
          }
          var previous = clone;
          parent = parent.__wrapped__;
        }
        previous.__wrapped__ = value;
        return result;
      }

      function wrapperReverse() {
        var value = this.__wrapped__;
        if (value instanceof LazyWrapper) {
          var wrapped = value;
          if (this.__actions__.length) {
            wrapped = new LazyWrapper(this);
          }
          wrapped = wrapped.reverse();
          wrapped.__actions__.push({
            'func': thru,
            'args': [reverse],
            'thisArg': undefined$1
          });
          return new LodashWrapper(wrapped, this.__chain__);
        }
        return this.thru(reverse);
      }

      function wrapperValue() {
        return baseWrapperValue(this.__wrapped__, this.__actions__);
      }

      var countBy = createAggregator(function (result, value, key) {
        if (hasOwnProperty.call(result, key)) {
          ++result[key];
        } else {
          baseAssignValue(result, key, 1);
        }
      });

      function every(collection, predicate, guard) {
        var func = isArray(collection) ? arrayEvery : baseEvery;
        if (guard && isIterateeCall(collection, predicate, guard)) {
          predicate = undefined$1;
        }
        return func(collection, getIteratee(predicate, 3));
      }

      function filter(collection, predicate) {
        var func = isArray(collection) ? arrayFilter : baseFilter;
        return func(collection, getIteratee(predicate, 3));
      }

      var find = createFind(findIndex);

      var findLast = createFind(findLastIndex);

      function flatMap(collection, iteratee) {
        return baseFlatten(map(collection, iteratee), 1);
      }

      function flatMapDeep(collection, iteratee) {
        return baseFlatten(map(collection, iteratee), INFINITY);
      }

      function flatMapDepth(collection, iteratee, depth) {
        depth = depth === undefined$1 ? 1 : toInteger(depth);
        return baseFlatten(map(collection, iteratee), depth);
      }

      function forEach(collection, iteratee) {
        var func = isArray(collection) ? arrayEach : baseEach;
        return func(collection, getIteratee(iteratee, 3));
      }

      function forEachRight(collection, iteratee) {
        var func = isArray(collection) ? arrayEachRight : baseEachRight;
        return func(collection, getIteratee(iteratee, 3));
      }

      var groupBy = createAggregator(function (result, value, key) {
        if (hasOwnProperty.call(result, key)) {
          result[key].push(value);
        } else {
          baseAssignValue(result, key, [value]);
        }
      });

      function includes(collection, value, fromIndex, guard) {
        collection = isArrayLike(collection) ? collection : values(collection);
        fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
        var length = collection.length;
        if (fromIndex < 0) {
          fromIndex = nativeMax(length + fromIndex, 0);
        }
        return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
      }

      var invokeMap = baseRest(function (collection, path, args) {
        var index = -1,
          isFunc = typeof path == 'function',
          result = isArrayLike(collection) ? Array(collection.length) : [];
        baseEach(collection, function (value) {
          result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);
        });
        return result;
      });

      var keyBy = createAggregator(function (result, value, key) {
        baseAssignValue(result, key, value);
      });

      function map(collection, iteratee) {
        var func = isArray(collection) ? arrayMap : baseMap;
        return func(collection, getIteratee(iteratee, 3));
      }

      function orderBy(collection, iteratees, orders, guard) {
        if (collection == null) {
          return [];
        }
        if (!isArray(iteratees)) {
          iteratees = iteratees == null ? [] : [iteratees];
        }
        orders = guard ? undefined$1 : orders;
        if (!isArray(orders)) {
          orders = orders == null ? [] : [orders];
        }
        return baseOrderBy(collection, iteratees, orders);
      }

      var partition = createAggregator(function (result, value, key) {
        result[key ? 0 : 1].push(value);
      }, function () {
        return [[], []];
      });

      function reduce(collection, iteratee, accumulator) {
        var func = isArray(collection) ? arrayReduce : baseReduce,
          initAccum = arguments.length < 3;
        return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);
      }

      function reduceRight(collection, iteratee, accumulator) {
        var func = isArray(collection) ? arrayReduceRight : baseReduce,
          initAccum = arguments.length < 3;
        return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);
      }

      function reject(collection, predicate) {
        var func = isArray(collection) ? arrayFilter : baseFilter;
        return func(collection, negate(getIteratee(predicate, 3)));
      }

      function sample(collection) {
        var func = isArray(collection) ? arraySample : baseSample;
        return func(collection);
      }

      function sampleSize(collection, n, guard) {
        if (guard ? isIterateeCall(collection, n, guard) : n === undefined$1) {
          n = 1;
        } else {
          n = toInteger(n);
        }
        var func = isArray(collection) ? arraySampleSize : baseSampleSize;
        return func(collection, n);
      }

      function shuffle(collection) {
        var func = isArray(collection) ? arrayShuffle : baseShuffle;
        return func(collection);
      }

      function size(collection) {
        if (collection == null) {
          return 0;
        }
        if (isArrayLike(collection)) {
          return isString(collection) ? stringSize(collection) : collection.length;
        }
        var tag = getTag(collection);
        if (tag == mapTag || tag == setTag) {
          return collection.size;
        }
        return baseKeys(collection).length;
      }

      function some(collection, predicate, guard) {
        var func = isArray(collection) ? arraySome : baseSome;
        if (guard && isIterateeCall(collection, predicate, guard)) {
          predicate = undefined$1;
        }
        return func(collection, getIteratee(predicate, 3));
      }

      var sortBy = baseRest(function (collection, iteratees) {
        if (collection == null) {
          return [];
        }
        var length = iteratees.length;
        if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
          iteratees = [];
        } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
          iteratees = [iteratees[0]];
        }
        return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
      });

      var now = ctxNow || function () {
        return root.Date.now();
      };

      function after(n, func) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        n = toInteger(n);
        return function () {
          if (--n < 1) {
            return func.apply(this, arguments);
          }
        };
      }

      function ary(func, n, guard) {
        n = guard ? undefined$1 : n;
        n = func && n == null ? func.length : n;
        return createWrap(func, WRAP_ARY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, n);
      }

      function before(n, func) {
        var result;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        n = toInteger(n);
        return function () {
          if (--n > 0) {
            result = func.apply(this, arguments);
          }
          if (n <= 1) {
            func = undefined$1;
          }
          return result;
        };
      }

      var bind = baseRest(function (func, thisArg, partials) {
        var bitmask = WRAP_BIND_FLAG;
        if (partials.length) {
          var holders = replaceHolders(partials, getHolder(bind));
          bitmask |= WRAP_PARTIAL_FLAG;
        }
        return createWrap(func, bitmask, thisArg, partials, holders);
      });

      var bindKey = baseRest(function (object, key, partials) {
        var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;
        if (partials.length) {
          var holders = replaceHolders(partials, getHolder(bindKey));
          bitmask |= WRAP_PARTIAL_FLAG;
        }
        return createWrap(key, bitmask, object, partials, holders);
      });

      function curry(func, arity, guard) {
        arity = guard ? undefined$1 : arity;
        var result = createWrap(func, WRAP_CURRY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
        result.placeholder = curry.placeholder;
        return result;
      }

      function curryRight(func, arity, guard) {
        arity = guard ? undefined$1 : arity;
        var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
        result.placeholder = curryRight.placeholder;
        return result;
      }

      function debounce(func, wait, options) {
        var lastArgs,
          lastThis,
          maxWait,
          result,
          timerId,
          lastCallTime,
          lastInvokeTime = 0,
          leading = false,
          maxing = false,
          trailing = true;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        wait = toNumber(wait) || 0;
        if (isObject(options)) {
          leading = !!options.leading;
          maxing = 'maxWait' in options;
          maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
          trailing = 'trailing' in options ? !!options.trailing : trailing;
        }
        function invokeFunc(time) {
          var args = lastArgs,
            thisArg = lastThis;
          lastArgs = lastThis = undefined$1;
          lastInvokeTime = time;
          result = func.apply(thisArg, args);
          return result;
        }
        function leadingEdge(time) {
          lastInvokeTime = time;
          timerId = setTimeout(timerExpired, wait);
          return leading ? invokeFunc(time) : result;
        }
        function remainingWait(time) {
          var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime,
            timeWaiting = wait - timeSinceLastCall;
          return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
        }
        function shouldInvoke(time) {
          var timeSinceLastCall = time - lastCallTime,
            timeSinceLastInvoke = time - lastInvokeTime;

          return lastCallTime === undefined$1 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
        }
        function timerExpired() {
          var time = now();
          if (shouldInvoke(time)) {
            return trailingEdge(time);
          }
          timerId = setTimeout(timerExpired, remainingWait(time));
        }
        function trailingEdge(time) {
          timerId = undefined$1;

          if (trailing && lastArgs) {
            return invokeFunc(time);
          }
          lastArgs = lastThis = undefined$1;
          return result;
        }
        function cancel() {
          if (timerId !== undefined$1) {
            clearTimeout(timerId);
          }
          lastInvokeTime = 0;
          lastArgs = lastCallTime = lastThis = timerId = undefined$1;
        }
        function flush() {
          return timerId === undefined$1 ? result : trailingEdge(now());
        }
        function debounced() {
          var time = now(),
            isInvoking = shouldInvoke(time);
          lastArgs = arguments;
          lastThis = this;
          lastCallTime = time;
          if (isInvoking) {
            if (timerId === undefined$1) {
              return leadingEdge(lastCallTime);
            }
            if (maxing) {
              clearTimeout(timerId);
              timerId = setTimeout(timerExpired, wait);
              return invokeFunc(lastCallTime);
            }
          }
          if (timerId === undefined$1) {
            timerId = setTimeout(timerExpired, wait);
          }
          return result;
        }
        debounced.cancel = cancel;
        debounced.flush = flush;
        return debounced;
      }

      var defer = baseRest(function (func, args) {
        return baseDelay(func, 1, args);
      });

      var delay = baseRest(function (func, wait, args) {
        return baseDelay(func, toNumber(wait) || 0, args);
      });

      function flip(func) {
        return createWrap(func, WRAP_FLIP_FLAG);
      }

      function memoize(func, resolver) {
        if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        var memoized = function memoized() {
          var args = arguments,
            key = resolver ? resolver.apply(this, args) : args[0],
            cache = memoized.cache;
          if (cache.has(key)) {
            return cache.get(key);
          }
          var result = func.apply(this, args);
          memoized.cache = cache.set(key, result) || cache;
          return result;
        };
        memoized.cache = new (memoize.Cache || MapCache)();
        return memoized;
      }

      memoize.Cache = MapCache;

      function negate(predicate) {
        if (typeof predicate != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        return function () {
          var args = arguments;
          switch (args.length) {
            case 0:
              return !predicate.call(this);
            case 1:
              return !predicate.call(this, args[0]);
            case 2:
              return !predicate.call(this, args[0], args[1]);
            case 3:
              return !predicate.call(this, args[0], args[1], args[2]);
          }
          return !predicate.apply(this, args);
        };
      }

      function once(func) {
        return before(2, func);
      }

      var overArgs = castRest(function (func, transforms) {
        transforms = transforms.length == 1 && isArray(transforms[0]) ? arrayMap(transforms[0], baseUnary(getIteratee())) : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));
        var funcsLength = transforms.length;
        return baseRest(function (args) {
          var index = -1,
            length = nativeMin(args.length, funcsLength);
          while (++index < length) {
            args[index] = transforms[index].call(this, args[index]);
          }
          return apply(func, this, args);
        });
      });

      var partial = baseRest(function (func, partials) {
        var holders = replaceHolders(partials, getHolder(partial));
        return createWrap(func, WRAP_PARTIAL_FLAG, undefined$1, partials, holders);
      });

      var partialRight = baseRest(function (func, partials) {
        var holders = replaceHolders(partials, getHolder(partialRight));
        return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined$1, partials, holders);
      });

      var rearg = flatRest(function (func, indexes) {
        return createWrap(func, WRAP_REARG_FLAG, undefined$1, undefined$1, undefined$1, indexes);
      });

      function rest(func, start) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        start = start === undefined$1 ? start : toInteger(start);
        return baseRest(func, start);
      }

      function spread(func, start) {
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        start = start == null ? 0 : nativeMax(toInteger(start), 0);
        return baseRest(function (args) {
          var array = args[start],
            otherArgs = castSlice(args, 0, start);
          if (array) {
            arrayPush(otherArgs, array);
          }
          return apply(func, this, otherArgs);
        });
      }

      function throttle(func, wait, options) {
        var leading = true,
          trailing = true;
        if (typeof func != 'function') {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        if (isObject(options)) {
          leading = 'leading' in options ? !!options.leading : leading;
          trailing = 'trailing' in options ? !!options.trailing : trailing;
        }
        return debounce(func, wait, {
          'leading': leading,
          'maxWait': wait,
          'trailing': trailing
        });
      }

      function unary(func) {
        return ary(func, 1);
      }

      function wrap(value, wrapper) {
        return partial(castFunction(wrapper), value);
      }

      function castArray() {
        if (!arguments.length) {
          return [];
        }
        var value = arguments[0];
        return isArray(value) ? value : [value];
      }

      function clone(value) {
        return baseClone(value, CLONE_SYMBOLS_FLAG);
      }

      function cloneWith(value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);
      }

      function cloneDeep(value) {
        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);
      }

      function cloneDeepWith(value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);
      }

      function conformsTo(object, source) {
        return source == null || baseConformsTo(object, source, keys(source));
      }

      function eq(value, other) {
        return value === other || value !== value && other !== other;
      }

      var gt = createRelationalOperation(baseGt);

      var gte = createRelationalOperation(function (value, other) {
        return value >= other;
      });

      var isArguments = baseIsArguments(function () {
        return arguments;
      }()) ? baseIsArguments : function (value) {
        return isObjectLike(value) && hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
      };

      var isArray = Array.isArray;

      var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;

      function isArrayLike(value) {
        return value != null && isLength(value.length) && !isFunction(value);
      }

      function isArrayLikeObject(value) {
        return isObjectLike(value) && isArrayLike(value);
      }

      function isBoolean(value) {
        return value === true || value === false || isObjectLike(value) && baseGetTag(value) == boolTag;
      }

      var isBuffer = nativeIsBuffer || stubFalse;

      var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;

      function isElement(value) {
        return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);
      }

      function isEmpty(value) {
        if (value == null) {
          return true;
        }
        if (isArrayLike(value) && (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' || isBuffer(value) || isTypedArray(value) || isArguments(value))) {
          return !value.length;
        }
        var tag = getTag(value);
        if (tag == mapTag || tag == setTag) {
          return !value.size;
        }
        if (isPrototype(value)) {
          return !baseKeys(value).length;
        }
        for (var key in value) {
          if (hasOwnProperty.call(value, key)) {
            return false;
          }
        }
        return true;
      }

      function isEqual(value, other) {
        return baseIsEqual(value, other);
      }

      function isEqualWith(value, other, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        var result = customizer ? customizer(value, other) : undefined$1;
        return result === undefined$1 ? baseIsEqual(value, other, undefined$1, customizer) : !!result;
      }

      function isError(value) {
        if (!isObjectLike(value)) {
          return false;
        }
        var tag = baseGetTag(value);
        return tag == errorTag || tag == domExcTag || typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value);
      }

      function isFinite(value) {
        return typeof value == 'number' && nativeIsFinite(value);
      }

      function isFunction(value) {
        if (!isObject(value)) {
          return false;
        }
        var tag = baseGetTag(value);
        return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
      }

      function isInteger(value) {
        return typeof value == 'number' && value == toInteger(value);
      }

      function isLength(value) {
        return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
      }

      function isObject(value) {
        var type = typeof value;
        return value != null && (type == 'object' || type == 'function');
      }

      function isObjectLike(value) {
        return value != null && typeof value == 'object';
      }

      var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;

      function isMatch(object, source) {
        return object === source || baseIsMatch(object, source, getMatchData(source));
      }

      function isMatchWith(object, source, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return baseIsMatch(object, source, getMatchData(source), customizer);
      }

      function isNaN(value) {
        return isNumber(value) && value != +value;
      }

      function isNative(value) {
        if (isMaskable(value)) {
          throw new Error(CORE_ERROR_TEXT);
        }
        return baseIsNative(value);
      }

      function isNull(value) {
        return value === null;
      }

      function isNil(value) {
        return value == null;
      }

      function isNumber(value) {
        return typeof value == 'number' || isObjectLike(value) && baseGetTag(value) == numberTag;
      }

      function isPlainObject(value) {
        if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
          return false;
        }
        var proto = getPrototype(value);
        if (proto === null) {
          return true;
        }
        var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
        return typeof Ctor == 'function' && Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString;
      }

      var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;

      function isSafeInteger(value) {
        return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;
      }

      var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;

      function isString(value) {
        return typeof value == 'string' || !isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag;
      }

      function isSymbol(value) {
        return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;
      }

      var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

      function isUndefined(value) {
        return value === undefined$1;
      }

      function isWeakMap(value) {
        return isObjectLike(value) && getTag(value) == weakMapTag;
      }

      function isWeakSet(value) {
        return isObjectLike(value) && baseGetTag(value) == weakSetTag;
      }

      var lt = createRelationalOperation(baseLt);

      var lte = createRelationalOperation(function (value, other) {
        return value <= other;
      });

      function toArray(value) {
        if (!value) {
          return [];
        }
        if (isArrayLike(value)) {
          return isString(value) ? stringToArray(value) : copyArray(value);
        }
        if (symIterator && value[symIterator]) {
          return iteratorToArray(value[symIterator]());
        }
        var tag = getTag(value),
          func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;
        return func(value);
      }

      function toFinite(value) {
        if (!value) {
          return value === 0 ? value : 0;
        }
        value = toNumber(value);
        if (value === INFINITY || value === -INFINITY) {
          var sign = value < 0 ? -1 : 1;
          return sign * MAX_INTEGER;
        }
        return value === value ? value : 0;
      }

      function toInteger(value) {
        var result = toFinite(value),
          remainder = result % 1;
        return result === result ? remainder ? result - remainder : result : 0;
      }

      function toLength(value) {
        return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
      }

      function toNumber(value) {
        if (typeof value == 'number') {
          return value;
        }
        if (isSymbol(value)) {
          return NAN;
        }
        if (isObject(value)) {
          var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
          value = isObject(other) ? other + '' : other;
        }
        if (typeof value != 'string') {
          return value === 0 ? value : +value;
        }
        value = baseTrim(value);
        var isBinary = reIsBinary.test(value);
        return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
      }

      function toPlainObject(value) {
        return copyObject(value, keysIn(value));
      }

      function toSafeInteger(value) {
        return value ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER) : value === 0 ? value : 0;
      }

      function toString(value) {
        return value == null ? '' : baseToString(value);
      }

      var assign = createAssigner(function (object, source) {
        if (isPrototype(source) || isArrayLike(source)) {
          copyObject(source, keys(source), object);
          return;
        }
        for (var key in source) {
          if (hasOwnProperty.call(source, key)) {
            assignValue(object, key, source[key]);
          }
        }
      });

      var assignIn = createAssigner(function (object, source) {
        copyObject(source, keysIn(source), object);
      });

      var assignInWith = createAssigner(function (object, source, srcIndex, customizer) {
        copyObject(source, keysIn(source), object, customizer);
      });

      var assignWith = createAssigner(function (object, source, srcIndex, customizer) {
        copyObject(source, keys(source), object, customizer);
      });

      var at = flatRest(baseAt);

      function create(prototype, properties) {
        var result = baseCreate(prototype);
        return properties == null ? result : baseAssign(result, properties);
      }

      var defaults = baseRest(function (object, sources) {
        object = Object(object);
        var index = -1;
        var length = sources.length;
        var guard = length > 2 ? sources[2] : undefined$1;
        if (guard && isIterateeCall(sources[0], sources[1], guard)) {
          length = 1;
        }
        while (++index < length) {
          var source = sources[index];
          var props = keysIn(source);
          var propsIndex = -1;
          var propsLength = props.length;
          while (++propsIndex < propsLength) {
            var key = props[propsIndex];
            var value = object[key];
            if (value === undefined$1 || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {
              object[key] = source[key];
            }
          }
        }
        return object;
      });

      var defaultsDeep = baseRest(function (args) {
        args.push(undefined$1, customDefaultsMerge);
        return apply(mergeWith, undefined$1, args);
      });

      function findKey(object, predicate) {
        return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);
      }

      function findLastKey(object, predicate) {
        return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);
      }

      function forIn(object, iteratee) {
        return object == null ? object : baseFor(object, getIteratee(iteratee, 3), keysIn);
      }

      function forInRight(object, iteratee) {
        return object == null ? object : baseForRight(object, getIteratee(iteratee, 3), keysIn);
      }

      function forOwn(object, iteratee) {
        return object && baseForOwn(object, getIteratee(iteratee, 3));
      }

      function forOwnRight(object, iteratee) {
        return object && baseForOwnRight(object, getIteratee(iteratee, 3));
      }

      function functions(object) {
        return object == null ? [] : baseFunctions(object, keys(object));
      }

      function functionsIn(object) {
        return object == null ? [] : baseFunctions(object, keysIn(object));
      }

      function get(object, path, defaultValue) {
        var result = object == null ? undefined$1 : baseGet(object, path);
        return result === undefined$1 ? defaultValue : result;
      }

      function has(object, path) {
        return object != null && hasPath(object, path, baseHas);
      }

      function hasIn(object, path) {
        return object != null && hasPath(object, path, baseHasIn);
      }

      var invert = createInverter(function (result, value, key) {
        if (value != null && typeof value.toString != 'function') {
          value = nativeObjectToString.call(value);
        }
        result[value] = key;
      }, constant(identity));

      var invertBy = createInverter(function (result, value, key) {
        if (value != null && typeof value.toString != 'function') {
          value = nativeObjectToString.call(value);
        }
        if (hasOwnProperty.call(result, value)) {
          result[value].push(key);
        } else {
          result[value] = [key];
        }
      }, getIteratee);

      var invoke = baseRest(baseInvoke);

      function keys(object) {
        return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
      }

      function keysIn(object) {
        return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
      }

      function mapKeys(object, iteratee) {
        var result = {};
        iteratee = getIteratee(iteratee, 3);
        baseForOwn(object, function (value, key, object) {
          baseAssignValue(result, iteratee(value, key, object), value);
        });
        return result;
      }

      function mapValues(object, iteratee) {
        var result = {};
        iteratee = getIteratee(iteratee, 3);
        baseForOwn(object, function (value, key, object) {
          baseAssignValue(result, key, iteratee(value, key, object));
        });
        return result;
      }

      var merge = createAssigner(function (object, source, srcIndex) {
        baseMerge(object, source, srcIndex);
      });

      var mergeWith = createAssigner(function (object, source, srcIndex, customizer) {
        baseMerge(object, source, srcIndex, customizer);
      });

      var omit = flatRest(function (object, paths) {
        var result = {};
        if (object == null) {
          return result;
        }
        var isDeep = false;
        paths = arrayMap(paths, function (path) {
          path = castPath(path, object);
          isDeep || (isDeep = path.length > 1);
          return path;
        });
        copyObject(object, getAllKeysIn(object), result);
        if (isDeep) {
          result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
        }
        var length = paths.length;
        while (length--) {
          baseUnset(result, paths[length]);
        }
        return result;
      });

      function omitBy(object, predicate) {
        return pickBy(object, negate(getIteratee(predicate)));
      }

      var pick = flatRest(function (object, paths) {
        return object == null ? {} : basePick(object, paths);
      });

      function pickBy(object, predicate) {
        if (object == null) {
          return {};
        }
        var props = arrayMap(getAllKeysIn(object), function (prop) {
          return [prop];
        });
        predicate = getIteratee(predicate);
        return basePickBy(object, props, function (value, path) {
          return predicate(value, path[0]);
        });
      }

      function result(object, path, defaultValue) {
        path = castPath(path, object);
        var index = -1,
          length = path.length;

        if (!length) {
          length = 1;
          object = undefined$1;
        }
        while (++index < length) {
          var value = object == null ? undefined$1 : object[toKey(path[index])];
          if (value === undefined$1) {
            index = length;
            value = defaultValue;
          }
          object = isFunction(value) ? value.call(object) : value;
        }
        return object;
      }

      function set(object, path, value) {
        return object == null ? object : baseSet(object, path, value);
      }

      function setWith(object, path, value, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return object == null ? object : baseSet(object, path, value, customizer);
      }

      var toPairs = createToPairs(keys);

      var toPairsIn = createToPairs(keysIn);

      function transform(object, iteratee, accumulator) {
        var isArr = isArray(object),
          isArrLike = isArr || isBuffer(object) || isTypedArray(object);
        iteratee = getIteratee(iteratee, 4);
        if (accumulator == null) {
          var Ctor = object && object.constructor;
          if (isArrLike) {
            accumulator = isArr ? new Ctor() : [];
          } else if (isObject(object)) {
            accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};
          } else {
            accumulator = {};
          }
        }
        (isArrLike ? arrayEach : baseForOwn)(object, function (value, index, object) {
          return iteratee(accumulator, value, index, object);
        });
        return accumulator;
      }

      function unset(object, path) {
        return object == null ? true : baseUnset(object, path);
      }

      function update(object, path, updater) {
        return object == null ? object : baseUpdate(object, path, castFunction(updater));
      }

      function updateWith(object, path, updater, customizer) {
        customizer = typeof customizer == 'function' ? customizer : undefined$1;
        return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);
      }

      function values(object) {
        return object == null ? [] : baseValues(object, keys(object));
      }

      function valuesIn(object) {
        return object == null ? [] : baseValues(object, keysIn(object));
      }

      function clamp(number, lower, upper) {
        if (upper === undefined$1) {
          upper = lower;
          lower = undefined$1;
        }
        if (upper !== undefined$1) {
          upper = toNumber(upper);
          upper = upper === upper ? upper : 0;
        }
        if (lower !== undefined$1) {
          lower = toNumber(lower);
          lower = lower === lower ? lower : 0;
        }
        return baseClamp(toNumber(number), lower, upper);
      }

      function inRange(number, start, end) {
        start = toFinite(start);
        if (end === undefined$1) {
          end = start;
          start = 0;
        } else {
          end = toFinite(end);
        }
        number = toNumber(number);
        return baseInRange(number, start, end);
      }

      function random(lower, upper, floating) {
        if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {
          upper = floating = undefined$1;
        }
        if (floating === undefined$1) {
          if (typeof upper == 'boolean') {
            floating = upper;
            upper = undefined$1;
          } else if (typeof lower == 'boolean') {
            floating = lower;
            lower = undefined$1;
          }
        }
        if (lower === undefined$1 && upper === undefined$1) {
          lower = 0;
          upper = 1;
        } else {
          lower = toFinite(lower);
          if (upper === undefined$1) {
            upper = lower;
            lower = 0;
          } else {
            upper = toFinite(upper);
          }
        }
        if (lower > upper) {
          var temp = lower;
          lower = upper;
          upper = temp;
        }
        if (floating || lower % 1 || upper % 1) {
          var rand = nativeRandom();
          return nativeMin(lower + rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1))), upper);
        }
        return baseRandom(lower, upper);
      }

      var camelCase = createCompounder(function (result, word, index) {
        word = word.toLowerCase();
        return result + (index ? capitalize(word) : word);
      });

      function capitalize(string) {
        return upperFirst(toString(string).toLowerCase());
      }

      function deburr(string) {
        string = toString(string);
        return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');
      }

      function endsWith(string, target, position) {
        string = toString(string);
        target = baseToString(target);
        var length = string.length;
        position = position === undefined$1 ? length : baseClamp(toInteger(position), 0, length);
        var end = position;
        position -= target.length;
        return position >= 0 && string.slice(position, end) == target;
      }

      function escape(string) {
        string = toString(string);
        return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
      }

      function escapeRegExp(string) {
        string = toString(string);
        return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, '\\$&') : string;
      }

      var kebabCase = createCompounder(function (result, word, index) {
        return result + (index ? '-' : '') + word.toLowerCase();
      });

      var lowerCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + word.toLowerCase();
      });

      var lowerFirst = createCaseFirst('toLowerCase');

      function pad(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        if (!length || strLength >= length) {
          return string;
        }
        var mid = (length - strLength) / 2;
        return createPadding(nativeFloor(mid), chars) + string + createPadding(nativeCeil(mid), chars);
      }

      function padEnd(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        return length && strLength < length ? string + createPadding(length - strLength, chars) : string;
      }

      function padStart(string, length, chars) {
        string = toString(string);
        length = toInteger(length);
        var strLength = length ? stringSize(string) : 0;
        return length && strLength < length ? createPadding(length - strLength, chars) + string : string;
      }

      function parseInt(string, radix, guard) {
        if (guard || radix == null) {
          radix = 0;
        } else if (radix) {
          radix = +radix;
        }
        return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);
      }

      function repeat(string, n, guard) {
        if (guard ? isIterateeCall(string, n, guard) : n === undefined$1) {
          n = 1;
        } else {
          n = toInteger(n);
        }
        return baseRepeat(toString(string), n);
      }

      function replace() {
        var args = arguments,
          string = toString(args[0]);
        return args.length < 3 ? string : string.replace(args[1], args[2]);
      }

      var snakeCase = createCompounder(function (result, word, index) {
        return result + (index ? '_' : '') + word.toLowerCase();
      });

      function split(string, separator, limit) {
        if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {
          separator = limit = undefined$1;
        }
        limit = limit === undefined$1 ? MAX_ARRAY_LENGTH : limit >>> 0;
        if (!limit) {
          return [];
        }
        string = toString(string);
        if (string && (typeof separator == 'string' || separator != null && !isRegExp(separator))) {
          separator = baseToString(separator);
          if (!separator && hasUnicode(string)) {
            return castSlice(stringToArray(string), 0, limit);
          }
        }
        return string.split(separator, limit);
      }

      var startCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + upperFirst(word);
      });

      function startsWith(string, target, position) {
        string = toString(string);
        position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
        target = baseToString(target);
        return string.slice(position, position + target.length) == target;
      }

      function template(string, options, guard) {
        var settings = lodash.templateSettings;
        if (guard && isIterateeCall(string, options, guard)) {
          options = undefined$1;
        }
        string = toString(string);
        options = assignInWith({}, options, settings, customDefaultsAssignIn);
        var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),
          importsKeys = keys(imports),
          importsValues = baseValues(imports, importsKeys);
        var isEscaping,
          isEvaluating,
          index = 0,
          interpolate = options.interpolate || reNoMatch,
          source = "__p += '";

        var reDelimiters = RegExp((options.escape || reNoMatch).source + '|' + interpolate.source + '|' + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' + (options.evaluate || reNoMatch).source + '|$', 'g');

        var sourceURL = '//# sourceURL=' + (hasOwnProperty.call(options, 'sourceURL') ? (options.sourceURL + '').replace(/\s/g, ' ') : 'lodash.templateSources[' + ++templateCounter + ']') + '\n';
        string.replace(reDelimiters, function (match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
          interpolateValue || (interpolateValue = esTemplateValue);

          source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

          if (escapeValue) {
            isEscaping = true;
            source += "' +\n__e(" + escapeValue + ") +\n'";
          }
          if (evaluateValue) {
            isEvaluating = true;
            source += "';\n" + evaluateValue + ";\n__p += '";
          }
          if (interpolateValue) {
            source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
          }
          index = offset + match.length;

          return match;
        });
        source += "';\n";

        var variable = hasOwnProperty.call(options, 'variable') && options.variable;
        if (!variable) {
          source = 'with (obj) {\n' + source + '\n}\n';
        }
        else if (reForbiddenIdentifierChars.test(variable)) {
          throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);
        }

        source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source).replace(reEmptyStringMiddle, '$1').replace(reEmptyStringTrailing, '$1;');

        source = 'function(' + (variable || 'obj') + ') {\n' + (variable ? '' : 'obj || (obj = {});\n') + "var __t, __p = ''" + (isEscaping ? ', __e = _.escape' : '') + (isEvaluating ? ', __j = Array.prototype.join;\n' + "function print() { __p += __j.call(arguments, '') }\n" : ';\n') + source + 'return __p\n}';
        var result = attempt(function () {
          return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined$1, importsValues);
        });

        result.source = source;
        if (isError(result)) {
          throw result;
        }
        return result;
      }

      function toLower(value) {
        return toString(value).toLowerCase();
      }

      function toUpper(value) {
        return toString(value).toUpperCase();
      }

      function trim(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return baseTrim(string);
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          chrSymbols = stringToArray(chars),
          start = charsStartIndex(strSymbols, chrSymbols),
          end = charsEndIndex(strSymbols, chrSymbols) + 1;
        return castSlice(strSymbols, start, end).join('');
      }

      function trimEnd(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return string.slice(0, trimmedEndIndex(string) + 1);
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;
        return castSlice(strSymbols, 0, end).join('');
      }

      function trimStart(string, chars, guard) {
        string = toString(string);
        if (string && (guard || chars === undefined$1)) {
          return string.replace(reTrimStart, '');
        }
        if (!string || !(chars = baseToString(chars))) {
          return string;
        }
        var strSymbols = stringToArray(string),
          start = charsStartIndex(strSymbols, stringToArray(chars));
        return castSlice(strSymbols, start).join('');
      }

      function truncate(string, options) {
        var length = DEFAULT_TRUNC_LENGTH,
          omission = DEFAULT_TRUNC_OMISSION;
        if (isObject(options)) {
          var separator = 'separator' in options ? options.separator : separator;
          length = 'length' in options ? toInteger(options.length) : length;
          omission = 'omission' in options ? baseToString(options.omission) : omission;
        }
        string = toString(string);
        var strLength = string.length;
        if (hasUnicode(string)) {
          var strSymbols = stringToArray(string);
          strLength = strSymbols.length;
        }
        if (length >= strLength) {
          return string;
        }
        var end = length - stringSize(omission);
        if (end < 1) {
          return omission;
        }
        var result = strSymbols ? castSlice(strSymbols, 0, end).join('') : string.slice(0, end);
        if (separator === undefined$1) {
          return result + omission;
        }
        if (strSymbols) {
          end += result.length - end;
        }
        if (isRegExp(separator)) {
          if (string.slice(end).search(separator)) {
            var match,
              substring = result;
            if (!separator.global) {
              separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');
            }
            separator.lastIndex = 0;
            while (match = separator.exec(substring)) {
              var newEnd = match.index;
            }
            result = result.slice(0, newEnd === undefined$1 ? end : newEnd);
          }
        } else if (string.indexOf(baseToString(separator), end) != end) {
          var index = result.lastIndexOf(separator);
          if (index > -1) {
            result = result.slice(0, index);
          }
        }
        return result + omission;
      }

      function unescape(string) {
        string = toString(string);
        return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;
      }

      var upperCase = createCompounder(function (result, word, index) {
        return result + (index ? ' ' : '') + word.toUpperCase();
      });

      var upperFirst = createCaseFirst('toUpperCase');

      function words(string, pattern, guard) {
        string = toString(string);
        pattern = guard ? undefined$1 : pattern;
        if (pattern === undefined$1) {
          return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);
        }
        return string.match(pattern) || [];
      }

      var attempt = baseRest(function (func, args) {
        try {
          return apply(func, undefined$1, args);
        } catch (e) {
          return isError(e) ? e : new Error(e);
        }
      });

      var bindAll = flatRest(function (object, methodNames) {
        arrayEach(methodNames, function (key) {
          key = toKey(key);
          baseAssignValue(object, key, bind(object[key], object));
        });
        return object;
      });

      function cond(pairs) {
        var length = pairs == null ? 0 : pairs.length,
          toIteratee = getIteratee();
        pairs = !length ? [] : arrayMap(pairs, function (pair) {
          if (typeof pair[1] != 'function') {
            throw new TypeError(FUNC_ERROR_TEXT);
          }
          return [toIteratee(pair[0]), pair[1]];
        });
        return baseRest(function (args) {
          var index = -1;
          while (++index < length) {
            var pair = pairs[index];
            if (apply(pair[0], this, args)) {
              return apply(pair[1], this, args);
            }
          }
        });
      }

      function conforms(source) {
        return baseConforms(baseClone(source, CLONE_DEEP_FLAG));
      }

      function constant(value) {
        return function () {
          return value;
        };
      }

      function defaultTo(value, defaultValue) {
        return value == null || value !== value ? defaultValue : value;
      }

      var flow = createFlow();

      var flowRight = createFlow(true);

      function identity(value) {
        return value;
      }

      function iteratee(func) {
        return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));
      }

      function matches(source) {
        return baseMatches(baseClone(source, CLONE_DEEP_FLAG));
      }

      function matchesProperty(path, srcValue) {
        return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));
      }

      var method = baseRest(function (path, args) {
        return function (object) {
          return baseInvoke(object, path, args);
        };
      });

      var methodOf = baseRest(function (object, args) {
        return function (path) {
          return baseInvoke(object, path, args);
        };
      });

      function mixin(object, source, options) {
        var props = keys(source),
          methodNames = baseFunctions(source, props);
        if (options == null && !(isObject(source) && (methodNames.length || !props.length))) {
          options = source;
          source = object;
          object = this;
          methodNames = baseFunctions(source, keys(source));
        }
        var chain = !(isObject(options) && 'chain' in options) || !!options.chain,
          isFunc = isFunction(object);
        arrayEach(methodNames, function (methodName) {
          var func = source[methodName];
          object[methodName] = func;
          if (isFunc) {
            object.prototype[methodName] = function () {
              var chainAll = this.__chain__;
              if (chain || chainAll) {
                var result = object(this.__wrapped__),
                  actions = result.__actions__ = copyArray(this.__actions__);
                actions.push({
                  'func': func,
                  'args': arguments,
                  'thisArg': object
                });
                result.__chain__ = chainAll;
                return result;
              }
              return func.apply(object, arrayPush([this.value()], arguments));
            };
          }
        });
        return object;
      }

      function noConflict() {
        if (root._ === this) {
          root._ = oldDash;
        }
        return this;
      }

      function noop() {
      }

      function nthArg(n) {
        n = toInteger(n);
        return baseRest(function (args) {
          return baseNth(args, n);
        });
      }

      var over = createOver(arrayMap);

      var overEvery = createOver(arrayEvery);

      var overSome = createOver(arraySome);

      function property(path) {
        return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
      }

      function propertyOf(object) {
        return function (path) {
          return object == null ? undefined$1 : baseGet(object, path);
        };
      }

      var range = createRange();

      var rangeRight = createRange(true);

      function stubArray() {
        return [];
      }

      function stubFalse() {
        return false;
      }

      function stubObject() {
        return {};
      }

      function stubString() {
        return '';
      }

      function stubTrue() {
        return true;
      }

      function times(n, iteratee) {
        n = toInteger(n);
        if (n < 1 || n > MAX_SAFE_INTEGER) {
          return [];
        }
        var index = MAX_ARRAY_LENGTH,
          length = nativeMin(n, MAX_ARRAY_LENGTH);
        iteratee = getIteratee(iteratee);
        n -= MAX_ARRAY_LENGTH;
        var result = baseTimes(length, iteratee);
        while (++index < n) {
          iteratee(index);
        }
        return result;
      }

      function toPath(value) {
        if (isArray(value)) {
          return arrayMap(value, toKey);
        }
        return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));
      }

      function uniqueId(prefix) {
        var id = ++idCounter;
        return toString(prefix) + id;
      }

      var add = createMathOperation(function (augend, addend) {
        return augend + addend;
      }, 0);

      var ceil = createRound('ceil');

      var divide = createMathOperation(function (dividend, divisor) {
        return dividend / divisor;
      }, 1);

      var floor = createRound('floor');

      function max(array) {
        return array && array.length ? baseExtremum(array, identity, baseGt) : undefined$1;
      }

      function maxBy(array, iteratee) {
        return array && array.length ? baseExtremum(array, getIteratee(iteratee, 2), baseGt) : undefined$1;
      }

      function mean(array) {
        return baseMean(array, identity);
      }

      function meanBy(array, iteratee) {
        return baseMean(array, getIteratee(iteratee, 2));
      }

      function min(array) {
        return array && array.length ? baseExtremum(array, identity, baseLt) : undefined$1;
      }

      function minBy(array, iteratee) {
        return array && array.length ? baseExtremum(array, getIteratee(iteratee, 2), baseLt) : undefined$1;
      }

      var multiply = createMathOperation(function (multiplier, multiplicand) {
        return multiplier * multiplicand;
      }, 1);

      var round = createRound('round');

      var subtract = createMathOperation(function (minuend, subtrahend) {
        return minuend - subtrahend;
      }, 0);

      function sum(array) {
        return array && array.length ? baseSum(array, identity) : 0;
      }

      function sumBy(array, iteratee) {
        return array && array.length ? baseSum(array, getIteratee(iteratee, 2)) : 0;
      }

      lodash.after = after;
      lodash.ary = ary;
      lodash.assign = assign;
      lodash.assignIn = assignIn;
      lodash.assignInWith = assignInWith;
      lodash.assignWith = assignWith;
      lodash.at = at;
      lodash.before = before;
      lodash.bind = bind;
      lodash.bindAll = bindAll;
      lodash.bindKey = bindKey;
      lodash.castArray = castArray;
      lodash.chain = chain;
      lodash.chunk = chunk;
      lodash.compact = compact;
      lodash.concat = concat;
      lodash.cond = cond;
      lodash.conforms = conforms;
      lodash.constant = constant;
      lodash.countBy = countBy;
      lodash.create = create;
      lodash.curry = curry;
      lodash.curryRight = curryRight;
      lodash.debounce = debounce;
      lodash.defaults = defaults;
      lodash.defaultsDeep = defaultsDeep;
      lodash.defer = defer;
      lodash.delay = delay;
      lodash.difference = difference;
      lodash.differenceBy = differenceBy;
      lodash.differenceWith = differenceWith;
      lodash.drop = drop;
      lodash.dropRight = dropRight;
      lodash.dropRightWhile = dropRightWhile;
      lodash.dropWhile = dropWhile;
      lodash.fill = fill;
      lodash.filter = filter;
      lodash.flatMap = flatMap;
      lodash.flatMapDeep = flatMapDeep;
      lodash.flatMapDepth = flatMapDepth;
      lodash.flatten = flatten;
      lodash.flattenDeep = flattenDeep;
      lodash.flattenDepth = flattenDepth;
      lodash.flip = flip;
      lodash.flow = flow;
      lodash.flowRight = flowRight;
      lodash.fromPairs = fromPairs;
      lodash.functions = functions;
      lodash.functionsIn = functionsIn;
      lodash.groupBy = groupBy;
      lodash.initial = initial;
      lodash.intersection = intersection;
      lodash.intersectionBy = intersectionBy;
      lodash.intersectionWith = intersectionWith;
      lodash.invert = invert;
      lodash.invertBy = invertBy;
      lodash.invokeMap = invokeMap;
      lodash.iteratee = iteratee;
      lodash.keyBy = keyBy;
      lodash.keys = keys;
      lodash.keysIn = keysIn;
      lodash.map = map;
      lodash.mapKeys = mapKeys;
      lodash.mapValues = mapValues;
      lodash.matches = matches;
      lodash.matchesProperty = matchesProperty;
      lodash.memoize = memoize;
      lodash.merge = merge;
      lodash.mergeWith = mergeWith;
      lodash.method = method;
      lodash.methodOf = methodOf;
      lodash.mixin = mixin;
      lodash.negate = negate;
      lodash.nthArg = nthArg;
      lodash.omit = omit;
      lodash.omitBy = omitBy;
      lodash.once = once;
      lodash.orderBy = orderBy;
      lodash.over = over;
      lodash.overArgs = overArgs;
      lodash.overEvery = overEvery;
      lodash.overSome = overSome;
      lodash.partial = partial;
      lodash.partialRight = partialRight;
      lodash.partition = partition;
      lodash.pick = pick;
      lodash.pickBy = pickBy;
      lodash.property = property;
      lodash.propertyOf = propertyOf;
      lodash.pull = pull;
      lodash.pullAll = pullAll;
      lodash.pullAllBy = pullAllBy;
      lodash.pullAllWith = pullAllWith;
      lodash.pullAt = pullAt;
      lodash.range = range;
      lodash.rangeRight = rangeRight;
      lodash.rearg = rearg;
      lodash.reject = reject;
      lodash.remove = remove;
      lodash.rest = rest;
      lodash.reverse = reverse;
      lodash.sampleSize = sampleSize;
      lodash.set = set;
      lodash.setWith = setWith;
      lodash.shuffle = shuffle;
      lodash.slice = slice;
      lodash.sortBy = sortBy;
      lodash.sortedUniq = sortedUniq;
      lodash.sortedUniqBy = sortedUniqBy;
      lodash.split = split;
      lodash.spread = spread;
      lodash.tail = tail;
      lodash.take = take;
      lodash.takeRight = takeRight;
      lodash.takeRightWhile = takeRightWhile;
      lodash.takeWhile = takeWhile;
      lodash.tap = tap;
      lodash.throttle = throttle;
      lodash.thru = thru;
      lodash.toArray = toArray;
      lodash.toPairs = toPairs;
      lodash.toPairsIn = toPairsIn;
      lodash.toPath = toPath;
      lodash.toPlainObject = toPlainObject;
      lodash.transform = transform;
      lodash.unary = unary;
      lodash.union = union;
      lodash.unionBy = unionBy;
      lodash.unionWith = unionWith;
      lodash.uniq = uniq;
      lodash.uniqBy = uniqBy;
      lodash.uniqWith = uniqWith;
      lodash.unset = unset;
      lodash.unzip = unzip;
      lodash.unzipWith = unzipWith;
      lodash.update = update;
      lodash.updateWith = updateWith;
      lodash.values = values;
      lodash.valuesIn = valuesIn;
      lodash.without = without;
      lodash.words = words;
      lodash.wrap = wrap;
      lodash.xor = xor;
      lodash.xorBy = xorBy;
      lodash.xorWith = xorWith;
      lodash.zip = zip;
      lodash.zipObject = zipObject;
      lodash.zipObjectDeep = zipObjectDeep;
      lodash.zipWith = zipWith;

      lodash.entries = toPairs;
      lodash.entriesIn = toPairsIn;
      lodash.extend = assignIn;
      lodash.extendWith = assignInWith;

      mixin(lodash, lodash);

      lodash.add = add;
      lodash.attempt = attempt;
      lodash.camelCase = camelCase;
      lodash.capitalize = capitalize;
      lodash.ceil = ceil;
      lodash.clamp = clamp;
      lodash.clone = clone;
      lodash.cloneDeep = cloneDeep;
      lodash.cloneDeepWith = cloneDeepWith;
      lodash.cloneWith = cloneWith;
      lodash.conformsTo = conformsTo;
      lodash.deburr = deburr;
      lodash.defaultTo = defaultTo;
      lodash.divide = divide;
      lodash.endsWith = endsWith;
      lodash.eq = eq;
      lodash.escape = escape;
      lodash.escapeRegExp = escapeRegExp;
      lodash.every = every;
      lodash.find = find;
      lodash.findIndex = findIndex;
      lodash.findKey = findKey;
      lodash.findLast = findLast;
      lodash.findLastIndex = findLastIndex;
      lodash.findLastKey = findLastKey;
      lodash.floor = floor;
      lodash.forEach = forEach;
      lodash.forEachRight = forEachRight;
      lodash.forIn = forIn;
      lodash.forInRight = forInRight;
      lodash.forOwn = forOwn;
      lodash.forOwnRight = forOwnRight;
      lodash.get = get;
      lodash.gt = gt;
      lodash.gte = gte;
      lodash.has = has;
      lodash.hasIn = hasIn;
      lodash.head = head;
      lodash.identity = identity;
      lodash.includes = includes;
      lodash.indexOf = indexOf;
      lodash.inRange = inRange;
      lodash.invoke = invoke;
      lodash.isArguments = isArguments;
      lodash.isArray = isArray;
      lodash.isArrayBuffer = isArrayBuffer;
      lodash.isArrayLike = isArrayLike;
      lodash.isArrayLikeObject = isArrayLikeObject;
      lodash.isBoolean = isBoolean;
      lodash.isBuffer = isBuffer;
      lodash.isDate = isDate;
      lodash.isElement = isElement;
      lodash.isEmpty = isEmpty;
      lodash.isEqual = isEqual;
      lodash.isEqualWith = isEqualWith;
      lodash.isError = isError;
      lodash.isFinite = isFinite;
      lodash.isFunction = isFunction;
      lodash.isInteger = isInteger;
      lodash.isLength = isLength;
      lodash.isMap = isMap;
      lodash.isMatch = isMatch;
      lodash.isMatchWith = isMatchWith;
      lodash.isNaN = isNaN;
      lodash.isNative = isNative;
      lodash.isNil = isNil;
      lodash.isNull = isNull;
      lodash.isNumber = isNumber;
      lodash.isObject = isObject;
      lodash.isObjectLike = isObjectLike;
      lodash.isPlainObject = isPlainObject;
      lodash.isRegExp = isRegExp;
      lodash.isSafeInteger = isSafeInteger;
      lodash.isSet = isSet;
      lodash.isString = isString;
      lodash.isSymbol = isSymbol;
      lodash.isTypedArray = isTypedArray;
      lodash.isUndefined = isUndefined;
      lodash.isWeakMap = isWeakMap;
      lodash.isWeakSet = isWeakSet;
      lodash.join = join;
      lodash.kebabCase = kebabCase;
      lodash.last = last;
      lodash.lastIndexOf = lastIndexOf;
      lodash.lowerCase = lowerCase;
      lodash.lowerFirst = lowerFirst;
      lodash.lt = lt;
      lodash.lte = lte;
      lodash.max = max;
      lodash.maxBy = maxBy;
      lodash.mean = mean;
      lodash.meanBy = meanBy;
      lodash.min = min;
      lodash.minBy = minBy;
      lodash.stubArray = stubArray;
      lodash.stubFalse = stubFalse;
      lodash.stubObject = stubObject;
      lodash.stubString = stubString;
      lodash.stubTrue = stubTrue;
      lodash.multiply = multiply;
      lodash.nth = nth;
      lodash.noConflict = noConflict;
      lodash.noop = noop;
      lodash.now = now;
      lodash.pad = pad;
      lodash.padEnd = padEnd;
      lodash.padStart = padStart;
      lodash.parseInt = parseInt;
      lodash.random = random;
      lodash.reduce = reduce;
      lodash.reduceRight = reduceRight;
      lodash.repeat = repeat;
      lodash.replace = replace;
      lodash.result = result;
      lodash.round = round;
      lodash.runInContext = runInContext;
      lodash.sample = sample;
      lodash.size = size;
      lodash.snakeCase = snakeCase;
      lodash.some = some;
      lodash.sortedIndex = sortedIndex;
      lodash.sortedIndexBy = sortedIndexBy;
      lodash.sortedIndexOf = sortedIndexOf;
      lodash.sortedLastIndex = sortedLastIndex;
      lodash.sortedLastIndexBy = sortedLastIndexBy;
      lodash.sortedLastIndexOf = sortedLastIndexOf;
      lodash.startCase = startCase;
      lodash.startsWith = startsWith;
      lodash.subtract = subtract;
      lodash.sum = sum;
      lodash.sumBy = sumBy;
      lodash.template = template;
      lodash.times = times;
      lodash.toFinite = toFinite;
      lodash.toInteger = toInteger;
      lodash.toLength = toLength;
      lodash.toLower = toLower;
      lodash.toNumber = toNumber;
      lodash.toSafeInteger = toSafeInteger;
      lodash.toString = toString;
      lodash.toUpper = toUpper;
      lodash.trim = trim;
      lodash.trimEnd = trimEnd;
      lodash.trimStart = trimStart;
      lodash.truncate = truncate;
      lodash.unescape = unescape;
      lodash.uniqueId = uniqueId;
      lodash.upperCase = upperCase;
      lodash.upperFirst = upperFirst;

      lodash.each = forEach;
      lodash.eachRight = forEachRight;
      lodash.first = head;
      mixin(lodash, function () {
        var source = {};
        baseForOwn(lodash, function (func, methodName) {
          if (!hasOwnProperty.call(lodash.prototype, methodName)) {
            source[methodName] = func;
          }
        });
        return source;
      }(), {
        'chain': false
      });

      lodash.VERSION = VERSION;

      arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function (methodName) {
        lodash[methodName].placeholder = lodash;
      });

      arrayEach(['drop', 'take'], function (methodName, index) {
        LazyWrapper.prototype[methodName] = function (n) {
          n = n === undefined$1 ? 1 : nativeMax(toInteger(n), 0);
          var result = this.__filtered__ && !index ? new LazyWrapper(this) : this.clone();
          if (result.__filtered__) {
            result.__takeCount__ = nativeMin(n, result.__takeCount__);
          } else {
            result.__views__.push({
              'size': nativeMin(n, MAX_ARRAY_LENGTH),
              'type': methodName + (result.__dir__ < 0 ? 'Right' : '')
            });
          }
          return result;
        };
        LazyWrapper.prototype[methodName + 'Right'] = function (n) {
          return this.reverse()[methodName](n).reverse();
        };
      });

      arrayEach(['filter', 'map', 'takeWhile'], function (methodName, index) {
        var type = index + 1,
          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;
        LazyWrapper.prototype[methodName] = function (iteratee) {
          var result = this.clone();
          result.__iteratees__.push({
            'iteratee': getIteratee(iteratee, 3),
            'type': type
          });
          result.__filtered__ = result.__filtered__ || isFilter;
          return result;
        };
      });

      arrayEach(['head', 'last'], function (methodName, index) {
        var takeName = 'take' + (index ? 'Right' : '');
        LazyWrapper.prototype[methodName] = function () {
          return this[takeName](1).value()[0];
        };
      });

      arrayEach(['initial', 'tail'], function (methodName, index) {
        var dropName = 'drop' + (index ? '' : 'Right');
        LazyWrapper.prototype[methodName] = function () {
          return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
        };
      });
      LazyWrapper.prototype.compact = function () {
        return this.filter(identity);
      };
      LazyWrapper.prototype.find = function (predicate) {
        return this.filter(predicate).head();
      };
      LazyWrapper.prototype.findLast = function (predicate) {
        return this.reverse().find(predicate);
      };
      LazyWrapper.prototype.invokeMap = baseRest(function (path, args) {
        if (typeof path == 'function') {
          return new LazyWrapper(this);
        }
        return this.map(function (value) {
          return baseInvoke(value, path, args);
        });
      });
      LazyWrapper.prototype.reject = function (predicate) {
        return this.filter(negate(getIteratee(predicate)));
      };
      LazyWrapper.prototype.slice = function (start, end) {
        start = toInteger(start);
        var result = this;
        if (result.__filtered__ && (start > 0 || end < 0)) {
          return new LazyWrapper(result);
        }
        if (start < 0) {
          result = result.takeRight(-start);
        } else if (start) {
          result = result.drop(start);
        }
        if (end !== undefined$1) {
          end = toInteger(end);
          result = end < 0 ? result.dropRight(-end) : result.take(end - start);
        }
        return result;
      };
      LazyWrapper.prototype.takeRightWhile = function (predicate) {
        return this.reverse().takeWhile(predicate).reverse();
      };
      LazyWrapper.prototype.toArray = function () {
        return this.take(MAX_ARRAY_LENGTH);
      };

      baseForOwn(LazyWrapper.prototype, function (func, methodName) {
        var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),
          isTaker = /^(?:head|last)$/.test(methodName),
          lodashFunc = lodash[isTaker ? 'take' + (methodName == 'last' ? 'Right' : '') : methodName],
          retUnwrapped = isTaker || /^find/.test(methodName);
        if (!lodashFunc) {
          return;
        }
        lodash.prototype[methodName] = function () {
          var value = this.__wrapped__,
            args = isTaker ? [1] : arguments,
            isLazy = value instanceof LazyWrapper,
            iteratee = args[0],
            useLazy = isLazy || isArray(value);
          var interceptor = function interceptor(value) {
            var result = lodashFunc.apply(lodash, arrayPush([value], args));
            return isTaker && chainAll ? result[0] : result;
          };
          if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {
            isLazy = useLazy = false;
          }
          var chainAll = this.__chain__,
            isHybrid = !!this.__actions__.length,
            isUnwrapped = retUnwrapped && !chainAll,
            onlyLazy = isLazy && !isHybrid;
          if (!retUnwrapped && useLazy) {
            value = onlyLazy ? value : new LazyWrapper(this);
            var result = func.apply(value, args);
            result.__actions__.push({
              'func': thru,
              'args': [interceptor],
              'thisArg': undefined$1
            });
            return new LodashWrapper(result, chainAll);
          }
          if (isUnwrapped && onlyLazy) {
            return func.apply(this, args);
          }
          result = this.thru(interceptor);
          return isUnwrapped ? isTaker ? result.value()[0] : result.value() : result;
        };
      });

      arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function (methodName) {
        var func = arrayProto[methodName],
          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',
          retUnwrapped = /^(?:pop|shift)$/.test(methodName);
        lodash.prototype[methodName] = function () {
          var args = arguments;
          if (retUnwrapped && !this.__chain__) {
            var value = this.value();
            return func.apply(isArray(value) ? value : [], args);
          }
          return this[chainName](function (value) {
            return func.apply(isArray(value) ? value : [], args);
          });
        };
      });

      baseForOwn(LazyWrapper.prototype, function (func, methodName) {
        var lodashFunc = lodash[methodName];
        if (lodashFunc) {
          var key = lodashFunc.name + '';
          if (!hasOwnProperty.call(realNames, key)) {
            realNames[key] = [];
          }
          realNames[key].push({
            'name': methodName,
            'func': lodashFunc
          });
        }
      });
      realNames[createHybrid(undefined$1, WRAP_BIND_KEY_FLAG).name] = [{
        'name': 'wrapper',
        'func': undefined$1
      }];

      LazyWrapper.prototype.clone = lazyClone;
      LazyWrapper.prototype.reverse = lazyReverse;
      LazyWrapper.prototype.value = lazyValue;

      lodash.prototype.at = wrapperAt;
      lodash.prototype.chain = wrapperChain;
      lodash.prototype.commit = wrapperCommit;
      lodash.prototype.next = wrapperNext;
      lodash.prototype.plant = wrapperPlant;
      lodash.prototype.reverse = wrapperReverse;
      lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;

      lodash.prototype.first = lodash.prototype.head;
      if (symIterator) {
        lodash.prototype[symIterator] = wrapperToIterator;
      }
      return lodash;
    };

    var _ = runInContext();

    if (freeModule) {
      (freeModule.exports = _)._ = _;
      freeExports._ = _;
    } else {
      root._ = _;
    }
  }).call(commonjsGlobal);
});

var OBPSDocumentsEmp = function OBPSDocumentsEmp(_ref) {
  var _formData$FeildReport, _formData$FeildReport2;
  var t = _ref.t,
    config = _ref.config,
    formData = _ref.formData,
    setFormError = _ref.setError,
    clearFormErrors = _ref.clearErrors,
    formState = _ref.formState,
    indexx = _ref.index,
    setFieldReports = _ref.setFieldReports,
    documentList = _ref.documentList;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$FeildReport = formData.FeildReports) === null || _formData$FeildReport === void 0 ? void 0 : (_formData$FeildReport2 = _formData$FeildReport[indexx]) === null || _formData$FeildReport2 === void 0 ? void 0 : _formData$FeildReport2.Documents) || []),
    documents = _useState[0],
    setDocuments = _useState[1];
  var _useState2 = React.useState(null),
    error = _useState2[0],
    setError = _useState2[1];
  var _useState3 = React.useState((formData === null || formData === void 0 ? void 0 : formData.tradedetils1) || []);
  var action = "create";
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var isEditScreen = pathname.includes("/modify-application/");
  if (isEditScreen) action = "update";
  var _Digit$Hooks$pt$usePr = Digit.Hooks.pt.usePropertyMDMS(stateId, "TradeLicense", ["documentObj"]),
    isLoading = _Digit$Hooks$pt$usePr.isLoading;
  var ckeckingLocation = window.location.href.includes("renew-application-details");
  var finalTlDocumentsList = [];
  documentList && documentList.map(function (doc) {
    finalTlDocumentsList.push({
      documentType: doc.code,
      code: doc.code
    });
  });
  var goNext = function goNext() {
    var data = formData;
    data && data !== null && data !== void 0 && data.FieldReports && (data === null || data === void 0 ? void 0 : data.FieldReports.length) > 0 && (documents === null || documents === void 0 ? void 0 : documents.length) > 0 ? data.FieldReports[indexx] = _extends({}, data.FieldReports[indexx], {
      Documents: documents
    }) : "";
    data && data !== null && data !== void 0 && data.FieldReports && (data === null || data === void 0 ? void 0 : data.FieldReports.length) > 0 && documents.length > 0 ? setFieldReports(data.FieldReports) : "";
  };
  React.useEffect(function () {
    goNext();
  }, [documents]);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement("div", null, finalTlDocumentsList === null || finalTlDocumentsList === void 0 ? void 0 : finalTlDocumentsList.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(SelectDocument$3, {
      key: index,
      document: document,
      action: action,
      t: t,
      id: "obps-doc-" + index,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      formData: formData,
      setFormError: setFormError,
      clearFormErrors: clearFormErrors,
      config: config,
      formState: formState,
      stateId: stateId
    }));
  }), error && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    label: error,
    onClose: function onClose() {
      return setError(null);
    },
    error: true
  }));
};
function SelectDocument$3(_ref2) {
  var t = _ref2.t,
    doc = _ref2.document,
    setDocuments = _ref2.setDocuments,
    documents = _ref2.documents,
    formData = _ref2.formData,
    setFormError = _ref2.setFormError,
    clearFormErrors = _ref2.clearFormErrors,
    config = _ref2.config,
    formState = _ref2.formState,
    _ref2$stateId = _ref2.stateId,
    stateId = _ref2$stateId === void 0 ? {
      stateId: stateId
    } : _ref2$stateId;
  var filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
    return item === null || item === void 0 ? void 0 : item.documentType;
  });
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState4 = React.useState(""),
    selectedDocument = _useState4[0],
    setSelectedDocument = _useState4[1];
  var _useState5 = React.useState(null),
    setFile = _useState5[1];
  var _useState6 = React.useState(function () {
      return (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null;
    }),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(false),
    isHidden = _useState7[0];
  var _useState8 = React.useState([]),
    newArray = _useState8[0],
    setnewArray = _useState8[1];
  var allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfile(e, key) {
    var _e$fileStoreId;
    e && setSelectedDocument({
      documentType: key
    });
    e && setFile(e.file);
    e && setUploadedFile(e === null || e === void 0 ? void 0 : (_e$fileStoreId = e.fileStoreId) === null || _e$fileStoreId === void 0 ? void 0 : _e$fileStoreId.fileStoreId);
  }
  function getData(e, key) {
    var data = Object.fromEntries(e);
    var newArr = Object.values(data);
    setnewArray(newArr);
    if (documents && newArr && documents.filter(function (ob) {
      return ob.documentType === key;
    }).length > newArr.length) {
      setDocuments(documents.filter(function (ob) {
        return ob.documentType !== key;
      }));
    }
    newArr && newArr.map(function (ob) {
      ob.file.documentType = key;
      selectfile(ob, key);
    });
  }
  var addError = function addError() {
    var _formState$errors, _formState$errors$con;
    var type = (_formState$errors = formState.errors) === null || _formState$errors === void 0 ? void 0 : (_formState$errors$con = _formState$errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type;
    if (!Array.isArray(type)) type = [];
    if (!type.includes(doc.documentType)) {
      type.push(doc.documentType);
      setFormError(config.key, {
        type: type
      });
    }
  };
  var removeError = function removeError() {
    var _formState$errors2, _formState$errors2$co;
    var type = (_formState$errors2 = formState.errors) === null || _formState$errors2 === void 0 ? void 0 : (_formState$errors2$co = _formState$errors2[config.key]) === null || _formState$errors2$co === void 0 ? void 0 : _formState$errors2$co.type;
    if (!Array.isArray(type)) type = [];
    if (type.includes(doc === null || doc === void 0 ? void 0 : doc.documentType)) {
      type = type.filter(function (e) {
        return e != (doc === null || doc === void 0 ? void 0 : doc.documentType);
      });
      if (!type.length) {
        clearFormErrors(config.key);
      } else {
        setFormError(config.key, {
          type: type
        });
      }
    }
  };
  React.useEffect(function () {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.documentType && (documents.filter(function (ob) {
      return ob.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length == 0 || newArray.filter(function (ob) {
      var _ob$file;
      return (ob === null || ob === void 0 ? void 0 : (_ob$file = ob.file) === null || _ob$file === void 0 ? void 0 : _ob$file.documentType) === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length !== documents.filter(function (ob) {
      return ob.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
    }).length)) {
      setDocuments(function (prev) {
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) {
          return prev;
        }
        var filteredDocumentsByFileStoreId = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile;
        });
        var filteredDocumentByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType);
        });
        if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.id) {
          return [].concat(filteredDocumentsByFileStoreId, [{
            documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType,
            fileStoreId: uploadedFile,
            tenantId: tenantId,
            id: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.id
          }]);
        } else {
          var UniqueDocTypeTempArray = [];
          newArray.map(function (ob) {
            var _ob$fileStoreId, _ob$fileStoreId2;
            UniqueDocTypeTempArray.push(
            {
              documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.documentType,
              fileStoreId: ob === null || ob === void 0 ? void 0 : (_ob$fileStoreId = ob.fileStoreId) === null || _ob$fileStoreId === void 0 ? void 0 : _ob$fileStoreId.fileStoreId,
              tenantId: ob === null || ob === void 0 ? void 0 : (_ob$fileStoreId2 = ob.fileStoreId) === null || _ob$fileStoreId2 === void 0 ? void 0 : _ob$fileStoreId2.tenantId
            });
          });
          return [].concat(filteredDocumentByDocumentType, UniqueDocTypeTempArray);
        }
      });
    }
    if (!isHidden) {
      var isRenewal = window.location.href.includes("renew-application-details");
      if (!isRenewal) {
        if (!uploadedFile || !(selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.documentType)) {
          addError();
        } else if (uploadedFile && selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.documentType) {
          removeError();
        }
      }
    } else if (isHidden) {
      removeError();
    }
  }, [uploadedFile, selectedDocument, isHidden]);
  React.useEffect(function () {
    var _formData$documents, _formData$documents$d;
    if (doc && (formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : (_formData$documents$d = _formData$documents.documents) === null || _formData$documents$d === void 0 ? void 0 : _formData$documents$d.length) > 0) {
      for (var i = 0; i < (formData === null || formData === void 0 ? void 0 : (_formData$documents2 = formData.documents) === null || _formData$documents2 === void 0 ? void 0 : (_formData$documents2$ = _formData$documents2.documents) === null || _formData$documents2$ === void 0 ? void 0 : _formData$documents2$.length); i++) {
        var _formData$documents2, _formData$documents2$, _formData$documents3, _formData$documents3$, _formData$documents3$2;
        if ((doc === null || doc === void 0 ? void 0 : doc.documentType) === (formData === null || formData === void 0 ? void 0 : (_formData$documents3 = formData.documents) === null || _formData$documents3 === void 0 ? void 0 : (_formData$documents3$ = _formData$documents3.documents) === null || _formData$documents3$ === void 0 ? void 0 : (_formData$documents3$2 = _formData$documents3$[i]) === null || _formData$documents3$2 === void 0 ? void 0 : _formData$documents3$2.documentType)) {
          var _formData$documents4, _formData$documents4$, _formData$documents4$2, _formData$documents5, _formData$documents5$, _formData$documents5$2, _formData$documents6, _formData$documents6$, _formData$documents6$2;
          setSelectedDocument({
            documentType: formData === null || formData === void 0 ? void 0 : (_formData$documents4 = formData.documents) === null || _formData$documents4 === void 0 ? void 0 : (_formData$documents4$ = _formData$documents4.documents) === null || _formData$documents4$ === void 0 ? void 0 : (_formData$documents4$2 = _formData$documents4$[i]) === null || _formData$documents4$2 === void 0 ? void 0 : _formData$documents4$2.documentType,
            id: formData === null || formData === void 0 ? void 0 : (_formData$documents5 = formData.documents) === null || _formData$documents5 === void 0 ? void 0 : (_formData$documents5$ = _formData$documents5.documents) === null || _formData$documents5$ === void 0 ? void 0 : (_formData$documents5$2 = _formData$documents5$[i]) === null || _formData$documents5$2 === void 0 ? void 0 : _formData$documents5$2.id
          });
          setUploadedFile(formData === null || formData === void 0 ? void 0 : (_formData$documents6 = formData.documents) === null || _formData$documents6 === void 0 ? void 0 : (_formData$documents6$ = _formData$documents6.documents) === null || _formData$documents6$ === void 0 ? void 0 : (_formData$documents6$2 = _formData$documents6$[i]) === null || _formData$documents6$2 === void 0 ? void 0 : _formData$documents6$2.fileStoreId);
        }
      }
    }
  }, [doc]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      width: "100%"
    }
  }, (doc === null || doc === void 0 ? void 0 : doc.documentType) != "OLDLICENCENO" ? t("" + (doc === null || doc === void 0 ? void 0 : doc.documentType.replaceAll(".", "_"))) + "*" : "" + t("" + (doc === null || doc === void 0 ? void 0 : doc.documentType.replaceAll(".", "_")))), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "BPA",
    tenantId: stateId,
    getFormState: function getFormState(e) {
      return getData(e, doc === null || doc === void 0 ? void 0 : doc.documentType.replaceAll(".", "_"));
    },
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  }))));
}

var createUnitDetails = function createUnitDetails() {
  return {
    InspectionDate: "",
    InspectionTime: "",
    Checklist: [],
    Documents: [],
    key: Date.now()
  };
};
var InspectionReport$1 = function InspectionReport(_ref) {
  var config = _ref.config,
    onSelect = _ref.onSelect,
    userType = _ref.userType,
    formData = _ref.formData,
    setError = _ref.setError,
    formState = _ref.formState,
    clearErrors = _ref.clearErrors;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var _useLocation = reactRouterDom.useLocation(),
    pathname = _useLocation.pathname;
  var isEditScreen = pathname.includes("/modify-application/");
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : formData.FieldReports) || [createUnitDetails()]),
    FieldReports = _useState[0],
    setFieldReports = _useState[1];
  var _useState2 = React.useState({
      index: -1,
      type: ""
    }),
    focusIndex = _useState2[0],
    setFocusIndex = _useState2[1];
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateId = Digit.ULBService.getStateId();
  var _useState3 = React.useState([]),
    tradeTypeMdmsData = _useState3[0],
    setTradeTypeMdmsData = _useState3[1];
  var _useState4 = React.useState([]),
    tradeCategoryValues = _useState4[0],
    setTradeCategoryValues = _useState4[1];
  var _useState5 = React.useState([]),
    tradeTypeOptionsList = _useState5[0],
    setTradeTypeOptionsList = _useState5[1];
  var _useState6 = React.useState([]),
    questionList = _useState6[0],
    setquestionList = _useState6[1];
  var _useState7 = React.useState([]),
    documentList = _useState7[0],
    setdocumentList = _useState7[1];
  var _useState8 = React.useState([]),
    tradeSubTypeOptionsList = _useState8[0],
    setTradeSubTypeOptionsList = _useState8[1];
  var _useState9 = React.useState(false),
    isErrors = _useState9[0],
    setIsErrors = _useState9[1];
  var _useState10 = React.useState((formData === null || formData === void 0 ? void 0 : formData.tradedetils1) || []),
    previousLicenseDetails = _useState10[0],
    setPreviousLicenseDetails = _useState10[1];
  var isRenewal = window.location.href.includes("tl/renew-application-details");
  if (window.location.href.includes("tl/renew-application-details")) isRenewal = true;
  var _Digit$Hooks$tl$useTr = Digit.Hooks.tl.useTradeLicenseMDMS(stateId, "TradeLicense", "TradeUnits", "[?(@.type=='TL')]"),
    tradeMdmsData = _Digit$Hooks$tl$useTr.data,
    isLoading = _Digit$Hooks$tl$useTr.isLoading;
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["CheckList"]),
    bpaDocs = _Digit$Hooks$obps$use.data;
  var type = "LOW";
  var addNewFieldReport = function addNewFieldReport() {
    var newUnit = createUnitDetails();
    setFieldReports(function (prev) {
      return [].concat(prev, [newUnit]);
    });
  };
  var removeUnit = function removeUnit(unit) {
    setFieldReports(function (prev) {
      return prev.filter(function (o) {
        return o.key != unit.key;
      });
    });
  };
  React.useEffect(function () {
    var data = FieldReports.map(function (e) {
      return e;
    });
    onSelect(config === null || config === void 0 ? void 0 : config.key, data);
    sessionStorage.setItem("INSPECTION_DATA", JSON.stringify(data));
  }, [FieldReports]);
  React.useEffect(function () {
    onSelect("tradedetils1", previousLicenseDetails);
  }, [previousLicenseDetails]);
  React.useEffect(function () {
    var ques = [];
    var documentlist = [];
    bpaDocs && bpaDocs.BPA.CheckList.map(function (ob) {
      if ((ob === null || ob === void 0 ? void 0 : ob.RiskType) === type && (ob === null || ob === void 0 ? void 0 : ob.WFState) === "FIELDINSPECTION_PENDING") {
        ques = [].concat(ob.questions);
        documentlist = [].concat(ob.docTypes);
      }
    });
    setdocumentList(documentlist);
    setquestionList(ques);
  }, [bpaDocs]);
  var commonProps = {
    focusIndex: focusIndex,
    allFieldReport: FieldReports,
    setFocusIndex: setFocusIndex,
    removeUnit: removeUnit,
    formData: formData,
    formState: formState,
    setFieldReports: setFieldReports,
    t: t,
    setError: setError,
    clearErrors: clearErrors,
    config: config,
    onSelect: onSelect,
    userType: userType,
    tradeCategoryValues: tradeCategoryValues,
    tradeTypeOptionsList: tradeTypeOptionsList,
    setTradeTypeOptionsList: setTradeTypeOptionsList,
    tradeTypeMdmsData: tradeTypeMdmsData,
    tradeSubTypeOptionsList: tradeSubTypeOptionsList,
    setTradeSubTypeOptionsList: setTradeSubTypeOptionsList,
    setTradeTypeMdmsData: setTradeTypeMdmsData,
    setTradeCategoryValues: setTradeCategoryValues,
    tradeMdmsData: tradeMdmsData,
    isErrors: isErrors,
    setIsErrors: setIsErrors,
    previousLicenseDetails: previousLicenseDetails,
    setPreviousLicenseDetails: setPreviousLicenseDetails,
    isLoading: isLoading,
    bpaDocs: bpaDocs,
    type: type,
    questionList: questionList,
    setquestionList: setquestionList,
    documentList: documentList
  };
  if (isEditScreen) {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null);
  }
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(React__default.Fragment, null, FieldReports && FieldReports.map(function (unit, index) {
    return /*#__PURE__*/React__default.createElement(InspectionReportForm, _extends({
      key: unit.key,
      index: index,
      unit: unit
    }, commonProps));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("BPA_ADD_FIELD_INSPECTION"),
    onClick: addNewFieldReport,
    style: {
      color: "#F47738",
      width: "fit-content"
    }
  }));
};
var InspectionReportForm = function InspectionReportForm(_props) {
  var _formData$ownershipCa2;
  var unit = _props.unit,
    index = _props.index,
    allFieldReport = _props.allFieldReport,
    removeUnit = _props.removeUnit,
    setFieldReports = _props.setFieldReports,
    t = _props.t,
    formData = _props.formData,
    config = _props.config,
    onSelect = _props.onSelect,
    userType = _props.userType,
    setError = _props.setError,
    clearErrors = _props.clearErrors,
    formState = _props.formState,
    isErrors = _props.isErrors,
    setIsErrors = _props.setIsErrors,
    questionList = _props.questionList,
    documentList = _props.documentList;
  var _useForm = reactHookForm.useForm(),
    control = _useForm.control,
    localFormState = _useForm.formState,
    watch = _useForm.watch,
    trigger = _useForm.trigger,
    getValues = _useForm.getValues;
  var formValue = watch();
  var errors = localFormState.errors;
  var isIndividualTypeOwner = React.useMemo(function () {
    var _formData$ownershipCa;
    return formData === null || formData === void 0 ? void 0 : (_formData$ownershipCa = formData.ownershipCategory) === null || _formData$ownershipCa === void 0 ? void 0 : _formData$ownershipCa.code.includes("INDIVIDUAL");
  }, [formData === null || formData === void 0 ? void 0 : (_formData$ownershipCa2 = formData.ownershipCategory) === null || _formData$ownershipCa2 === void 0 ? void 0 : _formData$ownershipCa2.code]);
  React.useEffect(function () {
    trigger();
  }, []);
  React.useEffect(function () {
    var keys = Object.keys(formValue);
    var part = {};
    keys.forEach(function (key) {
      return part[key] = unit[key];
    });
    var _ownerType = isIndividualTypeOwner ? {} : {
      ownerType: {
        code: "NONE"
      }
    };
    var questionLength = questionList ? {
      questionLength: questionList.length
    } : {
      questionLength: 0
    };
    var Ques = questionList ? {
      questionList: questionList
    } : {
      questionList: []
    };
    if (!lodash.isEqual(formValue, part)) {
      Object.keys(formValue).map(function (data) {
        if (data != "key" && formValue[data] != undefined && formValue[data] != "" && formValue[data] != null && !isErrors) {
          setIsErrors(true);
        }
      });
      setFieldReports(function (prev) {
        return prev.map(function (o) {
          return o.key && o.key === unit.key ? _extends({}, o, formValue, _ownerType, questionLength, Ques) : _extends({}, o);
        });
      });
      trigger();
    }
  }, [formValue]);
  React.useEffect(function () {
    var _formState$errors$con;
    if (Object.keys(errors).length && !lodash.isEqual(((_formState$errors$con = formState.errors[config.key]) === null || _formState$errors$con === void 0 ? void 0 : _formState$errors$con.type) || {}, errors)) {
      setError(config.key, {
        type: errors
      });
    } else if (!Object.keys(errors).length && formState.errors[config.key] && isErrors) {
      clearErrors(config.key);
    }
  }, [errors]);
  var ckeckingLocation = window.location.href.includes("renew-application-details");
  if (window.location.href.includes("edit-application-details")) ckeckingLocation = true;
  var getOptions = function getOptions(option) {
    var fieldoptions = [];
    option.split("/").map(function (op) {
      fieldoptions.push({
        i18nKey: "SCORE_" + op,
        code: op
      });
    });
    return fieldoptions;
  };
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "16px",
      maxWidth: "950px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "fieldInspectionWrapper"
  }, (allFieldReport === null || allFieldReport === void 0 ? void 0 : allFieldReport.length) > 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.DeleteIcon, {
      style: {
        float: "right",
        position: "relative",
        bottom: "-6px"
      },
      fill: !(allFieldReport.length == 1) ? "#494848" : "#FAFAFA"
    }),
    style: {
      width: "100px",
      display: "inline",
      background: "black"
    },
    onClick: function onClick(e) {
      return removeUnit(unit);
    }
  }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, (allFieldReport === null || allFieldReport === void 0 ? void 0 : allFieldReport.length) > 1 ? t("BPA_FI_REPORT") + "-" + (index + 1) : "" + t("BPA_FI_REPORT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "0px",
      width: "100%"
    },
    className: "card-label-smaller"
  }, t("BPA_FI_DATE_LABEL") + " * "), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "InspectionDate",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    control: control,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.DatePicker, {
        date: props.value,
        name: "InspectionDate",
        onChange: props.onChange
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "0px",
      width: "100%"
    },
    className: "card-label-smaller"
  }, t("ES_COMMON_TIME") + " * "), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
    name: "InspectionTime",
    rules: {
      required: t("REQUIRED_FIELD")
    },
    control: control,
    render: function render(props) {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
        name: "InspectionTime",
        type: "time",
        value: props.value,
        onChange: props.onChange
      });
    }
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, null, t("BPA_CHECK_LIST_DETAILS")), questionList && questionList.map(function (ob, ind) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: ind,
      className: "fieldInsepctionInsideWrapper",
      style: {
        maxWidth: "100%"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
      style: {
        width: "100%"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        marginRight: "30px",
        width: "100%"
      },
      className: "card-label-smaller"
    }, t(ob.question) + "*"), /*#__PURE__*/React__default.createElement("div", {
      className: "field",
      style: {
        width: "100%"
      }
    }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      control: control,
      name: "question_" + ind,
      rules: {
        required: t("REQUIRED_FIELD")
      },
      render: function render(props) {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          className: "form-field",
          style: {
            width: "100%",
            maxWidth: "100%"
          },
          selected: getValues("question" + ind),
          disable: false,
          option: getOptions(ob.fieldType),
          select: function select(e) {
            var _props$value;
            if ((props === null || props === void 0 ? void 0 : (_props$value = props.value) === null || _props$value === void 0 ? void 0 : _props$value.code) == (e === null || e === void 0 ? void 0 : e.code)) return true;
            props.onChange(e);
          },
          optionKey: "i18nKey",
          onBlur: props.onBlur,
          t: t
        });
      }
    }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
      style: {
        width: "100%"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
      style: {
        marginRight: "30px",
        width: "100%"
      },
      className: "card-label-smaller"
    }, t("BPA_ENTER_REMARKS")), /*#__PURE__*/React__default.createElement("div", {
      className: "field",
      style: {
        width: "100%"
      }
    }, /*#__PURE__*/React__default.createElement(reactHookForm.Controller, {
      control: control,
      name: "Remarks_" + ind,
      defaultValue: unit === null || unit === void 0 ? void 0 : unit.uomValue,
      render: function render(props) {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
          value: getValues("Remarks" + ind),
          onChange: function onChange(e) {
            props.onChange(e);
          },
          onBlur: props.onBlur
        });
      }
    }))));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginTop: "20px"
    }
  }, t("BPA_FIELD_INSPECTION_DOCUMENTS")), /*#__PURE__*/React__default.createElement(OBPSDocumentsEmp, {
    t: t,
    config: config,
    onSelect: onSelect,
    userType: userType,
    formData: formData,
    setError: setError,
    clearErrors: clearErrors,
    formState: formState,
    index: index,
    setFieldReports: setFieldReports,
    documentList: documentList
  }))));
};

var OBPSEmployeeHomeCard = function OBPSEmployeeHomeCard() {
  var _useState = React.useState(0),
    totalCount = _useState[0],
    setTotalCount = _useState[1];
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var location = reactRouterDom.useLocation();
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var stateCode = Digit.ULBService.getStateId();
  var stakeholderEmployeeRoles = [{
    code: "BPAREG_DOC_VERIFIER",
    tenantId: stateCode
  }, {
    code: "BPAREG_APPROVER",
    tenantId: stateCode
  }];
  var bpaEmployeeRoles = ["BPA_FIELD_INSPECTOR", "BPA_NOC_VERIFIER", "BPA_APPROVER", "BPA_VERIFIER", "CEMP"];
  var checkingForStakeholderRoles = showHidingLinksForStakeholder(stakeholderEmployeeRoles);
  var checkingForBPARoles = showHidingLinksForBPA(bpaEmployeeRoles);
  var searchFormDefaultValues = {};
  var filterFormDefaultValues = {
    moduleName: "bpa-services",
    applicationStatus: "",
    locality: [],
    assignee: "ASSIGNED_TO_ALL",
    applicationType: []
  };
  var tableOrderFormDefaultValues = {
    sortBy: "",
    limit: 10,
    offset: 0,
    sortOrder: "DESC"
  };
  var formInitValue = {
    filterForm: filterFormDefaultValues,
    searchForm: searchFormDefaultValues,
    tableForm: tableOrderFormDefaultValues
  };
  var searchFormDefaultValuesOfStakeholder = {};
  var filterFormDefaultValuesOfStakeholder = {
    moduleName: "BPAREG",
    applicationStatus: "",
    locality: [],
    assignee: "ASSIGNED_TO_ALL"
  };
  var tableOrderFormDefaultValuesOfStakeholder = {
    sortBy: "",
    limit: 10,
    offset: 0,
    sortOrder: "DESC"
  };
  var formInitValueOfStakeholder = {
    filterForm: filterFormDefaultValuesOfStakeholder,
    searchForm: searchFormDefaultValuesOfStakeholder,
    tableForm: tableOrderFormDefaultValuesOfStakeholder
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAInbox({
      tenantId: tenantId,
      filters: _extends({}, formInitValueOfStakeholder),
      config: {
        enabled: !!checkingForStakeholderRoles
      }
    }),
    isInboxLoadingOfStakeholder = _Digit$Hooks$obps$use.isLoading,
    dataOfStakeholder = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPAInbox({
      tenantId: tenantId,
      filters: _extends({}, formInitValue),
      config: {
        enabled: !!checkingForBPARoles
      }
    }),
    isInboxLoading = _Digit$Hooks$obps$use2.isLoading,
    dataOfBPA = _Digit$Hooks$obps$use2.data;
  React.useEffect(function () {
    if (!isInboxLoading && !isInboxLoadingOfStakeholder) {
      var bpaCount = dataOfBPA !== null && dataOfBPA !== void 0 && dataOfBPA.totalCount ? dataOfBPA === null || dataOfBPA === void 0 ? void 0 : dataOfBPA.totalCount : 0;
      var stakeHolderCount = dataOfStakeholder !== null && dataOfStakeholder !== void 0 && dataOfStakeholder.totalCount ? dataOfStakeholder === null || dataOfStakeholder === void 0 ? void 0 : dataOfStakeholder.totalCount : 0;
      setTotalCount(bpaCount + stakeHolderCount);
    }
  }, [dataOfBPA, dataOfStakeholder]);
  React.useEffect(function () {
    if (location.pathname === "/digit-ui/employee") {
      Digit.SessionStorage.del("OBPS.INBOX");
      Digit.SessionStorage.del("STAKEHOLDER.INBOX");
    }
  }, [location.pathname]);
  var propsForModuleCard = React.useMemo(function () {
    return {
      Icon: /*#__PURE__*/React__default.createElement(digitUiReactComponents.OBPSIconSolidBg, null),
      moduleName: t("MODULE_OBPS"),
      kpis: [{
        count: !isInboxLoading && !isInboxLoadingOfStakeholder ? totalCount : "",
        label: t("TOTAL_FSM"),
        link: "/digit-ui/employee/obps/inbox"
      }, {
        count: "-",
        label: t("TOTAL_NEARING_SLA"),
        link: "/digit-ui/employee/obps/inbox"
      }],
      links: [{
        count: isInboxLoadingOfStakeholder ? "" : dataOfStakeholder === null || dataOfStakeholder === void 0 ? void 0 : dataOfStakeholder.totalCount,
        label: t("ES_COMMON_STAKEHOLDER_INBOX_LABEL"),
        link: "/digit-ui/employee/obps/stakeholder-inbox",
        field: "STAKEHOLDER"
      }, {
        count: isInboxLoading ? "" : dataOfBPA === null || dataOfBPA === void 0 ? void 0 : dataOfBPA.totalCount,
        label: t("ES_COMMON_OBPS_INBOX_LABEL"),
        link: "/digit-ui/employee/obps/inbox",
        field: "BPA"
      }, {
        label: t("ES_COMMON_SEARCH_APPLICATION"),
        link: "/digit-ui/employee/obps/search/application"
      }]
    };
  }, [isInboxLoading, isInboxLoadingOfStakeholder, dataOfStakeholder, dataOfBPA, totalCount]);
  if (!checkingForStakeholderRoles) {
    propsForModuleCard.links = propsForModuleCard.links.filter(function (obj) {
      return obj.field !== 'STAKEHOLDER';
    });
  }
  if (!checkingForBPARoles) {
    propsForModuleCard.links = propsForModuleCard.links.filter(function (obj) {
      return obj.field !== 'BPA';
    });
  }
  return checkingForBPARoles || checkingForStakeholderRoles ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.EmployeeModuleCard, propsForModuleCard) : null;
};

var configPTApproverApplication = function configPTApproverApplication(_ref) {
  var _action$assigneeRoles;
  var t = _ref.t,
    action = _ref.action,
    approvers = _ref.approvers,
    selectedApprover = _ref.selectedApprover,
    setSelectedApprover = _ref.setSelectedApprover,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    setUploadedFile = _ref.setUploadedFile,
    assigneeLabel = _ref.assigneeLabel,
    businessService = _ref.businessService;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "ES_PT_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: action.isTerminateState || (action === null || action === void 0 ? void 0 : action.action) === "SENDBACKTOCITIZEN" ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || (action === null || action === void 0 ? void 0 : action.action) === "SENDBACKTOCITIZEN" ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("ES_PT_ACTION_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("ES_PT_ATTACH_FILE") + (action.docUploadRequired ? " *" : ""),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          showHint: true,
          hintText: t("PT_ATTACH_RESTRICTIONS_SIZE"),
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("ES_PT_ACTION_NO_FILEUPLOADED")
        })
      }]
    }]
  };
};

var configPTAssessProperty = function configPTAssessProperty(_ref) {
  var t = _ref.t,
    action = _ref.action,
    financialYears = _ref.financialYears,
    selectedFinancialYear = _ref.selectedFinancialYear,
    setSelectedFinancialYear = _ref.setSelectedFinancialYear;
  return {
    label: {
      heading: "WF_" + action.action + "_APPLICATION",
      submit: "WF_PT.CREATE_" + action.action,
      cancel: "ES_PT_COMMON_CANCEL"
    },
    form: [{
      body: [{
        label: t("ES_PT_FINANCIAL_YEARS"),
        isMandatory: true,
        type: "radio",
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.RadioButtons, {
          options: financialYears,
          optionsKey: "name",
          onSelect: setSelectedFinancialYear,
          selectedOption: selectedFinancialYear
        })
      }]
    }]
  };
};

var configTLApproverApplication = function configTLApproverApplication(_ref) {
  var t = _ref.t,
    action = _ref.action,
    approvers = _ref.approvers,
    selectedApprover = _ref.selectedApprover,
    setSelectedApprover = _ref.setSelectedApprover,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    setUploadedFile = _ref.setUploadedFile,
    businessService = _ref.businessService;
  var checkCondtions = true;
  if ((action === null || action === void 0 ? void 0 : action.action) == "SENDBACKTOCITIZEN" || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "WF_EMPLOYEE_NEWTL_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("TL_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc"
          ,
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED")
        })
      }
      ]
    }]
  };
};

var configBPAREGApproverApplication = function configBPAREGApproverApplication(_ref) {
  var t = _ref.t,
    action = _ref.action,
    approvers = _ref.approvers,
    selectedApprover = _ref.selectedApprover,
    setSelectedApprover = _ref.setSelectedApprover,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    setUploadedFile = _ref.setUploadedFile,
    businessService = _ref.businessService,
    error = _ref.error;
  var checkCondtions = true;
  if ((action === null || action === void 0 ? void 0 : action.action) == "SENDBACKTOCITIZEN") checkCondtions = false;
  if (action.isTerminateState) checkCondtions = false;
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()) + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "WF_EMPLOYEE_BPAREG_CANCEL"
    },
    form: [{
      body: [{
        label: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_LABEL"),
        placeholder: !checkCondtions ? null : t("WF_ASSIGNEE_NAME_PLACEHOLDER"),
        type: "dropdown",
        populators: !checkCondtions ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        populators: {
          name: "comments"
        }
      }, {
        label: t("BPA_APPROVAL_CHECKLIST_BUTTON_UP_FILE"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

var configBPAApproverApplication = function configBPAApproverApplication(_ref) {
  var _action$assigneeRoles;
  var t = _ref.t,
    action = _ref.action,
    approvers = _ref.approvers,
    selectedApprover = _ref.selectedApprover,
    setSelectedApprover = _ref.setSelectedApprover,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    setUploadedFile = _ref.setUploadedFile,
    assigneeLabel = _ref.assigneeLabel,
    businessService = _ref.businessService,
    error = _ref.error;
  var isRejectOrRevocate = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT" || action.action == "SKIP_PAYMENT" || (action === null || action === void 0 ? void 0 : action.action) == "SEND_BACK_TO_CITIZEN" || (action === null || action === void 0 ? void 0 : action.action) == "APPROVE") {
    isRejectOrRevocate = true;
  }
  var isCommentRequired = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT") {
    isCommentRequired = true;
  }
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "BPA_CITIZEN_CANCEL_BUTTON"
    },
    form: [{
      body: [{
        label: action.isTerminateState || isRejectOrRevocate ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || isRejectOrRevocate ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        isMandatory: isCommentRequired,
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("WF_APPROVAL_UPLOAD_HEAD"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

var configNOCApproverApplication = function configNOCApproverApplication(_ref) {
  var _action$assigneeRoles;
  var t = _ref.t,
    action = _ref.action,
    approvers = _ref.approvers,
    selectedApprover = _ref.selectedApprover,
    setSelectedApprover = _ref.setSelectedApprover,
    selectFile = _ref.selectFile,
    uploadedFile = _ref.uploadedFile,
    setUploadedFile = _ref.setUploadedFile,
    assigneeLabel = _ref.assigneeLabel,
    businessService = _ref.businessService,
    error = _ref.error;
  var isCommentRequired = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "REVOCATE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT") {
    isCommentRequired = true;
  }
  var isRejectOrRevocate = false;
  if ((action === null || action === void 0 ? void 0 : action.action) == "APPROVE" || (action === null || action === void 0 ? void 0 : action.action) == "REJECT" || action.action == "AUTO_APPROVE" || action.action == "AUTO_REJECT") {
    isRejectOrRevocate = true;
  }
  return {
    label: {
      heading: "WF_" + (action === null || action === void 0 ? void 0 : action.action) + "_APPLICATION",
      submit: "WF_" + businessService + "_" + (action === null || action === void 0 ? void 0 : action.action),
      cancel: "CORE_LOGOUTPOPUP_CANCEL"
    },
    form: [{
      body: [{
        label: action.isTerminateState || isRejectOrRevocate ? null : t(assigneeLabel || "WF_ROLE_" + ((_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : _action$assigneeRoles[0])),
        type: "dropdown",
        populators: action.isTerminateState || isRejectOrRevocate ? null : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
          option: approvers,
          autoComplete: "off",
          optionKey: "name",
          id: "fieldInspector",
          select: setSelectedApprover,
          selected: selectedApprover
        })
      }, {
        label: t("WF_COMMON_COMMENTS"),
        type: "textarea",
        isMandatory: isCommentRequired,
        populators: {
          name: "comments"
        }
      }, {
        label: "" + t("WF_APPROVAL_UPLOAD_HEAD"),
        populators: /*#__PURE__*/React__default.createElement(digitUiReactComponents.UploadFile, {
          id: "workflow-doc",
          onUpload: selectFile,
          onDelete: function onDelete() {
            setUploadedFile(null);
          },
          showHint: true,
          message: uploadedFile ? "1 " + t("ES_PT_ACTION_FILEUPLOADED") : t("CS_ACTION_NO_FILEUPLOADED"),
          accept: "image/*, .pdf, .png, .jpeg, .jpg",
          iserror: error
        })
      }]
    }]
  };
};

var Heading$1 = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    className: "heading-m"
  }, props.label);
};
var Close$1 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$1 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$1, null));
};
var ActionModal$1 = function ActionModal(_ref) {
  var _action$assigneeRoles, _action$assigneeRoles2;
  var t = _ref.t,
    action = _ref.action,
    tenantId = _ref.tenantId,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    applicationData = _ref.applicationData,
    businessService = _ref.businessService,
    moduleCode = _ref.moduleCode;
  var _Digit$Hooks$useEmplo = Digit.Hooks.useEmployeeSearch(tenantId, {
      roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, function (e) {
        return {
          code: e
        };
      }),
      isActive: true
    }, {
      enabled: !(action !== null && action !== void 0 && action.isTerminateState)
    }),
    approverData = _Digit$Hooks$useEmplo.data,
    PTALoading = _Digit$Hooks$useEmplo.isLoading;
  var _Digit$Hooks$pt$useMD = Digit.Hooks.pt.useMDMS(tenantId, businessService, "FINANCIAL_YEARLS", {}, {
      details: {
        tenantId: Digit.ULBService.getStateId(),
        moduleDetails: [{
          moduleName: "egf-master",
          masterDetails: [{
            name: "FinancialYear",
            filter: "[?(@.module == 'PT')]"
          }]
        }]
      }
    }),
    financialYearsLoading = _Digit$Hooks$pt$useMD.isLoading,
    financialYearsData = _Digit$Hooks$pt$useMD.data;
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState({}),
    defaultValues = _useState2[0];
  var _useState3 = React.useState([]),
    approvers = _useState3[0],
    setApprovers = _useState3[1];
  var _useState4 = React.useState(null),
    selectedApprover = _useState4[0],
    setSelectedApprover = _useState4[1];
  var _useState5 = React.useState(null),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(null),
    setError = _useState7[1];
  var _useState8 = React.useState([]),
    financialYears = _useState8[0],
    setFinancialYears = _useState8[1];
  var _useState9 = React.useState(null),
    selectedFinancialYear = _useState9[0],
    setSelectedFinancialYear = _useState9[1];
  var _useState10 = React.useState(false);
  React.useEffect(function () {
    if (financialYearsData && financialYearsData["egf-master"]) {
      var _financialYearsData$e;
      setFinancialYears((_financialYearsData$e = financialYearsData["egf-master"]) === null || _financialYearsData$e === void 0 ? void 0 : _financialYearsData$e["FinancialYear"]);
    }
  }, [financialYearsData]);
  React.useEffect(function () {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(function (employee) {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp4 = function () {
          if (file) {
            var _temp5 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp6 = _catch(function () {
                  return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp6 && _temp6.then) return _temp6.then(function () {});
              }
            }();
            if (_temp5 && _temp5.then) return _temp5.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    if (!(action !== null && action !== void 0 && action.showFinancialYearsModal)) {
      var workflow = {
        action: action === null || action === void 0 ? void 0 : action.action,
        comments: data === null || data === void 0 ? void 0 : data.comments,
        businessService: businessService,
        moduleName: moduleCode
      };
      workflow["assignes"] = action !== null && action !== void 0 && action.isTerminateState || !selectedApprover ? [] : [selectedApprover];
      if (uploadedFile) workflow["documents"] = [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }];
      submitAction({
        Property: _extends({}, applicationData, {
          workflow: workflow
        })
      });
    } else {
      submitAction({
        customFunctionToExecute: action === null || action === void 0 ? void 0 : action.customFunctionToExecute,
        Assessment: {
          financialYear: selectedFinancialYear === null || selectedFinancialYear === void 0 ? void 0 : selectedFinancialYear.name,
          propertyId: applicationData === null || applicationData === void 0 ? void 0 : applicationData.propertyId,
          tenantId: tenantId,
          source: applicationData === null || applicationData === void 0 ? void 0 : applicationData.source,
          channel: applicationData === null || applicationData === void 0 ? void 0 : applicationData.channel,
          assessmentDate: Date.now()
        }
      });
    }
  }
  React.useEffect(function () {
    if (action) {
      if (action !== null && action !== void 0 && action.showFinancialYearsModal) {
        setConfig(configPTAssessProperty({
          t: t,
          action: action,
          financialYears: financialYears,
          selectedFinancialYear: selectedFinancialYear,
          setSelectedFinancialYear: setSelectedFinancialYear
        }));
      } else {
        setConfig(configPTApproverApplication({
          t: t,
          action: action,
          approvers: approvers,
          selectedApprover: selectedApprover,
          setSelectedApprover: setSelectedApprover,
          selectFile: selectFile,
          uploadedFile: uploadedFile,
          setUploadedFile: setUploadedFile,
          businessService: businessService
        }));
      }
    }
  }, [action, approvers, financialYears, selectedFinancialYear, uploadedFile]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$1, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$1, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {},
    isDisabled: !action.showFinancialYearsModal ? PTALoading || (action === null || action === void 0 ? void 0 : action.docUploadRequired) && !uploadedFile : !selectedFinancialYear,
    formId: "modal-action"
  }, financialYearsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

var Heading$2 = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    className: "heading-m"
  }, props.label);
};
var Close$2 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$2 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$2, null));
};
var ActionModal$2 = function ActionModal(_ref) {
  var _action$assigneeRoles, _action$assigneeRoles2;
  var t = _ref.t,
    action = _ref.action,
    tenantId = _ref.tenantId,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    applicationData = _ref.applicationData,
    businessService = _ref.businessService;
  var _Digit$Hooks$useEmplo = Digit.Hooks.useEmployeeSearch(tenantId, {
      roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, function (e) {
        return {
          code: e
        };
      }),
      isActive: true
    }, {
      enabled: !(action !== null && action !== void 0 && action.isTerminateState)
    }),
    approverData = _Digit$Hooks$useEmplo.data;
  var _Digit$Hooks$pt$useMD = Digit.Hooks.pt.useMDMS(tenantId, businessService, "FINANCIAL_YEARLS", {}, {
      details: {
        tenantId: Digit.ULBService.getStateId(),
        moduleDetails: [{
          moduleName: "egf-master",
          masterDetails: [{
            name: "FinancialYear",
            filter: "[?(@.module == 'TL')]"
          }]
        }]
      }
    }),
    financialYearsLoading = _Digit$Hooks$pt$useMD.isLoading,
    financialYearsData = _Digit$Hooks$pt$useMD.data;
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState({}),
    defaultValues = _useState2[0];
  var _useState3 = React.useState([]),
    approvers = _useState3[0],
    setApprovers = _useState3[1];
  var _useState4 = React.useState({}),
    selectedApprover = _useState4[0],
    setSelectedApprover = _useState4[1];
  var _useState5 = React.useState(null),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(null),
    setError = _useState7[1];
  var _useState8 = React.useState([]),
    financialYears = _useState8[0],
    setFinancialYears = _useState8[1];
  var _useState9 = React.useState(null),
    selectedFinancialYear = _useState9[0];
  React.useEffect(function () {
    if (financialYearsData && financialYearsData["egf-master"]) {
      var _financialYearsData$e;
      setFinancialYears((_financialYearsData$e = financialYearsData["egf-master"]) === null || _financialYearsData$e === void 0 ? void 0 : _financialYearsData$e["FinancialYear"]);
    }
  }, [financialYearsData]);
  React.useEffect(function () {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(function (employee) {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp4 = function () {
          if (file) {
            var _temp5 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp6 = _catch(function () {
                  return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                    var _response$data, _response$data$files;
                    if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                      var _response$data2, _response$data2$files;
                      setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                    } else {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    }
                  });
                }, function () {
                  setError(t("CS_FILE_UPLOAD_ERROR"));
                });
                if (_temp6 && _temp6.then) return _temp6.then(function () {});
              }
            }();
            if (_temp5 && _temp5.then) return _temp5.then(function () {});
          }
        }();
        return _temp4 && _temp4.then ? _temp4.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    applicationData = _extends({}, applicationData, {
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: data === null || data === void 0 ? void 0 : data.comments,
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null
    });
    submitAction({
      Licenses: [applicationData]
    });
  }
  React.useEffect(function () {
    if (action) {
      setConfig(configTLApproverApplication({
        t: t,
        action: action,
        approvers: approvers,
        selectedApprover: selectedApprover,
        setSelectedApprover: setSelectedApprover,
        selectFile: selectFile,
        uploadedFile: uploadedFile,
        setUploadedFile: setUploadedFile,
        businessService: businessService
      }));
    }
  }, [action, approvers, financialYears, selectedFinancialYear, uploadedFile]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$2, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$2, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {}
    ,
    formId: "modal-action"
  }, financialYearsLoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

var Heading$3 = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
var Close$3 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$3 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$3, null));
};
var ActionModal$3 = function ActionModal(_ref) {
  var _action$assigneeRoles, _action$assigneeRoles2;
  var t = _ref.t,
    action = _ref.action,
    tenantId = _ref.tenantId,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    applicationData = _ref.applicationData,
    businessService = _ref.businessService;
  var _Digit$Hooks$useEmplo = Digit.Hooks.useEmployeeSearch(tenantId, {
      roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, function (e) {
        return {
          code: e
        };
      }),
      isActive: true
    }, {
      enabled: !(action !== null && action !== void 0 && action.isTerminateState)
    }),
    approverData = _Digit$Hooks$useEmplo.data,
    PTALoading = _Digit$Hooks$useEmplo.isLoading;
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState({}),
    defaultValues = _useState2[0];
  var _useState3 = React.useState([]),
    approvers = _useState3[0],
    setApprovers = _useState3[1];
  var _useState4 = React.useState({}),
    selectedApprover = _useState4[0],
    setSelectedApprover = _useState4[1];
  var _useState5 = React.useState(null),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(null),
    error = _useState7[0],
    setError = _useState7[1];
  var mobileView = Digit.Utils.browser.isMobile() ? true : false;
  React.useEffect(function () {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(function (employee) {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("OBPS", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    applicationData = _extends({}, applicationData, {
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: data === null || data === void 0 ? void 0 : data.comments,
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null
    });
    submitAction({
      Licenses: [applicationData]
    }, false, {
      isStakeholder: true,
      bpa: false
    });
  }
  React.useEffect(function () {
    if (action) {
      setConfig(configBPAREGApproverApplication({
        t: t,
        action: action,
        approvers: approvers,
        selectedApprover: selectedApprover,
        setSelectedApprover: setSelectedApprover,
        selectFile: selectFile,
        uploadedFile: uploadedFile,
        setUploadedFile: setUploadedFile,
        businessService: businessService,
        error: error
      }));
    }
  }, [action, approvers, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$3, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$3, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      height: "45px",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      height: "45px",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

var Heading$4 = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
var Close$4 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$4 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$4, null));
};
var ActionModal$4 = function ActionModal(_ref) {
  var _applicationData, _applicationData$land, _applicationData$land2, _applicationData2, _applicationData2$lan, _applicationData2$lan2, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6;
  var t = _ref.t,
    action = _ref.action,
    tenantId = _ref.tenantId,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    applicationDetails = _ref.applicationDetails,
    applicationData = _ref.applicationData,
    businessService = _ref.businessService,
    workflowDetails = _ref.workflowDetails;
  var mutation1 = Digit.Hooks.obps.useObpsAPI((_applicationData = applicationData) !== null && _applicationData !== void 0 && (_applicationData$land = _applicationData.landInfo) !== null && _applicationData$land !== void 0 && (_applicationData$land2 = _applicationData$land.address) !== null && _applicationData$land2 !== void 0 && _applicationData$land2.city ? (_applicationData2 = applicationData) === null || _applicationData2 === void 0 ? void 0 : (_applicationData2$lan = _applicationData2.landInfo) === null || _applicationData2$lan === void 0 ? void 0 : (_applicationData2$lan2 = _applicationData2$lan.address) === null || _applicationData2$lan2 === void 0 ? void 0 : _applicationData2$lan2.city : tenantId, false);
  var _Digit$Hooks$useEmplo = Digit.Hooks.useEmployeeSearch(tenantId, {
      roles: workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.initialActionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.filter(function (ele) {
        return (ele === null || ele === void 0 ? void 0 : ele.action) == (action === null || action === void 0 ? void 0 : action.action);
      })) === null || _workflowDetails$data4 === void 0 ? void 0 : (_workflowDetails$data5 = _workflowDetails$data4[0]) === null || _workflowDetails$data5 === void 0 ? void 0 : (_workflowDetails$data6 = _workflowDetails$data5.assigneeRoles) === null || _workflowDetails$data6 === void 0 ? void 0 : _workflowDetails$data6.map(function (role) {
        return {
          code: role
        };
      }),
      isActive: true
    }, {
      enabled: !(action !== null && action !== void 0 && action.isTerminateState)
    }),
    approverData = _Digit$Hooks$useEmplo.data,
    PTALoading = _Digit$Hooks$useEmplo.isLoading;
  var queryClient = reactQuery.useQueryClient();
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState({}),
    defaultValues = _useState2[0];
  var _useState3 = React.useState([]),
    approvers = _useState3[0],
    setApprovers = _useState3[1];
  var _useState4 = React.useState({}),
    selectedApprover = _useState4[0],
    setSelectedApprover = _useState4[1];
  var _useState5 = React.useState(null),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(null),
    error = _useState7[0],
    setError = _useState7[1];
  var _useState8 = React.useState(null),
    selectedFinancialYear = _useState8[0];
  var mobileView = Digit.Utils.browser.isMobile() ? true : false;
  React.useEffect(function () {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(function (employee) {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("OBPS", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  var getInspectionDocs = function getInspectionDocs(docs) {
    var refinedDocs = [];
    docs && docs.map(function (doc, ind) {
      refinedDocs.push({
        "documentType": (doc.documentType + "_" + doc.documentType.split("_")[1]).replaceAll("_", "."),
        "fileStoreId": doc.fileStoreId,
        "fileStore": doc.fileStoreId,
        "fileName": "",
        "dropDownValues": {
          "value": (doc.documentType + "_" + doc.documentType.split("_")[1]).replaceAll("_", ".")
        }
      });
    });
    return refinedDocs;
  };
  var getQuestion = function getQuestion(data) {
    var refinedQues = [];
    var i;
    for (i = 0; i < (data === null || data === void 0 ? void 0 : data.questionLength); i++) {
      var _data;
      refinedQues.push({
        "remarks": data["Remarks_" + i],
        "question": data === null || data === void 0 ? void 0 : data.questionList[i].question,
        "value": data === null || data === void 0 ? void 0 : (_data = data["question_" + i]) === null || _data === void 0 ? void 0 : _data.code
      });
    }
    return refinedQues;
  };
  var getfeildInspection = function getfeildInspection(data) {
    var _data$additionalDetai, _data$additionalDetai2;
    var formdata = [],
      inspectionOb = [];
    if ((data === null || data === void 0 ? void 0 : (_data$additionalDetai = data.additionalDetails) === null || _data$additionalDetai === void 0 ? void 0 : (_data$additionalDetai2 = _data$additionalDetai.fieldinspection_pending) === null || _data$additionalDetai2 === void 0 ? void 0 : _data$additionalDetai2.length) > 0) {
      var _data$additionalDetai3;
      inspectionOb = data === null || data === void 0 ? void 0 : (_data$additionalDetai3 = data.additionalDetails) === null || _data$additionalDetai3 === void 0 ? void 0 : _data$additionalDetai3.fieldinspection_pending;
    }
    if (data.status == "FIELDINSPECTION_INPROGRESS") {
      var _formdata;
      formdata = JSON.parse(sessionStorage.getItem("INSPECTION_DATA"));
      ((_formdata = formdata) === null || _formdata === void 0 ? void 0 : _formdata.length) > 0 && formdata.map(function (ob, ind) {
        inspectionOb.push({
          docs: getInspectionDocs(ob.Documents),
          date: ob.InspectionDate,
          questions: getQuestion(ob),
          time: ob === null || ob === void 0 ? void 0 : ob.InspectionTime
        });
      });
      inspectionOb = inspectionOb.filter(function (ob) {
        return ob.docs && ob.docs.length > 0;
      });
    } else {
      sessionStorage.removeItem("INSPECTION_DATA");
    }
    var fieldinspection_pending = [].concat(inspectionOb);
    return fieldinspection_pending;
  };
  var getDocuments = function getDocuments(applicationData) {
    var documentsformdata = JSON.parse(sessionStorage.getItem("BPA_DOCUMENTS"));
    var documentList = [];
    documentsformdata.map(function (doc) {
      var _doc$uploadedDocument, _doc$uploadedDocument2, _doc$uploadedDocument3, _doc$uploadedDocument4, _doc$uploadedDocument5, _doc$newUploadedDocs;
      if ((doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : (_doc$uploadedDocument2 = _doc$uploadedDocument[0]) === null || _doc$uploadedDocument2 === void 0 ? void 0 : (_doc$uploadedDocument3 = _doc$uploadedDocument2.values) === null || _doc$uploadedDocument3 === void 0 ? void 0 : _doc$uploadedDocument3.length) > 0) documentList = [].concat(documentList, doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument4 = doc.uploadedDocuments) === null || _doc$uploadedDocument4 === void 0 ? void 0 : (_doc$uploadedDocument5 = _doc$uploadedDocument4[0]) === null || _doc$uploadedDocument5 === void 0 ? void 0 : _doc$uploadedDocument5.values);
      if ((doc === null || doc === void 0 ? void 0 : (_doc$newUploadedDocs = doc.newUploadedDocs) === null || _doc$newUploadedDocs === void 0 ? void 0 : _doc$newUploadedDocs.length) > 0) documentList = [].concat(documentList, doc === null || doc === void 0 ? void 0 : doc.newUploadedDocs);
    });
    return documentList;
  };
  var getPendingApprovals = function getPendingApprovals() {
    var _result;
    var approvals = Digit.SessionStorage.get("OBPS_APPROVAL_CHECKS");
    var newApprovals = Digit.SessionStorage.get("OBPS_NEW_APPROVALS");
    var result = approvals === null || approvals === void 0 ? void 0 : approvals.reduce(function (acc, approval) {
      return approval !== null && approval !== void 0 && approval.checked ? acc.push(approval === null || approval === void 0 ? void 0 : approval.label) && acc : acc;
    }, []);
    result = (_result = result) === null || _result === void 0 ? void 0 : _result.concat(newApprovals !== null ? newApprovals.filter(function (ob) {
      return ob.label !== "";
    }).map(function (approval) {
      return approval === null || approval === void 0 ? void 0 : approval.label;
    }) : []);
    return result;
  };
  function submit(data) {
    var _applicationData3, _data$comments, _data$comments2, _applicationDetails$n;
    applicationData = _extends({}, applicationData, {
      documents: getDocuments(),
      additionalDetails: _extends({}, (_applicationData3 = applicationData) === null || _applicationData3 === void 0 ? void 0 : _applicationData3.additionalDetails, {
        fieldinspection_pending: getfeildInspection(applicationData),
        pendingapproval: getPendingApprovals()
      }),
      workflow: {
        action: action === null || action === void 0 ? void 0 : action.action,
        comment: (data === null || data === void 0 ? void 0 : (_data$comments = data.comments) === null || _data$comments === void 0 ? void 0 : _data$comments.length) > 0 ? data === null || data === void 0 ? void 0 : data.comments : null,
        comments: (data === null || data === void 0 ? void 0 : (_data$comments2 = data.comments) === null || _data$comments2 === void 0 ? void 0 : _data$comments2.length) > 0 ? data === null || data === void 0 ? void 0 : data.comments : null,
        assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
        assignes: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
        varificationDocuments: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : null
      },
      action: action === null || action === void 0 ? void 0 : action.action,
      comment: data === null || data === void 0 ? void 0 : data.comments,
      assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
      wfDocuments: uploadedFile ? [{
        documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
        fileName: file === null || file === void 0 ? void 0 : file.name,
        fileStoreId: uploadedFile
      }] : null
    });
    var nocDetails = applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$n = applicationDetails.nocData) === null || _applicationDetails$n === void 0 ? void 0 : _applicationDetails$n.map(function (noc) {
      var uploadedDocuments = Digit.SessionStorage.get(noc === null || noc === void 0 ? void 0 : noc.nocType) || [];
      return {
        Noc: _extends({}, noc, {
          documents: [].concat(noc !== null && noc !== void 0 && noc.documents ? noc === null || noc === void 0 ? void 0 : noc.documents : [], uploadedDocuments ? uploadedDocuments : [])
        })
      };
    });
    var nocData = [];
    if (nocDetails) {
      nocDetails.map(function (noc) {
        var _noc$Noc, _noc$Noc$applicationS, _noc$Noc2, _noc$Noc2$application, _noc$Noc3, _noc$Noc3$application, _noc$Noc4, _noc$Noc4$application, _noc$Noc5, _noc$Noc5$application;
        if ((noc === null || noc === void 0 ? void 0 : (_noc$Noc = noc.Noc) === null || _noc$Noc === void 0 ? void 0 : (_noc$Noc$applicationS = _noc$Noc.applicationStatus) === null || _noc$Noc$applicationS === void 0 ? void 0 : _noc$Noc$applicationS.toUpperCase()) != "APPROVED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc2 = noc.Noc) === null || _noc$Noc2 === void 0 ? void 0 : (_noc$Noc2$application = _noc$Noc2.applicationStatus) === null || _noc$Noc2$application === void 0 ? void 0 : _noc$Noc2$application.toUpperCase()) != "AUTO_APPROVED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc3 = noc.Noc) === null || _noc$Noc3 === void 0 ? void 0 : (_noc$Noc3$application = _noc$Noc3.applicationStatus) === null || _noc$Noc3$application === void 0 ? void 0 : _noc$Noc3$application.toUpperCase()) != "REJECTED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc4 = noc.Noc) === null || _noc$Noc4 === void 0 ? void 0 : (_noc$Noc4$application = _noc$Noc4.applicationStatus) === null || _noc$Noc4$application === void 0 ? void 0 : _noc$Noc4$application.toUpperCase()) != "AUTO_REJECTED" && (noc === null || noc === void 0 ? void 0 : (_noc$Noc5 = noc.Noc) === null || _noc$Noc5 === void 0 ? void 0 : (_noc$Noc5$application = _noc$Noc5.applicationStatus) === null || _noc$Noc5$application === void 0 ? void 0 : _noc$Noc5$application.toUpperCase()) != "VOIDED") {
          nocData.push(noc);
        }
      });
    }
    submitAction({
      BPA: applicationData
    }, (nocData === null || nocData === void 0 ? void 0 : nocData.length) > 0 ? nocData : false, {
      isStakeholder: false,
      bpa: true
    });
  }
  React.useEffect(function () {
    if (action) {
      setConfig(configBPAApproverApplication({
        t: t,
        action: action,
        approvers: approvers,
        selectedApprover: selectedApprover,
        setSelectedApprover: setSelectedApprover,
        selectFile: selectFile,
        uploadedFile: uploadedFile,
        setUploadedFile: setUploadedFile,
        businessService: businessService,
        assigneeLabel: "WF_ASSIGNEE_NAME_LABEL",
        error: error
      }));
    }
  }, [action, approvers, selectedFinancialYear, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$4, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$4, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      minHeight: "45px",
      height: "auto",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      minHeight: "45px",
      height: "auto",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

var Heading$5 = function Heading(props) {
  return /*#__PURE__*/React__default.createElement("h1", {
    style: {
      marginLeft: "22px"
    },
    className: "heading-m BPAheading-m"
  }, props.label);
};
var Close$5 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$5 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$5, null));
};
var ActionModal$5 = function ActionModal(_ref) {
  var _action$assigneeRoles, _action$assigneeRoles2;
  var t = _ref.t,
    action = _ref.action,
    tenantId = _ref.tenantId,
    closeModal = _ref.closeModal,
    submitAction = _ref.submitAction,
    applicationData = _ref.applicationData,
    businessService = _ref.businessService;
  var _Digit$Hooks$useEmplo = Digit.Hooks.useEmployeeSearch(tenantId, {
      roles: action === null || action === void 0 ? void 0 : (_action$assigneeRoles = action.assigneeRoles) === null || _action$assigneeRoles === void 0 ? void 0 : (_action$assigneeRoles2 = _action$assigneeRoles.map) === null || _action$assigneeRoles2 === void 0 ? void 0 : _action$assigneeRoles2.call(_action$assigneeRoles, function (e) {
        return {
          code: e
        };
      }),
      isActive: true
    }, {
      enabled: !(action !== null && action !== void 0 && action.isTerminateState)
    }),
    approverData = _Digit$Hooks$useEmplo.data,
    PTALoading = _Digit$Hooks$useEmplo.isLoading;
  var queryClient = reactQuery.useQueryClient();
  var _useState = React.useState({}),
    config = _useState[0],
    setConfig = _useState[1];
  var _useState2 = React.useState({}),
    defaultValues = _useState2[0];
  var _useState3 = React.useState([]),
    approvers = _useState3[0],
    setApprovers = _useState3[1];
  var _useState4 = React.useState({}),
    selectedApprover = _useState4[0],
    setSelectedApprover = _useState4[1];
  var _useState5 = React.useState(null),
    file = _useState5[0],
    setFile = _useState5[1];
  var _useState6 = React.useState(null),
    uploadedFile = _useState6[0],
    setUploadedFile = _useState6[1];
  var _useState7 = React.useState(null),
    error = _useState7[0],
    setError = _useState7[1];
  var mobileView = Digit.Utils.browser.isMobile() ? true : false;
  var history = reactRouterDom.useHistory();
  React.useEffect(function () {
    var _approverData$Employe;
    setApprovers(approverData === null || approverData === void 0 ? void 0 : (_approverData$Employe = approverData.Employees) === null || _approverData$Employe === void 0 ? void 0 : _approverData$Employe.map(function (employee) {
      var _employee$user;
      return {
        uuid: employee === null || employee === void 0 ? void 0 : employee.uuid,
        name: employee === null || employee === void 0 ? void 0 : (_employee$user = employee.user) === null || _employee$user === void 0 ? void 0 : _employee$user.name
      };
    }));
  }, [approverData]);
  function selectFile(e) {
    setFile(e.target.files[0]);
  }
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      return Promise.resolve(Digit.UploadServices.Filestorage("NOC", file, Digit.ULBService.getStateId() || (tenantId === null || tenantId === void 0 ? void 0 : tenantId.split(".")[0]))).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  function submit(data) {
    var _applicationData, _applicationData$docu, _applicationData2;
    var enteredDocs = JSON.parse(sessionStorage.getItem("NewNOCDocs"));
    var newDocs = ((_applicationData = applicationData) === null || _applicationData === void 0 ? void 0 : (_applicationData$docu = _applicationData.documents) === null || _applicationData$docu === void 0 ? void 0 : _applicationData$docu.length) > 0 ? [].concat((_applicationData2 = applicationData) === null || _applicationData2 === void 0 ? void 0 : _applicationData2.documents) : [];
    enteredDocs.map(function (d, index) {
      newDocs.push(d);
    });
    applicationData = _extends({}, applicationData, {
      workflow: {
        action: action === null || action === void 0 ? void 0 : action.action,
        comment: data !== null && data !== void 0 && data.comments ? data === null || data === void 0 ? void 0 : data.comments : null,
        assignee: !(selectedApprover !== null && selectedApprover !== void 0 && selectedApprover.uuid) ? null : [selectedApprover === null || selectedApprover === void 0 ? void 0 : selectedApprover.uuid],
        documents: uploadedFile ? [{
          documentType: (action === null || action === void 0 ? void 0 : action.action) + " DOC",
          fileName: file === null || file === void 0 ? void 0 : file.name,
          fileStoreId: uploadedFile
        }] : null
      },
      documents: newDocs
    });
    submitAction({
      Noc: applicationData
    }, false, {
      isNoc: true
    });
  }
  React.useEffect(function () {
    if (action) {
      setConfig(configNOCApproverApplication({
        t: t,
        action: action,
        approvers: approvers,
        selectedApprover: selectedApprover,
        setSelectedApprover: setSelectedApprover,
        selectFile: selectFile,
        uploadedFile: uploadedFile,
        setUploadedFile: setUploadedFile,
        businessService: businessService,
        assigneeLabel: "WF_ASSIGNEE_NAME_LABEL",
        error: error
      }));
    }
  }, [action, approvers, uploadedFile, error]);
  return action && config.form ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement(Heading$5, {
      label: t(config.label.heading)
    }),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$5, {
      onClick: closeModal
    }),
    actionCancelLabel: t(config.label.cancel),
    actionCancelOnSubmit: closeModal,
    actionSaveLabel: t(config.label.submit),
    actionSaveOnSubmit: function actionSaveOnSubmit() {},
    formId: "modal-action",
    isOBPSFlow: true,
    popupStyles: mobileView ? {
      width: "720px"
    } : {},
    style: !mobileView ? {
      height: "45px",
      width: "107px",
      paddingLeft: "0px",
      paddingRight: "0px"
    } : {
      height: "45px",
      width: "44%"
    },
    popupModuleMianStyles: mobileView ? {
      paddingLeft: "5px"
    } : {}
  }, PTALoading ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    config: config.form,
    cardStyle: {
      marginLeft: "0px",
      marginRight: "0px",
      marginTop: "-25px"
    },
    className: "BPAemployeeCard",
    noBoxShadow: true,
    inline: true,
    childrenAtTheBottom: true,
    onSubmit: submit,
    defaultValues: defaultValues,
    formId: "modal-action"
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
};

var ActionModal$6 = function ActionModal(props) {
  if (props !== null && props !== void 0 && props.businessService.includes("PT")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$1, props);
  }
  if (props !== null && props !== void 0 && props.businessService.includes("NewTL") || props !== null && props !== void 0 && props.businessService.includes("TL") || props !== null && props !== void 0 && props.businessService.includes("EDITRENEWAL") || props !== null && props !== void 0 && props.businessService.includes("DIRECTRENEWAL")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$2, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("BPAREG")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$3, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("BPA")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$4, props);
  }
  if (props !== null && props !== void 0 && props.moduleCode.includes("NOC")) {
    return /*#__PURE__*/React__default.createElement(ActionModal$5, props);
  }
};

var BPADocuments = function BPADocuments(_ref) {
  var _bpaActionsDetails$da, _formData$documents;
  var t = _ref.t,
    formData = _ref.formData,
    applicationData = _ref.applicationData,
    docs = _ref.docs,
    bpaActionsDetails = _ref.bpaActionsDetails;
  var applicationStatus = (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) || "";
  var actions = (bpaActionsDetails === null || bpaActionsDetails === void 0 ? void 0 : (_bpaActionsDetails$da = bpaActionsDetails.data) === null || _bpaActionsDetails$da === void 0 ? void 0 : _bpaActionsDetails$da.nextActions) || [];
  var stateId = Digit.ULBService.getStateId();
  var _useState = React.useState((formData === null || formData === void 0 ? void 0 : (_formData$documents = formData.documents) === null || _formData$documents === void 0 ? void 0 : _formData$documents.documents) || []),
    documents = _useState[0],
    setDocuments = _useState[1];
  var _useState2 = React.useState(null),
    error = _useState2[0],
    setError = _useState2[1];
  var _useState3 = React.useState([]),
    bpaTaxDocuments = _useState3[0],
    setBpaTaxDocuments = _useState3[1];
  var _useState4 = React.useState(true),
    setEnableSubmit = _useState4[1];
  var _useState5 = React.useState(false),
    checkRequiredFields = _useState5[0],
    setCheckRequiredFields = _useState5[1];
  var _useState6 = React.useState(false),
    checkEnablingDocs = _useState6[0],
    setCheckEnablingDocs = _useState6[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["DocTypeMapping"]),
    bpaDocsLoading = _Digit$Hooks$obps$use.isLoading,
    bpaDocs = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["DocumentType"]),
    commonDocsLoading = _Digit$Hooks$obps$use2.isLoading,
    commonDocs = _Digit$Hooks$obps$use2.data;
  React.useEffect(function () {
    var _bpaDocs$BPA, _filtredBpaDocs, _filtredBpaDocs$, _filtredBpaDocs$$docT;
    var filtredBpaDocs = [];
    if (bpaDocs !== null && bpaDocs !== void 0 && (_bpaDocs$BPA = bpaDocs.BPA) !== null && _bpaDocs$BPA !== void 0 && _bpaDocs$BPA.DocTypeMapping) {
      var _bpaDocs$BPA2, _bpaDocs$BPA2$DocType;
      filtredBpaDocs = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA2 = bpaDocs.BPA) === null || _bpaDocs$BPA2 === void 0 ? void 0 : (_bpaDocs$BPA2$DocType = _bpaDocs$BPA2.DocTypeMapping) === null || _bpaDocs$BPA2$DocType === void 0 ? void 0 : _bpaDocs$BPA2$DocType.filter(function (data) {
        var _applicationData$addi, _applicationData$addi2;
        return data.WFState == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) ? applicationData === null || applicationData === void 0 ? void 0 : applicationData.status :  data.RiskType == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.riskType) && data.ServiceType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi = applicationData.additionalDetails) === null || _applicationData$addi === void 0 ? void 0 : _applicationData$addi.serviceType) && data.applicationType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi2 = applicationData.additionalDetails) === null || _applicationData$addi2 === void 0 ? void 0 : _applicationData$addi2.applicationType);
      });
    }
    var documentsList = [];
    (_filtredBpaDocs = filtredBpaDocs) === null || _filtredBpaDocs === void 0 ? void 0 : (_filtredBpaDocs$ = _filtredBpaDocs[0]) === null || _filtredBpaDocs$ === void 0 ? void 0 : (_filtredBpaDocs$$docT = _filtredBpaDocs$.docTypes) === null || _filtredBpaDocs$$docT === void 0 ? void 0 : _filtredBpaDocs$$docT.forEach(function (doc) {
      var _commonDocs$commonMa, _commonDocs$commonMa$, _docs$, _docs$$values;
      var code = doc.code;
      doc.dropdownData = [];
      doc.uploadedDocuments = [];
      commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : (_commonDocs$commonMa$ = _commonDocs$commonMa.DocumentType) === null || _commonDocs$commonMa$ === void 0 ? void 0 : _commonDocs$commonMa$.forEach(function (value) {
        var values = value.code.slice(0, code.length);
        if (code === values) {
          doc.hasDropdown = true;
          value.i18nKey = value.code;
          doc.dropdownData.push(value);
        }
      });
      doc.uploadedDocuments[0] = {};
      doc.uploadedDocuments[0].values = [];
      docs === null || docs === void 0 ? void 0 : (_docs$ = docs[0]) === null || _docs$ === void 0 ? void 0 : (_docs$$values = _docs$.values) === null || _docs$$values === void 0 ? void 0 : _docs$$values.map(function (upDocs) {
        var _upDocs$documentType, _upDocs$documentType2;
        if (code === (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType = upDocs.documentType) === null || _upDocs$documentType === void 0 ? void 0 : _upDocs$documentType.split('.')[0]) + "." + (upDocs === null || upDocs === void 0 ? void 0 : (_upDocs$documentType2 = upDocs.documentType) === null || _upDocs$documentType2 === void 0 ? void 0 : _upDocs$documentType2.split('.')[1])) {
          doc.uploadedDocuments[0].values.push(upDocs);
        }
      });
      documentsList.push(doc);
    });
    sessionStorage.setItem("BPA_DOCUMENTS", JSON.stringify(documentsList));
    setBpaTaxDocuments(documentsList);
  }, [!bpaDocsLoading, !commonDocsLoading]);
  React.useEffect(function () {
    var count = 0;
    bpaTaxDocuments.map(function (doc) {
      var isRequired = false;
      documents.map(function (data) {
        if (doc.required && doc.code == data.documentType.split('.')[0] + "." + data.documentType.split('.')[1]) {
          isRequired = true;
        }
      });
      if (!isRequired && doc.required) {
        count = count + 1;
      }
    });
    if ((count == "0" || count == 0) && documents.length > 0) setEnableSubmit(false);else setEnableSubmit(true);
  }, [documents, checkRequiredFields]);
  React.useEffect(function () {
    if (applicationStatus === "DOC_VERIFICATION_INPROGRESS" && (actions === null || actions === void 0 ? void 0 : actions.length) > 0) setCheckEnablingDocs(true);else setCheckEnablingDocs(false);
  }, [applicationData, bpaActionsDetails]);
  return /*#__PURE__*/React__default.createElement("div", null, bpaTaxDocuments === null || bpaTaxDocuments === void 0 ? void 0 : bpaTaxDocuments.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(SelectDocument$4, {
      key: index,
      index: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setDocuments: setDocuments,
      documents: documents,
      setCheckRequiredFields: setCheckRequiredFields,
      applicationStatus: applicationStatus,
      actions: actions,
      bpaTaxDocuments: bpaTaxDocuments,
      checkEnablingDocs: checkEnablingDocs
    }));
  }));
};
function SelectDocument$4(_ref2) {
  var _doc$dropdownData, _doc$uploadedDocument;
  var t = _ref2.t,
    doc = _ref2.document,
    setDocuments = _ref2.setDocuments,
    documents = _ref2.documents,
    index = _ref2.index,
    bpaTaxDocuments = _ref2.bpaTaxDocuments,
    checkEnablingDocs = _ref2.checkEnablingDocs;
  var filteredDocument = documents === null || documents === void 0 ? void 0 : documents.filter(function (item) {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  var tenantId = Digit.ULBService.getStateId();
  var _useState7 = React.useState(filteredDocument ? _extends({}, filteredDocument, {
      active: true,
      code: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType,
      i18nKey: filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.documentType
    }) : (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData = doc.dropdownData) === null || _doc$dropdownData === void 0 ? void 0 : _doc$dropdownData.length) === 1 ? doc === null || doc === void 0 ? void 0 : doc.dropdownData[0] : {}),
    selectedDocument = _useState7[0],
    setSelectedDocument = _useState7[1];
  var _useState8 = React.useState(null),
    file = _useState8[0],
    setFile = _useState8[1];
  var _useState9 = React.useState(function () {
      return (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null;
    }),
    uploadedFile = _useState9[0];
  var _useState10 = React.useState([]),
    selectArrayFiles = _useState10[0],
    SetSelectArrayFiles = _useState10[1];
  var handleSelectDocument = function handleSelectDocument(value) {
    return setSelectedDocument(value);
  };
  var allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfiles(e) {
    e && setFile(e.file);
  }
  React.useEffect(function () {
    if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
      setDocuments(function (prev) {
        var _documents$find;
        var filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.documentType) !== (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code);
        });
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) return filteredDocumentsByDocumentType;
        var filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile;
        });
        return [].concat(filteredDocumentsByFileStoreId, [{
          documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
          fileStoreId: uploadedFile,
          documentUid: uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || "",
          id: documents ? (_documents$find = documents.find(function (x) {
            return x.documentType === (selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code);
          })) === null || _documents$find === void 0 ? void 0 : _documents$find.id : undefined
        }]);
      });
    }
  }, [uploadedFile, selectedDocument]);
  React.useEffect(function () {
    try {
      if (selectArrayFiles.length > 0) {
        sessionStorage.removeItem("BPA_DOCUMENTS");
        doc.newUploadedDocs = [];
        selectArrayFiles.map(function (newDoc) {
          if (selectedDocument !== null && selectedDocument !== void 0 && selectedDocument.code) {
            var _newDoc$fileStoreId, _newDoc$fileStoreId2, _newDoc$fileStoreId3;
            doc.newUploadedDocs.push({
              documentType: selectedDocument === null || selectedDocument === void 0 ? void 0 : selectedDocument.code,
              fileStoreId: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId = newDoc.fileStoreId) === null || _newDoc$fileStoreId === void 0 ? void 0 : _newDoc$fileStoreId.fileStoreId,
              documentUid: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId2 = newDoc.fileStoreId) === null || _newDoc$fileStoreId2 === void 0 ? void 0 : _newDoc$fileStoreId2.fileStoreId,
              tenantId: newDoc === null || newDoc === void 0 ? void 0 : (_newDoc$fileStoreId3 = newDoc.fileStoreId) === null || _newDoc$fileStoreId3 === void 0 ? void 0 : _newDoc$fileStoreId3.tenantId
            });
          }
        });
        bpaTaxDocuments[index] = doc;
        sessionStorage.setItem("BPA_DOCUMENTS", JSON.stringify(bpaTaxDocuments));
      }
    } catch (e) {
      Promise.reject(e);
    }
  }, [selectArrayFiles, selectedDocument]);
  React.useEffect(function () {
  }, [file]);
  var getData = function getData(index, state) {
    var data = Object.fromEntries(state);
    var newArr = Object.values(data);
    if (Object.keys(data).length !== 0) SetSelectArrayFiles(newArr);
    selectfiles(newArr[newArr.length - 1]);
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "24px",
      maxWidth: "950px",
      minWidth: "280px",
      background: "#FAFAFA",
      borderRadius: "4px",
      border: "1px solid #D6D5D4",
      padding: "8px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      marginBottom: "8px",
      paddingBottom: "9px",
      color: "#0B0C0C",
      fontSize: "16px",
      lineHeight: "19px"
    }
  }, "" + t(doc === null || doc === void 0 ? void 0 : doc.code)), (doc === null || doc === void 0 ? void 0 : (_doc$uploadedDocument = doc.uploadedDocuments) === null || _doc$uploadedDocument === void 0 ? void 0 : _doc$uploadedDocument.length) && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: doc === null || doc === void 0 ? void 0 : doc.uploadedDocuments,
    svgStyles: {
      width: "100px",
      height: "100px",
      viewBox: "0 0 25 25",
      minWidth: "100px"
    }
  }), checkEnablingDocs ? /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "20px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      marginTop: "-10px",
      width: "100%"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t(doc === null || doc === void 0 ? void 0 : doc.code) + "* " : "" + t(doc === null || doc === void 0 ? void 0 : doc.code)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Dropdown, {
    className: "form-field",
    t: t,
    isMandatory: false,
    option: doc === null || doc === void 0 ? void 0 : doc.dropdownData,
    selected: selectedDocument,
    optionKey: "i18nKey",
    select: handleSelectDocument,
    style: {
      width: "100%"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    className: "card-label-smaller",
    style: {
      width: "100%"
    }
  }), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "BPA",
    tenantId: tenantId,
    getFormState: function getFormState(e) {
      return getData(index, e);
    },
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  })))) : null);
}

function SelectDocument$5(_ref) {
  var t = _ref.t,
    doc = _ref.document,
    setNocDocuments = _ref.setNocDocuments,
    setError = _ref.setError,
    nocDocuments = _ref.nocDocuments;
  var filteredDocument = nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.filter(function (item) {
    var _item$documentType;
    return item === null || item === void 0 ? void 0 : (_item$documentType = item.documentType) === null || _item$documentType === void 0 ? void 0 : _item$documentType.includes(doc === null || doc === void 0 ? void 0 : doc.code);
  })[0];
  var tenantId = Digit.ULBService.getStateId();
  var _useState = React.useState();
  var _useState2 = React.useState(null),
    file = _useState2[0],
    setFile = _useState2[1];
  var _useState3 = React.useState(function () {
      return (filteredDocument === null || filteredDocument === void 0 ? void 0 : filteredDocument.fileStoreId) || null;
    }),
    uploadedFile = _useState3[0],
    setUploadedFile = _useState3[1];
  var allowedFileTypes = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
  function selectfile(e) {
    e && setFile(e.file);
  }
  React.useEffect(function () {
    var _doc$dropdownData, _doc$dropdownData$;
    if (doc !== null && doc !== void 0 && (_doc$dropdownData = doc.dropdownData) !== null && _doc$dropdownData !== void 0 && (_doc$dropdownData$ = _doc$dropdownData[0]) !== null && _doc$dropdownData$ !== void 0 && _doc$dropdownData$.code) {
      setNocDocuments(function (prev) {
        var _doc$dropdownData3;
        var filteredDocumentsByDocumentType = prev === null || prev === void 0 ? void 0 : prev.filter(function (item) {
          var _doc$dropdownData2, _doc$dropdownData2$;
          return (item === null || item === void 0 ? void 0 : item.documentType) !== (doc === null || doc === void 0 ? void 0 : (_doc$dropdownData2 = doc.dropdownData) === null || _doc$dropdownData2 === void 0 ? void 0 : (_doc$dropdownData2$ = _doc$dropdownData2[0]) === null || _doc$dropdownData2$ === void 0 ? void 0 : _doc$dropdownData2$.code);
        });
        if ((uploadedFile === null || uploadedFile === void 0 ? void 0 : uploadedFile.length) === 0 || uploadedFile === null) {
          return filteredDocumentsByDocumentType;
        }
        var filteredDocumentsByFileStoreId = filteredDocumentsByDocumentType === null || filteredDocumentsByDocumentType === void 0 ? void 0 : filteredDocumentsByDocumentType.filter(function (item) {
          return (item === null || item === void 0 ? void 0 : item.fileStoreId) !== uploadedFile;
        });
        return [].concat(filteredDocumentsByFileStoreId, [{
          documentType: doc === null || doc === void 0 ? void 0 : (_doc$dropdownData3 = doc.dropdownData) === null || _doc$dropdownData3 === void 0 ? void 0 : _doc$dropdownData3[0].code,
          fileStoreId: uploadedFile,
          documentUid: uploadedFile,
          fileName: (file === null || file === void 0 ? void 0 : file.name) || ""
        }]);
      });
    }
  }, [uploadedFile]);
  React.useEffect(function () {
    (function () {
      try {
        setError(null);
        var _temp5 = function () {
          if (file) {
            var allowedFileTypesRegex = /(.*?)(jpg|jpeg|png|image|pdf)$/i;
            var _temp6 = function () {
              if (file.size >= 5242880) {
                setError(t("CS_MAXIMUM_UPLOAD_SIZE_EXCEEDED"));
              } else {
                var _temp7 = function () {
                  if (file !== null && file !== void 0 && file.type && !allowedFileTypesRegex.test(file === null || file === void 0 ? void 0 : file.type)) {
                    setError(t("NOT_SUPPORTED_FILE_TYPE"));
                  } else {
                    var _temp8 = _catch(function () {
                      setUploadedFile(null);
                      return Promise.resolve(Digit.UploadServices.Filestorage("PT", file, Digit.ULBService.getStateId())).then(function (response) {
                        var _response$data, _response$data$files;
                        if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$files = _response$data.files) === null || _response$data$files === void 0 ? void 0 : _response$data$files.length) > 0) {
                          var _response$data2, _response$data2$files;
                          setUploadedFile(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : (_response$data2$files = _response$data2.files[0]) === null || _response$data2$files === void 0 ? void 0 : _response$data2$files.fileStoreId);
                        } else {
                          setError(t("CS_FILE_UPLOAD_ERROR"));
                        }
                      });
                    }, function () {
                      setError(t("CS_FILE_UPLOAD_ERROR"));
                    });
                    if (_temp8 && _temp8.then) return _temp8.then(function () {});
                  }
                }();
                if (_temp7 && _temp7.then) return _temp7.then(function () {});
              }
            }();
            if (_temp6 && _temp6.then) return _temp6.then(function () {});
          }
        }();
        return _temp5 && _temp5.then ? _temp5.then(function () {}) : void 0;
      } catch (e) {
        Promise.reject(e);
      }
    })();
  }, [file]);
  var getData = function getData(state) {
    var data = Object.fromEntries(state);
    var newArr = Object.values(data);
    selectfile(newArr[newArr.length - 1]);
  };
  return /*#__PURE__*/React__default.createElement("div", {
    style: {}
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LabelFieldPair, {
    style: {
      width: "98%",
      marginRight: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardLabel, {
    style: {
      width: "100%"
    }
  }, doc !== null && doc !== void 0 && doc.required ? t("TL_BUTTON_UPLOAD FILE") + "*" : "" + t("TL_BUTTON_UPLOAD FILE")), /*#__PURE__*/React__default.createElement("div", {
    className: "field",
    style: {
      width: "100%"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiUploadWrapper, {
    module: "NOC",
    tenantId: tenantId,
    getFormState: function getFormState(e) {
      return getData(e);
    },
    t: t,
    allowedFileTypesRegex: allowedFileTypes,
    allowedMaxSizeInMB: 5,
    acceptFiles: "image/*, .pdf, .png, .jpeg, .jpg"
  }))));
}
var NOCDocuments = function NOCDocuments(_ref2) {
  var _bpaActionsDetails$da;
  var t = _ref2.t,
    noc = _ref2.noc,
    docs = _ref2.docs,
    isNoc = _ref2.isNoc,
    applicationData = _ref2.applicationData,
    NOCdata = _ref2.NOCdata,
    bpaActionsDetails = _ref2.bpaActionsDetails;
  var tenantId = Digit.ULBService.getStateId();
  var stateId = Digit.ULBService.getStateId();
  var bpaApplicationStatus = (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) || "";
  var actions = (bpaActionsDetails === null || bpaActionsDetails === void 0 ? void 0 : (_bpaActionsDetails$da = bpaActionsDetails.data) === null || _bpaActionsDetails$da === void 0 ? void 0 : _bpaActionsDetails$da.nextActions) || [];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "NOC", ["DocumentTypeMapping"], {
      enabled: isNoc
    }),
    nocDocs = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["DocTypeMapping"], {
      enabled: !isNoc
    }),
    bpaDocs = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useMDMS(stateId, "common-masters", ["DocumentType"]),
    commonDocs = _Digit$Hooks$obps$use3.data;
  var _useState4 = React.useState([]),
    commonDocMaping = _useState4[0],
    setCommonDocMaping = _useState4[1];
  var _useState5 = React.useState([]),
    nocTaxDocuments = _useState5[0],
    setNocTaxDocuments = _useState5[1];
  var _useState6 = React.useState(false),
    checkEnablingDocs = _useState6[0],
    setCheckEnablingDocs = _useState6[1];
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage(noc === null || noc === void 0 ? void 0 : noc.nocType, []),
    nocDocuments = _Digit$Hooks$useSessi[0],
    setNocDocuments = _Digit$Hooks$useSessi[1];
  var _useState7 = React.useState(null),
    error = _useState7[0],
    setError = _useState7[1];
  var isEmployee = window.location.href.includes("/employee/");
  React.useEffect(function () {
    var _commonDocs$commonMa;
    setCommonDocMaping(commonDocs === null || commonDocs === void 0 ? void 0 : (_commonDocs$commonMa = commonDocs["common-masters"]) === null || _commonDocs$commonMa === void 0 ? void 0 : _commonDocs$commonMa.DocumentType);
  }, [commonDocs]);
  React.useEffect(function () {
    var _filteredData, _filteredData$, _filteredData$$docTyp;
    var documents = [];
    var filteredData;
    if (isNoc) {
      var _nocDocs$NOC, _nocDocs$NOC$Document;
      filteredData = nocDocs === null || nocDocs === void 0 ? void 0 : (_nocDocs$NOC = nocDocs.NOC) === null || _nocDocs$NOC === void 0 ? void 0 : (_nocDocs$NOC$Document = _nocDocs$NOC.DocumentTypeMapping) === null || _nocDocs$NOC$Document === void 0 ? void 0 : _nocDocs$NOC$Document.filter(function (data) {
        return (data === null || data === void 0 ? void 0 : data.applicationType) === (noc === null || noc === void 0 ? void 0 : noc.applicationType) && (data === null || data === void 0 ? void 0 : data.nocType) === (noc === null || noc === void 0 ? void 0 : noc.nocType);
      });
    } else {
      var _bpaDocs$BPA, _bpaDocs$BPA$DocTypeM;
      filteredData = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA = bpaDocs.BPA) === null || _bpaDocs$BPA === void 0 ? void 0 : (_bpaDocs$BPA$DocTypeM = _bpaDocs$BPA.DocTypeMapping) === null || _bpaDocs$BPA$DocTypeM === void 0 ? void 0 : _bpaDocs$BPA$DocTypeM.filter(function (data) {
        var _applicationData$addi, _applicationData$addi2;
        return data.WFState == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.status) && data.RiskType == (applicationData === null || applicationData === void 0 ? void 0 : applicationData.riskType) && data.ServiceType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi = applicationData.additionalDetails) === null || _applicationData$addi === void 0 ? void 0 : _applicationData$addi.serviceType) && data.applicationType == (applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$addi2 = applicationData.additionalDetails) === null || _applicationData$addi2 === void 0 ? void 0 : _applicationData$addi2.applicationType);
      });
    }
    if ((_filteredData = filteredData) !== null && _filteredData !== void 0 && (_filteredData$ = _filteredData[0]) !== null && _filteredData$ !== void 0 && (_filteredData$$docTyp = _filteredData$.docTypes) !== null && _filteredData$$docTyp !== void 0 && _filteredData$$docTyp[0]) {
      filteredData[0].docTypes[0].nocType = filteredData[0].nocType;
      filteredData[0].docTypes[0].additionalDetails = {
        submissionDetails: noc === null || noc === void 0 ? void 0 : noc.additionalDetails,
        applicationStatus: noc === null || noc === void 0 ? void 0 : noc.applicationStatus,
        appNumberLink: noc === null || noc === void 0 ? void 0 : noc.applicationNo,
        nocNo: noc === null || noc === void 0 ? void 0 : noc.nocNo
      };
      documents.push(filteredData[0].docTypes[0]);
    }
    var documentsList = [];
    if (documents && documents.length > 0) {
      documents.map(function (doc) {
        var code = doc.documentType;
        doc.dropdownData = [];
        commonDocMaping === null || commonDocMaping === void 0 ? void 0 : commonDocMaping.forEach(function (value) {
          var values = value.code.slice(0, code === null || code === void 0 ? void 0 : code.length);
          if (code === values) {
            doc.hasDropdown = true;
            doc.dropdownData.push(value);
          }
        });
        documentsList.push(doc);
      });
      setNocTaxDocuments(documentsList);
    }
  }, [nocDocs, commonDocMaping]);
  React.useEffect(function () {
    if (bpaApplicationStatus === 'NOC_VERIFICATION_INPROGRESS' && (actions === null || actions === void 0 ? void 0 : actions.length) > 0) setCheckEnablingDocs(true);else setCheckEnablingDocs(false);
  }, [applicationData, bpaActionsDetails]);
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      border: "1px solid #D6D5D4",
      padding: "16px 0px 16px 8px",
      background: "#FAFAFA",
      borderRadius: "5px",
      marginBottom: "24px",
      maxWidth: "950px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: isEmployee ? "" + t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER") : t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER"),
    labelStyle: {
      fontSize: "20px",
      width: "150%"
    }
  }), NOCdata && NOCdata.map(function (noc, index) {
    if (noc !== null && noc !== void 0 && noc.value) {
      if ((noc === null || noc === void 0 ? void 0 : noc.field) == "STATUS") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          className: "border-none",
          label: isEmployee ? "" + t(noc === null || noc === void 0 ? void 0 : noc.title) : t(noc === null || noc === void 0 ? void 0 : noc.title),
          text: noc !== null && noc !== void 0 && noc.value ? t(noc === null || noc === void 0 ? void 0 : noc.value) : t("CS_NA"),
          textStyle: (noc === null || noc === void 0 ? void 0 : noc.value) == "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.value) == "AUTO_APPROVED" ? {
            color: "#00703C"
          } : {
            color: "#D4351C"
          }
        });
      } else {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          className: "border-none",
          label: isEmployee ? "" + t(noc === null || noc === void 0 ? void 0 : noc.title) : t(noc === null || noc === void 0 ? void 0 : noc.title),
          text: noc !== null && noc !== void 0 && noc.value ? t(noc === null || noc === void 0 ? void 0 : noc.value) : t("CS_NA")
        });
      }
    }
  })), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: docs,
    svgStyles: {
      width: "80px",
      height: "100px",
      viewBox: "0 0 25 25",
      minWidth: "80px"
    }
  }), checkEnablingDocs && (nocTaxDocuments === null || nocTaxDocuments === void 0 ? void 0 : nocTaxDocuments.map(function (document, index) {
    return /*#__PURE__*/React__default.createElement(SelectDocument$5, {
      key: index,
      document: document,
      t: t,
      error: error,
      setError: setError,
      setNocDocuments: setNocDocuments,
      nocDocuments: nocDocuments,
      checkEnablingDocs: checkEnablingDocs
    });
  })));
};

var PermissionCheck = function PermissionCheck(_ref) {
  var permissions = _ref.permissions,
    t = _ref.t;
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("OBPS_APPROVAL_CHECKS", permissions === null || permissions === void 0 ? void 0 : permissions.map(function (permission) {
      return {
        label: permission,
        checked: false
      };
    })),
    approvalChecks = _Digit$Hooks$useSessi[0],
    setApprovalChecks = _Digit$Hooks$useSessi[1];
  var _Digit$Hooks$useSessi2 = Digit.Hooks.useSessionStorage('OBPS_NEW_APPROVALS', []),
    newApprovals = _Digit$Hooks$useSessi2[0],
    setNewApprovals = _Digit$Hooks$useSessi2[1];
  React.useEffect(function () {
    return function () {
      Digit.SessionStorage.del("OBPS_NEW_APPROVALS");
      Digit.SessionStorage.del("OBPS_APPROVAL_CHECKS");
    };
  }, []);
  var handleAdd = function handleAdd() {
    setNewApprovals([].concat(newApprovals, [{
      label: ''
    }]));
  };
  var handleRemove = function handleRemove(index) {
    var values = [].concat(newApprovals);
    values.splice(index, 1);
    setNewApprovals([].concat(values));
  };
  var handleChange = function handleChange(event, index) {
    setNewApprovals(function () {
      return newApprovals === null || newApprovals === void 0 ? void 0 : newApprovals.map(function (approval, id) {
        if (index === id) {
          var _event$target;
          return {
            label: event === null || event === void 0 ? void 0 : (_event$target = event.target) === null || _event$target === void 0 ? void 0 : _event$target.value
          };
        }
        return approval;
      });
    });
  };
  var handleCheck = function handleCheck(event, label, index) {
    var isChecked = event.target.checked;
    setApprovalChecks(function () {
      return approvalChecks === null || approvalChecks === void 0 ? void 0 : approvalChecks.map(function (approval, id) {
        if (index === id) {
          return _extends({}, approval, {
            checked: isChecked
          });
        }
        return approval;
      });
    });
  };
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      marginBottom: "16px",
      fontSize: "24px"
    }
  }, t("BPA_PERMIT_CONDITIONS")), approvalChecks === null || approvalChecks === void 0 ? void 0 : approvalChecks.map(function (permission, index) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckBox, {
      key: index,
      styles: {
        margin: "20px 0 40px",
        maxWidth: "70%"
      },
      label: permission === null || permission === void 0 ? void 0 : permission.label,
      checked: permission === null || permission === void 0 ? void 0 : permission.checked,
      onChange: function onChange(event) {
        return handleCheck(event, permission === null || permission === void 0 ? void 0 : permission.label, index);
      },
      isLabelFirst: true,
      index: index
    });
  }), newApprovals === null || newApprovals === void 0 ? void 0 : newApprovals.map(function (approval, index) {
    return /*#__PURE__*/React__default.createElement("div", null, " ", /*#__PURE__*/React__default.createElement(digitUiReactComponents.TextInput, {
      key: index,
      value: approval === null || approval === void 0 ? void 0 : approval.label,
      onChange: function onChange(event) {
        return handleChange(event, index);
      },
      textInputStyle: {
        maxWidth: "830px",
        width: "830px"
      },
      placeholder: "Enter permit conditions.........."
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
      label: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Close, {
        style: {
          float: "right",
          position: "relative",
          bottom: "32px",
          marginTop: "-21px",
          marginRight: "35%"
        }
      }))),
      style: {},
      onClick: function onClick(e) {
        return handleRemove(index);
      }
    }));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    style: {
      color: "#f47738",
      maxWidth: "10%",
      marginRight: "3%"
    },
    label: t("BPA_ADD_MORE"),
    onClick: handleAdd
  }));
};

function PropertyEstimates(_ref) {
  var taxHeadEstimatesCalculation = _ref.taxHeadEstimatesCalculation;
  var taxHeadEstimates = taxHeadEstimatesCalculation.taxHeadEstimates;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "40px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: t("ES_PT_TITLE_TAX_HEADS"),
    text: t("ES_PT_TITLE_AMOUNT"),
    className: "border-none",
    textStyle: {
      fontWeight: "bold"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, {
    style: {
      margin: "16px 0",
      width: "40%"
    }
  }), taxHeadEstimates === null || taxHeadEstimates === void 0 ? void 0 : taxHeadEstimates.map(function (estimate, index) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      key: t(estimate.taxHeadCode),
      label: t(estimate.taxHeadCode),
      text: "\u20B9 " + estimate.estimateAmount || "N/A",
      last: index === (taxHeadEstimates === null || taxHeadEstimates === void 0 ? void 0 : taxHeadEstimates.length) - 1,
      className: "border-none",
      textStyle: {
        color: "#505A5F"
      },
      labelStyle: {
        color: "#505A5F"
      }
    });
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, {
    style: {
      margin: "16px 0",
      width: "40%"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    label: t("ES_PT_TITLE_TOTAL_DUE_AMOUNT"),
    text: "\u20B9 " + (taxHeadEstimatesCalculation === null || taxHeadEstimatesCalculation === void 0 ? void 0 : taxHeadEstimatesCalculation.totalAmount) || "N/A",
    className: "border-none",
    textStyle: {
      fontSize: "24px",
      fontWeight: "bold"
    }
  })));
}

function PropertyFloors(_ref) {
  var floors = _ref.floors;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, floors.map(function (floor) {
    var _floor$values;
    return /*#__PURE__*/React__default.createElement("div", {
      key: t(floor === null || floor === void 0 ? void 0 : floor.title),
      style: {
        marginTop: "19px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    }, t(floor === null || floor === void 0 ? void 0 : floor.title)), floor === null || floor === void 0 ? void 0 : (_floor$values = floor.values) === null || _floor$values === void 0 ? void 0 : _floor$values.map(function (value, index) {
      var _value$values;
      return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
        style: {
          marginBottom: "16px",
          color: "#505A5F",
          fontSize: "16px",
          marginTop: index !== 0 ? "16px" : "revert"
        }
      }, t(value.title)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          padding: "8px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          border: "1px solid #D6D5D4",
          padding: "16px",
          marginTop: "8px",
          borderRadius: "4px",
          background: "#FAFAFA",
          maxWidth: "100%"
        }
      }, value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.map(function (value, index) {
        var _value$values2;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title),
          text: t(value.value) || "N/A",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values2 = value.values) === null || _value$values2 === void 0 ? void 0 : _value$values2.length) - 1,
          caption: value.caption,
          className: "border-none"
        });
      }))));
    }));
  }));
}

function PropertyOwners(_ref) {
  var owners = _ref.owners;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var checkOwnerLength = (owners === null || owners === void 0 ? void 0 : owners.length) || 1;
  var cardStyles = {
    marginTop: "19px"
  };
  var statusTableStyles = {
    position: "relative",
    padding: "8px"
  };
  var rowContainerStyle = {
    justifyContent: "space-between",
    fontSize: "16px",
    lineHeight: "19px",
    color: "#0B0C0C"
  };
  if ( Number(checkOwnerLength) > 1) {
    cardStyles = {
      marginTop: "19px",
      background: "#FAFAFA",
      border: "1px solid #D6D5D4",
      borderRadius: "4px",
      padding: "8px",
      lineHeight: "19px",
      maxWidth: "600px",
      minWidth: "280px"
    };
  } else if ( !(Number(checkOwnerLength) > 1)) {
    cardStyles = {
      marginTop: "19px",
      lineHeight: "19px",
      maxWidth: "600px",
      minWidth: "280px"
    };
    statusTableStyles = {
      position: "relative",
      marginTop: "19px"
    };
  }
  if (window.location.href.includes("obps")) {
    cardStyles = _extends({}, cardStyles, {
      maxWidth: "950px"
    });
    cardStyles = _extends({}, cardStyles, {
      maxWidth: "950px"
    });
    rowContainerStyle = {};
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, owners.map(function (owner, index) {
    var _owner$values;
    return /*#__PURE__*/React__default.createElement("div", {
      key: t(owner === null || owner === void 0 ? void 0 : owner.title),
      style: cardStyles
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style:  Number(checkOwnerLength) > 1 ? {
        marginBottom: "8px",
        paddingBottom: "9px",
        color: "#0B0C0C",
        fontSize: "16px",
        lineHeight: "19px"
      } : {
        marginBottom: "8px",
        color: "#505A5F",
        fontSize: "24px"
      }
    },  Number(checkOwnerLength) > 1 ? t(owner === null || owner === void 0 ? void 0 : owner.title) + " " + (index + 1) : t(owner === null || owner === void 0 ? void 0 : owner.title)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
      style: statusTableStyles
    }, /*#__PURE__*/React__default.createElement("div", {
      style: {
        maxWidth: "640px",
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
        width: "auto"
      }
    }), owner === null || owner === void 0 ? void 0 : (_owner$values = owner.values) === null || _owner$values === void 0 ? void 0 : _owner$values.map(function (value, index) {
      var _value$values;
      if (value.map === true && value.value !== "N/A") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title),
          text: /*#__PURE__*/React__default.createElement("img", {
            src: t(value.value),
            alt: ""
          })
        });
      }
      return /*#__PURE__*/React__default.createElement("span", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        key: t(value.title),
        label:  "" + t(value.title),
        text: t(value.value) || "N/A",
        last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
        caption: value.caption,
        className: "border-none",
        textStyle: value.textStyle
        ,
        rowContainerStyle: rowContainerStyle
      }));
    }))));
  }));
}

var Reason = function Reason(_ref) {
  var headComment = _ref.headComment,
    otherComment = _ref.otherComment;
  return /*#__PURE__*/React__default.createElement("div", {
    className: "checkpoint-comments-wrap"
  }, /*#__PURE__*/React__default.createElement("h4", null, headComment), /*#__PURE__*/React__default.createElement("p", null, otherComment));
};

var TLCaption = function TLCaption(_ref) {
  var _data$wfComment, _data$thumbnailsToSho, _data$thumbnailsToSho2;
  var data = _ref.data,
    OpenImage = _ref.OpenImage;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement("div", null, data.date && /*#__PURE__*/React__default.createElement("p", null, data.date), /*#__PURE__*/React__default.createElement("p", null, data.name), data.mobileNumber && /*#__PURE__*/React__default.createElement(digitUiReactComponents.TelePhone, {
    mobile: data.mobileNumber
  }), data.source && /*#__PURE__*/React__default.createElement("p", null, t("ES_APPLICATION_DETAILS_APPLICATION_CHANNEL_" + data.source.toUpperCase())), data.comment && /*#__PURE__*/React__default.createElement(Reason, {
    otherComment: data === null || data === void 0 ? void 0 : data.otherComment,
    headComment: data === null || data === void 0 ? void 0 : data.comment
  }), data !== null && data !== void 0 && data.wfComment ? /*#__PURE__*/React__default.createElement("div", null, data === null || data === void 0 ? void 0 : (_data$wfComment = data.wfComment) === null || _data$wfComment === void 0 ? void 0 : _data$wfComment.map(function (e) {
    return /*#__PURE__*/React__default.createElement("div", {
      className: "TLComments"
    }, /*#__PURE__*/React__default.createElement("h3", null, t("WF_COMMON_COMMENTS")), /*#__PURE__*/React__default.createElement("p", null, e));
  })) : null, (data === null || data === void 0 ? void 0 : (_data$thumbnailsToSho = data.thumbnailsToShow) === null || _data$thumbnailsToSho === void 0 ? void 0 : (_data$thumbnailsToSho2 = _data$thumbnailsToSho.thumbs) === null || _data$thumbnailsToSho2 === void 0 ? void 0 : _data$thumbnailsToSho2.length) > 0 ? /*#__PURE__*/React__default.createElement("div", {
    className: "TLComments"
  }, /*#__PURE__*/React__default.createElement("h3", null, t("CS_COMMON_ATTACHMENTS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.DisplayPhotos, {
    srcs: data === null || data === void 0 ? void 0 : data.thumbnailsToShow.thumbs,
    onClick: function onClick(src, index) {
      OpenImage(src, index, data === null || data === void 0 ? void 0 : data.thumbnailsToShow);
    }
  })) : null);
};

function TLTradeAccessories(_ref) {
  var units = _ref.units;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, units.map(function (unit, index) {
    var _unit$values;
    return (
      /*#__PURE__*/
      React__default.createElement("div", {
        key: t(unit === null || unit === void 0 ? void 0 : unit.title),
        style: {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "600px",
          minWidth: "280px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
        style: {
          marginBottom: "8px",
          paddingBottom: "9px",
          color: "#0B0C0C",
          fontSize: "16px",
          lineHeight: "19px"
        }
      }, t(unit === null || unit === void 0 ? void 0 : unit.title) + " " + (index + 1)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          marginTop: "19px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          position: "absolute",
          maxWidth: "640px",
          top: 0,
          left: 0,
          bottom: 0,
          right: 0,
          width: "auto"
        }
      }), unit === null || unit === void 0 ? void 0 : (_unit$values = unit.values) === null || _unit$values === void 0 ? void 0 : _unit$values.map(function (value, index) {
        var _value$values;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title) + ":",
          text: t(value.value) || "N/A",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
          caption: value.caption,
          className: "border-none"
          ,
          rowContainerStyle: {
            justifyContent: "space-between",
            fontSize: "16px",
            lineHeight: "19px",
            color: "#0B0C0C"
          }
        });
      }))))
    );
  }));
}

function TLTradeUnits(_ref) {
  var units = _ref.units;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, units.map(function (unit, index) {
    var _unit$values;
    return (
      /*#__PURE__*/
      React__default.createElement("div", {
        key: t(unit === null || unit === void 0 ? void 0 : unit.title),
        style: {
          marginTop: "19px",
          background: "#FAFAFA",
          border: "1px solid #D6D5D4",
          borderRadius: "4px",
          padding: "8px",
          lineHeight: "19px",
          maxWidth: "600px",
          minWidth: "280px"
        }
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
        style: {
          marginBottom: "9px",
          paddingBottom: "9px",
          color: "#0B0C0C",
          fontSize: "16px",
          lineHeight: "19px"
        }
      }, t(unit === null || unit === void 0 ? void 0 : unit.title) + " " + (index + 1)), /*#__PURE__*/React__default.createElement(React__default.Fragment, {
        key: index
      }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
        style: {
          position: "relative",
          marginTop: "19px"
        }
      }, /*#__PURE__*/React__default.createElement("div", {
        style: {
          position: "absolute",
          maxWidth: "640px",
          top: 0,
          left: 0,
          bottom: 0,
          right: 0,
          width: "auto"
        }
      }), unit === null || unit === void 0 ? void 0 : (_unit$values = unit.values) === null || _unit$values === void 0 ? void 0 : _unit$values.map(function (value, index) {
        var _value$values;
        if (value.map === true && value.value !== "N/A") {
          return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
            key: t(value.title),
            label: t(value.title),
            text: /*#__PURE__*/React__default.createElement("img", {
              src: t(value.value),
              alt: ""
            })
          });
        }
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title) + ":",
          text: t(value.value) || "NA",
          last: index === (value === null || value === void 0 ? void 0 : (_value$values = value.values) === null || _value$values === void 0 ? void 0 : _value$values.length) - 1,
          caption: value.caption,
          className: "border-none"
          ,
          rowContainerStyle: {
            justifyContent: "space-between",
            fontSize: "16px",
            lineHeight: "19px",
            color: "#0B0C0C"
          }
        });
      }))))
    );
  }));
}

function ApplicationDetailsContent(_ref) {
  var _applicationDetails$a, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data5, _workflowDetails$data6, _workflowDetails$data7, _workflowDetails$data8, _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12;
  var applicationDetails = _ref.applicationDetails,
    workflowDetails = _ref.workflowDetails,
    isDataLoading = _ref.isDataLoading,
    applicationData = _ref.applicationData,
    timelineStatusPrefix = _ref.timelineStatusPrefix,
    _ref$showTimeLine = _ref.showTimeLine,
    showTimeLine = _ref$showTimeLine === void 0 ? true : _ref$showTimeLine,
    _ref$statusAttribute = _ref.statusAttribute,
    statusAttribute = _ref$statusAttribute === void 0 ? "status" : _ref$statusAttribute,
    paymentsList = _ref.paymentsList;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  function OpenImage(imageSource, index, thumbnailsToShow) {
    var _thumbnailsToShow$ful;
    window.open(thumbnailsToShow === null || thumbnailsToShow === void 0 ? void 0 : (_thumbnailsToShow$ful = thumbnailsToShow.fullImage) === null || _thumbnailsToShow$ful === void 0 ? void 0 : _thumbnailsToShow$ful[0], "_blank");
  }
  var getTimelineCaptions = function getTimelineCaptions(checkpoint) {
    if (checkpoint.state === "OPEN" || checkpoint.status === "INITIATED" && !window.location.href.includes("/obps/")) {
      var _applicationData$audi;
      var caption = {
        date: Digit.DateUtils.ConvertTimestampToDate(applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$audi = applicationData.auditDetails) === null || _applicationData$audi === void 0 ? void 0 : _applicationData$audi.createdTime),
        source: (applicationData === null || applicationData === void 0 ? void 0 : applicationData.channel) || ""
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: caption
      });
    } else if (window.location.href.includes("/obps/") || window.location.href.includes("/noc/")) {
      var _checkpoint$auditDeta, _checkpoint$assignes, _checkpoint$assignes$, _checkpoint$assignes2, _checkpoint$assignes3;
      var _caption = {
        date: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$auditDeta = checkpoint.auditDetails) === null || _checkpoint$auditDeta === void 0 ? void 0 : _checkpoint$auditDeta.lastModified,
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes = checkpoint.assignes) === null || _checkpoint$assignes === void 0 ? void 0 : (_checkpoint$assignes$ = _checkpoint$assignes[0]) === null || _checkpoint$assignes$ === void 0 ? void 0 : _checkpoint$assignes$.name,
        mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes2 = checkpoint.assignes) === null || _checkpoint$assignes2 === void 0 ? void 0 : (_checkpoint$assignes3 = _checkpoint$assignes2[0]) === null || _checkpoint$assignes3 === void 0 ? void 0 : _checkpoint$assignes3.mobileNumber,
        comment: t(checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.comment),
        wfComment: checkpoint.wfComment,
        thumbnailsToShow: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.thumbnailsToShow
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: _caption,
        OpenImage: OpenImage
      });
    } else {
      var _Digit$DateUtils, _applicationData$audi2, _checkpoint$assignes4, _checkpoint$assignes5, _checkpoint$assignes6, _checkpoint$assignes7;
      var _caption2 = {
        date: (_Digit$DateUtils = Digit.DateUtils) === null || _Digit$DateUtils === void 0 ? void 0 : _Digit$DateUtils.ConvertTimestampToDate(applicationData === null || applicationData === void 0 ? void 0 : (_applicationData$audi2 = applicationData.auditDetails) === null || _applicationData$audi2 === void 0 ? void 0 : _applicationData$audi2.lastModifiedTime),
        name: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes4 = checkpoint.assignes) === null || _checkpoint$assignes4 === void 0 ? void 0 : (_checkpoint$assignes5 = _checkpoint$assignes4[0]) === null || _checkpoint$assignes5 === void 0 ? void 0 : _checkpoint$assignes5.name,
        wfComment: checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.wfComment,
        mobileNumber: checkpoint === null || checkpoint === void 0 ? void 0 : (_checkpoint$assignes6 = checkpoint.assignes) === null || _checkpoint$assignes6 === void 0 ? void 0 : (_checkpoint$assignes7 = _checkpoint$assignes6[0]) === null || _checkpoint$assignes7 === void 0 ? void 0 : _checkpoint$assignes7.mobileNumber
      };
      return /*#__PURE__*/React__default.createElement(TLCaption, {
        data: _caption2
      });
    }
  };
  var getTranslatedValues = function getTranslatedValues(dataValue, isNotTranslated) {
    if (dataValue) {
      return !isNotTranslated ? t(dataValue) : dataValue;
    } else {
      return t("NA");
    }
  };
  var checkLocation = window.location.href.includes("employee/tl") || window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc");
  var isNocLocation = window.location.href.includes("employee/noc");
  var isBPALocation = window.location.href.includes("employee/obps");
  var getRowStyles = function getRowStyles() {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc")) {
      return {
        justifyContent: "space-between",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#0B0C0C"
      };
    } else if (checkLocation) {
      return {
        justifyContent: "space-between",
        fontSize: "16px",
        lineHeight: "19px",
        color: "#0B0C0C"
      };
    } else {
      return {};
    }
  };
  var getTableStyles = function getTableStyles() {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc")) {
      return {
        position: "relative",
        marginTop: "19px"
      };
    } else if (checkLocation) {
      return {
        position: "relative",
        marginTop: "19px"
      };
    } else {
      return {};
    }
  };
  var getMainDivStyles = function getMainDivStyles() {
    if (window.location.href.includes("employee/obps") || window.location.href.includes("employee/noc")) {
      return {
        lineHeight: "19px",
        maxWidth: "950px",
        minWidth: "280px"
      };
    } else if (checkLocation) {
      return {
        lineHeight: "19px",
        maxWidth: "600px",
        minWidth: "280px"
      };
    } else {
      return {};
    }
  };
  var getTextValue = function getTextValue(value) {
    if (value !== null && value !== void 0 && value.skip) return value.value;else if (value !== null && value !== void 0 && value.isUnit) return value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) + " " + t(value === null || value === void 0 ? void 0 : value.isUnit) : t("N/A");else return value !== null && value !== void 0 && value.value ? getTranslatedValues(value === null || value === void 0 ? void 0 : value.value, value === null || value === void 0 ? void 0 : value.isNotTranslated) : t("N/A");
  };
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      position: "relative"
    },
    className: "employeeCard-override"
  }, applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationDetails) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.map(function (detail, index) {
    var _detail$values, _detail$additionalDet, _applicationDetails$a2, _applicationDetails$a3, _applicationDetails$a4, _detail$additionalDet2, _applicationDetails$a5, _applicationDetails$a6, _detail$additionalDet3, _detail$additionalDet4, _detail$additionalDet5, _detail$additionalDet6, _detail$additionalDet7, _detail$additionalDet8, _detail$additionalDet9, _detail$additionalDet10, _detail$additionalDet11, _workflowDetails$data, _workflowDetails$data2, _detail$additionalDet12, _detail$additionalDet13, _detail$additionalDet14, _detail$additionalDet15, _detail$additionalDet16, _detail$additionalDet17, _detail$additionalDet18, _detail$additionalDet19, _detail$additionalDet20, _detail$additionalDet21, _detail$additionalDet22, _detail$additionalDet23, _detail$additionalDet24;
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement("div", {
      style: getMainDivStyles()
    }, index === 0 && !detail.asSectionHeader ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginBottom: "16px",
        fontSize: "24px"
      }
    }, t(detail.title)) : /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: index == 0 && checkLocation ? {
        marginBottom: "16px",
        fontSize: "24px"
      } : {
        marginBottom: "16px",
        marginTop: "32px",
        fontSize: "24px"
      }
    }, isNocLocation ? "" + t(detail.title) : t(detail.title), detail !== null && detail !== void 0 && detail.Component ? /*#__PURE__*/React__default.createElement(detail.Component, null) : null)), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
      style: getTableStyles()
    }, (detail === null || detail === void 0 ? void 0 : detail.title) && !(detail !== null && detail !== void 0 && detail.title.includes("NOC")) && (detail === null || detail === void 0 ? void 0 : (_detail$values = detail.values) === null || _detail$values === void 0 ? void 0 : _detail$values.map(function (value, index) {
      var _detail$values3;
      if (value.map === true && value.value !== "N/A") {
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: t(value.title),
          text: /*#__PURE__*/React__default.createElement("img", {
            src: t(value.value),
            alt: ""
          })
        });
      }
      if ((value === null || value === void 0 ? void 0 : value.isLink) == true) {
        var _detail$values2;
        return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
          key: t(value.title),
          label: window.location.href.includes("tl") ? /*#__PURE__*/React__default.createElement("div", {
            style: {
              width: "200%"
            }
          }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
            to: value === null || value === void 0 ? void 0 : value.to
          }, /*#__PURE__*/React__default.createElement("span", {
            className: "link",
            style: {
              color: "#F47738"
            }
          }, t(value === null || value === void 0 ? void 0 : value.title)))) : isNocLocation || isBPALocation ? "" + t(value.title) : t(value.title),
          text: /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
            to: value === null || value === void 0 ? void 0 : value.to
          }, /*#__PURE__*/React__default.createElement("span", {
            className: "link",
            style: {
              color: "#F47738"
            }
          }, value === null || value === void 0 ? void 0 : value.value))),
          last: index === (detail === null || detail === void 0 ? void 0 : (_detail$values2 = detail.values) === null || _detail$values2 === void 0 ? void 0 : _detail$values2.length) - 1,
          caption: value.caption,
          className: "border-none",
          rowContainerStyle: getRowStyles()
        });
      }
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
        key: t(value.title),
        label: isNocLocation || isBPALocation ? "" + t(value.title) : t(value.title),
        text: getTextValue(value),
        last: index === (detail === null || detail === void 0 ? void 0 : (_detail$values3 = detail.values) === null || _detail$values3 === void 0 ? void 0 : _detail$values3.length) - 1,
        caption: value.caption,
        className: "border-none"
        ,
        rowContainerStyle: getRowStyles()
      });
    })))), (detail === null || detail === void 0 ? void 0 : detail.belowComponent) && /*#__PURE__*/React__default.createElement(detail.belowComponent, null), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet = detail.additionalDetails) === null || _detail$additionalDet === void 0 ? void 0 : _detail$additionalDet.inspectionReport) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      paymentsList: paymentsList
    }), (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.applicationData) === null || _applicationDetails$a2 === void 0 ? void 0 : (_applicationDetails$a3 = _applicationDetails$a2.additionalDetails) === null || _applicationDetails$a3 === void 0 ? void 0 : (_applicationDetails$a4 = _applicationDetails$a3.fieldinspection_pending) === null || _applicationDetails$a4 === void 0 ? void 0 : _applicationDetails$a4.length) > 0 && (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet2 = detail.additionalDetails) === null || _detail$additionalDet2 === void 0 ? void 0 : _detail$additionalDet2.fiReport) && /*#__PURE__*/React__default.createElement(InspectionReport, {
      fiReport: applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a5 = applicationDetails.applicationData) === null || _applicationDetails$a5 === void 0 ? void 0 : (_applicationDetails$a6 = _applicationDetails$a5.additionalDetails) === null || _applicationDetails$a6 === void 0 ? void 0 : _applicationDetails$a6.fieldinspection_pending
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet3 = detail.additionalDetails) === null || _detail$additionalDet3 === void 0 ? void 0 : _detail$additionalDet3.floors) && /*#__PURE__*/React__default.createElement(PropertyFloors, {
      floors: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet4 = detail.additionalDetails) === null || _detail$additionalDet4 === void 0 ? void 0 : _detail$additionalDet4.floors
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet5 = detail.additionalDetails) === null || _detail$additionalDet5 === void 0 ? void 0 : _detail$additionalDet5.owners) && /*#__PURE__*/React__default.createElement(PropertyOwners, {
      owners: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet6 = detail.additionalDetails) === null || _detail$additionalDet6 === void 0 ? void 0 : _detail$additionalDet6.owners
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet7 = detail.additionalDetails) === null || _detail$additionalDet7 === void 0 ? void 0 : _detail$additionalDet7.units) && /*#__PURE__*/React__default.createElement(TLTradeUnits, {
      units: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet8 = detail.additionalDetails) === null || _detail$additionalDet8 === void 0 ? void 0 : _detail$additionalDet8.units
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet9 = detail.additionalDetails) === null || _detail$additionalDet9 === void 0 ? void 0 : _detail$additionalDet9.accessories) && /*#__PURE__*/React__default.createElement(TLTradeAccessories, {
      units: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet10 = detail.additionalDetails) === null || _detail$additionalDet10 === void 0 ? void 0 : _detail$additionalDet10.accessories
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet11 = detail.additionalDetails) === null || _detail$additionalDet11 === void 0 ? void 0 : _detail$additionalDet11.permissions) && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.nextActions) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.length) > 0 && /*#__PURE__*/React__default.createElement(PermissionCheck, {
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      t: t,
      permissions: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet12 = detail.additionalDetails) === null || _detail$additionalDet12 === void 0 ? void 0 : _detail$additionalDet12.permissions
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet13 = detail.additionalDetails) === null || _detail$additionalDet13 === void 0 ? void 0 : _detail$additionalDet13.obpsDocuments) && /*#__PURE__*/React__default.createElement(BPADocuments, {
      t: t,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      docs: detail.additionalDetails.obpsDocuments,
      bpaActionsDetails: workflowDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet14 = detail.additionalDetails) === null || _detail$additionalDet14 === void 0 ? void 0 : _detail$additionalDet14.noc) && /*#__PURE__*/React__default.createElement(NOCDocuments, {
      t: t,
      isNoc: true,
      NOCdata: detail.values,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
      docs: detail.additionalDetails.noc,
      noc: (_detail$additionalDet15 = detail.additionalDetails) === null || _detail$additionalDet15 === void 0 ? void 0 : _detail$additionalDet15.data,
      bpaActionsDetails: workflowDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet16 = detail.additionalDetails) === null || _detail$additionalDet16 === void 0 ? void 0 : _detail$additionalDet16.scruntinyDetails) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet17 = detail.additionalDetails) === null || _detail$additionalDet17 === void 0 ? void 0 : _detail$additionalDet17.buildingExtractionDetails) && /*#__PURE__*/React__default.createElement(ScruntinyDetails, {
      scrutinyDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet18 = detail.additionalDetails) === null || _detail$additionalDet18 === void 0 ? void 0 : _detail$additionalDet18.subOccupancyTableDetails) && /*#__PURE__*/React__default.createElement(SubOccupancyTable, {
      edcrDetails: detail === null || detail === void 0 ? void 0 : detail.additionalDetails,
      applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet19 = detail.additionalDetails) === null || _detail$additionalDet19 === void 0 ? void 0 : _detail$additionalDet19.documentsWithUrl) && /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet20 = detail.additionalDetails) === null || _detail$additionalDet20 === void 0 ? void 0 : _detail$additionalDet20.documentsWithUrl
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet21 = detail.additionalDetails) === null || _detail$additionalDet21 === void 0 ? void 0 : _detail$additionalDet21.documents) && /*#__PURE__*/React__default.createElement(PropertyDocuments, {
      documents: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet22 = detail.additionalDetails) === null || _detail$additionalDet22 === void 0 ? void 0 : _detail$additionalDet22.documents
    }), (detail === null || detail === void 0 ? void 0 : (_detail$additionalDet23 = detail.additionalDetails) === null || _detail$additionalDet23 === void 0 ? void 0 : _detail$additionalDet23.taxHeadEstimatesCalculation) && /*#__PURE__*/React__default.createElement(PropertyEstimates, {
      taxHeadEstimatesCalculation: detail === null || detail === void 0 ? void 0 : (_detail$additionalDet24 = detail.additionalDetails) === null || _detail$additionalDet24 === void 0 ? void 0 : _detail$additionalDet24.taxHeadEstimatesCalculation
    }));
  }), showTimeLine && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data3 = workflowDetails.data) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.timeline) === null || _workflowDetails$data4 === void 0 ? void 0 : _workflowDetails$data4.length) > 0 && /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.BreakLine, null), ((workflowDetails === null || workflowDetails === void 0 ? void 0 : workflowDetails.isLoading) || isDataLoading) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null), !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && !isDataLoading && /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
    style: {
      marginBottom: "16px",
      marginTop: "32px"
    }
  }, t("ES_APPLICATION_DETAILS_APPLICATION_TIMELINE")), workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data5 = workflowDetails.data) !== null && _workflowDetails$data5 !== void 0 && _workflowDetails$data5.timeline && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data6 = workflowDetails.data) === null || _workflowDetails$data6 === void 0 ? void 0 : (_workflowDetails$data7 = _workflowDetails$data6.timeline) === null || _workflowDetails$data7 === void 0 ? void 0 : _workflowDetails$data7.length) === 1 ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
    isCompleted: true,
    label: t("" + timelineStatusPrefix + (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data8 = workflowDetails.data) === null || _workflowDetails$data8 === void 0 ? void 0 : (_workflowDetails$data9 = _workflowDetails$data8.timeline[0]) === null || _workflowDetails$data9 === void 0 ? void 0 : _workflowDetails$data9.state)),
    customChild: getTimelineCaptions(workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data10 = workflowDetails.data) === null || _workflowDetails$data10 === void 0 ? void 0 : _workflowDetails$data10.timeline[0])
  }) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.ConnectingCheckPoints, null, (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data11 = workflowDetails.data) === null || _workflowDetails$data11 === void 0 ? void 0 : _workflowDetails$data11.timeline) && (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data12 = workflowDetails.data) === null || _workflowDetails$data12 === void 0 ? void 0 : _workflowDetails$data12.timeline.map(function (checkpoint, index, arr) {
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CheckPoint, {
      keyValue: index,
      isCompleted: index === 0,
      info: checkpoint.comment,
      label: t("" + timelineStatusPrefix + ((checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.performedAction) === "REOPEN" ? checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint.performedAction : checkpoint === null || checkpoint === void 0 ? void 0 : checkpoint[statusAttribute])),
      customChild: getTimelineCaptions(checkpoint)
    }));
  }))))));
}

function ApplicationDetailsToast(_ref) {
  var _showToast$action, _showToast$error, _showToast$error2, _showToast$error3, _showToast$error4, _showToast$error5, _showToast$error6, _showToast$error7, _showToast$error8, _showToast$action2, _showToast$action3, _showToast$error9, _showToast$error10, _showToast$error11, _showToast$error12, _showToast$error13, _showToast$error14, _showToast$error15, _showToast$error16, _showToast$action4;
  var t = _ref.t,
    showToast = _ref.showToast,
    closeToast = _ref.closeToast,
    businessService = _ref.businessService;
  if (businessService !== null && businessService !== void 0 && businessService.includes("NewTL") || businessService !== null && businessService !== void 0 && businessService.includes("TL") || businessService !== null && businessService !== void 0 && businessService.includes("EDITRENEWAL")) {
    var label = "";
    switch (showToast === null || showToast === void 0 ? void 0 : (_showToast$action = showToast.action) === null || _showToast$action === void 0 ? void 0 : _showToast$action.action) {
      case "SENDBACK":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error = showToast.error) === null || _showToast$error === void 0 ? void 0 : _showToast$error.message : t("TL_SENDBACK_CHECKLIST_MESSAGE_HEAD");
        break;
      case "FORWARD":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error2 = showToast.error) === null || _showToast$error2 === void 0 ? void 0 : _showToast$error2.message : t("TL_FORWARD_SUCCESS_MESSAGE_MAIN");
        break;
      case "APPROVE":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error3 = showToast.error) === null || _showToast$error3 === void 0 ? void 0 : _showToast$error3.message : t("TL_APPROVAL_CHECKLIST_MESSAGE_HEAD");
        break;
      case "SENDBACKTOCITIZEN":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error4 = showToast.error) === null || _showToast$error4 === void 0 ? void 0 : _showToast$error4.message : t("TL_SENDBACK_TOCITIZEN_CHECKLIST_MESSAGE_HEAD");
        break;
      case "REJECT":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error5 = showToast.error) === null || _showToast$error5 === void 0 ? void 0 : _showToast$error5.message : t("TL_APPROVAL_REJ_MESSAGE_HEAD");
        break;
      case "RESUBMIT":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error6 = showToast.error) === null || _showToast$error6 === void 0 ? void 0 : _showToast$error6.message : t("TL_APPLICATION_RESUBMIT_SUCCESS_MESSAGE_MAIN");
        break;
      case "CANCEL":
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error7 = showToast.error) === null || _showToast$error7 === void 0 ? void 0 : _showToast$error7.message : t("TL_TL_CANCELLED_MESSAGE_HEAD");
        break;
      default:
        label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error8 = showToast.error) === null || _showToast$error8 === void 0 ? void 0 : _showToast$error8.message : t("ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action2 = showToast.action) === null || _showToast$action2 === void 0 ? void 0 : _showToast$action2.action) + "_UPDATE_SUCCESS");
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: label,
      onClose: closeToast
    }));
  } else if (businessService !== null && businessService !== void 0 && businessService.includes("BPA") || businessService !== null && businessService !== void 0 && businessService.includes("BPA_LOW") || businessService !== null && businessService !== void 0 && businessService.includes("BPA_OC")) {
    var getMessage = function getMessage(messages) {
      var _messages;
      if (messages === void 0) {
        messages = [];
      }
      var returnValue = messages[0];
      if (((_messages = messages) === null || _messages === void 0 ? void 0 : _messages.length) == 2) returnValue = businessService !== null && businessService !== void 0 && businessService.includes("BPA_OC") ? t(messages[1]) : t(messages[0]);else returnValue = t(messages[0]);
      return returnValue;
    };
    var _label = "";
    switch (showToast === null || showToast === void 0 ? void 0 : (_showToast$action3 = showToast.action) === null || _showToast$action3 === void 0 ? void 0 : _showToast$action3.action) {
      case "REVOCATE":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error9 = showToast.error) === null || _showToast$error9 === void 0 ? void 0 : _showToast$error9.message : getMessage(["BPA_APPROVAL_REVOCATED_MESSAGE_HEAD", "BPA_APPROVAL_OC_REVOCATED_MESSAGE_HEAD"]);
        break;
      case "VERIFY_AND_FORWARD":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error10 = showToast.error) === null || _showToast$error10 === void 0 ? void 0 : _showToast$error10.message : getMessage(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "SEND_BACK_TO_CITIZEN":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error11 = showToast.error) === null || _showToast$error11 === void 0 ? void 0 : _showToast$error11.message : getMessage(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "APPROVE":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error12 = showToast.error) === null || _showToast$error12 === void 0 ? void 0 : _showToast$error12.message : getMessage(["BPA_APPROVAL_CHECKLIST_MESSAGE_HEAD"]);
        break;
      case "REJECT":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error13 = showToast.error) === null || _showToast$error13 === void 0 ? void 0 : _showToast$error13.message : getMessage(["BPA_APPROVAL_REJECTED_MESSAGE_HEAD", "BPA_OC_APPROVAL_REJECTED_MESSAGE_HEAD"]);
        break;
      case "FORWARD":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error14 = showToast.error) === null || _showToast$error14 === void 0 ? void 0 : _showToast$error14.message : getMessage(["BPA_FORWARD_SUCCESS_MESSAGE_MAIN"]);
        break;
      case "SEND_BACK_FOR_DOCUMENT_VERIFICATION":
      case "SEND_BACK_FOR_FIELD_INSPECTION":
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error15 = showToast.error) === null || _showToast$error15 === void 0 ? void 0 : _showToast$error15.message : getMessage(["BPA_SENDBACK_SUCCESS_MESSAGE_MAIN"]);
        break;
      default:
        _label = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error16 = showToast.error) === null || _showToast$error16 === void 0 ? void 0 : _showToast$error16.message : t("ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action4 = showToast.action) === null || _showToast$action4 === void 0 ? void 0 : _showToast$action4.action) + "_UPDATE_SUCCESS");
    }
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: _label,
      onClose: closeToast
    }));
  } else {
    var _showToast$error17, _showToast$action5;
    var _label2 = (showToast === null || showToast === void 0 ? void 0 : showToast.key) === "error" ? showToast === null || showToast === void 0 ? void 0 : (_showToast$error17 = showToast.error) === null || _showToast$error17 === void 0 ? void 0 : _showToast$error17.message : "ES_" + businessService + "_" + (showToast === null || showToast === void 0 ? void 0 : (_showToast$action5 = showToast.action) === null || _showToast$action5 === void 0 ? void 0 : _showToast$action5.action) + "_UPDATE_SUCCESS";
    return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: showToast.key === "error",
      label: t(_label2),
      onClose: closeToast
    }));
  }
}

function ApplicationDetailsActionBar(_ref) {
  var _user, _user$info, _user$info$roles, _workflowDetails$data, _workflowDetails$data2, _workflowDetails$data3, _actions$, _actions$$redirection, _workflowDetails$data4, _workflowDetails$data5, _actions$2, _actions$3, _actions$4;
  var workflowDetails = _ref.workflowDetails,
    displayMenu = _ref.displayMenu,
    onActionSelect = _ref.onActionSelect,
    setDisplayMenu = _ref.setDisplayMenu,
    businessService = _ref.businessService,
    forcedActionPrefix = _ref.forcedActionPrefix,
    _ref$ActionBarStyle = _ref.ActionBarStyle,
    ActionBarStyle = _ref$ActionBarStyle === void 0 ? {} : _ref$ActionBarStyle,
    _ref$MenuStyle = _ref.MenuStyle,
    MenuStyle = _ref$MenuStyle === void 0 ? {} : _ref$MenuStyle;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var user = Digit.UserService.getUser();
  if (window.location.href.includes("/obps") || window.location.href.includes("/noc")) {
    var userInfos = sessionStorage.getItem("Digit.citizen.userRequestObject");
    var userInfo = userInfos ? JSON.parse(userInfos) : {};
    user = userInfo === null || userInfo === void 0 ? void 0 : userInfo.value;
  }
  var userRoles = (_user = user) === null || _user === void 0 ? void 0 : (_user$info = _user.info) === null || _user$info === void 0 ? void 0 : (_user$info$roles = _user$info.roles) === null || _user$info$roles === void 0 ? void 0 : _user$info$roles.map(function (e) {
    return e.code;
  });
  var isSingleButton = false;
  var isMenuBotton = false;
  var actions = workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : (_workflowDetails$data2 = _workflowDetails$data.actionState) === null || _workflowDetails$data2 === void 0 ? void 0 : (_workflowDetails$data3 = _workflowDetails$data2.nextActions) === null || _workflowDetails$data3 === void 0 ? void 0 : _workflowDetails$data3.filter(function (e) {
    return userRoles.some(function (role) {
      var _e$roles;
      return (_e$roles = e.roles) === null || _e$roles === void 0 ? void 0 : _e$roles.includes(role);
    }) || !e.roles;
  });
  if ((window.location.href.includes("/obps") || window.location.href.includes("/noc")) && (actions === null || actions === void 0 ? void 0 : actions.length) == 1 || actions !== null && actions !== void 0 && (_actions$ = actions[0]) !== null && _actions$ !== void 0 && (_actions$$redirection = _actions$.redirectionUrl) !== null && _actions$$redirection !== void 0 && _actions$$redirection.pathname.includes("/pt/property-details/") && (actions === null || actions === void 0 ? void 0 : actions.length) == 1) {
    isMenuBotton = false;
    isSingleButton = true;
  } else if ((actions === null || actions === void 0 ? void 0 : actions.length) > 0) {
    isMenuBotton = true;
    isSingleButton = false;
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && isMenuBotton && !isSingleButton && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: _extends({}, ActionBarStyle)
  }, displayMenu && workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data4 = workflowDetails.data) !== null && _workflowDetails$data4 !== void 0 && (_workflowDetails$data5 = _workflowDetails$data4.actionState) !== null && _workflowDetails$data5 !== void 0 && _workflowDetails$data5.nextActions ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Menu, {
    localeKeyPrefix: forcedActionPrefix || "WF_EMPLOYEE_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase()),
    options: actions,
    optionKey: "action",
    t: t,
    onSelect: onActionSelect,
    style: MenuStyle
  }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("WF_TAKE_ACTION"),
    onSubmit: function onSubmit() {
      return setDisplayMenu(!displayMenu);
    }
  })), !(workflowDetails !== null && workflowDetails !== void 0 && workflowDetails.isLoading) && !isMenuBotton && isSingleButton && /*#__PURE__*/React__default.createElement(digitUiReactComponents.ActionBar, {
    style: _extends({}, ActionBarStyle)
  }, /*#__PURE__*/React__default.createElement("button", {
    style: {
      color: "#FFFFFF",
      fontSize: "19px"
    },
    className: "submit-bar",
    name: actions === null || actions === void 0 ? void 0 : (_actions$2 = actions[0]) === null || _actions$2 === void 0 ? void 0 : _actions$2.action,
    value: actions === null || actions === void 0 ? void 0 : (_actions$3 = actions[0]) === null || _actions$3 === void 0 ? void 0 : _actions$3.action,
    onClick: function onClick(e) {
      onActionSelect((actions === null || actions === void 0 ? void 0 : actions[0]) || {});
    }
  }, t((forcedActionPrefix || "WF_EMPLOYEE_" + (businessService === null || businessService === void 0 ? void 0 : businessService.toUpperCase())) + "_" + (actions === null || actions === void 0 ? void 0 : (_actions$4 = actions[0]) === null || _actions$4 === void 0 ? void 0 : _actions$4.action)))));
}

var Close$6 = function Close() {
  return /*#__PURE__*/React__default.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 24 24",
    fill: "#FFFFFF"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M0 0h24v24H0V0z",
    fill: "none"
  }), /*#__PURE__*/React__default.createElement("path", {
    d: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"
  }));
};
var CloseBtn$6 = function CloseBtn(props) {
  return /*#__PURE__*/React__default.createElement("div", {
    className: "icon-bg-secondary",
    onClick: props.onClick
  }, /*#__PURE__*/React__default.createElement(Close$6, null));
};
function ApplicationDetailsWarningPopup(_ref) {
  var action = _ref.action,
    closeWarningPopup = _ref.closeWarningPopup;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var isMobile = window.Digit.Utils.browser.isMobile();
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Modal, {
    headerBarMain: /*#__PURE__*/React__default.createElement("h1", {
      className: "heading-m"
    }, t("PT_DUES_ARE_PENDING")),
    headerBarEnd: /*#__PURE__*/React__default.createElement(CloseBtn$6, {
      onClick: function onClick() {
        closeWarningPopup();
      }
    }),
    hideSubmit: true,
    isDisabled: false,
    popupStyles: isMobile ? {} : {
      width: "29%",
      marginTop: "auto"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginBottom: "30px"
    }
  }, /*#__PURE__*/React__default.createElement("h1", null, t("PT_YOU_HAVE"), " \u20B9", action === null || action === void 0 ? void 0 : action.AmountDueForPay, " ", t("PT_DUE_WARNING_MSG2"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    rowContainerStyle: {
      display: "flex"
    },
    labelStyle: {
      fontSize: "24px",
      fontWeight: "700",
      marginRight: "10%"
    },
    textStyle: {
      fontSize: "24px",
      fontWeight: "700",
      marginBottom: "20px"
    },
    label: "" + t("PT_AMOUNT_DUE"),
    text: "\u20B9" + t(action === null || action === void 0 ? void 0 : action.AmountDueForPay)
  }), /*#__PURE__*/React__default.createElement("div", {
    style: {
      width: "100%",
      display: "flex",
      justifyContent: "flex-end"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.ButtonSelector, {
    theme: "border",
    label: t('ES_PT_COMMON_CANCEL'),
    onSubmit: closeWarningPopup,
    style: {
      marginLeft: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.ButtonSelector, {
    label: t('PT_COLLECT'),
    onSubmit: function onSubmit() {
      var _action$redirectionUr;
      return window.location.assign("" + window.location.origin + (action === null || action === void 0 ? void 0 : (_action$redirectionUr = action.redirectionUrl) === null || _action$redirectionUr === void 0 ? void 0 : _action$redirectionUr.pathname));
    },
    style: {
      marginLeft: "10px"
    }
  })))), ")");
}

var ApplicationDetails$1 = function ApplicationDetails(props) {
  var _workflowDetails$data;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var state = Digit.ULBService.getStateId();
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var _useParams = reactRouterDom.useParams(),
    applicationNumber = _useParams.id;
  var _useState = React.useState(false),
    displayMenu = _useState[0],
    setDisplayMenu = _useState[1];
  var _useState2 = React.useState(null),
    selectedAction = _useState2[0],
    setSelectedAction = _useState2[1];
  var _useState3 = React.useState(false),
    showModal = _useState3[0],
    setShowModal = _useState3[1];
  var _useState4 = React.useState(false),
    isEnableLoader = _useState4[0],
    setIsEnableLoader = _useState4[1];
  var _useState5 = React.useState(false),
    isWarningPop = _useState5[0],
    setWarningPopUp = _useState5[1];
  var applicationDetails = props.applicationDetails,
    showToast = props.showToast,
    setShowToast = props.setShowToast,
    isLoading = props.isLoading,
    isDataLoading = props.isDataLoading,
    applicationData = props.applicationData,
    mutate = props.mutate,
    nocMutation = props.nocMutation,
    workflowDetails = props.workflowDetails,
    businessService = props.businessService,
    closeToast = props.closeToast,
    moduleCode = props.moduleCode,
    timelineStatusPrefix = props.timelineStatusPrefix,
    forcedActionPrefix = props.forcedActionPrefix,
    statusAttribute = props.statusAttribute,
    ActionBarStyle = props.ActionBarStyle,
    MenuStyle = props.MenuStyle,
    paymentsList = props.paymentsList,
    _props$showTimeLine = props.showTimeLine,
    showTimeLine = _props$showTimeLine === void 0 ? true : _props$showTimeLine;
  React.useEffect(function () {
    if (showToast) {
      workflowDetails.revalidate();
    }
  }, [showToast]);
  function onActionSelect(action) {
    if (action) {
      if (action !== null && action !== void 0 && action.isWarningPopUp) {
        setWarningPopUp(true);
      } else if (action !== null && action !== void 0 && action.redirectionUrll) {
        var _action$redirectionUr;
        window.location.assign(window.location.origin + "/digit-ui/employee/payment/collect/" + (action === null || action === void 0 ? void 0 : (_action$redirectionUr = action.redirectionUrll) === null || _action$redirectionUr === void 0 ? void 0 : _action$redirectionUr.pathname));
      } else if (!(action !== null && action !== void 0 && action.redirectionUrl)) {
        setShowModal(true);
      } else {
        var _action$redirectionUr2, _action$redirectionUr3;
        history.push({
          pathname: (_action$redirectionUr2 = action.redirectionUrl) === null || _action$redirectionUr2 === void 0 ? void 0 : _action$redirectionUr2.pathname,
          state: _extends({}, (_action$redirectionUr3 = action.redirectionUrl) === null || _action$redirectionUr3 === void 0 ? void 0 : _action$redirectionUr3.state)
        });
      }
    }
    setSelectedAction(action);
    setDisplayMenu(false);
  }
  var queryClient = reactQuery.useQueryClient();
  var closeModal = function closeModal() {
    setSelectedAction(null);
    setShowModal(false);
  };
  var closeWarningPopup = function closeWarningPopup() {
    setWarningPopUp(false);
  };
  var submitAction = function submitAction(data, nocData, isOBPS) {
    if (nocData === void 0) {
      nocData = false;
    }
    if (isOBPS === void 0) {
      isOBPS = {};
    }
    try {
      var _temp4 = function _temp4(_result2) {
        if (_exit2) return _result2;
        if (mutate) {
          setIsEnableLoader(true);
          mutate(data, {
            onError: function onError(error, variables) {
              setIsEnableLoader(false);
              setShowToast({
                key: "error",
                error: error
              });
              setTimeout(closeToast, 5000);
            },
            onSuccess: function onSuccess(data, variables) {
              setIsEnableLoader(false);
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.bpa) {
                data.selectedAction = selectedAction;
                history.replace("/digit-ui/employee/obps/response", {
                  data: data
                });
              }
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.isStakeholder) {
                data.selectedAction = selectedAction;
                history.push("/digit-ui/employee/obps/stakeholder-response", {
                  data: data
                });
              }
              if (isOBPS !== null && isOBPS !== void 0 && isOBPS.isNoc) {
                history.push("/digit-ui/employee/noc/response", {
                  data: data
                });
              }
              setShowToast({
                key: "success",
                action: selectedAction
              });
              setTimeout(closeToast, 5000);
              queryClient.clear();
              queryClient.refetchQueries("APPLICATION_SEARCH");
            }
          });
        }
        closeModal();
      };
      var _exit2 = false;
      setIsEnableLoader(true);
      if (typeof (data === null || data === void 0 ? void 0 : data.customFunctionToExecute) === "function") {
        data === null || data === void 0 ? void 0 : data.customFunctionToExecute(_extends({}, data));
      }
      var _temp5 = function () {
        if (nocData !== false && nocMutation) {
          var _nocData;
          var nocPrmomises = (_nocData = nocData) === null || _nocData === void 0 ? void 0 : _nocData.map(function (noc) {
            return nocMutation === null || nocMutation === void 0 ? void 0 : nocMutation.mutateAsync(noc);
          });
          var _temp6 = _catch(function () {
            setIsEnableLoader(true);
            return Promise.resolve(Promise.all(nocPrmomises)).then(function (values) {
              values && values.map(function (ob) {
                var _ob$Noc, _ob$Noc$;
                Digit.SessionStorage.del(ob === null || ob === void 0 ? void 0 : (_ob$Noc = ob.Noc) === null || _ob$Noc === void 0 ? void 0 : (_ob$Noc$ = _ob$Noc[0]) === null || _ob$Noc$ === void 0 ? void 0 : _ob$Noc$.nocType);
              });
            });
          }, function (err) {
            var _err$response, _err$response$data, _err$response$data$Er, _err$response$data$Er2, _err$response2, _err$response2$data, _err$response2$data$E, _err$response2$data$E2, _err$response3, _err$response3$data, _err$response3$data$E, _err$response3$data$E2;
            setIsEnableLoader(false);
            var errorValue = err !== null && err !== void 0 && (_err$response = err.response) !== null && _err$response !== void 0 && (_err$response$data = _err$response.data) !== null && _err$response$data !== void 0 && (_err$response$data$Er = _err$response$data.Errors) !== null && _err$response$data$Er !== void 0 && (_err$response$data$Er2 = _err$response$data$Er[0]) !== null && _err$response$data$Er2 !== void 0 && _err$response$data$Er2.code ? t(err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : (_err$response2$data$E = _err$response2$data.Errors) === null || _err$response2$data$E === void 0 ? void 0 : (_err$response2$data$E2 = _err$response2$data$E[0]) === null || _err$response2$data$E2 === void 0 ? void 0 : _err$response2$data$E2.code) : (err === null || err === void 0 ? void 0 : (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : (_err$response3$data$E = _err$response3$data.Errors) === null || _err$response3$data$E === void 0 ? void 0 : (_err$response3$data$E2 = _err$response3$data$E[0]) === null || _err$response3$data$E2 === void 0 ? void 0 : _err$response3$data$E2.message) || err;
            closeModal();
            setShowToast({
              key: "error",
              error: {
                message: errorValue
              }
            });
            setTimeout(closeToast, 5000);
            _exit2 = true;
          });
          if (_temp6 && _temp6.then) return _temp6.then(function () {});
        }
      }();
      return Promise.resolve(_temp5 && _temp5.then ? _temp5.then(_temp4) : _temp4(_temp5));
    } catch (e) {
      return Promise.reject(e);
    }
  };
  if (isLoading || isEnableLoader) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, !isLoading ? /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(ApplicationDetailsContent, {
    applicationDetails: applicationDetails,
    workflowDetails: workflowDetails,
    isDataLoading: isDataLoading,
    applicationData: applicationData,
    businessService: businessService,
    timelineStatusPrefix: timelineStatusPrefix,
    statusAttribute: statusAttribute,
    paymentsList: paymentsList,
    showTimeLine: showTimeLine
  }), showModal ? /*#__PURE__*/React__default.createElement(ActionModal$6, {
    t: t,
    action: selectedAction,
    tenantId: tenantId,
    state: state,
    id: applicationNumber,
    applicationDetails: applicationDetails,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    closeModal: closeModal,
    submitAction: submitAction,
    actionData: workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : _workflowDetails$data.timeline,
    businessService: businessService,
    workflowDetails: workflowDetails,
    moduleCode: moduleCode
  }) : null, isWarningPop ? /*#__PURE__*/React__default.createElement(ApplicationDetailsWarningPopup, {
    action: selectedAction,
    workflowDetails: workflowDetails,
    businessService: businessService,
    isWarningPop: isWarningPop,
    closeWarningPopup: closeWarningPopup
  }) : null, /*#__PURE__*/React__default.createElement(ApplicationDetailsToast, {
    t: t,
    showToast: showToast,
    closeToast: closeToast,
    businessService: businessService
  }), /*#__PURE__*/React__default.createElement(ApplicationDetailsActionBar, {
    workflowDetails: workflowDetails,
    displayMenu: displayMenu,
    onActionSelect: onActionSelect,
    setDisplayMenu: setDisplayMenu,
    businessService: businessService,
    forcedActionPrefix: forcedActionPrefix,
    ActionBarStyle: ActionBarStyle,
    MenuStyle: MenuStyle
  })) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null));
};

var ApplicationDetail = function ApplicationDetail() {
  var _applicationDetails$p, _applicationDetails$p6, _workflowDetails$data, _workflowDetails$data2, _applicationDetails$a3;
  var _useParams = reactRouterDom.useParams(),
    id = _useParams.id;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var state = tenantId === null || tenantId === void 0 ? void 0 : tenantId.split('.')[0];
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];
  var _useState2 = React.useState(false),
    showOptions = _useState2[0],
    setShowOptions = _useState2[1];
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useLicenseDetails(state, {
      applicationNumber: id,
      tenantId: state
    }, {}),
    isLoading = _Digit$Hooks$obps$use.isLoading,
    applicationDetails = _Digit$Hooks$obps$use.data;
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useBPAREGApplicationActions(tenantId),
    mutate = _Digit$Hooks$obps$use2.mutate;
  var workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId === null || tenantId === void 0 ? void 0 : tenantId.split('.')[0],
    id: id,
    moduleCode: "BPAREG"
  });
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var dowloadOptions = [];
  if ((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p = applicationDetails.payments) === null || _applicationDetails$p === void 0 ? void 0 : _applicationDetails$p.length) > 0) {
    dowloadOptions.push({
      label: t("TL_RECEIPT"),
      onClick: function onClick() {
        var _applicationDetails$p2, _applicationDetails$p3, _applicationDetails$p4, _applicationDetails$p5, _applicationDetails$a, _applicationDetails$a2;
        return downloadAndPrintReciept((applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p2 = applicationDetails.payments) === null || _applicationDetails$p2 === void 0 ? void 0 : (_applicationDetails$p3 = _applicationDetails$p2[0]) === null || _applicationDetails$p3 === void 0 ? void 0 : (_applicationDetails$p4 = _applicationDetails$p3.paymentDetails) === null || _applicationDetails$p4 === void 0 ? void 0 : (_applicationDetails$p5 = _applicationDetails$p4[0]) === null || _applicationDetails$p5 === void 0 ? void 0 : _applicationDetails$p5.businessService) || "BPAREG", applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a = applicationDetails.applicationData) === null || _applicationDetails$a === void 0 ? void 0 : _applicationDetails$a.applicationNumber, applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a2 = applicationDetails.applicationData) === null || _applicationDetails$a2 === void 0 ? void 0 : _applicationDetails$a2.tenantId);
      }
    });
  }
  return /*#__PURE__*/React__default.createElement("div", {
    className: "employee-main-application-details"
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("CS_TITLE_APPLICATION_DETAILS")), (applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$p6 = applicationDetails.payments) === null || _applicationDetails$p6 === void 0 ? void 0 : _applicationDetails$p6.length) > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: function onHeadClick() {
      return setShowOptions(!showOptions);
    },
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className"
  })), /*#__PURE__*/React__default.createElement(ApplicationDetails$1, {
    applicationDetails: applicationDetails,
    isLoading: isLoading,
    isDataLoading: isLoading,
    applicationData: applicationDetails === null || applicationDetails === void 0 ? void 0 : applicationDetails.applicationData,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data = workflowDetails.data) !== null && _workflowDetails$data !== void 0 && _workflowDetails$data.applicationBusinessService ? workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data2 = workflowDetails.data) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.applicationBusinessService : applicationDetails === null || applicationDetails === void 0 ? void 0 : (_applicationDetails$a3 = applicationDetails.applicationData) === null || _applicationDetails$a3 === void 0 ? void 0 : _applicationDetails$a3.businessService,
    moduleCode: "BPAREG",
    showToast: showToast,
    setShowToast: setShowToast,
    ActionBarStyle: isMobile ? {} : {
      paddingRight: "50px"
    },
    MenuStyle: isMobile ? {} : {
      right: "50px"
    },
    closeToast: closeToast,
    timelineStatusPrefix: "WF_NEWTL_"
  }));
};

var newConfig$5 = [{
  head: "",
  body: [{
    type: "component",
    component: "InspectionReport",
    key: "FieldReports",
    withoutLabel: true,
    hideInCitizen: true
  }]
}];

var symbolTag$2 = '[object Symbol]';

function isSymbol(value) {
  return typeof value == 'symbol' || isObjectLike_1(value) && _baseGetTag(value) == symbolTag$2;
}
var isSymbol_1 = isSymbol;

var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
  reIsPlainProp = /^\w*$/;

function isKey(value, object) {
  if (isArray_1(value)) {
    return false;
  }
  var type = typeof value;
  if (type == 'number' || type == 'symbol' || type == 'boolean' || value == null || isSymbol_1(value)) {
    return true;
  }
  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
}
var _isKey = isKey;

var FUNC_ERROR_TEXT = 'Expected a function';

function memoize(func, resolver) {
  if (typeof func != 'function' || resolver != null && typeof resolver != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function memoized() {
    var args = arguments,
      key = resolver ? resolver.apply(this, args) : args[0],
      cache = memoized.cache;
    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || _MapCache)();
  return memoized;
}

memoize.Cache = _MapCache;
var memoize_1 = memoize;

var MAX_MEMOIZE_SIZE = 500;

function memoizeCapped(func) {
  var result = memoize_1(func, function (key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });
  var cache = result.cache;
  return result;
}
var _memoizeCapped = memoizeCapped;

var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

var reEscapeChar = /\\(\\)?/g;

var stringToPath = _memoizeCapped(function (string) {
  var result = [];
  if (string.charCodeAt(0) === 46) {
    result.push('');
  }
  string.replace(rePropName, function (match, number, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, '$1') : number || match);
  });
  return result;
});
var _stringToPath = stringToPath;

function arrayMap(array, iteratee) {
  var index = -1,
    length = array == null ? 0 : array.length,
    result = Array(length);
  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}
var _arrayMap = arrayMap;

var INFINITY = 1 / 0;

var symbolProto$1 = _Symbol ? _Symbol.prototype : undefined,
  symbolToString = symbolProto$1 ? symbolProto$1.toString : undefined;

function baseToString(value) {
  if (typeof value == 'string') {
    return value;
  }
  if (isArray_1(value)) {
    return _arrayMap(value, baseToString) + '';
  }
  if (isSymbol_1(value)) {
    return symbolToString ? symbolToString.call(value) : '';
  }
  var result = value + '';
  return result == '0' && 1 / value == -INFINITY ? '-0' : result;
}
var _baseToString = baseToString;

function toString(value) {
  return value == null ? '' : _baseToString(value);
}
var toString_1 = toString;

function castPath(value, object) {
  if (isArray_1(value)) {
    return value;
  }
  return _isKey(value, object) ? [value] : _stringToPath(toString_1(value));
}
var _castPath = castPath;

var INFINITY$1 = 1 / 0;

function toKey(value) {
  if (typeof value == 'string' || isSymbol_1(value)) {
    return value;
  }
  var result = value + '';
  return result == '0' && 1 / value == -INFINITY$1 ? '-0' : result;
}
var _toKey = toKey;

function baseGet(object, path) {
  path = _castPath(path, object);
  var index = 0,
    length = path.length;
  while (object != null && index < length) {
    object = object[_toKey(path[index++])];
  }
  return index && index == length ? object : undefined;
}
var _baseGet = baseGet;

function get(object, path, defaultValue) {
  var result = object == null ? undefined : _baseGet(object, path);
  return result === undefined ? defaultValue : result;
}
var get_1 = get;

var HASH_UNDEFINED$2 = '__lodash_hash_undefined__';

function setCacheAdd(value) {
  this.__data__.set(value, HASH_UNDEFINED$2);
  return this;
}
var _setCacheAdd = setCacheAdd;

function setCacheHas(value) {
  return this.__data__.has(value);
}
var _setCacheHas = setCacheHas;

function SetCache(values) {
  var index = -1,
    length = values == null ? 0 : values.length;
  this.__data__ = new _MapCache();
  while (++index < length) {
    this.add(values[index]);
  }
}

SetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;
SetCache.prototype.has = _setCacheHas;
var _SetCache = SetCache;

function arraySome(array, predicate) {
  var index = -1,
    length = array == null ? 0 : array.length;
  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}
var _arraySome = arraySome;

function cacheHas(cache, key) {
  return cache.has(key);
}
var _cacheHas = cacheHas;

var COMPARE_PARTIAL_FLAG = 1,
  COMPARE_UNORDERED_FLAG = 2;

function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
    arrLength = array.length,
    othLength = other.length;
  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
    return false;
  }
  var arrStacked = stack.get(array);
  var othStacked = stack.get(other);
  if (arrStacked && othStacked) {
    return arrStacked == other && othStacked == array;
  }
  var index = -1,
    result = true,
    seen = bitmask & COMPARE_UNORDERED_FLAG ? new _SetCache() : undefined;
  stack.set(array, other);
  stack.set(other, array);

  while (++index < arrLength) {
    var arrValue = array[index],
      othValue = other[index];
    if (customizer) {
      var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
    }
    if (compared !== undefined) {
      if (compared) {
        continue;
      }
      result = false;
      break;
    }
    if (seen) {
      if (!_arraySome(other, function (othValue, othIndex) {
        if (!_cacheHas(seen, othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
          return seen.push(othIndex);
        }
      })) {
        result = false;
        break;
      }
    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
      result = false;
      break;
    }
  }
  stack['delete'](array);
  stack['delete'](other);
  return result;
}
var _equalArrays = equalArrays;

function mapToArray(map) {
  var index = -1,
    result = Array(map.size);
  map.forEach(function (value, key) {
    result[++index] = [key, value];
  });
  return result;
}
var _mapToArray = mapToArray;

function setToArray(set) {
  var index = -1,
    result = Array(set.size);
  set.forEach(function (value) {
    result[++index] = value;
  });
  return result;
}
var _setToArray = setToArray;

var COMPARE_PARTIAL_FLAG$1 = 1,
  COMPARE_UNORDERED_FLAG$1 = 2;

var boolTag$3 = '[object Boolean]',
  dateTag$3 = '[object Date]',
  errorTag$2 = '[object Error]',
  mapTag$5 = '[object Map]',
  numberTag$3 = '[object Number]',
  regexpTag$3 = '[object RegExp]',
  setTag$5 = '[object Set]',
  stringTag$3 = '[object String]',
  symbolTag$3 = '[object Symbol]';
var arrayBufferTag$3 = '[object ArrayBuffer]',
  dataViewTag$4 = '[object DataView]';

var symbolProto$2 = _Symbol ? _Symbol.prototype : undefined,
  symbolValueOf$1 = symbolProto$2 ? symbolProto$2.valueOf : undefined;

function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
  switch (tag) {
    case dataViewTag$4:
      if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
        return false;
      }
      object = object.buffer;
      other = other.buffer;
    case arrayBufferTag$3:
      if (object.byteLength != other.byteLength || !equalFunc(new _Uint8Array(object), new _Uint8Array(other))) {
        return false;
      }
      return true;
    case boolTag$3:
    case dateTag$3:
    case numberTag$3:
      return eq_1(+object, +other);
    case errorTag$2:
      return object.name == other.name && object.message == other.message;
    case regexpTag$3:
    case stringTag$3:
      return object == other + '';
    case mapTag$5:
      var convert = _mapToArray;
    case setTag$5:
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG$1;
      convert || (convert = _setToArray);
      if (object.size != other.size && !isPartial) {
        return false;
      }
      var stacked = stack.get(object);
      if (stacked) {
        return stacked == other;
      }
      bitmask |= COMPARE_UNORDERED_FLAG$1;

      stack.set(object, other);
      var result = _equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
      stack['delete'](object);
      return result;
    case symbolTag$3:
      if (symbolValueOf$1) {
        return symbolValueOf$1.call(object) == symbolValueOf$1.call(other);
      }
  }
  return false;
}
var _equalByTag = equalByTag;

var COMPARE_PARTIAL_FLAG$2 = 1;

var objectProto$d = Object.prototype;

var hasOwnProperty$a = objectProto$d.hasOwnProperty;

function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG$2,
    objProps = _getAllKeys(object),
    objLength = objProps.length,
    othProps = _getAllKeys(other),
    othLength = othProps.length;
  if (objLength != othLength && !isPartial) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isPartial ? key in other : hasOwnProperty$a.call(other, key))) {
      return false;
    }
  }
  var objStacked = stack.get(object);
  var othStacked = stack.get(other);
  if (objStacked && othStacked) {
    return objStacked == other && othStacked == object;
  }
  var result = true;
  stack.set(object, other);
  stack.set(other, object);
  var skipCtor = isPartial;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
      othValue = other[key];
    if (customizer) {
      var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
    }
    if (!(compared === undefined ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
      result = false;
      break;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (result && !skipCtor) {
    var objCtor = object.constructor,
      othCtor = other.constructor;

    if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor == 'function' && objCtor instanceof objCtor && typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      result = false;
    }
  }
  stack['delete'](object);
  stack['delete'](other);
  return result;
}
var _equalObjects = equalObjects;

var COMPARE_PARTIAL_FLAG$3 = 1;

var argsTag$3 = '[object Arguments]',
  arrayTag$2 = '[object Array]',
  objectTag$3 = '[object Object]';

var objectProto$e = Object.prototype;

var hasOwnProperty$b = objectProto$e.hasOwnProperty;

function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
  var objIsArr = isArray_1(object),
    othIsArr = isArray_1(other),
    objTag = objIsArr ? arrayTag$2 : _getTag(object),
    othTag = othIsArr ? arrayTag$2 : _getTag(other);
  objTag = objTag == argsTag$3 ? objectTag$3 : objTag;
  othTag = othTag == argsTag$3 ? objectTag$3 : othTag;
  var objIsObj = objTag == objectTag$3,
    othIsObj = othTag == objectTag$3,
    isSameTag = objTag == othTag;
  if (isSameTag && isBuffer_1(object)) {
    if (!isBuffer_1(other)) {
      return false;
    }
    objIsArr = true;
    objIsObj = false;
  }
  if (isSameTag && !objIsObj) {
    stack || (stack = new _Stack());
    return objIsArr || isTypedArray_1(object) ? _equalArrays(object, other, bitmask, customizer, equalFunc, stack) : _equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
  }
  if (!(bitmask & COMPARE_PARTIAL_FLAG$3)) {
    var objIsWrapped = objIsObj && hasOwnProperty$b.call(object, '__wrapped__'),
      othIsWrapped = othIsObj && hasOwnProperty$b.call(other, '__wrapped__');
    if (objIsWrapped || othIsWrapped) {
      var objUnwrapped = objIsWrapped ? object.value() : object,
        othUnwrapped = othIsWrapped ? other.value() : other;
      stack || (stack = new _Stack());
      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
    }
  }
  if (!isSameTag) {
    return false;
  }
  stack || (stack = new _Stack());
  return _equalObjects(object, other, bitmask, customizer, equalFunc, stack);
}
var _baseIsEqualDeep = baseIsEqualDeep;

function baseIsEqual(value, other, bitmask, customizer, stack) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || !isObjectLike_1(value) && !isObjectLike_1(other)) {
    return value !== value && other !== other;
  }
  return _baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
}
var _baseIsEqual = baseIsEqual;

var COMPARE_PARTIAL_FLAG$4 = 1,
  COMPARE_UNORDERED_FLAG$2 = 2;

function baseIsMatch(object, source, matchData, customizer) {
  var index = matchData.length,
    length = index,
    noCustomizer = !customizer;
  if (object == null) {
    return !length;
  }
  object = Object(object);
  while (index--) {
    var data = matchData[index];
    if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
      return false;
    }
  }
  while (++index < length) {
    data = matchData[index];
    var key = data[0],
      objValue = object[key],
      srcValue = data[1];
    if (noCustomizer && data[2]) {
      if (objValue === undefined && !(key in object)) {
        return false;
      }
    } else {
      var stack = new _Stack();
      if (customizer) {
        var result = customizer(objValue, srcValue, key, object, source, stack);
      }
      if (!(result === undefined ? _baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG$4 | COMPARE_UNORDERED_FLAG$2, customizer, stack) : result)) {
        return false;
      }
    }
  }
  return true;
}
var _baseIsMatch = baseIsMatch;

function isStrictComparable(value) {
  return value === value && !isObject_1(value);
}
var _isStrictComparable = isStrictComparable;

function getMatchData(object) {
  var result = keys_1(object),
    length = result.length;
  while (length--) {
    var key = result[length],
      value = object[key];
    result[length] = [key, value, _isStrictComparable(value)];
  }
  return result;
}
var _getMatchData = getMatchData;

function matchesStrictComparable(key, srcValue) {
  return function (object) {
    if (object == null) {
      return false;
    }
    return object[key] === srcValue && (srcValue !== undefined || key in Object(object));
  };
}
var _matchesStrictComparable = matchesStrictComparable;

function baseMatches(source) {
  var matchData = _getMatchData(source);
  if (matchData.length == 1 && matchData[0][2]) {
    return _matchesStrictComparable(matchData[0][0], matchData[0][1]);
  }
  return function (object) {
    return object === source || _baseIsMatch(object, source, matchData);
  };
}
var _baseMatches = baseMatches;

function baseHasIn(object, key) {
  return object != null && key in Object(object);
}
var _baseHasIn = baseHasIn;

function hasPath(object, path, hasFunc) {
  path = _castPath(path, object);
  var index = -1,
    length = path.length,
    result = false;
  while (++index < length) {
    var key = _toKey(path[index]);
    if (!(result = object != null && hasFunc(object, key))) {
      break;
    }
    object = object[key];
  }
  if (result || ++index != length) {
    return result;
  }
  length = object == null ? 0 : object.length;
  return !!length && isLength_1(length) && _isIndex(key, length) && (isArray_1(object) || isArguments_1(object));
}
var _hasPath = hasPath;

function hasIn(object, path) {
  return object != null && _hasPath(object, path, _baseHasIn);
}
var hasIn_1 = hasIn;

var COMPARE_PARTIAL_FLAG$5 = 1,
  COMPARE_UNORDERED_FLAG$3 = 2;

function baseMatchesProperty(path, srcValue) {
  if (_isKey(path) && _isStrictComparable(srcValue)) {
    return _matchesStrictComparable(_toKey(path), srcValue);
  }
  return function (object) {
    var objValue = get_1(object, path);
    return objValue === undefined && objValue === srcValue ? hasIn_1(object, path) : _baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG$5 | COMPARE_UNORDERED_FLAG$3);
  };
}
var _baseMatchesProperty = baseMatchesProperty;

function identity(value) {
  return value;
}
var identity_1 = identity;

function baseProperty(key) {
  return function (object) {
    return object == null ? undefined : object[key];
  };
}
var _baseProperty = baseProperty;

function basePropertyDeep(path) {
  return function (object) {
    return _baseGet(object, path);
  };
}
var _basePropertyDeep = basePropertyDeep;

function property(path) {
  return _isKey(path) ? _baseProperty(_toKey(path)) : _basePropertyDeep(path);
}
var property_1 = property;

function baseIteratee(value) {
  if (typeof value == 'function') {
    return value;
  }
  if (value == null) {
    return identity_1;
  }
  if (typeof value == 'object') {
    return isArray_1(value) ? _baseMatchesProperty(value[0], value[1]) : _baseMatches(value);
  }
  return property_1(value);
}
var _baseIteratee = baseIteratee;

function createBaseFor(fromRight) {
  return function (object, iteratee, keysFunc) {
    var index = -1,
      iterable = Object(object),
      props = keysFunc(object),
      length = props.length;
    while (length--) {
      var key = props[fromRight ? length : ++index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}
var _createBaseFor = createBaseFor;

var baseFor = _createBaseFor();
var _baseFor = baseFor;

function baseForOwn(object, iteratee) {
  return object && _baseFor(object, iteratee, keys_1);
}
var _baseForOwn = baseForOwn;

function createBaseEach(eachFunc, fromRight) {
  return function (collection, iteratee) {
    if (collection == null) {
      return collection;
    }
    if (!isArrayLike_1(collection)) {
      return eachFunc(collection, iteratee);
    }
    var length = collection.length,
      index = fromRight ? length : -1,
      iterable = Object(collection);
    while (fromRight ? index-- : ++index < length) {
      if (iteratee(iterable[index], index, iterable) === false) {
        break;
      }
    }
    return collection;
  };
}
var _createBaseEach = createBaseEach;

var baseEach = _createBaseEach(_baseForOwn);
var _baseEach = baseEach;

function baseMap(collection, iteratee) {
  var index = -1,
    result = isArrayLike_1(collection) ? Array(collection.length) : [];
  _baseEach(collection, function (value, key, collection) {
    result[++index] = iteratee(value, key, collection);
  });
  return result;
}
var _baseMap = baseMap;

function baseSortBy(array, comparer) {
  var length = array.length;
  array.sort(comparer);
  while (length--) {
    array[length] = array[length].value;
  }
  return array;
}
var _baseSortBy = baseSortBy;

function compareAscending(value, other) {
  if (value !== other) {
    var valIsDefined = value !== undefined,
      valIsNull = value === null,
      valIsReflexive = value === value,
      valIsSymbol = isSymbol_1(value);
    var othIsDefined = other !== undefined,
      othIsNull = other === null,
      othIsReflexive = other === other,
      othIsSymbol = isSymbol_1(other);
    if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
      return 1;
    }
    if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
      return -1;
    }
  }
  return 0;
}
var _compareAscending = compareAscending;

function compareMultiple(object, other, orders) {
  var index = -1,
    objCriteria = object.criteria,
    othCriteria = other.criteria,
    length = objCriteria.length,
    ordersLength = orders.length;
  while (++index < length) {
    var result = _compareAscending(objCriteria[index], othCriteria[index]);
    if (result) {
      if (index >= ordersLength) {
        return result;
      }
      var order = orders[index];
      return result * (order == 'desc' ? -1 : 1);
    }
  }
  return object.index - other.index;
}
var _compareMultiple = compareMultiple;

function baseOrderBy(collection, iteratees, orders) {
  if (iteratees.length) {
    iteratees = _arrayMap(iteratees, function (iteratee) {
      if (isArray_1(iteratee)) {
        return function (value) {
          return _baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);
        };
      }
      return iteratee;
    });
  } else {
    iteratees = [identity_1];
  }
  var index = -1;
  iteratees = _arrayMap(iteratees, _baseUnary(_baseIteratee));
  var result = _baseMap(collection, function (value, key, collection) {
    var criteria = _arrayMap(iteratees, function (iteratee) {
      return iteratee(value);
    });
    return {
      'criteria': criteria,
      'index': ++index,
      'value': value
    };
  });
  return _baseSortBy(result, function (object, other) {
    return _compareMultiple(object, other, orders);
  });
}
var _baseOrderBy = baseOrderBy;

function orderBy(collection, iteratees, orders, guard) {
  if (collection == null) {
    return [];
  }
  if (!isArray_1(iteratees)) {
    iteratees = iteratees == null ? [] : [iteratees];
  }
  orders = guard ? undefined : orders;
  if (!isArray_1(orders)) {
    orders = orders == null ? [] : [orders];
  }
  return _baseOrderBy(collection, iteratees, orders);
}
var orderBy_1 = orderBy;

var _excluded$2 = ["tenantId"],
  _excluded2$2 = ["tenantId", "payments"];
var BpaApplicationDetail$1 = function BpaApplicationDetail() {
  var _mdmsData$BPA, _userInfo$info, _workflowDetails$data3, _workflowDetails$data4, _workflowDetails$data7, _workflowDetails$data8, _data$collectionBillD, _data$applicationData22, _data$collectionBillD2, _data$applicationData27, _data$collectionBillD3, _data$applicationData32, _workflowDetails$data15, _workflowDetails$data16, _workflowDetails$data19, _workflowDetails$data20, _data$applicationDeta7, _data$applicationData33, _userInfo$info2, _workflowDetails$data23, _workflowDetails$data24, _data$applicationData34, _workflowDetails$data25, _workflowDetails$data26, _data$applicationData35;
  var getRevocationPDFSearch = function getRevocationPDFSearch(_ref2) {
    var tenantId = _ref2.tenantId,
      params = _objectWithoutPropertiesLoose(_ref2, _excluded$2);
    try {
      var requestData = _extends({}, data === null || data === void 0 ? void 0 : data.applicationData);
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Bpa: [requestData]
      }, "bpa-revocation")).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var getPermitOccupancyOrderSearch = function getPermitOccupancyOrderSearch(_ref, order, mode) {
    var tenantId = _ref.tenantId;
    if (mode === void 0) {
      mode = "download";
    }
    try {
      var currentDate = new Date();
      data.applicationData.additionalDetails.runDate = convertDateToEpoch(currentDate.getFullYear() + '-' + (currentDate.getMonth() + 1) + '-' + currentDate.getDate());
      var requestData = _extends({}, data === null || data === void 0 ? void 0 : data.applicationData, {
        edcrDetail: [_extends({}, data === null || data === void 0 ? void 0 : data.edcrDetails)]
      });
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Bpa: [requestData]
      }, order)).then(function (response) {
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          var _data$applicationData36, _data$applicationData37;
          window.open(fileStore[response === null || response === void 0 ? void 0 : response.filestoreIds[0]], "_blank");
          requestData["applicationType"] = data === null || data === void 0 ? void 0 : (_data$applicationData36 = data.applicationData) === null || _data$applicationData36 === void 0 ? void 0 : (_data$applicationData37 = _data$applicationData36.additionalDetails) === null || _data$applicationData37 === void 0 ? void 0 : _data$applicationData37.applicationType;
          return Promise.resolve(Digit.OBPSService.edcr_report_download({
            BPA: _extends({}, requestData)
          })).then(function (edcrResponse) {
            var responseStatus = parseInt(edcrResponse.status, 10);
            if (responseStatus === 201 || responseStatus === 200) {
              mode == "print" ? printPdf(new Blob([edcrResponse.data], {
                type: "application/pdf"
              })) : downloadPdf(new Blob([edcrResponse.data], {
                type: "application/pdf"
              }), "edcrReport.pdf");
            }
          });
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var getRecieptSearch = function getRecieptSearch(_ref3) {
    var tenantId = _ref3.tenantId,
      payments = _ref3.payments,
      params = _objectWithoutPropertiesLoose(_ref3, _excluded2$2);
    try {
      var response = {
        filestoreIds: [payments === null || payments === void 0 ? void 0 : payments.fileStoreId]
      };
      return Promise.resolve(Digit.PaymentService.generatePdf(tenantId, {
        Payments: [_extends({}, payments)]
      }, "consolidatedreceipt")).then(function (_Digit$PaymentService) {
        response = _Digit$PaymentService;
        return Promise.resolve(Digit.PaymentService.printReciept(tenantId, {
          fileStoreIds: response.filestoreIds[0]
        })).then(function (fileStore) {
          var _response;
          window.open(fileStore[(_response = response) === null || _response === void 0 ? void 0 : _response.filestoreIds[0]], "_blank");
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var _useParams = reactRouterDom.useParams(),
    id = _useParams.id;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var _useState = React.useState(null),
    showToast = _useState[0],
    setShowToast = _useState[1];
  var _useState2 = React.useState(false),
    canSubmit = _useState2[0],
    setSubmitValve = _useState2[1];
  var defaultValues = {};
  var history = reactRouterDom.useHistory();
  var _Digit$Hooks$useSessi = Digit.Hooks.useSessionStorage("store-data", null);
  var _Digit$Hooks$useSessi2 = Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_HAPPENED", false),
    setMutationHappened = _Digit$Hooks$useSessi2[1];
  var _Digit$Hooks$useSessi3 = Digit.Hooks.useSessionStorage("EMPLOYEE_MUTATION_SUCCESS_DATA", {}),
    clearSuccessData = _Digit$Hooks$useSessi3[2];
  var _useState3 = React.useState(null),
    setError = _useState3[1];
  var stateId = Digit.ULBService.getStateId();
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["DocTypeMapping"]),
    bpaDocsLoading = _Digit$Hooks$obps$use.isLoading,
    bpaDocs = _Digit$Hooks$obps$use.data;
  var _Digit$Hooks$obps$Sea = Digit.Hooks.obps.SearchMdmsTypes.getFormConfig(stateId, []),
    newConfig = _Digit$Hooks$obps$Sea.data;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(stateId, "BPA", ["RiskTypeComputation"]),
    mdmsData = _Digit$Hooks$obps$use2.data;
  var _Digit$Hooks$obps$use3 = Digit.Hooks.obps.useBPADetailsPage(tenantId, {
      applicationNo: id
    }),
    _Digit$Hooks$obps$use4 = _Digit$Hooks$obps$use3.data,
    data = _Digit$Hooks$obps$use4 === void 0 ? {} : _Digit$Hooks$obps$use4,
    isLoading = _Digit$Hooks$obps$use3.isLoading;
  React.useEffect(function () {
    if (!bpaDocsLoading && !isLoading) {
      var _bpaDocs$BPA;
      var filtredBpaDocs = [];
      if (bpaDocs !== null && bpaDocs !== void 0 && (_bpaDocs$BPA = bpaDocs.BPA) !== null && _bpaDocs$BPA !== void 0 && _bpaDocs$BPA.DocTypeMapping) {
        var _bpaDocs$BPA2, _bpaDocs$BPA2$DocType, _data$applicationDeta, _data$applicationDeta2, _data$applicationDeta3, _data$applicationDeta4, _data$applicationDeta5, _filtredBpaDocs, _filtredBpaDocs$, _filtredBpaDocs2, _filtredBpaDocs2$;
        filtredBpaDocs = bpaDocs === null || bpaDocs === void 0 ? void 0 : (_bpaDocs$BPA2 = bpaDocs.BPA) === null || _bpaDocs$BPA2 === void 0 ? void 0 : (_bpaDocs$BPA2$DocType = _bpaDocs$BPA2.DocTypeMapping) === null || _bpaDocs$BPA2$DocType === void 0 ? void 0 : _bpaDocs$BPA2$DocType.filter(function (ob) {
          var _data$applicationData4, _data$applicationData5, _data$applicationData6, _data$applicationData7, _data$applicationData8;
          return ob.WFState == "INPROGRESS" && ob.RiskType == (data === null || data === void 0 ? void 0 : (_data$applicationData4 = data.applicationData) === null || _data$applicationData4 === void 0 ? void 0 : _data$applicationData4.riskType) && ob.ServiceType == (data === null || data === void 0 ? void 0 : (_data$applicationData5 = data.applicationData) === null || _data$applicationData5 === void 0 ? void 0 : (_data$applicationData6 = _data$applicationData5.additionalDetails) === null || _data$applicationData6 === void 0 ? void 0 : _data$applicationData6.serviceType) && ob.applicationType == (data === null || data === void 0 ? void 0 : (_data$applicationData7 = data.applicationData) === null || _data$applicationData7 === void 0 ? void 0 : (_data$applicationData8 = _data$applicationData7.additionalDetails) === null || _data$applicationData8 === void 0 ? void 0 : _data$applicationData8.applicationType);
        });
        var documents = data === null || data === void 0 ? void 0 : (_data$applicationDeta = data.applicationDetails) === null || _data$applicationDeta === void 0 ? void 0 : (_data$applicationDeta2 = _data$applicationDeta.filter(function (ob) {
          return ob.title === "BPA_DOCUMENT_DETAILS_LABEL";
        })[0]) === null || _data$applicationDeta2 === void 0 ? void 0 : (_data$applicationDeta3 = _data$applicationDeta2.additionalDetails) === null || _data$applicationDeta3 === void 0 ? void 0 : (_data$applicationDeta4 = _data$applicationDeta3.obpsDocuments) === null || _data$applicationDeta4 === void 0 ? void 0 : (_data$applicationDeta5 = _data$applicationDeta4[0]) === null || _data$applicationDeta5 === void 0 ? void 0 : _data$applicationDeta5.values;
        var RealignedDocument = [];
        filtredBpaDocs && ((_filtredBpaDocs = filtredBpaDocs) === null || _filtredBpaDocs === void 0 ? void 0 : (_filtredBpaDocs$ = _filtredBpaDocs[0]) === null || _filtredBpaDocs$ === void 0 ? void 0 : _filtredBpaDocs$.docTypes) && ((_filtredBpaDocs2 = filtredBpaDocs) === null || _filtredBpaDocs2 === void 0 ? void 0 : (_filtredBpaDocs2$ = _filtredBpaDocs2[0]) === null || _filtredBpaDocs2$ === void 0 ? void 0 : _filtredBpaDocs2$.docTypes.map(function (ob) {
          documents && documents.filter(function (x) {
            return ob.code === x.documentType.slice(0, x.documentType.lastIndexOf("."));
          }).map(function (doc) {
            RealignedDocument.push(doc);
          });
        }));
        var newApplicationDetails = data.applicationDetails && data.applicationDetails.map(function (obj) {
          if (obj.title === "BPA_DOCUMENT_DETAILS_LABEL") {
            return _extends({}, obj, {
              additionalDetails: {
                obpsDocuments: [{
                  title: "",
                  values: RealignedDocument
                }]
              }
            });
          }
          return obj;
        });
        data.applicationDetails = newApplicationDetails && newApplicationDetails.length > 0 ? [].concat(newApplicationDetails) : data === null || data === void 0 ? void 0 : data.applicationDetails;
      }
    }
  }, [bpaDocs, data]);
  var _useState4 = React.useState(false),
    showOptions = _useState4[0],
    setShowOptions = _useState4[1];
  var _Digit$Hooks$obps$use5 = Digit.Hooks.obps.useApplicationActions(tenantId),
    mutate = _Digit$Hooks$obps$use5.mutate;
  var nocMutation = Digit.Hooks.obps.useObpsAPI(tenantId, true);
  var risType = "";
  sessionStorage.setItem("bpaApplicationDetails", true);
  function checkHead(head) {
    if (head === "ES_NEW_APPLICATION_LOCATION_DETAILS") {
      return "TL_CHECK_ADDRESS";
    } else if (head === "ES_NEW_APPLICATION_OWNERSHIP_DETAILS") {
      return "TL_OWNERSHIP_DETAILS_HEADER";
    } else {
      return head;
    }
  }
  var closeToast = function closeToast() {
    setShowToast(null);
    setError(null);
  };
  React.useEffect(function () {
    setMutationHappened(false);
    clearSuccessData();
  }, []);
  var onFormValueChange = function onFormValueChange(setValue, formData, formState) {
    setSubmitValve(!Object.keys(formState.errors).length);
  };
  var configs = newConfig !== null && newConfig !== void 0 && newConfig.InspectionReportConfig ? newConfig === null || newConfig === void 0 ? void 0 : newConfig.InspectionReportConfig : newConfig$5;
  var workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: tenantId,
    id: id,
    moduleCode: "BPA"
  });
  if (workflowDetails && workflowDetails.data && !workflowDetails.isLoading) {
    var _workflowDetails$data, _workflowDetails$data2;
    workflowDetails.data.initialActionState = (workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : _workflowDetails$data.initialActionState) || _extends({}, workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data2 = workflowDetails.data) === null || _workflowDetails$data2 === void 0 ? void 0 : _workflowDetails$data2.actionState) || {};
    workflowDetails.data.actionState = _extends({}, workflowDetails.data);
  }
  if (mdmsData !== null && mdmsData !== void 0 && (_mdmsData$BPA = mdmsData.BPA) !== null && _mdmsData$BPA !== void 0 && _mdmsData$BPA.RiskTypeComputation && data !== null && data !== void 0 && data.edcrDetails) {
    var _mdmsData$BPA2, _data$edcrDetails, _data$edcrDetails$pla, _data$edcrDetails$pla2, _data$edcrDetails2, _data$edcrDetails2$pl, _data$applicationDeta6;
    risType = Digit.Utils.obps.calculateRiskType(mdmsData === null || mdmsData === void 0 ? void 0 : (_mdmsData$BPA2 = mdmsData.BPA) === null || _mdmsData$BPA2 === void 0 ? void 0 : _mdmsData$BPA2.RiskTypeComputation, data === null || data === void 0 ? void 0 : (_data$edcrDetails = data.edcrDetails) === null || _data$edcrDetails === void 0 ? void 0 : (_data$edcrDetails$pla = _data$edcrDetails.planDetail) === null || _data$edcrDetails$pla === void 0 ? void 0 : (_data$edcrDetails$pla2 = _data$edcrDetails$pla.plot) === null || _data$edcrDetails$pla2 === void 0 ? void 0 : _data$edcrDetails$pla2.area, data === null || data === void 0 ? void 0 : (_data$edcrDetails2 = data.edcrDetails) === null || _data$edcrDetails2 === void 0 ? void 0 : (_data$edcrDetails2$pl = _data$edcrDetails2.planDetail) === null || _data$edcrDetails2$pl === void 0 ? void 0 : _data$edcrDetails2$pl.blocks);
    data === null || data === void 0 ? void 0 : (_data$applicationDeta6 = data.applicationDetails) === null || _data$applicationDeta6 === void 0 ? void 0 : _data$applicationDeta6.map(function (detail) {
      if (detail !== null && detail !== void 0 && detail.isInsert) {
        var _detail$values;
        (_detail$values = detail.values) === null || _detail$values === void 0 ? void 0 : _detail$values.forEach(function (value) {
          if (value !== null && value !== void 0 && value.isInsert) value.value = "WF_BPA_" + risType;
        });
      }
    });
  }
  var userInfo = Digit.UserService.getUser();
  var rolearray = userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info = userInfo.info) === null || _userInfo$info === void 0 ? void 0 : _userInfo$info.roles.filter(function (item) {
    if (item.code == "CEMP" && item.tenantId === tenantId || item.code == "CITIZEN") return true;
  });
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data3 = workflowDetails.data) === null || _workflowDetails$data3 === void 0 ? void 0 : (_workflowDetails$data4 = _workflowDetails$data3.processInstances) === null || _workflowDetails$data4 === void 0 ? void 0 : _workflowDetails$data4.length) > 0) {
    var _get, _workflowDetails$data5, _workflowDetails$data6;
    var filteredActions = [];
    filteredActions = (_get = get_1(workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data5 = workflowDetails.data) === null || _workflowDetails$data5 === void 0 ? void 0 : _workflowDetails$data5.processInstances[0], "nextActions", [])) === null || _get === void 0 ? void 0 : _get.filter(function (item) {
      return item.action != "ADHOC";
    });
    var actions = orderBy_1(filteredActions, ["action"], ["desc"]);
    if ((!actions || (actions === null || actions === void 0 ? void 0 : actions.length) == 0) && workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data6 = workflowDetails.data) !== null && _workflowDetails$data6 !== void 0 && _workflowDetails$data6.actionState) workflowDetails.data.actionState.nextActions = [];
  }
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data7 = workflowDetails.data) === null || _workflowDetails$data7 === void 0 ? void 0 : (_workflowDetails$data8 = _workflowDetails$data7.nextActions) === null || _workflowDetails$data8 === void 0 ? void 0 : _workflowDetails$data8.length) > 0) {
    var _workflowDetails$data9, _workflowDetails$data10, _workflowDetails$data11, _workflowDetails$data12;
    workflowDetails.data.nextActions = workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data9 = workflowDetails.data) === null || _workflowDetails$data9 === void 0 ? void 0 : (_workflowDetails$data10 = _workflowDetails$data9.nextActions) === null || _workflowDetails$data10 === void 0 ? void 0 : _workflowDetails$data10.filter(function (actn) {
      return actn.action !== "INITIATE";
    });
    workflowDetails.data.nextActions = workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data11 = workflowDetails.data) === null || _workflowDetails$data11 === void 0 ? void 0 : (_workflowDetails$data12 = _workflowDetails$data11.nextActions) === null || _workflowDetails$data12 === void 0 ? void 0 : _workflowDetails$data12.filter(function (actn) {
      return actn.action !== "ADHOC";
    });
  }
  if (rolearray) {
    var _workflowDetails$data13, _workflowDetails$data14;
    workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data13 = workflowDetails.data) === null || _workflowDetails$data13 === void 0 ? void 0 : (_workflowDetails$data14 = _workflowDetails$data13.nextActions) === null || _workflowDetails$data14 === void 0 ? void 0 : _workflowDetails$data14.forEach(function (action) {
      if ((action === null || action === void 0 ? void 0 : action.action) === "PAY") {
        var _data$applicationData9, _data$applicationData10, _data$applicationData11;
        action.redirectionUrll = {
          pathname: getBusinessServices(data === null || data === void 0 ? void 0 : (_data$applicationData9 = data.applicationData) === null || _data$applicationData9 === void 0 ? void 0 : _data$applicationData9.businessService, data === null || data === void 0 ? void 0 : (_data$applicationData10 = data.applicationData) === null || _data$applicationData10 === void 0 ? void 0 : _data$applicationData10.status) + "/" + (data === null || data === void 0 ? void 0 : (_data$applicationData11 = data.applicationData) === null || _data$applicationData11 === void 0 ? void 0 : _data$applicationData11.applicationNo) + "/" + tenantId + "?tenantId=" + tenantId,
          state: tenantId
        };
      }
    });
  }
  var dowloadOptions = [];
  if ((data === null || data === void 0 ? void 0 : (_data$collectionBillD = data.collectionBillDetails) === null || _data$collectionBillD === void 0 ? void 0 : _data$collectionBillD.length) > 0) {
    var bpaPayments = cloneDeep_1(data === null || data === void 0 ? void 0 : data.collectionBillDetails);
    bpaPayments.forEach(function (pay) {
      var _pay$paymentDetails$, _pay$paymentDetails$2, _pay$paymentDetails$3, _pay$paymentDetails$4, _pay$paymentDetails$5;
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$ = pay.paymentDetails[0]) === null || _pay$paymentDetails$ === void 0 ? void 0 : _pay$paymentDetails$.businessService) === "BPA.NC_OC_APP_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_APP_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData12, _data$applicationData13;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData12 = data.applicationData) === null || _data$applicationData12 === void 0 ? void 0 : _data$applicationData12.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData13 = data.applicationData) === null || _data$applicationData13 === void 0 ? void 0 : _data$applicationData13.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$2 = pay.paymentDetails[0]) === null || _pay$paymentDetails$2 === void 0 ? void 0 : _pay$paymentDetails$2.businessService) === "BPA.NC_OC_SAN_FEE") {
        dowloadOptions.push({
          order: 2,
          label: t("BPA_OC_DEV_PEN_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData14, _data$applicationData15;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData14 = data.applicationData) === null || _data$applicationData14 === void 0 ? void 0 : _data$applicationData14.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData15 = data.applicationData) === null || _data$applicationData15 === void 0 ? void 0 : _data$applicationData15.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$3 = pay.paymentDetails[0]) === null || _pay$paymentDetails$3 === void 0 ? void 0 : _pay$paymentDetails$3.businessService) === "BPA.LOW_RISK_PERMIT_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData16, _data$applicationData17;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData16 = data.applicationData) === null || _data$applicationData16 === void 0 ? void 0 : _data$applicationData16.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData17 = data.applicationData) === null || _data$applicationData17 === void 0 ? void 0 : _data$applicationData17.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$4 = pay.paymentDetails[0]) === null || _pay$paymentDetails$4 === void 0 ? void 0 : _pay$paymentDetails$4.businessService) === "BPA.NC_APP_FEE") {
        dowloadOptions.push({
          order: 1,
          label: t("BPA_APP_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData18, _data$applicationData19;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData18 = data.applicationData) === null || _data$applicationData18 === void 0 ? void 0 : _data$applicationData18.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData19 = data.applicationData) === null || _data$applicationData19 === void 0 ? void 0 : _data$applicationData19.applicationNo
            });
          }
        });
      }
      if ((pay === null || pay === void 0 ? void 0 : (_pay$paymentDetails$5 = pay.paymentDetails[0]) === null || _pay$paymentDetails$5 === void 0 ? void 0 : _pay$paymentDetails$5.businessService) === "BPA.NC_SAN_FEE") {
        dowloadOptions.push({
          order: 2,
          label: t("BPA_SAN_FEE_RECEIPT"),
          onClick: function onClick() {
            var _data$applicationData20, _data$applicationData21;
            return getRecieptSearch({
              tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData20 = data.applicationData) === null || _data$applicationData20 === void 0 ? void 0 : _data$applicationData20.tenantId,
              payments: pay,
              consumerCodes: data === null || data === void 0 ? void 0 : (_data$applicationData21 = data.applicationData) === null || _data$applicationData21 === void 0 ? void 0 : _data$applicationData21.applicationNo
            });
          }
        });
      }
    });
  }
  if (data && (data === null || data === void 0 ? void 0 : (_data$applicationData22 = data.applicationData) === null || _data$applicationData22 === void 0 ? void 0 : _data$applicationData22.businessService) === "BPA_LOW" && (data === null || data === void 0 ? void 0 : (_data$collectionBillD2 = data.collectionBillDetails) === null || _data$collectionBillD2 === void 0 ? void 0 : _data$collectionBillD2.length) > 0) {
    var _data$applicationData23, _data$applicationData25;
    !(data !== null && data !== void 0 && (_data$applicationData23 = data.applicationData) !== null && _data$applicationData23 !== void 0 && _data$applicationData23.status.includes("REVOCATION")) && dowloadOptions.push({
      order: 3,
      label: t("BPA_PERMIT_ORDER"),
      onClick: function onClick() {
        var _data$applicationData24;
        return getPermitOccupancyOrderSearch({
          tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData24 = data.applicationData) === null || _data$applicationData24 === void 0 ? void 0 : _data$applicationData24.tenantId
        }, "buildingpermit-low");
      }
    });
    (data === null || data === void 0 ? void 0 : (_data$applicationData25 = data.applicationData) === null || _data$applicationData25 === void 0 ? void 0 : _data$applicationData25.status.includes("REVOCATION")) && dowloadOptions.push({
      order: 3,
      label: t("BPA_REVOCATION_PDF_LABEL"),
      onClick: function onClick() {
        var _data$applicationData26;
        return getRevocationPDFSearch({
          tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData26 = data.applicationData) === null || _data$applicationData26 === void 0 ? void 0 : _data$applicationData26.tenantId
        });
      }
    });
  } else if (data && (data === null || data === void 0 ? void 0 : (_data$applicationData27 = data.applicationData) === null || _data$applicationData27 === void 0 ? void 0 : _data$applicationData27.businessService) === "BPA" && (data === null || data === void 0 ? void 0 : (_data$collectionBillD3 = data.collectionBillDetails) === null || _data$collectionBillD3 === void 0 ? void 0 : _data$collectionBillD3.length) > 0) {
    var _data$applicationData28;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData28 = data.applicationData) === null || _data$applicationData28 === void 0 ? void 0 : _data$applicationData28.status) === "APPROVED") {
      dowloadOptions.push({
        order: 3,
        label: t("BPA_PERMIT_ORDER"),
        onClick: function onClick() {
          var _data$applicationData29;
          return getPermitOccupancyOrderSearch({
            tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData29 = data.applicationData) === null || _data$applicationData29 === void 0 ? void 0 : _data$applicationData29.tenantId
          }, "buildingpermit");
        }
      });
    }
  } else {
    var _data$applicationData30;
    if ((data === null || data === void 0 ? void 0 : (_data$applicationData30 = data.applicationData) === null || _data$applicationData30 === void 0 ? void 0 : _data$applicationData30.status) === "APPROVED") {
      dowloadOptions.push({
        order: 3,
        label: t("BPA_OC_CERTIFICATE"),
        onClick: function onClick() {
          var _data$applicationData31;
          return getPermitOccupancyOrderSearch({
            tenantId: data === null || data === void 0 ? void 0 : (_data$applicationData31 = data.applicationData) === null || _data$applicationData31 === void 0 ? void 0 : _data$applicationData31.tenantId
          }, "occupancy-certificate");
        }
      });
    }
  }
  if (data !== null && data !== void 0 && data.comparisionReport && data && (data === null || data === void 0 ? void 0 : (_data$applicationData32 = data.applicationData) === null || _data$applicationData32 === void 0 ? void 0 : _data$applicationData32.businessService) === "BPA_OC") {
    dowloadOptions.push({
      order: 4,
      label: t("BPA_COMPARISON_REPORT_LABEL"),
      onClick: function onClick() {
        var _data$comparisionRepo;
        return window.open(data === null || data === void 0 ? void 0 : (_data$comparisionRepo = data.comparisionReport) === null || _data$comparisionRepo === void 0 ? void 0 : _data$comparisionRepo.comparisonReport, "_blank");
      }
    });
  }
  dowloadOptions.sort(function (a, b) {
    return a.order - b.order;
  });
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data15 = workflowDetails.data) === null || _workflowDetails$data15 === void 0 ? void 0 : (_workflowDetails$data16 = _workflowDetails$data15.nextActions) === null || _workflowDetails$data16 === void 0 ? void 0 : _workflowDetails$data16.length) > 0) {
    var _workflowDetails$data17, _workflowDetails$data18;
    workflowDetails.data.nextActions = workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data17 = workflowDetails.data) === null || _workflowDetails$data17 === void 0 ? void 0 : (_workflowDetails$data18 = _workflowDetails$data17.nextActions) === null || _workflowDetails$data18 === void 0 ? void 0 : _workflowDetails$data18.filter(function (actn) {
      return actn.action !== "SKIP_PAYMENT";
    });
  }
  if ((workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data19 = workflowDetails.data) === null || _workflowDetails$data19 === void 0 ? void 0 : (_workflowDetails$data20 = _workflowDetails$data19.nextActions) === null || _workflowDetails$data20 === void 0 ? void 0 : _workflowDetails$data20.length) > 0) {
    var _workflowDetails$data21, _workflowDetails$data22;
    workflowDetails.data.nextActions = workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data21 = workflowDetails.data) === null || _workflowDetails$data21 === void 0 ? void 0 : (_workflowDetails$data22 = _workflowDetails$data21.nextActions) === null || _workflowDetails$data22 === void 0 ? void 0 : _workflowDetails$data22.filter(function (actn) {
      return actn.action !== "SKIP_PAYMENT";
    });
  }
  var results = data === null || data === void 0 ? void 0 : (_data$applicationDeta7 = data.applicationDetails) === null || _data$applicationDeta7 === void 0 ? void 0 : _data$applicationDeta7.filter(function (element) {
    if (Object.keys(element).length !== 0) {
      return true;
    }
    return false;
  });
  data.applicationDetails = results;
  return /*#__PURE__*/React__default.createElement(React.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-main-application-details"
  }, /*#__PURE__*/React__default.createElement("div", {
    className: "employee-application-details",
    style: {
      marginBottom: "15px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      marginLeft: "0px",
      paddingTop: "10px",
      fontSize: "32px"
    }
  }, t("CS_TITLE_APPLICATION_DETAILS")), dowloadOptions && dowloadOptions.length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.MultiLink, {
    className: "multilinkWrapper employee-mulitlink-main-div",
    onHeadClick: function onHeadClick() {
      return setShowOptions(!showOptions);
    },
    displayOptions: showOptions,
    options: dowloadOptions,
    downloadBtnClassName: "employee-download-btn-className",
    optionsClassName: "employee-options-btn-className"
  })), (data === null || data === void 0 ? void 0 : (_data$applicationData33 = data.applicationData) === null || _data$applicationData33 === void 0 ? void 0 : _data$applicationData33.status) === "FIELDINSPECTION_INPROGRESS" && (userInfo === null || userInfo === void 0 ? void 0 : (_userInfo$info2 = userInfo.info) === null || _userInfo$info2 === void 0 ? void 0 : _userInfo$info2.roles.filter(function (role) {
    return role.code === "BPA_FIELD_INSPECTOR";
  })).length > 0 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.FormComposer, {
    heading: t(""),
    isDisabled: !canSubmit,
    config: configs.map(function (config) {
      return _extends({}, config, {
        body: config.body.filter(function (a) {
          return !a.hideInEmployee;
        }),
        head: checkHead(config.head)
      });
    }),
    fieldStyle: {
      marginRight: 0
    },
    submitInForm: false,
    defaultValues: defaultValues,
    onFormValueChange: onFormValueChange,
    breaklineStyle: {
      border: "0px"
    },
    className: "employeeCard-override"
  }), /*#__PURE__*/React__default.createElement(ApplicationDetails$1, {
    applicationDetails: data,
    isLoading: isLoading,
    isDataLoading: isLoading,
    applicationData: data === null || data === void 0 ? void 0 : data.applicationData,
    nocMutation: nocMutation,
    mutate: mutate,
    workflowDetails: workflowDetails,
    businessService: workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data23 = workflowDetails.data) !== null && _workflowDetails$data23 !== void 0 && _workflowDetails$data23.applicationBusinessService ? workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data24 = workflowDetails.data) === null || _workflowDetails$data24 === void 0 ? void 0 : _workflowDetails$data24.applicationBusinessService : data === null || data === void 0 ? void 0 : (_data$applicationData34 = data.applicationData) === null || _data$applicationData34 === void 0 ? void 0 : _data$applicationData34.businessService,
    moduleCode: "BPA",
    showToast: showToast,
    ActionBarStyle: isMobile ? {} : {
      paddingRight: "50px"
    },
    MenuStyle: isMobile ? {} : {
      right: "50px"
    },
    setShowToast: setShowToast,
    closeToast: closeToast,
    statusAttribute: "state",
    timelineStatusPrefix: "WF_" + (workflowDetails !== null && workflowDetails !== void 0 && (_workflowDetails$data25 = workflowDetails.data) !== null && _workflowDetails$data25 !== void 0 && _workflowDetails$data25.applicationBusinessService ? workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data26 = workflowDetails.data) === null || _workflowDetails$data26 === void 0 ? void 0 : _workflowDetails$data26.applicationBusinessService : data === null || data === void 0 ? void 0 : (_data$applicationData35 = data.applicationData) === null || _data$applicationData35 === void 0 ? void 0 : _data$applicationData35.businessService) + "_"
  })));
};

var CheckPage = function CheckPage(_ref) {
  var _user$info, _documents$documents, _nocDocuments$nocDocu, _pdfDetails$pdfFiles, _value$data, _value$data2, _datafromAPI$planDeta, _datafromAPI$planDeta2, _datafromAPI$planDeta3, _datafromAPI$planDeta4, _datafromAPI$planDeta5, _datafromAPI$planDeta6, _datafromAPI$planDeta7, _datafromAPI$planDeta8, _data$scrutinyNumber, _datafromAPI$planDeta9, _datafromAPI$planDeta10, _datafromAPI$planDeta11, _datafromAPI$planDeta12, _datafromAPI$planDeta13, _datafromAPI$planDeta14, _datafromAPI$planDeta15, _datafromAPI$planDeta16, _datafromAPI$planDeta17, _datafromAPI$planDeta18, _datafromAPI$planDeta19, _datafromAPI$planDeta20, _datafromAPI$planDeta21, _datafromAPI$planDeta24, _datafromAPI$planDeta25, _datafromAPI$planDeta26, _datafromAPI$planDeta27, _address$city, _address$locality, _paymentDetails$Bill$, _paymentDetails$Bill$2, _paymentDetails$Bill, _paymentDetails$Bill$3, _paymentDetails$Bill$4, _paymentDetails$Bill2, _paymentDetails$Bill3, _paymentDetails$Bill4;
  var onSubmit = _ref.onSubmit,
    value = _ref.value;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var match = reactRouterDom.useRouteMatch();
  var user = Digit.UserService.getUser();
  var tenantId = (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || (value === null || value === void 0 ? void 0 : value.tenantId) || Digit.ULBService.getCurrentTenantId();
  var BusinessService;
  if (value.businessService === "BPA_LOW") BusinessService = "BPA.LOW_RISK_PERMIT_FEE";else if (value.businessService === "BPA") BusinessService = "BPA.NC_APP_FEE";
  var data = value.data,
    address = value.address,
    owners = value.owners,
    nocDocuments = value.nocDocuments,
    documents = value.documents,
    additionalDetails = value.additionalDetails,
    subOccupancy = value.subOccupancy,
    PrevStateDocuments = value.PrevStateDocuments,
    PrevStateNocDocuments = value.PrevStateNocDocuments,
    applicationNo = value.applicationNo;
  var isEditApplication = window.location.href.includes("editApplication");

  var improvedDoc = [];
  PrevStateDocuments === null || PrevStateDocuments === void 0 ? void 0 : PrevStateDocuments.map(function (preDoc) {
    improvedDoc.push(_extends({}, preDoc, {
      module: "OBPS"
    }));
  });
  documents === null || documents === void 0 ? void 0 : (_documents$documents = documents.documents) === null || _documents$documents === void 0 ? void 0 : _documents$documents.map(function (appDoc) {
    improvedDoc.push(_extends({}, appDoc, {
      module: "OBPS"
    }));
  });

  PrevStateNocDocuments === null || PrevStateNocDocuments === void 0 ? void 0 : PrevStateNocDocuments.map(function (preNocDoc) {
    improvedDoc.push(_extends({}, preNocDoc, {
      module: "NOC"
    }));
  });
  nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$nocDocu = nocDocuments.nocDocuments) === null || _nocDocuments$nocDocu === void 0 ? void 0 : _nocDocuments$nocDocu.map(function (nocDoc) {
    improvedDoc.push(_extends({}, nocDoc, {
      module: "NOC"
    }));
  });
  var _Digit$Hooks$useDocum = Digit.Hooks.useDocumentSearch(improvedDoc, {
      enabled: (improvedDoc === null || improvedDoc === void 0 ? void 0 : improvedDoc.length) > 0 ? true : false
    }),
    pdfDetails = _Digit$Hooks$useDocum.data,
    pdfLoading = _Digit$Hooks$useDocum.isLoading;
  var applicationDocs = [],
    nocAppDocs = [];
  if ((pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles === void 0 ? void 0 : _pdfDetails$pdfFiles.length) > 0) {
    var _pdfDetails$pdfFiles2;
    pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles2 = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles2 === void 0 ? void 0 : _pdfDetails$pdfFiles2.map(function (pdfAppDoc) {
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "OBPS") applicationDocs.push(pdfAppDoc);
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "NOC") nocAppDocs.push(pdfAppDoc);
    });
  }
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useScrutinyDetails(tenantId, value === null || value === void 0 ? void 0 : (_value$data = value.data) === null || _value$data === void 0 ? void 0 : _value$data.scrutinyNumber, {
      enabled: value !== null && value !== void 0 && (_value$data2 = value.data) !== null && _value$data2 !== void 0 && _value$data2.scrutinyNumber ? true : false
    }),
    datafromAPI = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var consumerCode = value === null || value === void 0 ? void 0 : value.applicationNo;
  var fetchBillParams = {
    consumerCode: consumerCode
  };
  var _Digit$Hooks$useFetch = Digit.Hooks.useFetchBillsForBuissnessService(_extends({
      businessService: BusinessService
    }, fetchBillParams, {
      tenantId: tenantId
    }), {
      enabled: consumerCode ? true : false,
      retry: false
    }),
    paymentDetails = _Digit$Hooks$useFetch.data;
  var sendbacktocitizenApp = window.location.href.includes("sendbacktocitizen");
  var routeLink = "/digit-ui/citizen/obps/bpa/" + (additionalDetails === null || additionalDetails === void 0 ? void 0 : additionalDetails.applicationType.toLowerCase()) + "/" + (additionalDetails === null || additionalDetails === void 0 ? void 0 : additionalDetails.serviceType.toLowerCase());
  if (isEditApplication) routeLink = "/digit-ui/citizen/obps/editApplication/bpa/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo);
  if (sendbacktocitizenApp) routeLink = "/digit-ui/citizen/obps/sendbacktocitizen/bpa/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo);
  var tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  var accessData = function accessData(plot) {
    var name = plot;
    return function (originalRow, rowIndex, columns) {
      return originalRow[name];
    };
  };
  var tableColumns = React.useMemo(function () {
    return tableHeader.map(function (ob) {
      return {
        Header: t("" + ob.name),
        accessor: accessData(ob.id),
        id: ob.id
      };
    });
  });

  function getFloorData(block) {
    var _block$building;
    var floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : _block$building.floors.map(function (ob) {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  function getBlockSubOccupancy(index) {
    var returnValueArray = [];
    subOccupancy && subOccupancy["Block_" + (index + 1)] && subOccupancy["Block_" + (index + 1)].map(function (ob) {
      var _ob$i18nKey;
      returnValueArray.push("" + t(stringReplaceAll(ob === null || ob === void 0 ? void 0 : (_ob$i18nKey = ob.i18nKey) === null || _ob$i18nKey === void 0 ? void 0 : _ob$i18nKey.toUpperCase(), "-", "_")));
    });
    return returnValueArray !== null && returnValueArray !== void 0 && returnValueArray.length ? returnValueArray.join(', ') : "NA";
  }

  if (pdfLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 4
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("BPA_STEPPER_SUMMARY_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_NUMBER_LABEL"),
    text: applicationNo ? applicationNo : ""
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_BASIC_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APP_DATE_LABEL"),
    text: convertEpochToDateDMY(Number(data === null || data === void 0 ? void 0 : data.applicationDate))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.applicationType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(data === null || data === void 0 ? void 0 : data.serviceType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.occupancyType
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.riskType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.applicantName
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_PLOT_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/plot-details");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    textStyle: {
      paddingLeft: "12px"
    },
    label: t("BPA_BOUNDARY_PLOT_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta = datafromAPI.planDetail) !== null && _datafromAPI$planDeta !== void 0 && (_datafromAPI$planDeta2 = _datafromAPI$planDeta.planInformation) !== null && _datafromAPI$planDeta2 !== void 0 && _datafromAPI$planDeta2.plotArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta3 = datafromAPI.planDetail) === null || _datafromAPI$planDeta3 === void 0 ? void 0 : (_datafromAPI$planDeta4 = _datafromAPI$planDeta3.planInformation) === null || _datafromAPI$planDeta4 === void 0 ? void 0 : _datafromAPI$planDeta4.plotArea) + " " + t("BPA_SQ_FT_LABEL") : t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_PLOT_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta5 = datafromAPI.planDetail) === null || _datafromAPI$planDeta5 === void 0 ? void 0 : (_datafromAPI$planDeta6 = _datafromAPI$planDeta5.planInformation) === null || _datafromAPI$planDeta6 === void 0 ? void 0 : _datafromAPI$planDeta6.plotNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_KHATHA_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta7 = datafromAPI.planDetail) === null || _datafromAPI$planDeta7 === void 0 ? void 0 : (_datafromAPI$planDeta8 = _datafromAPI$planDeta7.planInformation) === null || _datafromAPI$planDeta8 === void 0 ? void 0 : _datafromAPI$planDeta8.khataNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_HOLDING_NUMBER_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.holdingNumber) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.registrationDetails) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_EDCR_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_EDCR_NO_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$scrutinyNumber = data.scrutinyNumber) === null || _data$scrutinyNumber === void 0 ? void 0 : _data$scrutinyNumber.edcrNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_UPLOADED_PLAN_DIAGRAM")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.updatedDxfFile);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_UPLOADED_PLAN_DXF")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_SCRUNTINY_REPORT_OUTPUT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.planReport);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_SCRUTINY_REPORT_PDF"))), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_BUILDING_EXTRACT_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_TOTAL_BUILT_UP_AREA_HEADER"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta9 = datafromAPI.planDetail) === null || _datafromAPI$planDeta9 === void 0 ? void 0 : (_datafromAPI$planDeta10 = _datafromAPI$planDeta9.blocks) === null || _datafromAPI$planDeta10 === void 0 ? void 0 : (_datafromAPI$planDeta11 = _datafromAPI$planDeta10[0]) === null || _datafromAPI$planDeta11 === void 0 ? void 0 : (_datafromAPI$planDeta12 = _datafromAPI$planDeta11.building) === null || _datafromAPI$planDeta12 === void 0 ? void 0 : _datafromAPI$planDeta12.totalBuitUpArea) + " " + t("BPA_SQ_MTRS_LABEL")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),
    text: datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta13 = datafromAPI.planDetail) === null || _datafromAPI$planDeta13 === void 0 ? void 0 : (_datafromAPI$planDeta14 = _datafromAPI$planDeta13.blocks) === null || _datafromAPI$planDeta14 === void 0 ? void 0 : (_datafromAPI$planDeta15 = _datafromAPI$planDeta14[0]) === null || _datafromAPI$planDeta15 === void 0 ? void 0 : (_datafromAPI$planDeta16 = _datafromAPI$planDeta15.building) === null || _datafromAPI$planDeta16 === void 0 ? void 0 : _datafromAPI$planDeta16.totalFloors
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta17 = datafromAPI.planDetail) === null || _datafromAPI$planDeta17 === void 0 ? void 0 : (_datafromAPI$planDeta18 = _datafromAPI$planDeta17.blocks) === null || _datafromAPI$planDeta18 === void 0 ? void 0 : (_datafromAPI$planDeta19 = _datafromAPI$planDeta18[0]) === null || _datafromAPI$planDeta19 === void 0 ? void 0 : (_datafromAPI$planDeta20 = _datafromAPI$planDeta19.building) === null || _datafromAPI$planDeta20 === void 0 ? void 0 : _datafromAPI$planDeta20.declaredBuildingHeight) + " " + t("BPA_MTRS_LABEL")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_OCC_SUBOCC_HEADER")), datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta21 = datafromAPI.planDetail) === null || _datafromAPI$planDeta21 === void 0 ? void 0 : _datafromAPI$planDeta21.blocks.map(function (block, index) {
    var _datafromAPI$planDeta22, _datafromAPI$planDeta23;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta22 = datafromAPI.planDetail) === null || _datafromAPI$planDeta22 === void 0 ? void 0 : (_datafromAPI$planDeta23 = _datafromAPI$planDeta22.blocks) === null || _datafromAPI$planDeta23 === void 0 ? void 0 : _datafromAPI$planDeta23.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "15px",
        fontSize: "18px"
      }
    }, t("BPA_BLOCK_SUBHEADER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: {
        wordBreak: "break-word"
      },
      label: t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getBlockSubOccupancy(index) === "" ? t("CS_NA") : getBlockSubOccupancy(index)
    })), /*#__PURE__*/React__default.createElement("div", {
      style: {
        overflow: "scroll"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false,
      initSortId: "S N ",
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: function getCellProps(cellInfo) {
        return {
          style: {}
        };
      }
    })));
  }), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
    style: {
      fontSize: "20px"
    }
  }, t("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta24 = datafromAPI.planDetail) !== null && _datafromAPI$planDeta24 !== void 0 && (_datafromAPI$planDeta25 = _datafromAPI$planDeta24.planInformation) !== null && _datafromAPI$planDeta25 !== void 0 && _datafromAPI$planDeta25.demolitionArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta26 = datafromAPI.planDetail) === null || _datafromAPI$planDeta26 === void 0 ? void 0 : (_datafromAPI$planDeta27 = _datafromAPI$planDeta26.planInformation) === null || _datafromAPI$planDeta27 === void 0 ? void 0 : _datafromAPI$planDeta27.demolitionArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NEW_TRADE_DETAILS_HEADER_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/location");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    textStyle: {
      paddingLeft: "12px"
    },
    label: t("BPA_DETAILS_PIN_LABEL"),
    text: (address === null || address === void 0 ? void 0 : address.pincode) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_CITY_LABEL"),
    text: (address === null || address === void 0 ? void 0 : (_address$city = address.city) === null || _address$city === void 0 ? void 0 : _address$city.name) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_LOC_MOHALLA_LABEL"),
    text: (address === null || address === void 0 ? void 0 : (_address$locality = address.locality) === null || _address$locality === void 0 ? void 0 : _address$locality.name) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_DETAILS_SRT_NAME_LABEL"),
    text: (address === null || address === void 0 ? void 0 : address.street) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("ES_NEW_APPLICATION_LOCATION_LANDMARK"),
    text: (address === null || address === void 0 ? void 0 : address.landmark) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_APPLICANT_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/owner-details");
    }
  }), (owners === null || owners === void 0 ? void 0 : owners.owners) && (owners === null || owners === void 0 ? void 0 : owners.owners.map(function (ob, index) {
    var _owners$owners, _ob$gender;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (owners === null || owners === void 0 ? void 0 : (_owners$owners = owners.owners) === null || _owners$owners === void 0 ? void 0 : _owners$owners.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, owners.owners.length > 1 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("COMMON_OWNER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: index == 0 && owners.owners.length == 1 ? {
        paddingLeft: "12px"
      } : {},
      label: t("CORE_COMMON_NAME"),
      text: ob === null || ob === void 0 ? void 0 : ob.name
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_APPLICANT_GENDER_LABEL"),
      text: t(ob === null || ob === void 0 ? void 0 : (_ob$gender = ob.gender) === null || _ob$gender === void 0 ? void 0 : _ob$gender.i18nKey)
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("CORE_COMMON_MOBILE_NUMBER"),
      text: ob === null || ob === void 0 ? void 0 : ob.mobileNumber
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_IS_PRIMARY_OWNER_LABEL"),
      text: "" + (ob === null || ob === void 0 ? void 0 : ob.isPrimaryOwner)
    })));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_DOCUMENT_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/document-details");
    }
  }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: getOrderDocuments(applicationDocs),
    svgStyles: {},
    isSendBackFlow: false,
    isHrLine: true,
    titleStyles: {
      fontSize: "18px",
      lineHeight: "24px",
      "fontWeight": 700,
      marginBottom: "10px"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NOC_DETAILS_SUMMARY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/noc-details");
    }
  }), nocDocuments && (nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.NocDetails.map(function (noc, index) {
    var _nocDocuments$NocDeta, _noc$additionalDetail, _noc$additionalDetail2, _noc$additionalDetail3, _noc$auditDetails;
    return /*#__PURE__*/React__default.createElement("div", {
      key: "noc-" + index,
      style: (nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$NocDeta = nocDocuments.NocDetails) === null || _nocDocuments$NocDeta === void 0 ? void 0 : _nocDocuments$NocDeta.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        marginBottom: "24px"
      }
    }, "" + t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_LABEL"),
      text: noc === null || noc === void 0 ? void 0 : noc.applicationNo
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_NOC_STATUS"),
      text: t("" + (noc === null || noc === void 0 ? void 0 : noc.applicationStatus)),
      textStyle: (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "AUTO_APPROVED" ? {
        color: "#00703C"
      } : {
        color: "#D4351C"
      }
    }), noc !== null && noc !== void 0 && (_noc$additionalDetail = noc.additionalDetails) !== null && _noc$additionalDetail !== void 0 && _noc$additionalDetail.SubmittedOn ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_NOC_SUBMISSION_DATE"),
      text: noc !== null && noc !== void 0 && (_noc$additionalDetail2 = noc.additionalDetails) !== null && _noc$additionalDetail2 !== void 0 && _noc$additionalDetail2.SubmittedOn ? convertEpochToDateDMY(Number(noc === null || noc === void 0 ? void 0 : (_noc$additionalDetail3 = noc.additionalDetails) === null || _noc$additionalDetail3 === void 0 ? void 0 : _noc$additionalDetail3.SubmittedOn)) : "NA"
    }) : null, noc !== null && noc !== void 0 && noc.nocNo ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_APPROVAL_NUMBER_LABEL"),
      text: (noc === null || noc === void 0 ? void 0 : noc.nocNo) || "NA"
    }) : null, (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "REJECTED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "AUTO_APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "AUTO_REJECTED" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_APPROVED_REJECTED_ON_LABEL"),
      text: convertEpochToDateDMY(Number(noc === null || noc === void 0 ? void 0 : (_noc$auditDetails = noc.auditDetails) === null || _noc$auditDetails === void 0 ? void 0 : _noc$auditDetails.lastModifiedTime))
    }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_DOCUMENT_DETAILS_LABEL"),
      text: ""
    }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getOrderDocuments(nocAppDocs === null || nocAppDocs === void 0 ? void 0 : nocAppDocs.filter(function (data) {
        var _data$documentType, _noc$nocType, _noc$nocType$split;
        return data === null || data === void 0 ? void 0 : (_data$documentType = data.documentType) === null || _data$documentType === void 0 ? void 0 : _data$documentType.includes(noc === null || noc === void 0 ? void 0 : (_noc$nocType = noc.nocType) === null || _noc$nocType === void 0 ? void 0 : (_noc$nocType$split = _noc$nocType.split("_")) === null || _noc$nocType$split === void 0 ? void 0 : _noc$nocType$split[0]);
      }), true),
      svgStyles: {},
      isSendBackFlow: false,
      isHrLine: true,
      titleStyles: {
        fontSize: "18px",
        lineHeight: "24px",
        "fontWeight": 700,
        marginBottom: "10px"
      }
    })));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_SUMMARY_FEE_EST")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill$ = paymentDetails.Bill[0]) === null || _paymentDetails$Bill$ === void 0 ? void 0 : (_paymentDetails$Bill$2 = _paymentDetails$Bill$.billDetails[0]) === null || _paymentDetails$Bill$2 === void 0 ? void 0 : _paymentDetails$Bill$2.billAccountDetails.map(function (bill, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("" + bill.taxHeadCode),
      text: "\u20B9 " + (bill === null || bill === void 0 ? void 0 : bill.amount)
    }));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COMMON_TOTAL_AMT"),
    text: "\u20B9 " + ((paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill = paymentDetails.Bill) === null || _paymentDetails$Bill === void 0 ? void 0 : (_paymentDetails$Bill$3 = _paymentDetails$Bill[0]) === null || _paymentDetails$Bill$3 === void 0 ? void 0 : (_paymentDetails$Bill$4 = _paymentDetails$Bill$3.billDetails[0]) === null || _paymentDetails$Bill$4 === void 0 ? void 0 : _paymentDetails$Bill$4.amount) || "0")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_COMMON_TOTAL_AMT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "\u20B9 ", (paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill2 = paymentDetails.Bill) === null || _paymentDetails$Bill2 === void 0 ? void 0 : (_paymentDetails$Bill3 = _paymentDetails$Bill2[0]) === null || _paymentDetails$Bill3 === void 0 ? void 0 : (_paymentDetails$Bill4 = _paymentDetails$Bill3.billDetails[0]) === null || _paymentDetails$Bill4 === void 0 ? void 0 : _paymentDetails$Bill4.amount) || "0"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_SEND_TO_CITIZEN_LABEL"),
    onSubmit: onSubmit
  })));
};

var CheckPage$1 = function CheckPage(_ref) {
  var _user$info, _documents$documents, _nocDocuments$nocDocu, _pdfDetails$pdfFiles, _value$data, _value$data2, _datafromAPI$planDeta, _datafromAPI$planDeta2, _datafromAPI$planDeta3, _datafromAPI$planDeta4, _datafromAPI$planDeta5, _datafromAPI$planDeta6, _datafromAPI$planDeta7, _datafromAPI$planDeta8, _data$scrutinyNumber, _datafromAPI$planDeta9, _datafromAPI$planDeta10, _datafromAPI$planDeta11, _datafromAPI$planDeta12, _datafromAPI$planDeta13, _datafromAPI$planDeta14, _datafromAPI$planDeta15, _datafromAPI$planDeta16, _datafromAPI$planDeta17, _datafromAPI$planDeta18, _datafromAPI$planDeta19, _datafromAPI$planDeta20, _datafromAPI$planDeta21, _datafromAPI$planDeta22, _datafromAPI$planDeta23, _datafromAPI$planDeta24, _datafromAPI$planDeta25, _datafromAPI$planDeta28, _datafromAPI$planDeta29, _datafromAPI$planDeta30, _datafromAPI$planDeta31, _paymentDetails$Bill$, _paymentDetails$Bill$2, _paymentDetails$Bill, _paymentDetails$Bill$3, _paymentDetails$Bill$4, _paymentDetails$Bill2, _paymentDetails$Bill3, _paymentDetails$Bill4;
  var onSubmit = _ref.onSubmit,
    value = _ref.value;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var match = reactRouterDom.useRouteMatch();
  var user = Digit.UserService.getUser();
  var BusinessService;
  if (value.businessService === "BPA_LOW") BusinessService = "BPA.LOW_RISK_PERMIT_FEE";else if (value.businessService === "BPA") BusinessService = "BPA.NC_APP_FEE";else if (value.businessService === "BPA_OC") BusinessService = "BPA.NC_OC_APP_FEE";
  var data = value.data,
    nocDocuments = value.nocDocuments,
    documents = value.documents,
    additionalDetails = value.additionalDetails,
    PrevStateDocuments = value.PrevStateDocuments,
    PrevStateNocDocuments = value.PrevStateNocDocuments,
    applicationNo = value.applicationNo,
    uiFlow = value.uiFlow;
  var tenantId = (user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity) || (value === null || value === void 0 ? void 0 : value.tenantId) || Digit.ULBService.getCurrentTenantId();
  var isEditApplication = window.location.href.includes("editApplication");

  var improvedDoc = [];
  PrevStateDocuments === null || PrevStateDocuments === void 0 ? void 0 : PrevStateDocuments.map(function (preDoc) {
    improvedDoc.push(_extends({}, preDoc, {
      module: "OBPS"
    }));
  });
  documents === null || documents === void 0 ? void 0 : (_documents$documents = documents.documents) === null || _documents$documents === void 0 ? void 0 : _documents$documents.map(function (appDoc) {
    improvedDoc.push(_extends({}, appDoc, {
      module: "OBPS"
    }));
  });

  PrevStateNocDocuments === null || PrevStateNocDocuments === void 0 ? void 0 : PrevStateNocDocuments.map(function (preNocDoc) {
    improvedDoc.push(_extends({}, preNocDoc, {
      module: "NOC"
    }));
  });
  nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$nocDocu = nocDocuments.nocDocuments) === null || _nocDocuments$nocDocu === void 0 ? void 0 : _nocDocuments$nocDocu.map(function (nocDoc) {
    improvedDoc.push(_extends({}, nocDoc, {
      module: "NOC"
    }));
  });
  var _Digit$Hooks$useDocum = Digit.Hooks.useDocumentSearch(improvedDoc, {
      enabled: (improvedDoc === null || improvedDoc === void 0 ? void 0 : improvedDoc.length) > 0 ? true : false
    }),
    pdfDetails = _Digit$Hooks$useDocum.data,
    pdfLoading = _Digit$Hooks$useDocum.isLoading;
  var applicationDocs = [],
    nocAppDocs = [];
  if ((pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles === void 0 ? void 0 : _pdfDetails$pdfFiles.length) > 0) {
    var _pdfDetails$pdfFiles2;
    pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles2 = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles2 === void 0 ? void 0 : _pdfDetails$pdfFiles2.map(function (pdfAppDoc) {
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "OBPS") applicationDocs.push(pdfAppDoc);
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "NOC") nocAppDocs.push(pdfAppDoc);
    });
  }
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useScrutinyDetails(tenantId, value === null || value === void 0 ? void 0 : (_value$data = value.data) === null || _value$data === void 0 ? void 0 : _value$data.scrutinyNumber, {
      enabled: value !== null && value !== void 0 && (_value$data2 = value.data) !== null && _value$data2 !== void 0 && _value$data2.scrutinyNumber ? true : false
    }),
    datafromAPI = _Digit$Hooks$obps$use.data,
    isLoading = _Digit$Hooks$obps$use.isLoading;
  var consumerCode = value === null || value === void 0 ? void 0 : value.applicationNo;
  var fetchBillParams = {
    consumerCode: consumerCode
  };
  var _Digit$Hooks$useFetch = Digit.Hooks.useFetchBillsForBuissnessService(_extends({
      businessService: BusinessService
    }, fetchBillParams, {
      tenantId: tenantId || (value === null || value === void 0 ? void 0 : value.tenantId)
    }), {
      enabled: consumerCode ? true : false,
      retry: false
    }),
    paymentDetails = _Digit$Hooks$useFetch.data;
  var routeLink = !isEditApplication ? "/digit-ui/citizen/obps/ocbpa/" + (additionalDetails === null || additionalDetails === void 0 ? void 0 : additionalDetails.applicationType.toLowerCase()) + "/" + (additionalDetails === null || additionalDetails === void 0 ? void 0 : additionalDetails.serviceType.toLowerCase()) : "/digit-ui/citizen/obps/editApplication/ocbpa/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo);
  var tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  var accessData = function accessData(plot) {
    var name = plot;
    return function (originalRow, rowIndex, columns) {
      return originalRow[name];
    };
  };
  var tableColumns = React.useMemo(function () {
    return tableHeader.map(function (ob) {
      return {
        Header: t("" + ob.name),
        accessor: accessData(ob.id),
        id: ob.id
      };
    });
  });

  function getFloorData(block) {
    var _block$building;
    var floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : _block$building.floors.map(function (ob) {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  function getSubOccupancyValues(index) {
    var _data$bpaData, _data$bpaData$bpaAppr, _data$bpaData$bpaAppr2, _data$bpaData$bpaAppr3;
    var values = data === null || data === void 0 ? void 0 : (_data$bpaData = data.bpaData) === null || _data$bpaData === void 0 ? void 0 : (_data$bpaData$bpaAppr = _data$bpaData.bpaApprovalResponse) === null || _data$bpaData$bpaAppr === void 0 ? void 0 : (_data$bpaData$bpaAppr2 = _data$bpaData$bpaAppr[0]) === null || _data$bpaData$bpaAppr2 === void 0 ? void 0 : (_data$bpaData$bpaAppr3 = _data$bpaData$bpaAppr2.landInfo) === null || _data$bpaData$bpaAppr3 === void 0 ? void 0 : _data$bpaData$bpaAppr3.unit;
    var returnValue = "";
    if ((values === null || values === void 0 ? void 0 : values.length) > 0) {
      var _values$index, _values$index$usageCa;
      var splitArray = (_values$index = values[index]) === null || _values$index === void 0 ? void 0 : (_values$index$usageCa = _values$index.usageCategory) === null || _values$index$usageCa === void 0 ? void 0 : _values$index$usageCa.split(',');
      if (splitArray !== null && splitArray !== void 0 && splitArray.length) {
        var returnValueArray = splitArray.map(function (data) {
          return data ? "" + t("BPA_SUBOCCUPANCYTYPE_" + stringReplaceAll(data === null || data === void 0 ? void 0 : data.toUpperCase(), "-", "_")) : "NA";
        });
        returnValue = returnValueArray.join(', ');
      }
    }
    return returnValue ? returnValue : "NA";
  }
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  if (pdfLoading || isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 4,
    flow: (uiFlow === null || uiFlow === void 0 ? void 0 : uiFlow.flow) === "OCBPA" ? "OCBPA" : ""
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("BPA_STEPPER_SUMMARY_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_NUMBER_LABEL"),
    text: applicationNo ? applicationNo : ""
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_BASIC_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_APP_DATE_LABEL"),
    text: convertEpochToDateDMY(Number(data === null || data === void 0 ? void 0 : data.applicationDate))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.applicationType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(data === null || data === void 0 ? void 0 : data.serviceType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.occupancyType
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.riskType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.applicantName
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_PLOT_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/plot-details");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BOUNDARY_PLOT_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta = datafromAPI.planDetail) !== null && _datafromAPI$planDeta !== void 0 && (_datafromAPI$planDeta2 = _datafromAPI$planDeta.planInformation) !== null && _datafromAPI$planDeta2 !== void 0 && _datafromAPI$planDeta2.plotArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta3 = datafromAPI.planDetail) === null || _datafromAPI$planDeta3 === void 0 ? void 0 : (_datafromAPI$planDeta4 = _datafromAPI$planDeta3.planInformation) === null || _datafromAPI$planDeta4 === void 0 ? void 0 : _datafromAPI$planDeta4.plotArea) + " " + t("BPA_SQ_FT_LABEL") : t("CS_NA"),
    textStyle: {
      paddingLeft: "12px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_PLOT_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta5 = datafromAPI.planDetail) === null || _datafromAPI$planDeta5 === void 0 ? void 0 : (_datafromAPI$planDeta6 = _datafromAPI$planDeta5.planInformation) === null || _datafromAPI$planDeta6 === void 0 ? void 0 : _datafromAPI$planDeta6.plotNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_KHATHA_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta7 = datafromAPI.planDetail) === null || _datafromAPI$planDeta7 === void 0 ? void 0 : (_datafromAPI$planDeta8 = _datafromAPI$planDeta7.planInformation) === null || _datafromAPI$planDeta8 === void 0 ? void 0 : _datafromAPI$planDeta8.khataNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_HOLDING_NUMBER_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.holdingNumber) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.registrationDetails) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "" + t("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, "" + t("BPA_EDCR_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_OC_EDCR_NO_LABEL"),
    text: data === null || data === void 0 ? void 0 : (_data$scrutinyNumber = data.scrutinyNumber) === null || _data$scrutinyNumber === void 0 ? void 0 : _data$scrutinyNumber.edcrNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_UPLOADED_PLAN_DIAGRAM")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.updatedDxfFile);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_UPLOADED_PLAN_DXF")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_SCRUNTINY_REPORT_OUTPUT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.planReport);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_SCRUTINY_REPORT_PDF"))), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, "" + t("BPA_ACTUAL_BUILDING_EXTRACT_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_TOTAL_BUILT_UP_AREA_HEADER"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta9 = datafromAPI.planDetail) !== null && _datafromAPI$planDeta9 !== void 0 && (_datafromAPI$planDeta10 = _datafromAPI$planDeta9.blocks) !== null && _datafromAPI$planDeta10 !== void 0 && (_datafromAPI$planDeta11 = _datafromAPI$planDeta10[0]) !== null && _datafromAPI$planDeta11 !== void 0 && (_datafromAPI$planDeta12 = _datafromAPI$planDeta11.building) !== null && _datafromAPI$planDeta12 !== void 0 && _datafromAPI$planDeta12.totalBuitUpArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta13 = datafromAPI.planDetail) === null || _datafromAPI$planDeta13 === void 0 ? void 0 : (_datafromAPI$planDeta14 = _datafromAPI$planDeta13.blocks) === null || _datafromAPI$planDeta14 === void 0 ? void 0 : (_datafromAPI$planDeta15 = _datafromAPI$planDeta14[0]) === null || _datafromAPI$planDeta15 === void 0 ? void 0 : (_datafromAPI$planDeta16 = _datafromAPI$planDeta15.building) === null || _datafromAPI$planDeta16 === void 0 ? void 0 : _datafromAPI$planDeta16.totalBuitUpArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),
    text: datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta17 = datafromAPI.planDetail) === null || _datafromAPI$planDeta17 === void 0 ? void 0 : (_datafromAPI$planDeta18 = _datafromAPI$planDeta17.blocks) === null || _datafromAPI$planDeta18 === void 0 ? void 0 : (_datafromAPI$planDeta19 = _datafromAPI$planDeta18[0]) === null || _datafromAPI$planDeta19 === void 0 ? void 0 : (_datafromAPI$planDeta20 = _datafromAPI$planDeta19.building) === null || _datafromAPI$planDeta20 === void 0 ? void 0 : _datafromAPI$planDeta20.totalFloors
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta21 = datafromAPI.planDetail) === null || _datafromAPI$planDeta21 === void 0 ? void 0 : (_datafromAPI$planDeta22 = _datafromAPI$planDeta21.blocks) === null || _datafromAPI$planDeta22 === void 0 ? void 0 : (_datafromAPI$planDeta23 = _datafromAPI$planDeta22[0]) === null || _datafromAPI$planDeta23 === void 0 ? void 0 : (_datafromAPI$planDeta24 = _datafromAPI$planDeta23.building) === null || _datafromAPI$planDeta24 === void 0 ? void 0 : _datafromAPI$planDeta24.declaredBuildingHeight) + " " + t("BPA_MTRS_LABEL")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, "" + t("BPA_OCC_SUBOCC_HEADER")), datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta25 = datafromAPI.planDetail) === null || _datafromAPI$planDeta25 === void 0 ? void 0 : _datafromAPI$planDeta25.blocks.map(function (block, index) {
    var _datafromAPI$planDeta26, _datafromAPI$planDeta27;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta26 = datafromAPI.planDetail) === null || _datafromAPI$planDeta26 === void 0 ? void 0 : (_datafromAPI$planDeta27 = _datafromAPI$planDeta26.blocks) === null || _datafromAPI$planDeta27 === void 0 ? void 0 : _datafromAPI$planDeta27.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "15px"
      }
    }, "" + t("BPA_BLOCK_SUBHEADER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: {
        wordBreak: "break-word"
      },
      label: "" + t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getSubOccupancyValues(index)
    })), /*#__PURE__*/React__default.createElement("div", {
      style: {
        overflowX: "scroll"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false,
      initSortId: "S N ",
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: function getCellProps(cellInfo) {
        return {
          style: {}
        };
      }
    })));
  }), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, "" + t("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: "" + t("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta28 = datafromAPI.planDetail) !== null && _datafromAPI$planDeta28 !== void 0 && (_datafromAPI$planDeta29 = _datafromAPI$planDeta28.planInformation) !== null && _datafromAPI$planDeta29 !== void 0 && _datafromAPI$planDeta29.demolitionArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta30 = datafromAPI.planDetail) === null || _datafromAPI$planDeta30 === void 0 ? void 0 : (_datafromAPI$planDeta31 = _datafromAPI$planDeta30.planInformation) === null || _datafromAPI$planDeta31 === void 0 ? void 0 : _datafromAPI$planDeta31.demolitionArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_DOCUMENT_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/document-details");
    }
  }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: getOrderDocuments(applicationDocs),
    svgStyles: {},
    isSendBackFlow: false,
    isHrLine: true,
    titleStyles: {
      fontSize: "18px",
      lineHeight: "24px",
      "fontWeight": 700,
      marginBottom: "10px"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NOC_DETAILS_SUMMARY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/noc-details");
    }
  }), nocDocuments && (nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.NocDetails.map(function (noc, index) {
    var _nocDocuments$NocDeta, _noc$additionalDetail, _noc$additionalDetail2, _noc$additionalDetail3, _noc$auditDetails;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$NocDeta = nocDocuments.NocDetails) === null || _nocDocuments$NocDeta === void 0 ? void 0 : _nocDocuments$NocDeta.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        marginBottom: "24px"
      }
    }, "" + t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_LABEL"),
      text: noc === null || noc === void 0 ? void 0 : noc.applicationNo
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_NOC_STATUS"),
      text: t("" + (noc === null || noc === void 0 ? void 0 : noc.applicationStatus)),
      textStyle: (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "AUTO_APPROVED" ? {
        color: "#00703C"
      } : {
        color: "#D4351C"
      }
    }), noc !== null && noc !== void 0 && (_noc$additionalDetail = noc.additionalDetails) !== null && _noc$additionalDetail !== void 0 && _noc$additionalDetail.SubmittedOn ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_NOC_SUBMISSION_DATE"),
      text: noc !== null && noc !== void 0 && (_noc$additionalDetail2 = noc.additionalDetails) !== null && _noc$additionalDetail2 !== void 0 && _noc$additionalDetail2.SubmittedOn ? convertEpochToDateDMY(Number(noc === null || noc === void 0 ? void 0 : (_noc$additionalDetail3 = noc.additionalDetails) === null || _noc$additionalDetail3 === void 0 ? void 0 : _noc$additionalDetail3.SubmittedOn)) : "NA"
    }) : null, noc !== null && noc !== void 0 && noc.nocNo ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_APPROVAL_NUMBER_LABEL"),
      text: (noc === null || noc === void 0 ? void 0 : noc.nocNo) || "NA"
    }) : null, (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "REJECTED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "AUTO_APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) === "AUTO_REJECTED" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("BPA_APPROVED_REJECTED_ON_LABEL"),
      text: convertEpochToDateDMY(Number(noc === null || noc === void 0 ? void 0 : (_noc$auditDetails = noc.auditDetails) === null || _noc$auditDetails === void 0 ? void 0 : _noc$auditDetails.lastModifiedTime))
    }) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_DOCUMENT_DETAILS_LABEL"),
      text: ""
    }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getOrderDocuments(nocAppDocs === null || nocAppDocs === void 0 ? void 0 : nocAppDocs.filter(function (data) {
        var _data$documentType, _noc$nocType, _noc$nocType$split;
        return data === null || data === void 0 ? void 0 : (_data$documentType = data.documentType) === null || _data$documentType === void 0 ? void 0 : _data$documentType.includes(noc === null || noc === void 0 ? void 0 : (_noc$nocType = noc.nocType) === null || _noc$nocType === void 0 ? void 0 : (_noc$nocType$split = _noc$nocType.split("_")) === null || _noc$nocType$split === void 0 ? void 0 : _noc$nocType$split[0]);
      }), true),
      svgStyles: {},
      isSendBackFlow: false,
      isHrLine: true,
      titleStyles: {
        fontSize: "18px",
        lineHeight: "24px",
        "fontWeight": 700,
        marginBottom: "10px"
      }
    })));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, "" + t("BPA_SUMMARY_FEE_EST")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill$ = paymentDetails.Bill[0]) === null || _paymentDetails$Bill$ === void 0 ? void 0 : (_paymentDetails$Bill$2 = _paymentDetails$Bill$.billDetails[0]) === null || _paymentDetails$Bill$2 === void 0 ? void 0 : _paymentDetails$Bill$2.billAccountDetails.map(function (bill, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: "" + t("" + bill.taxHeadCode),
      text: "\u20B9 " + (bill === null || bill === void 0 ? void 0 : bill.amount)
    }));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COMMON_TOTAL_AMT"),
    text: "\u20B9 " + ((paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill = paymentDetails.Bill) === null || _paymentDetails$Bill === void 0 ? void 0 : (_paymentDetails$Bill$3 = _paymentDetails$Bill[0]) === null || _paymentDetails$Bill$3 === void 0 ? void 0 : (_paymentDetails$Bill$4 = _paymentDetails$Bill$3.billDetails[0]) === null || _paymentDetails$Bill$4 === void 0 ? void 0 : _paymentDetails$Bill$4.amount) || "0")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_COMMON_TOTAL_AMT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "\u20B9 ", (paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$Bill2 = paymentDetails.Bill) === null || _paymentDetails$Bill2 === void 0 ? void 0 : (_paymentDetails$Bill3 = _paymentDetails$Bill2[0]) === null || _paymentDetails$Bill3 === void 0 ? void 0 : (_paymentDetails$Bill4 = _paymentDetails$Bill3.billDetails[0]) === null || _paymentDetails$Bill4 === void 0 ? void 0 : _paymentDetails$Bill4.amount) || "0"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_SEND_TO_CITIZEN_LABEL"),
    onSubmit: onSubmit
  })));
};

var CheckPage$2 = function CheckPage(_ref) {
  var _user$info, _value$data, _value$uiFlow, _documents$documents, _nocDocuments$nocDocu, _pdfDetails$pdfFiles, _value$uiFlow3, _datafromAPI$planDeta, _datafromAPI$planDeta2, _datafromAPI$planDeta3, _datafromAPI$planDeta4, _datafromAPI$planDeta5, _datafromAPI$planDeta6, _datafromAPI$planDeta7, _datafromAPI$planDeta8, _value$uiFlow4, _data$scrutinyNumber, _value$uiFlow5, _datafromAPI$planDeta9, _datafromAPI$planDeta10, _datafromAPI$planDeta11, _datafromAPI$planDeta12, _datafromAPI$planDeta13, _datafromAPI$planDeta14, _datafromAPI$planDeta15, _datafromAPI$planDeta16, _datafromAPI$planDeta17, _datafromAPI$planDeta18, _datafromAPI$planDeta19, _datafromAPI$planDeta20, _datafromAPI$planDeta21, _datafromAPI$planDeta22, _datafromAPI$planDeta23, _datafromAPI$planDeta24, _datafromAPI$planDeta25, _datafromAPI$planDeta26, _datafromAPI$planDeta27, _datafromAPI$planDeta28, _datafromAPI$planDeta29, _value$uiFlow6, _address$city, _address$locality, _reciept_data$Payment, _reciept_data$Payment2, _reciept_data$Payment3, _reciept_data$Payment4, _reciept_data$Payment5, _reciept_data$Payment6, _reciept_data$Payment7, _reciept_data$Payment8, _reciept_data$Payment9, _reciept_data$Payment10, _reciept_data$Payment11, _reciept_data$Payment12, _reciept_data$Payment13, _reciept_data$Payment14, _reciept_data$Payment15, _reciept_data$Payment16, _reciept_data$Payment17, _reciept_data$Payment18, _reciept_data$Payment19, _reciept_data$Payment20, _reciept_data$Payment21, _workflowDetails$data;
  var value = _ref.value;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var match = reactRouterDom.useRouteMatch();
  var user = Digit.UserService.getUser(),
    BusinessService;
  var tenantId = user === null || user === void 0 ? void 0 : (_user$info = user.info) === null || _user$info === void 0 ? void 0 : _user$info.permanentCity;
  var _useState = React.useState(null),
    selectedAction = _useState[0],
    setSelectedAction = _useState[1];
  var _useState2 = React.useState(false),
    showModal = _useState2[0],
    setShowModal = _useState2[1];
  var _useState3 = React.useState(null),
    showToast = _useState3[0],
    setShowToast = _useState3[1];
  var datafromAPI = value === null || value === void 0 ? void 0 : (_value$data = value.data) === null || _value$data === void 0 ? void 0 : _value$data.edcrDetails;
  var queryClient = reactQuery.useQueryClient();
  var data = value.data,
    address = value.address,
    owners = value.owners,
    nocDocuments = value.nocDocuments,
    documents = value.documents,
    subOccupancy = value.subOccupancy,
    PrevStateDocuments = value.PrevStateDocuments,
    PrevStateNocDocuments = value.PrevStateNocDocuments,
    applicationNo = value.applicationNo;
  var routeLink = "/digit-ui/citizen/obps/sendbacktocitizen/" + (value.businessService == "BPA_OC" ? "ocbpa" : "bpa") + "/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo);
  if ((value === null || value === void 0 ? void 0 : (_value$uiFlow = value.uiFlow) === null || _value$uiFlow === void 0 ? void 0 : _value$uiFlow.flow) === "OCBPA") routeLink = "/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo);
  if (value.businessService === "BPA_LOW") BusinessService = "BPA.LOW_RISK_PERMIT_FEE";else if (value.businessService === "BPA") BusinessService = "BPA.NC_APP_FEE";else BusinessService = "BPA.NC_OC_APP_FEE";

  var improvedDoc = [];
  PrevStateDocuments === null || PrevStateDocuments === void 0 ? void 0 : PrevStateDocuments.map(function (preDoc) {
    improvedDoc.push(_extends({}, preDoc, {
      module: "OBPS"
    }));
  });
  documents === null || documents === void 0 ? void 0 : (_documents$documents = documents.documents) === null || _documents$documents === void 0 ? void 0 : _documents$documents.map(function (appDoc) {
    improvedDoc.push(_extends({}, appDoc, {
      module: "OBPS"
    }));
  });

  PrevStateNocDocuments === null || PrevStateNocDocuments === void 0 ? void 0 : PrevStateNocDocuments.map(function (preNocDoc) {
    improvedDoc.push(_extends({}, preNocDoc, {
      module: "NOC"
    }));
  });
  nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$nocDocu = nocDocuments.nocDocuments) === null || _nocDocuments$nocDocu === void 0 ? void 0 : _nocDocuments$nocDocu.map(function (nocDoc) {
    improvedDoc.push(_extends({}, nocDoc, {
      module: "NOC"
    }));
  });
  var _Digit$Hooks$useDocum = Digit.Hooks.useDocumentSearch(improvedDoc, {
      enabled: (improvedDoc === null || improvedDoc === void 0 ? void 0 : improvedDoc.length) > 0 ? true : false
    }),
    pdfDetails = _Digit$Hooks$useDocum.data,
    pdfLoading = _Digit$Hooks$useDocum.isLoading;
  var applicationDocs = [],
    nocAppDocs = [];
  if ((pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles === void 0 ? void 0 : _pdfDetails$pdfFiles.length) > 0) {
    var _pdfDetails$pdfFiles2;
    pdfDetails === null || pdfDetails === void 0 ? void 0 : (_pdfDetails$pdfFiles2 = pdfDetails.pdfFiles) === null || _pdfDetails$pdfFiles2 === void 0 ? void 0 : _pdfDetails$pdfFiles2.map(function (pdfAppDoc) {
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "OBPS") applicationDocs.push(pdfAppDoc);
      if ((pdfAppDoc === null || pdfAppDoc === void 0 ? void 0 : pdfAppDoc.module) == "NOC") nocAppDocs.push(pdfAppDoc);
    });
  }
  var _Digit$Hooks$useRecie = Digit.Hooks.useRecieptSearch({
      tenantId: value === null || value === void 0 ? void 0 : value.tenantId,
      businessService: BusinessService,
      consumerCodes: value === null || value === void 0 ? void 0 : value.applicationNo
    }, {
      enabled: value !== null && value !== void 0 && value.applicationNo && BusinessService && value !== null && value !== void 0 && value.tenantId ? true : false
    }),
    reciept_data = _Digit$Hooks$useRecie.data,
    recieptDataLoading = _Digit$Hooks$useRecie.isLoading;
  var mutation = Digit.Hooks.obps.useObpsAPI(value === null || value === void 0 ? void 0 : value.tenantId, false);
  var workflowDetails = Digit.Hooks.useWorkflowDetails({
    tenantId: value === null || value === void 0 ? void 0 : value.tenantId,
    id: value === null || value === void 0 ? void 0 : value.applicationNo,
    moduleCode: "OBPS",
    config: {
      enabled: value !== null && value !== void 0 && value.applicationNo && value !== null && value !== void 0 && value.tenantId ? true : false
    }
  });
  var closeToast = function closeToast() {
    setShowToast(null);
  };
  var closeModal = function closeModal() {
    setSelectedAction(null);
    setShowModal(false);
  };
  var submitAction = function submitAction(workflow) {
    var _value$uiFlow2;
    var bpaData = cloneDeep_1(value);
    bpaData.assignee = [];
    var isOCBPS = (value === null || value === void 0 ? void 0 : (_value$uiFlow2 = value.uiFlow) === null || _value$uiFlow2 === void 0 ? void 0 : _value$uiFlow2.flow) === "OCBPA" ? true : false;
    var formdata = convertToBPAObject(bpaData, isOCBPS, true);
    mutation.mutate({
      BPA: _extends({}, formdata === null || formdata === void 0 ? void 0 : formdata.BPA, {
        workflow: workflow
      })
    }, {
      onError: function onError(error, variables) {
        var _error$response, _error$response$data, _error$response$data$;
        setShowModal(false);
        setShowToast({
          key: "error",
          action: (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.Errors[0]) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message) || error
        });
        setTimeout(closeToast, 5000);
      },
      onSuccess: function onSuccess(data, variables) {
        setShowModal(false);
        setShowToast({
          key: "success",
          action: selectedAction
        });
        setTimeout(closeToast, 5000);
        queryClient.invalidateQueries("BPA_DETAILS_PAGE");
        queryClient.invalidateQueries("workFlowDetails");
        history.replace("/digit-ui/citizen/obps/sendbacktocitizen/ocbpa/" + (value === null || value === void 0 ? void 0 : value.tenantId) + "/" + (value === null || value === void 0 ? void 0 : value.applicationNo) + "/acknowledgement", {
          data: value === null || value === void 0 ? void 0 : value.applicationNo
        });
      }
    });
  };
  var tableHeader = [{
    name: "BPA_TABLE_COL_FLOOR",
    id: "Floor"
  }, {
    name: "BPA_TABLE_COL_LEVEL",
    id: "Level"
  }, {
    name: "BPA_TABLE_COL_OCCUPANCY",
    id: "Occupancy"
  }, {
    name: "BPA_TABLE_COL_BUILDUPAREA",
    id: "BuildupArea"
  }, {
    name: "BPA_TABLE_COL_FLOORAREA",
    id: "FloorArea"
  }, {
    name: "BPA_TABLE_COL_CARPETAREA",
    id: "CarpetArea"
  }];
  var accessData = function accessData(plot) {
    var name = plot;
    return function (originalRow, rowIndex, columns) {
      return originalRow[name];
    };
  };
  var tableColumns = React.useMemo(function () {
    return tableHeader.map(function (ob) {
      return {
        Header: t("" + ob.name),
        accessor: accessData(ob.id),
        id: ob.id
      };
    });
  });
  function onActionSelect(action) {
    setSelectedAction("FORWARD");
    setShowModal(true);
  }
  function getFloorData(block) {
    var _block$building;
    var floors = [];
    block === null || block === void 0 ? void 0 : (_block$building = block.building) === null || _block$building === void 0 ? void 0 : _block$building.floors.map(function (ob) {
      var _ob$occupancies, _ob$occupancies$, _ob$occupancies2, _ob$occupancies2$, _ob$occupancies3, _ob$occupancies3$, _ob$occupancies4, _ob$occupancies4$;
      floors.push({
        Floor: t("BPA_FLOOR_NAME_" + ob.number),
        Level: ob.number,
        Occupancy: t("" + ((_ob$occupancies = ob.occupancies) === null || _ob$occupancies === void 0 ? void 0 : (_ob$occupancies$ = _ob$occupancies[0]) === null || _ob$occupancies$ === void 0 ? void 0 : _ob$occupancies$.type)),
        BuildupArea: (_ob$occupancies2 = ob.occupancies) === null || _ob$occupancies2 === void 0 ? void 0 : (_ob$occupancies2$ = _ob$occupancies2[0]) === null || _ob$occupancies2$ === void 0 ? void 0 : _ob$occupancies2$.builtUpArea,
        FloorArea: ((_ob$occupancies3 = ob.occupancies) === null || _ob$occupancies3 === void 0 ? void 0 : (_ob$occupancies3$ = _ob$occupancies3[0]) === null || _ob$occupancies3$ === void 0 ? void 0 : _ob$occupancies3$.floorArea) || 0,
        CarpetArea: ((_ob$occupancies4 = ob.occupancies) === null || _ob$occupancies4 === void 0 ? void 0 : (_ob$occupancies4$ = _ob$occupancies4[0]) === null || _ob$occupancies4$ === void 0 ? void 0 : _ob$occupancies4$.CarpetArea) || 0,
        key: t("BPA_FLOOR_NAME_" + ob.number)
      });
    });
    return floors;
  }
  function routeTo(jumpTo) {
    location.href = jumpTo;
  }
  function getBlockSubOccupancy(index) {
    var subOccupancyString = "";
    subOccupancy["Block_" + (index + 1)] && subOccupancy["Block_" + (index + 1)].map(function (ob) {
      var _ob$i18nKey;
      subOccupancyString += t(stringReplaceAll(ob === null || ob === void 0 ? void 0 : (_ob$i18nKey = ob.i18nKey) === null || _ob$i18nKey === void 0 ? void 0 : _ob$i18nKey.toUpperCase(), "-", "_")) + ", ";
    });
    return subOccupancyString;
  }
  React.useEffect(function () {
    switch (selectedAction) {
      case "FORWARD":
        setShowModal(true);
    }
  }, [selectedAction]);
  if (pdfLoading || recieptDataLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 4,
    flow: (value === null || value === void 0 ? void 0 : (_value$uiFlow3 = value.uiFlow) === null || _value$uiFlow3 === void 0 ? void 0 : _value$uiFlow3.flow) === "OCBPA" ? "OCBPA" : ""
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, null, t("BPA_STEPPER_SUMMARY_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_NUMBER_LABEL"),
    text: applicationNo ? applicationNo : ""
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_BASIC_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APP_DATE_LABEL"),
    text: convertEpochToDateDMY(Number(data === null || data === void 0 ? void 0 : data.applicationDate))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.applicationType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_SERVICE_TYPE_LABEL"),
    text: t(data === null || data === void 0 ? void 0 : data.serviceType)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_OCCUPANCY_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.occupancyType
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_RISK_TYPE_LABEL"),
    text: t("WF_BPA_" + (data === null || data === void 0 ? void 0 : data.riskType))
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BASIC_DETAILS_APPLICATION_NAME_LABEL"),
    text: data === null || data === void 0 ? void 0 : data.applicantName
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_PLOT_DETAILS_TITLE")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BOUNDARY_PLOT_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta = datafromAPI.planDetail) !== null && _datafromAPI$planDeta !== void 0 && (_datafromAPI$planDeta2 = _datafromAPI$planDeta.planInformation) !== null && _datafromAPI$planDeta2 !== void 0 && _datafromAPI$planDeta2.plotArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta3 = datafromAPI.planDetail) === null || _datafromAPI$planDeta3 === void 0 ? void 0 : (_datafromAPI$planDeta4 = _datafromAPI$planDeta3.planInformation) === null || _datafromAPI$planDeta4 === void 0 ? void 0 : _datafromAPI$planDeta4.plotArea) + " " + t("BPA_SQ_FT_LABEL") : t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_PLOT_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta5 = datafromAPI.planDetail) === null || _datafromAPI$planDeta5 === void 0 ? void 0 : (_datafromAPI$planDeta6 = _datafromAPI$planDeta5.planInformation) === null || _datafromAPI$planDeta6 === void 0 ? void 0 : _datafromAPI$planDeta6.plotNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_KHATHA_NUMBER_LABEL"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta7 = datafromAPI.planDetail) === null || _datafromAPI$planDeta7 === void 0 ? void 0 : (_datafromAPI$planDeta8 = _datafromAPI$planDeta7.planInformation) === null || _datafromAPI$planDeta8 === void 0 ? void 0 : _datafromAPI$planDeta8.khataNo) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_HOLDING_NUMBER_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.holdingNumber) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_BOUNDARY_LAND_REG_DETAIL_LABEL"),
    text: (data === null || data === void 0 ? void 0 : data.registrationDetails) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_STEPPER_SCRUTINY_DETAILS_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t((value === null || value === void 0 ? void 0 : (_value$uiFlow4 = value.uiFlow) === null || _value$uiFlow4 === void 0 ? void 0 : _value$uiFlow4.flow) === "OCBPA" ? "BPA_OC_EDCR_NO_LABEL" : "BPA_EDCR_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_EDCR_NO_LABEL"),
    text: (data === null || data === void 0 ? void 0 : (_data$scrutinyNumber = data.scrutinyNumber) === null || _data$scrutinyNumber === void 0 ? void 0 : _data$scrutinyNumber.edcrNumber) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_UPLOADED_PLAN_DIAGRAM")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.updatedDxfFile);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_UPLOADED_PLAN_DXF")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_SCRUNTINY_REPORT_OUTPUT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.PDFSvg, null),
    onClick: function onClick() {
      return routeTo(datafromAPI === null || datafromAPI === void 0 ? void 0 : datafromAPI.planReport);
    }
  }), /*#__PURE__*/React__default.createElement("p", {
    style: {
      marginTop: "8px",
      marginBottom: "20px",
      textAlign: "Left",
      fontSize: "16px",
      lineHeight: "19px",
      color: "#505A5F",
      fontWeight: "400"
    }
  }, t("BPA_SCRUTINY_REPORT_PDF"))), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, (value === null || value === void 0 ? void 0 : (_value$uiFlow5 = value.uiFlow) === null || _value$uiFlow5 === void 0 ? void 0 : _value$uiFlow5.flow) === "OCBPA" ? t("BPA_ACTUAL_BUILDING_EXTRACT_HEADER") : t("BPA_BUILDING_EXTRACT_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_TOTAL_BUILT_UP_AREA_HEADER"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta9 = datafromAPI.planDetail) !== null && _datafromAPI$planDeta9 !== void 0 && (_datafromAPI$planDeta10 = _datafromAPI$planDeta9.blocks) !== null && _datafromAPI$planDeta10 !== void 0 && (_datafromAPI$planDeta11 = _datafromAPI$planDeta10[0]) !== null && _datafromAPI$planDeta11 !== void 0 && (_datafromAPI$planDeta12 = _datafromAPI$planDeta11.building) !== null && _datafromAPI$planDeta12 !== void 0 && _datafromAPI$planDeta12.totalBuitUpArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta13 = datafromAPI.planDetail) === null || _datafromAPI$planDeta13 === void 0 ? void 0 : (_datafromAPI$planDeta14 = _datafromAPI$planDeta13.blocks) === null || _datafromAPI$planDeta14 === void 0 ? void 0 : (_datafromAPI$planDeta15 = _datafromAPI$planDeta14[0]) === null || _datafromAPI$planDeta15 === void 0 ? void 0 : (_datafromAPI$planDeta16 = _datafromAPI$planDeta15.building) === null || _datafromAPI$planDeta16 === void 0 ? void 0 : _datafromAPI$planDeta16.totalBuitUpArea) + " " + t("BPA_SQ_MTRS_LABEL") : t("NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_SCRUTINY_DETAILS_NUMBER_OF_FLOORS_LABEL"),
    text: datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta17 = datafromAPI.planDetail) === null || _datafromAPI$planDeta17 === void 0 ? void 0 : (_datafromAPI$planDeta18 = _datafromAPI$planDeta17.blocks) === null || _datafromAPI$planDeta18 === void 0 ? void 0 : (_datafromAPI$planDeta19 = _datafromAPI$planDeta18[0]) === null || _datafromAPI$planDeta19 === void 0 ? void 0 : (_datafromAPI$planDeta20 = _datafromAPI$planDeta19.building) === null || _datafromAPI$planDeta20 === void 0 ? void 0 : _datafromAPI$planDeta20.totalFloors
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_HEIGHT_FROM_GROUND_LEVEL_FROM_MUMTY"),
    text: (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta21 = datafromAPI.planDetail) === null || _datafromAPI$planDeta21 === void 0 ? void 0 : (_datafromAPI$planDeta22 = _datafromAPI$planDeta21.blocks) === null || _datafromAPI$planDeta22 === void 0 ? void 0 : (_datafromAPI$planDeta23 = _datafromAPI$planDeta22[0]) === null || _datafromAPI$planDeta23 === void 0 ? void 0 : (_datafromAPI$planDeta24 = _datafromAPI$planDeta23.building) === null || _datafromAPI$planDeta24 === void 0 ? void 0 : _datafromAPI$planDeta24.declaredBuildingHeight) + " " + t("BPA_MTRS_LABEL")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_OCC_SUBOCC_HEADER")), datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta25 = datafromAPI.planDetail) === null || _datafromAPI$planDeta25 === void 0 ? void 0 : _datafromAPI$planDeta25.blocks.map(function (block, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, {
      style: {
        marginTop: "15px"
      }
    }, t("BPA_BLOCK_SUBHEADER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      textStyle: {
        wordBreak: "break-word"
      },
      label: t("BPA_SUB_OCCUPANCY_LABEL"),
      text: getBlockSubOccupancy(index) === "" ? t("CS_NA") : getBlockSubOccupancy(index)
    })), /*#__PURE__*/React__default.createElement("div", {
      style: {
        overflow: "scroll"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Table, {
      className: "customTable table-fixed-first-column table-border-style",
      t: t,
      disableSort: false,
      autoSort: true,
      manualPagination: false,
      isPaginationRequired: false,
      initSortId: "S N ",
      data: getFloorData(block),
      columns: tableColumns,
      getCellProps: function getCellProps(cellInfo) {
        return {
          style: {}
        };
      }
    })));
  }), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_APP_DETAILS_DEMOLITION_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, {
    style: {
      border: "none"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_DEMOLITION_AREA_LABEL"),
    text: datafromAPI !== null && datafromAPI !== void 0 && (_datafromAPI$planDeta26 = datafromAPI.planDetail) !== null && _datafromAPI$planDeta26 !== void 0 && (_datafromAPI$planDeta27 = _datafromAPI$planDeta26.planInformation) !== null && _datafromAPI$planDeta27 !== void 0 && _datafromAPI$planDeta27.demolitionArea ? (datafromAPI === null || datafromAPI === void 0 ? void 0 : (_datafromAPI$planDeta28 = datafromAPI.planDetail) === null || _datafromAPI$planDeta28 === void 0 ? void 0 : (_datafromAPI$planDeta29 = _datafromAPI$planDeta28.planInformation) === null || _datafromAPI$planDeta29 === void 0 ? void 0 : _datafromAPI$planDeta29.demolitionArea) + " " + t("BPA_SQ_MTRS_LABEL") + " " : t("CS_NA")
  }))), (value === null || value === void 0 ? void 0 : (_value$uiFlow6 = value.uiFlow) === null || _value$uiFlow6 === void 0 ? void 0 : _value$uiFlow6.flow) !== "OCBPA" ? /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NEW_TRADE_DETAILS_HEADER_DETAILS")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_DETAILS_PIN_LABEL"),
    text: (address === null || address === void 0 ? void 0 : address.pincode) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_CITY_LABEL"),
    text: (address === null || address === void 0 ? void 0 : (_address$city = address.city) === null || _address$city === void 0 ? void 0 : _address$city.name) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_LOC_MOHALLA_LABEL"),
    text: (address === null || address === void 0 ? void 0 : (_address$locality = address.locality) === null || _address$locality === void 0 ? void 0 : _address$locality.name) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_DETAILS_SRT_NAME_LABEL"),
    text: (address === null || address === void 0 ? void 0 : address.street) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("ES_NEW_APPLICATION_LOCATION_LANDMARK"),
    text: (address === null || address === void 0 ? void 0 : address.landmark) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_APPLICANT_DETAILS_HEADER")), (owners === null || owners === void 0 ? void 0 : owners.owners) && (owners === null || owners === void 0 ? void 0 : owners.owners.map(function (ob, index) {
    var _ob$gender;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, owners.owners.length > 1 && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("COMMON_OWNER"), " ", index + 1), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("CORE_COMMON_NAME"),
      text: ob === null || ob === void 0 ? void 0 : ob.name
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_APPLICANT_GENDER_LABEL"),
      text: t(ob === null || ob === void 0 ? void 0 : (_ob$gender = ob.gender) === null || _ob$gender === void 0 ? void 0 : _ob$gender.i18nKey)
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("CORE_COMMON_MOBILE_NUMBER"),
      text: ob === null || ob === void 0 ? void 0 : ob.mobileNumber
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_IS_PRIMARY_OWNER_LABEL"),
      text: "" + (ob === null || ob === void 0 ? void 0 : ob.isPrimaryOwner)
    })));
  })))) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_DOCUMENT_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-10px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/document-details");
    }
  }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
    documents: getOrderDocuments(applicationDocs),
    svgStyles: {},
    isSendBackFlow: false,
    isHrLine: true,
    titleStyles: {
      fontSize: "18px",
      lineHeight: "24px",
      "fontWeight": 700,
      marginBottom: "10px"
    }
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_NOC_DETAILS_SUMMARY")), nocDocuments && (nocDocuments === null || nocDocuments === void 0 ? void 0 : nocDocuments.NocDetails.map(function (noc, index) {
    var _nocDocuments$NocDeta;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index,
      style: (nocDocuments === null || nocDocuments === void 0 ? void 0 : (_nocDocuments$NocDeta = nocDocuments.NocDetails) === null || _nocDocuments$NocDeta === void 0 ? void 0 : _nocDocuments$NocDeta.length) > 1 ? {
        marginTop: "19px",
        background: "#FAFAFA",
        border: "1px solid #D6D5D4",
        borderRadius: "4px",
        padding: "8px",
        lineHeight: "19px",
        maxWidth: "960px",
        minWidth: "280px"
      } : {}
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      style: {
        marginBottom: "24px"
      }
    }, "" + t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_" + (noc === null || noc === void 0 ? void 0 : noc.nocType) + "_LABEL"),
      text: noc === null || noc === void 0 ? void 0 : noc.applicationNo
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_NOC_STATUS"),
      text: t("" + (noc === null || noc === void 0 ? void 0 : noc.applicationStatus)),
      textStyle: (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "APPROVED" || (noc === null || noc === void 0 ? void 0 : noc.applicationStatus) == "AUTO_APPROVED" ? {
        color: "#00703C"
      } : {
        color: "#D4351C"
      }
    }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("BPA_DOCUMENT_DETAILS_LABEL"),
      text: ""
    }), /*#__PURE__*/React__default.createElement(DocumentsPreview, {
      documents: getOrderDocuments(nocAppDocs === null || nocAppDocs === void 0 ? void 0 : nocAppDocs.filter(function (data) {
        var _data$documentType, _noc$nocType, _noc$nocType$split;
        return data === null || data === void 0 ? void 0 : (_data$documentType = data.documentType) === null || _data$documentType === void 0 ? void 0 : _data$documentType.includes(noc === null || noc === void 0 ? void 0 : (_noc$nocType = noc.nocType) === null || _noc$nocType === void 0 ? void 0 : (_noc$nocType$split = _noc$nocType.split("_")) === null || _noc$nocType$split === void 0 ? void 0 : _noc$nocType$split[0]);
      }), true),
      svgStyles: {},
      isSendBackFlow: false,
      isHrLine: true,
      titleStyles: {
        fontSize: "18px",
        lineHeight: "24px",
        "fontWeight": 700,
        marginBottom: "10px"
      }
    })));
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSubHeader, null, t("BPA_SUMMARY_FEE_EST")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment = reciept_data.Payments) === null || _reciept_data$Payment === void 0 ? void 0 : (_reciept_data$Payment2 = _reciept_data$Payment[0]) === null || _reciept_data$Payment2 === void 0 ? void 0 : (_reciept_data$Payment3 = _reciept_data$Payment2.paymentDetails) === null || _reciept_data$Payment3 === void 0 ? void 0 : (_reciept_data$Payment4 = _reciept_data$Payment3[0]) === null || _reciept_data$Payment4 === void 0 ? void 0 : (_reciept_data$Payment5 = _reciept_data$Payment4.bill) === null || _reciept_data$Payment5 === void 0 ? void 0 : (_reciept_data$Payment6 = _reciept_data$Payment5.billDetails) === null || _reciept_data$Payment6 === void 0 ? void 0 : (_reciept_data$Payment7 = _reciept_data$Payment6[0]) === null || _reciept_data$Payment7 === void 0 ? void 0 : _reciept_data$Payment7.billAccountDetails.map(function (bill, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("" + bill.taxHeadCode),
      text: "\u20B9 " + (bill === null || bill === void 0 ? void 0 : bill.amount)
    }));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COMMON_TOTAL_AMT"),
    text: "\u20B9 " + ((reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment8 = reciept_data.Payments) === null || _reciept_data$Payment8 === void 0 ? void 0 : (_reciept_data$Payment9 = _reciept_data$Payment8[0]) === null || _reciept_data$Payment9 === void 0 ? void 0 : (_reciept_data$Payment10 = _reciept_data$Payment9.paymentDetails) === null || _reciept_data$Payment10 === void 0 ? void 0 : (_reciept_data$Payment11 = _reciept_data$Payment10[0]) === null || _reciept_data$Payment11 === void 0 ? void 0 : (_reciept_data$Payment12 = _reciept_data$Payment11.bill) === null || _reciept_data$Payment12 === void 0 ? void 0 : (_reciept_data$Payment13 = _reciept_data$Payment12.billDetails) === null || _reciept_data$Payment13 === void 0 ? void 0 : (_reciept_data$Payment14 = _reciept_data$Payment13[0]) === null || _reciept_data$Payment14 === void 0 ? void 0 : _reciept_data$Payment14.amount) || "0")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, t("BPA_COMMON_TOTAL_AMT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "\u20B9 ", (reciept_data === null || reciept_data === void 0 ? void 0 : (_reciept_data$Payment15 = reciept_data.Payments) === null || _reciept_data$Payment15 === void 0 ? void 0 : (_reciept_data$Payment16 = _reciept_data$Payment15[0]) === null || _reciept_data$Payment16 === void 0 ? void 0 : (_reciept_data$Payment17 = _reciept_data$Payment16.paymentDetails) === null || _reciept_data$Payment17 === void 0 ? void 0 : (_reciept_data$Payment18 = _reciept_data$Payment17[0]) === null || _reciept_data$Payment18 === void 0 ? void 0 : (_reciept_data$Payment19 = _reciept_data$Payment18.bill) === null || _reciept_data$Payment19 === void 0 ? void 0 : (_reciept_data$Payment20 = _reciept_data$Payment19.billDetails) === null || _reciept_data$Payment20 === void 0 ? void 0 : (_reciept_data$Payment21 = _reciept_data$Payment20[0]) === null || _reciept_data$Payment21 === void 0 ? void 0 : _reciept_data$Payment21.amount) || "0"), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_COMMON_BUTTON_SUBMIT"),
    onSubmit: onActionSelect
  })), showModal ? /*#__PURE__*/React__default.createElement(ActionModal, {
    t: t,
    action: selectedAction,
    tenantId: tenantId,
    id: value === null || value === void 0 ? void 0 : value.applicationNo,
    closeModal: closeModal,
    submitAction: submitAction,
    actionData: workflowDetails === null || workflowDetails === void 0 ? void 0 : (_workflowDetails$data = workflowDetails.data) === null || _workflowDetails$data === void 0 ? void 0 : _workflowDetails$data.timeline
  }) : null, showToast && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
    error: showToast.key === "error" ? true : false,
    label: t(showToast.key === "success" ? "ES_OBPS_" + showToast.action + "_UPDATE_SUCCESS" : showToast.action),
    onClose: closeToast
  }));
};

var CheckPage$3 = function CheckPage(_ref) {
  var _user$info, _user$info2, _value$result, _result$Licenses, _result$Licenses$, _result$Licenses2, _result$Licenses2$, _formData$LicneseType, _formData$LicneseType2, _formData$LicneseType3, _formData$LicneseType4, _formData$LicneseType5, _formData$LicneseDeta, _formData$LicneseDeta2, _formData$LicneseDeta3, _formData$LicneseDeta4, _formData$LicneseDeta5, _formData$LicneseDeta6, _paymentDetails$billR, _paymentDetails$billR2, _paymentDetails$billR3, _paymentDetails$billR4, _paymentDetails$billR5, _paymentDetails$billR6, _paymentDetails$billR7, _paymentDetails$billR8, _paymentDetails$billR9, _paymentDetails$billR10, _paymentDetails$billR11, _paymentDetails$billR12, _paymentDetails$billR13, _paymentDetails$billR14, _paymentDetails$billR15;
  var onSubmit = _ref.onSubmit,
    value = _ref.value;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var match = reactRouterDom.useRouteMatch();
  var user = Digit.UserService.getUser();
  var tenantId = user && user !== null && user !== void 0 && user.info && user !== null && user !== void 0 && (_user$info = user.info) !== null && _user$info !== void 0 && _user$info.permanentCity ? user === null || user === void 0 ? void 0 : (_user$info2 = user.info) === null || _user$info2 === void 0 ? void 0 : _user$info2.permanentCity : Digit.ULBService.getCurrentTenantId();
  var tenant = Digit.ULBService.getStateId();
  var isopenlink = window.location.href.includes("/openlink/");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  if (isopenlink) window.onunload = function () {
    sessionStorage.removeItem("Digit.BUILDING_PERMIT");
  };
  var result = value.result,
    formData = value.formData,
    documents = value.documents;
  var consumerCode = value === null || value === void 0 ? void 0 : (_value$result = value.result) === null || _value$result === void 0 ? void 0 : _value$result.Licenses[0].applicationNumber;
  var fetchBillParams = {
    consumerCode: consumerCode
  };
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useBPAREGgetbill(_extends({
      businessService: "BPAREG"
    }, fetchBillParams, {
      tenantId: tenant ? tenant : tenantId.split(".")[0]
    }), {
      enabled: consumerCode ? true : false,
      retry: false
    }),
    paymentDetails = _Digit$Hooks$obps$use.data;
  var routeLink = isopenlink ? "/digit-ui/citizen/obps/openlink/stakeholder/apply" : "/digit-ui/citizen/obps/stakeholder/apply";
  function routeTo(jumpTo) {
    history.push(jumpTo);
  }
  return /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement("div", {
    className: isopenlink ? "OpenlinkContainer" : ""
  }, /*#__PURE__*/React__default.createElement("div", null, isopenlink && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(Timeline, {
    currentStep: 4,
    flow: "STAKEHOLDER"
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Header, {
    styles: {
      fontSize: "32px"
    }
  }, t("BPA_STEPPER_SUMMARY_HEADER")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICATION_NUMBER_LABEL"),
    text: result !== null && result !== void 0 && (_result$Licenses = result.Licenses) !== null && _result$Licenses !== void 0 && (_result$Licenses$ = _result$Licenses[0]) !== null && _result$Licenses$ !== void 0 && _result$Licenses$.applicationNumber ? result === null || result === void 0 ? void 0 : (_result$Licenses2 = result.Licenses) === null || _result$Licenses2 === void 0 ? void 0 : (_result$Licenses2$ = _result$Licenses2[0]) === null || _result$Licenses2$ === void 0 ? void 0 : _result$Licenses2$.applicationNumber : ""
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSE_DETAILS_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-15px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/provide-license-type");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_LICENSE_TYPE"),
    textStyle: {
      paddingLeft: "12px"
    },
    text: t(formData === null || formData === void 0 ? void 0 : (_formData$LicneseType = formData.LicneseType) === null || _formData$LicneseType === void 0 ? void 0 : (_formData$LicneseType2 = _formData$LicneseType.LicenseType) === null || _formData$LicneseType2 === void 0 ? void 0 : _formData$LicneseType2.i18nKey)
  }), (formData === null || formData === void 0 ? void 0 : (_formData$LicneseType3 = formData.LicneseType) === null || _formData$LicneseType3 === void 0 ? void 0 : (_formData$LicneseType4 = _formData$LicneseType3.LicenseType) === null || _formData$LicneseType4 === void 0 ? void 0 : _formData$LicneseType4.i18nKey.includes("ARCHITECT")) && /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COUNCIL_NUMBER"),
    text: formData === null || formData === void 0 ? void 0 : (_formData$LicneseType5 = formData.LicneseType) === null || _formData$LicneseType5 === void 0 ? void 0 : _formData$LicneseType5.ArchitectNo
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSE_DET_CAPTION")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-15px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/license-details");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_NAME_LABEL"),
    textStyle: {
      paddingLeft: "12px"
    },
    text: t(formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta = formData.LicneseDetails) === null || _formData$LicneseDeta === void 0 ? void 0 : _formData$LicneseDeta.name)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_GENDER_LABEL"),
    text: t(formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta2 = formData.LicneseDetails) === null || _formData$LicneseDeta2 === void 0 ? void 0 : _formData$LicneseDeta2.gender.i18nKey)
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_OWNER_MOBILE_NO_LABEL"),
    text: formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta3 = formData.LicneseDetails) === null || _formData$LicneseDeta3 === void 0 ? void 0 : _formData$LicneseDeta3.mobileNumber
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_EMAIL_LABEL"),
    text: (formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta4 = formData.LicneseDetails) === null || _formData$LicneseDeta4 === void 0 ? void 0 : _formData$LicneseDeta4.email) || t("CS_NA")
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_APPLICANT_PAN_NO"),
    text: (formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta5 = formData.LicneseDetails) === null || _formData$LicneseDeta5 === void 0 ? void 0 : _formData$LicneseDeta5.PanNumber) || t("CS_NA")
  }))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginRight: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_LICENSEE_PERMANENT_LABEL"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-15px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/Permanent-address");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    text: t(formData === null || formData === void 0 ? void 0 : (_formData$LicneseDeta6 = formData.LicneseDetails) === null || _formData$LicneseDeta6 === void 0 ? void 0 : _formData$LicneseDeta6.PermanentAddress)
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginRight: "24px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_COMMUNICATION_ADDRESS_HEADER_DETAILS"))), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-15px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/correspondence-address");
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    text: t(value === null || value === void 0 ? void 0 : value.Correspondenceaddress)
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_DOC_DETAILS_SUMMARY")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: /*#__PURE__*/React__default.createElement(digitUiReactComponents.EditIcon, {
      style: {
        marginTop: "-15px",
        float: "right",
        position: "relative",
        bottom: "32px"
      }
    }),
    style: {
      width: "100px",
      display: "inline"
    },
    onClick: function onClick() {
      return routeTo(routeLink + "/stakeholder-document-details");
    }
  }), documents === null || documents === void 0 ? void 0 : documents.documents.map(function (doc, index) {
    var _doc$documentType, _documents$documents;
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardSectionHeader, {
      styles: {
        fontSize: "18px"
      }
    }, t("BPAREG_HEADER_" + (doc === null || doc === void 0 ? void 0 : (_doc$documentType = doc.documentType) === null || _doc$documentType === void 0 ? void 0 : _doc$documentType.replace('.', '_')))), doc !== null && doc !== void 0 && doc.info ? /*#__PURE__*/React__default.createElement("div", {
      style: {
        fontSize: "12px",
        color: "#505A5F",
        fontWeight: 400,
        lineHeight: "15px"
      }
    }, "" + t(doc === null || doc === void 0 ? void 0 : doc.info)) : null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, /*#__PURE__*/React__default.createElement(OBPSDocument, {
      value: value,
      Code: doc === null || doc === void 0 ? void 0 : doc.documentType,
      index: index,
      isNOC: false,
      svgStyles: {},
      isStakeHolder: true
    }), (documents === null || documents === void 0 ? void 0 : (_documents$documents = documents.documents) === null || _documents$documents === void 0 ? void 0 : _documents$documents.length) != index + 1 ? /*#__PURE__*/React__default.createElement("hr", {
      style: {
        color: "#cccccc",
        backgroundColor: "#cccccc",
        height: "2px",
        marginTop: "20px",
        marginBottom: "20px"
      }
    }) : null));
  })), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      paddingRight: "16px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_SUMMARY_FEE_EST")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.StatusTable, null, paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$billR = paymentDetails.billResponse) === null || _paymentDetails$billR === void 0 ? void 0 : (_paymentDetails$billR2 = _paymentDetails$billR.Bill[0]) === null || _paymentDetails$billR2 === void 0 ? void 0 : (_paymentDetails$billR3 = _paymentDetails$billR2.billDetails[0]) === null || _paymentDetails$billR3 === void 0 ? void 0 : _paymentDetails$billR3.billAccountDetails.map(function (bill, index) {
    return /*#__PURE__*/React__default.createElement("div", {
      key: index
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
      className: "border-none",
      label: t("" + bill.taxHeadCode),
      text: "\u20B9 " + (bill === null || bill === void 0 ? void 0 : bill.amount) || t("CS_NA")
    }));
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Row, {
    className: "border-none",
    label: t("BPA_COMMON_TOTAL_AMT"),
    text: "\u20B9 " + (paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$billR4 = paymentDetails.billResponse) === null || _paymentDetails$billR4 === void 0 ? void 0 : (_paymentDetails$billR5 = _paymentDetails$billR4.Bill) === null || _paymentDetails$billR5 === void 0 ? void 0 : (_paymentDetails$billR6 = _paymentDetails$billR5[0]) === null || _paymentDetails$billR6 === void 0 ? void 0 : (_paymentDetails$billR7 = _paymentDetails$billR6.billDetails[0]) === null || _paymentDetails$billR7 === void 0 ? void 0 : _paymentDetails$billR7.amount) || t("CS_NA")
  })), /*#__PURE__*/React__default.createElement("hr", {
    style: {
      color: "#cccccc",
      backgroundColor: "#cccccc",
      height: "2px",
      marginTop: "20px",
      marginBottom: "20px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, {
    styles: {
      fontSize: "24px"
    }
  }, t("BPA_COMMON_TOTAL_AMT")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardHeader, null, "\u20B9 ", paymentDetails === null || paymentDetails === void 0 ? void 0 : (_paymentDetails$billR8 = paymentDetails.billResponse) === null || _paymentDetails$billR8 === void 0 ? void 0 : (_paymentDetails$billR9 = _paymentDetails$billR8.Bill) === null || _paymentDetails$billR9 === void 0 ? void 0 : (_paymentDetails$billR10 = _paymentDetails$billR9[0]) === null || _paymentDetails$billR10 === void 0 ? void 0 : (_paymentDetails$billR11 = _paymentDetails$billR10.billDetails[0]) === null || _paymentDetails$billR11 === void 0 ? void 0 : _paymentDetails$billR11.amount), /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CS_COMMON_SUBMIT"),
    onSubmit: onSubmit,
    disabled: paymentDetails !== null && paymentDetails !== void 0 && (_paymentDetails$billR12 = paymentDetails.billResponse) !== null && _paymentDetails$billR12 !== void 0 && (_paymentDetails$billR13 = _paymentDetails$billR12.Bill) !== null && _paymentDetails$billR13 !== void 0 && (_paymentDetails$billR14 = _paymentDetails$billR13[0]) !== null && _paymentDetails$billR14 !== void 0 && (_paymentDetails$billR15 = _paymentDetails$billR14.billDetails[0]) !== null && _paymentDetails$billR15 !== void 0 && _paymentDetails$billR15.amount ? false : true
  })))));
};

var EDCRAcknowledgement = function EDCRAcknowledgement(props) {
  var _props$data2, _props$data3, _props$data5, _bpaLinks$linkData, _bpaLinks$linkData$fl, _edcrData$appliaction2, _edcrData$application2;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var _useState = React.useState(false),
    showToast = _useState[0],
    setShowToast = _useState[1];
  React.useEffect(function () {
    var _props$data;
    if ((props === null || props === void 0 ? void 0 : (_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.type) == "ERROR" && !showToast) setShowToast(true);
  }, [props === null || props === void 0 ? void 0 : (_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.data]);
  if ((props === null || props === void 0 ? void 0 : (_props$data3 = props.data) === null || _props$data3 === void 0 ? void 0 : _props$data3.type) == "ERROR") {
    var _props$data4;
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
      style: {
        padding: "0px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
      message: t("CS_BPA_APPLICATION_FAILED"),
      applicationNumber: "",
      info: "",
      successful: false,
      infoStyles: {
        fontSize: "18px",
        lineHeight: "21px",
        fontWeight: "bold",
        textAlign: "center",
        padding: "0px 15px"
      },
      applicationNumberStyles: {
        fontSize: "24px",
        lineHeight: "28px",
        fontWeight: "bold",
        marginTop: "10px"
      },
      style: {
        width: "100%",
        padding: "10px"
      }
    }), /*#__PURE__*/React__default.createElement("div", {
      style: {
        padding: "10px",
        paddingBottom: "10px"
      }
    }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: "/digit-ui/citizen"
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      label: t("CORE_COMMON_GO_TO_HOME")
    }))), showToast ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: "error",
      label: t(props === null || props === void 0 ? void 0 : (_props$data4 = props.data) === null || _props$data4 === void 0 ? void 0 : _props$data4.data),
      onClose: function onClose() {
        return setShowToast(null);
      },
      isDleteBtn: true
    }) : null);
  }
  sessionStorage.setItem("isPermitApplication", true);
  sessionStorage.setItem("isEDCRDisable", JSON.stringify(true));
  var edcrData = props === null || props === void 0 ? void 0 : (_props$data5 = props.data) === null || _props$data5 === void 0 ? void 0 : _props$data5[0];
  var _useState2 = React.useState({}),
    bpaLinks = _useState2[0],
    setBpaLinks = _useState2[1];
  var state = Digit.ULBService.getStateId();
  var isMobile = window.Digit.Utils.browser.isMobile();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(state, "BPA", ["homePageUrlLinks"]),
    homePageUrlLinks = _Digit$Hooks$obps$use.data,
    homePageUrlLinksLoading = _Digit$Hooks$obps$use.isLoading;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(state, "BPA", ["RiskTypeComputation"]);
  React.useEffect(function () {
    var _homePageUrlLinks$BPA, _homePageUrlLinks$BPA2;
    if (!homePageUrlLinksLoading && (homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA === void 0 ? void 0 : (_homePageUrlLinks$BPA2 = _homePageUrlLinks$BPA.homePageUrlLinks) === null || _homePageUrlLinks$BPA2 === void 0 ? void 0 : _homePageUrlLinks$BPA2.length) > 0) {
      var _homePageUrlLinks$BPA3, _homePageUrlLinks$BPA4;
      homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA3 = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA3 === void 0 ? void 0 : (_homePageUrlLinks$BPA4 = _homePageUrlLinks$BPA3.homePageUrlLinks) === null || _homePageUrlLinks$BPA4 === void 0 ? void 0 : _homePageUrlLinks$BPA4.map(function (linkData) {
        if ((linkData === null || linkData === void 0 ? void 0 : linkData.applicationType) === (edcrData === null || edcrData === void 0 ? void 0 : edcrData.appliactionType) && (linkData === null || linkData === void 0 ? void 0 : linkData.serviceType) === (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationSubType)) {
          setBpaLinks({
            linkData: linkData,
            edcrNumber: edcrData === null || edcrData === void 0 ? void 0 : edcrData.edcrNumber
          });
        }
      });
    }
  }, [!homePageUrlLinksLoading]);
  var printReciept = function printReciept() {
    try {
      var win = window.open(edcrData.planReport, '_blank');
      if (win) {
        win.focus();
      }
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", null, edcrData.status == "Accepted" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("EDCR_ACKNOWLEDGEMENT_SUCCESS_MESSAGE_LABEL"),
    applicationNumber: edcrData === null || edcrData === void 0 ? void 0 : edcrData.edcrNumber,
    info: t("EDCR_SCRUTINY_NUMBER_LABEL"),
    successful: true,
    infoStyles: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "bold",
      textAlign: "center",
      padding: "0px 15px"
    },
    applicationNumberStyles: {
      fontSize: "24px",
      lineHeight: "28px",
      fontWeight: "bold",
      marginTop: "10px"
    },
    style: {
      width: "100%",
      padding: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL") + " - " + (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationNumber)), /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: printReciept
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#F47738"
  })), t("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      padding: "0px 10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/obps/" + (bpaLinks === null || bpaLinks === void 0 ? void 0 : (_bpaLinks$linkData = bpaLinks.linkData) === null || _bpaLinks$linkData === void 0 ? void 0 : (_bpaLinks$linkData$fl = _bpaLinks$linkData.flow) === null || _bpaLinks$linkData$fl === void 0 ? void 0 : _bpaLinks$linkData$fl.toLowerCase()) + "/" + (edcrData === null || edcrData === void 0 ? void 0 : (_edcrData$appliaction2 = edcrData.appliactionType) === null || _edcrData$appliaction2 === void 0 ? void 0 : _edcrData$appliaction2.toLowerCase()) + "/" + (edcrData === null || edcrData === void 0 ? void 0 : (_edcrData$application2 = edcrData.applicationSubType) === null || _edcrData$application2 === void 0 ? void 0 : _edcrData$application2.toLowerCase()) + "/docs-required",
      state: bpaLinks
    },
    replace: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_APPLY_FOR_BPA_LABEL"),
    onSubmit: function onSubmit() {
      return sessionStorage.setItem("clickOnBPAApplyAfterEDCR", true);
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    className: "button-sub-text",
    style: {
      fontSize: "14px",
      lineHeight: "16px",
      textAlign: "center",
      margin: "0px",
      marginTop: "4px",
      fontWeight: "400",
      color: "#0B0C0C"
    }
  }, t("BPA_FOR_NEW_CONSTRUCTION_LABEL"))), /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "12px",
      paddingBottom: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CORE_COMMON_GO_TO_HOME")
  }))))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_LABEL"),
    applicationNumber: "",
    info: "",
    successful: false,
    infoStyles: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "bold",
      textAlign: "center",
      padding: "0px 15px"
    },
    applicationNumberStyles: {
      fontSize: "24px",
      lineHeight: "28px",
      fontWeight: "bold",
      marginTop: "10px"
    },
    style: {
      width: "100%",
      padding: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_TEXT_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL") + " - " + (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationNumber)), /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: printReciept
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#F47738"
  })), t("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      padding: "10px",
      paddingBottom: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))));
};

var EDCRAcknowledgement$1 = function EDCRAcknowledgement(props) {
  var _props$data2, _props$data3, _props$data5, _bpaLinks$linkData, _bpaLinks$linkData$fl, _edcrData$appliaction, _edcrData$application;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var history = reactRouterDom.useHistory();
  var _useState = React.useState(false),
    showToast = _useState[0],
    setShowToast = _useState[1];
  React.useEffect(function () {
    var _props$data;
    if ((props === null || props === void 0 ? void 0 : (_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.type) == "ERROR" && !showToast) setShowToast(true);
  }, [props === null || props === void 0 ? void 0 : (_props$data2 = props.data) === null || _props$data2 === void 0 ? void 0 : _props$data2.data]);
  if ((props === null || props === void 0 ? void 0 : (_props$data3 = props.data) === null || _props$data3 === void 0 ? void 0 : _props$data3.type) == "ERROR") {
    var _props$data4;
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
      style: {
        padding: "0px"
      }
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
      message: t("CS_BPA_APPLICATION_FAILED"),
      applicationNumber: "",
      info: "",
      successful: false,
      infoStyles: {
        fontSize: "18px",
        lineHeight: "21px",
        fontWeight: "bold",
        textAlign: "center",
        padding: "0px 15px"
      },
      applicationNumberStyles: {
        fontSize: "24px",
        lineHeight: "28px",
        fontWeight: "bold",
        marginTop: "10px"
      },
      style: {
        width: "100%",
        padding: "10px"
      }
    }), /*#__PURE__*/React__default.createElement("div", {
      style: {
        padding: "10px",
        paddingBottom: "10px"
      }
    }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
      to: "/digit-ui/citizen"
    }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
      label: t("CORE_COMMON_GO_TO_HOME")
    }))), showToast ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Toast, {
      error: "error",
      label: t(props === null || props === void 0 ? void 0 : (_props$data4 = props.data) === null || _props$data4 === void 0 ? void 0 : _props$data4.data),
      onClose: function onClose() {
        return setShowToast(null);
      },
      isDleteBtn: true
    }) : null);
  }
  sessionStorage.setItem("isEDCRDisable", JSON.stringify(true));
  sessionStorage.setItem("isPermitApplication", true);
  var edcrData = props === null || props === void 0 ? void 0 : (_props$data5 = props.data) === null || _props$data5 === void 0 ? void 0 : _props$data5[0];
  var _useState2 = React.useState({}),
    bpaLinks = _useState2[0],
    setBpaLinks = _useState2[1];
  var state = Digit.ULBService.getStateId();
  var _Digit$Hooks$obps$use = Digit.Hooks.obps.useMDMS(state, "BPA", ["homePageUrlLinks"]),
    homePageUrlLinks = _Digit$Hooks$obps$use.data,
    homePageUrlLinksLoading = _Digit$Hooks$obps$use.isLoading;
  var _Digit$Hooks$obps$use2 = Digit.Hooks.obps.useMDMS(state, "BPA", ["RiskTypeComputation"]);
  React.useEffect(function () {
    var _homePageUrlLinks$BPA, _homePageUrlLinks$BPA2;
    if (!homePageUrlLinksLoading && (homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA === void 0 ? void 0 : (_homePageUrlLinks$BPA2 = _homePageUrlLinks$BPA.homePageUrlLinks) === null || _homePageUrlLinks$BPA2 === void 0 ? void 0 : _homePageUrlLinks$BPA2.length) > 0) {
      var _homePageUrlLinks$BPA3, _homePageUrlLinks$BPA4;
      homePageUrlLinks === null || homePageUrlLinks === void 0 ? void 0 : (_homePageUrlLinks$BPA3 = homePageUrlLinks.BPA) === null || _homePageUrlLinks$BPA3 === void 0 ? void 0 : (_homePageUrlLinks$BPA4 = _homePageUrlLinks$BPA3.homePageUrlLinks) === null || _homePageUrlLinks$BPA4 === void 0 ? void 0 : _homePageUrlLinks$BPA4.map(function (linkData) {
        if ((linkData === null || linkData === void 0 ? void 0 : linkData.applicationType) === (edcrData === null || edcrData === void 0 ? void 0 : edcrData.appliactionType) && (linkData === null || linkData === void 0 ? void 0 : linkData.serviceType) === (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationSubType)) {
          setBpaLinks({
            linkData: linkData,
            edcrNumber: edcrData === null || edcrData === void 0 ? void 0 : edcrData.edcrNumber
          });
        }
      });
    }
  }, [!homePageUrlLinksLoading]);
  var printReciept = function printReciept() {
    try {
      var win = window.open(edcrData.planReport, '_blank');
      if (win) {
        win.focus();
      }
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  return /*#__PURE__*/React__default.createElement("div", null, (edcrData === null || edcrData === void 0 ? void 0 : edcrData.status) == "Accepted" ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("BPA_OC_EDCR_ACKNOWLEDGEMENT_SUCCESS_MESSAGE_LABEL"),
    applicationNumber: edcrData === null || edcrData === void 0 ? void 0 : edcrData.edcrNumber,
    info: t("EDCR_SCRUTINY_NUMBER_LABEL"),
    successful: true,
    infoStyles: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "bold",
      textAlign: "center",
      padding: "0px 15px"
    },
    applicationNumberStyles: {
      fontSize: "24px",
      lineHeight: "28px",
      fontWeight: "bold",
      marginTop: "10px"
    },
    style: {
      width: "100%",
      padding: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL") + " - " + (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationNumber)), /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: printReciept
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#F47738"
  })), t("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      padding: "0px 10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/obps/" + (bpaLinks === null || bpaLinks === void 0 ? void 0 : (_bpaLinks$linkData = bpaLinks.linkData) === null || _bpaLinks$linkData === void 0 ? void 0 : (_bpaLinks$linkData$fl = _bpaLinks$linkData.flow) === null || _bpaLinks$linkData$fl === void 0 ? void 0 : _bpaLinks$linkData$fl.toLowerCase()) + "/" + (edcrData === null || edcrData === void 0 ? void 0 : (_edcrData$appliaction = edcrData.appliactionType) === null || _edcrData$appliaction === void 0 ? void 0 : _edcrData$appliaction.toLowerCase()) + "/" + (edcrData === null || edcrData === void 0 ? void 0 : (_edcrData$application = edcrData.applicationSubType) === null || _edcrData$application === void 0 ? void 0 : _edcrData$application.toLowerCase()) + "/docs-required",
      state: bpaLinks
    },
    replace: true
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_APPLY_OC_FOR_BPA_LABEL"),
    className: "oc-aknowledgement-screen",
    onSubmit: function onSubmit() {
      return sessionStorage.setItem("clickOnBPAApplyAfterEDCR", true);
    }
  }))), /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "12px",
      paddingBottom: "10px",
      paddingLeft: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, {
    style: {
      padding: "0px"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: t("BPA_OC_EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_LABEL"),
    applicationNumber: "",
    info: "",
    successful: false,
    infoStyles: {
      fontSize: "18px",
      lineHeight: "21px",
      fontWeight: "bold",
      textAlign: "center",
      padding: "0px 15px"
    },
    applicationNumberStyles: {
      fontSize: "24px",
      lineHeight: "28px",
      fontWeight: "bold",
      marginTop: "10px"
    },
    style: {
      width: "100%",
      padding: "10px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("EDCR_ACKNOWLEDGEMENT_REJECTED_MESSAGE_TEXT_LABEL")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, {
    style: {
      padding: "0px 8px",
      marginBottom: "10px"
    }
  }, t("PDF_STATIC_LABEL_CONSOLIDATED_BILL_CONSUMER_ID_TL") + " - " + (edcrData === null || edcrData === void 0 ? void 0 : edcrData.applicationNumber)), /*#__PURE__*/React__default.createElement("div", {
    className: "primary-label-btn d-grid",
    style: {
      marginLeft: "unset",
      marginBottom: "10px",
      padding: "0px 8px"
    },
    onClick: printReciept
  }, /*#__PURE__*/React__default.createElement("svg", {
    width: "20",
    height: "23",
    viewBox: "0 0 20 23",
    fill: "none",
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React__default.createElement("path", {
    d: "M19.3334 8H14V0H6.00002V8H0.666687L10 17.3333L19.3334 8ZM0.666687 20V22.6667H19.3334V20H0.666687Z",
    fill: "#F47738"
  })), t("EDCR_DOWNLOAD_SCRUTINY_REPORT_LABEL")), /*#__PURE__*/React__default.createElement("div", {
    style: {
      padding: "10px",
      paddingBottom: "10px",
      paddingLeft: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))));
};

var GetActionMessage = function GetActionMessage(props) {
  var _props$data, _props$data$BPA, _props$data2, _props$data2$BPA, _props$data2$BPA$, _props$data3, _props$data3$BPA, _props$data3$BPA$;
  var bpaData = props === null || props === void 0 ? void 0 : (_props$data = props.data) === null || _props$data === void 0 ? void 0 : (_props$data$BPA = _props$data.BPA) === null || _props$data$BPA === void 0 ? void 0 : _props$data$BPA[0];
  var bpaBusinessService = props !== null && props !== void 0 && (_props$data2 = props.data) !== null && _props$data2 !== void 0 && (_props$data2$BPA = _props$data2.BPA) !== null && _props$data2$BPA !== void 0 && (_props$data2$BPA$ = _props$data2$BPA[0]) !== null && _props$data2$BPA$ !== void 0 && _props$data2$BPA$.businessService ? props === null || props === void 0 ? void 0 : (_props$data3 = props.data) === null || _props$data3 === void 0 ? void 0 : (_props$data3$BPA = _props$data3.BPA) === null || _props$data3$BPA === void 0 ? void 0 : (_props$data3$BPA$ = _props$data3$BPA[0]) === null || _props$data3$BPA$ === void 0 ? void 0 : _props$data3$BPA$.businessService : "BPA";
  var bpaStatus = bpaData === null || bpaData === void 0 ? void 0 : bpaData.status;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  var getAppAction = sessionStorage.getItem("BPA_SUBMIT_APP") ? JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")) : null;
  if (props.isSuccess) {
    var _bpaData$workflow, _bpaData$workflow2, _bpaData$workflow3, _bpaData$workflow4;
    if (getAppAction == "BPA_SUBMIT_APP") return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("BPA_SUBMIT_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow = bpaData.workflow) === null || _bpaData$workflow === void 0 ? void 0 : _bpaData$workflow.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : props === null || props === void 0 ? void 0 : props.t("BPA_SUBMIT_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow2 = bpaData.workflow) === null || _bpaData$workflow2 === void 0 ? void 0 : _bpaData$workflow2.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("BPA_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow3 = bpaData.workflow) === null || _bpaData$workflow3 === void 0 ? void 0 : _bpaData$workflow3.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : props === null || props === void 0 ? void 0 : props.t("BPA_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow4 = bpaData.workflow) === null || _bpaData$workflow4 === void 0 ? void 0 : _bpaData$workflow4.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
  } else if (props.isLoading) {
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_PENDING") : props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_PENDING");
  } else if (!props.isSuccess) {
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_FAILED") : props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_FAILED");
  }
};
var getCardText = function getCardText(t, props) {
  var _props$BPA, _props$BPA2, _props$BPA2$, _props$BPA3, _props$BPA3$, _bpaData$workflow5, _bpaData$additionalDe, _bpaData$additionalDe2, _bpaData$workflow6, _bpaData$additionalDe3, _bpaData$additionalDe4;
  var bpaData = props === null || props === void 0 ? void 0 : (_props$BPA = props.BPA) === null || _props$BPA === void 0 ? void 0 : _props$BPA[0];
  var bpaBusinessService = props !== null && props !== void 0 && (_props$BPA2 = props.BPA) !== null && _props$BPA2 !== void 0 && (_props$BPA2$ = _props$BPA2[0]) !== null && _props$BPA2$ !== void 0 && _props$BPA2$.businessService ? props === null || props === void 0 ? void 0 : (_props$BPA3 = props.BPA) === null || _props$BPA3 === void 0 ? void 0 : (_props$BPA3$ = _props$BPA3[0]) === null || _props$BPA3$ === void 0 ? void 0 : _props$BPA3$.businessService : "BPA";
  var bpaStatus = bpaData === null || bpaData === void 0 ? void 0 : bpaData.status;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  var getAppAction = sessionStorage.getItem("BPA_SUBMIT_APP") ? JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")) : null;
  if (getAppAction == "BPA_SUBMIT_APP") return t("BPA_SUBMIT_SUB_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow5 = bpaData.workflow) === null || _bpaData$workflow5 === void 0 ? void 0 : _bpaData$workflow5.action) + "_" + (bpaData !== null && bpaData !== void 0 && (_bpaData$additionalDe = bpaData.additionalDetails) !== null && _bpaData$additionalDe !== void 0 && _bpaData$additionalDe.typeOfArchitect ? bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$additionalDe2 = bpaData.additionalDetails) === null || _bpaData$additionalDe2 === void 0 ? void 0 : _bpaData$additionalDe2.typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
  return t("BPA_SUB_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow6 = bpaData.workflow) === null || _bpaData$workflow6 === void 0 ? void 0 : _bpaData$workflow6.action) + "_" + (bpaData !== null && bpaData !== void 0 && (_bpaData$additionalDe3 = bpaData.additionalDetails) !== null && _bpaData$additionalDe3 !== void 0 && _bpaData$additionalDe3.typeOfArchitect ? bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$additionalDe4 = bpaData.additionalDetails) === null || _bpaData$additionalDe4 === void 0 ? void 0 : _bpaData$additionalDe4.typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
};
var getApplicationNoLabel = function getApplicationNoLabel(props) {
  var _props$BPA4, _props$BPA4$, _props$BPA5, _props$BPA5$;
  var bpaBusinessService = props !== null && props !== void 0 && (_props$BPA4 = props.BPA) !== null && _props$BPA4 !== void 0 && (_props$BPA4$ = _props$BPA4[0]) !== null && _props$BPA4$ !== void 0 && _props$BPA4$.businessService ? props === null || props === void 0 ? void 0 : (_props$BPA5 = props.BPA) === null || _props$BPA5 === void 0 ? void 0 : (_props$BPA5$ = _props$BPA5[0]) === null || _props$BPA5$ === void 0 ? void 0 : _props$BPA5$.businessService : "BPA";
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  return bpaBusinessService == "BPA" ? props === null || props === void 0 ? void 0 : props.t("BPA_PERMIT_APPLICATION_NUMBER_LABEL") : props === null || props === void 0 ? void 0 : props.t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL");
};
var BannerPicker = function BannerPicker(props) {
  var _props$data4;
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: GetActionMessage(props),
    applicationNumber: (_props$data4 = props.data) === null || _props$data4 === void 0 ? void 0 : _props$data4.BPA[0].applicationNo,
    info: props.isSuccess ? getApplicationNoLabel(props) : "",
    successful: props.isSuccess,
    headerStyles: {
      fontSize: "32px"
    }
  });
};
var OBPSAcknowledgement = function OBPSAcknowledgement(_ref) {
  var _data$address, _data$address2, _data$address2$city, _data$address3, _data$address4, _data$address4$city;
  var data = _ref.data,
    onSuccess = _ref.onSuccess;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var mutation = Digit.Hooks.obps.useObpsAPI(data !== null && data !== void 0 && (_data$address = data.address) !== null && _data$address !== void 0 && _data$address.city ? (_data$address2 = data.address) === null || _data$address2 === void 0 ? void 0 : (_data$address2$city = _data$address2.city) === null || _data$address2$city === void 0 ? void 0 : _data$address2$city.code : tenantId, true);
  var mutation1 = Digit.Hooks.obps.useObpsAPI(data !== null && data !== void 0 && (_data$address3 = data.address) !== null && _data$address3 !== void 0 && _data$address3.city ? (_data$address4 = data.address) === null || _data$address4 === void 0 ? void 0 : (_data$address4$city = _data$address4.city) === null || _data$address4$city === void 0 ? void 0 : _data$address4$city.code : tenantId, false);
  var _Digit$Hooks$useStore = Digit.Hooks.useStore.getInitData();
  React.useEffect(function () {
    try {
      var _data$address5, _data$address6, _data$address6$city, _data$nocDocuments;
      var tenantid = data !== null && data !== void 0 && (_data$address5 = data.address) !== null && _data$address5 !== void 0 && _data$address5.city ? (_data$address6 = data.address) === null || _data$address6 === void 0 ? void 0 : (_data$address6$city = _data$address6.city) === null || _data$address6$city === void 0 ? void 0 : _data$address6$city.code : tenantId;
      data.tenantId = tenantid;
      var formdata = {};
      data === null || data === void 0 ? void 0 : (_data$nocDocuments = data.nocDocuments) === null || _data$nocDocuments === void 0 ? void 0 : _data$nocDocuments.NocDetails.map(function (noc) {
        formdata = convertToNocObject(noc, data);
        mutation.mutate(formdata, {
          onSuccess: onSuccess
        });
      });
      formdata = convertToBPAObject(data);
      mutation1.mutate(formdata, {
        onSuccess: onSuccess
      });
    } catch (err) {}
  }, []);
  return mutation1.isLoading || mutation1.isIdle ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(BannerPicker, {
    t: t,
    data: mutation1.data,
    isSuccess: mutation1.isSuccess,
    isLoading: mutation1.isIdle || mutation1.isLoading
  }), mutation1.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, getCardText(t, mutation1.data)), !mutation1.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("CS_FILE_PROPERTY_FAILED_RESPONSE")), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })));
};

var GetActionMessage$1 = function GetActionMessage(props) {
  var _props$data, _props$data$BPA, _props$data2, _props$data2$BPA, _props$data2$BPA$, _props$data3, _props$data3$BPA, _props$data3$BPA$;
  var bpaData = props === null || props === void 0 ? void 0 : (_props$data = props.data) === null || _props$data === void 0 ? void 0 : (_props$data$BPA = _props$data.BPA) === null || _props$data$BPA === void 0 ? void 0 : _props$data$BPA[0];
  var bpaBusinessService = props !== null && props !== void 0 && (_props$data2 = props.data) !== null && _props$data2 !== void 0 && (_props$data2$BPA = _props$data2.BPA) !== null && _props$data2$BPA !== void 0 && (_props$data2$BPA$ = _props$data2$BPA[0]) !== null && _props$data2$BPA$ !== void 0 && _props$data2$BPA$.businessService ? props === null || props === void 0 ? void 0 : (_props$data3 = props.data) === null || _props$data3 === void 0 ? void 0 : (_props$data3$BPA = _props$data3.BPA) === null || _props$data3$BPA === void 0 ? void 0 : (_props$data3$BPA$ = _props$data3$BPA[0]) === null || _props$data3$BPA$ === void 0 ? void 0 : _props$data3$BPA$.businessService : "BPA";
  var bpaStatus = bpaData === null || bpaData === void 0 ? void 0 : bpaData.status;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  var getAppAction = sessionStorage.getItem("BPA_SUBMIT_APP") ? JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")) : null;
  if (props.isSuccess) {
    var _bpaData$workflow, _bpaData$workflow2, _bpaData$workflow3, _bpaData$workflow4;
    if (getAppAction == "BPA_SUBMIT_APP") return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("BPA_SUBMIT_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow = bpaData.workflow) === null || _bpaData$workflow === void 0 ? void 0 : _bpaData$workflow.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : props === null || props === void 0 ? void 0 : props.t("BPA_SUBMIT_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow2 = bpaData.workflow) === null || _bpaData$workflow2 === void 0 ? void 0 : _bpaData$workflow2.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("BPA_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow3 = bpaData.workflow) === null || _bpaData$workflow3 === void 0 ? void 0 : _bpaData$workflow3.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : props === null || props === void 0 ? void 0 : props.t("BPA_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow4 = bpaData.workflow) === null || _bpaData$workflow4 === void 0 ? void 0 : _bpaData$workflow4.action) + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
  } else if (props.isLoading) {
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_PENDING") : props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_PENDING");
  } else if (!props.isSuccess) {
    return !window.location.href.includes("editApplication") ? props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_FAILED") : props === null || props === void 0 ? void 0 : props.t("CS_BPA_APPLICATION_FAILED");
  }
};
var getCardText$1 = function getCardText(t, props) {
  var _props$BPA, _props$BPA2, _props$BPA2$, _props$BPA3, _props$BPA3$, _bpaData$workflow5, _bpaData$additionalDe, _bpaData$additionalDe2, _bpaData$workflow6, _bpaData$additionalDe3, _bpaData$additionalDe4;
  var bpaData = props === null || props === void 0 ? void 0 : (_props$BPA = props.BPA) === null || _props$BPA === void 0 ? void 0 : _props$BPA[0];
  var bpaBusinessService = props !== null && props !== void 0 && (_props$BPA2 = props.BPA) !== null && _props$BPA2 !== void 0 && (_props$BPA2$ = _props$BPA2[0]) !== null && _props$BPA2$ !== void 0 && _props$BPA2$.businessService ? props === null || props === void 0 ? void 0 : (_props$BPA3 = props.BPA) === null || _props$BPA3 === void 0 ? void 0 : (_props$BPA3$ = _props$BPA3[0]) === null || _props$BPA3$ === void 0 ? void 0 : _props$BPA3$.businessService : "BPA";
  var bpaStatus = bpaData === null || bpaData === void 0 ? void 0 : bpaData.status;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  var getAppAction = sessionStorage.getItem("BPA_SUBMIT_APP") ? JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")) : null;
  if (getAppAction == "BPA_SUBMIT_APP") t("BPA_SUBMIT_SUB_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow5 = bpaData.workflow) === null || _bpaData$workflow5 === void 0 ? void 0 : _bpaData$workflow5.action) + "_" + (bpaData !== null && bpaData !== void 0 && (_bpaData$additionalDe = bpaData.additionalDetails) !== null && _bpaData$additionalDe !== void 0 && _bpaData$additionalDe.typeOfArchitect ? bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$additionalDe2 = bpaData.additionalDetails) === null || _bpaData$additionalDe2 === void 0 ? void 0 : _bpaData$additionalDe2.typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
  return t("BPA_SUB_HEADER_" + bpaBusinessService + "_" + (bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$workflow6 = bpaData.workflow) === null || _bpaData$workflow6 === void 0 ? void 0 : _bpaData$workflow6.action) + "_" + (bpaData !== null && bpaData !== void 0 && (_bpaData$additionalDe3 = bpaData.additionalDetails) !== null && _bpaData$additionalDe3 !== void 0 && _bpaData$additionalDe3.typeOfArchitect ? bpaData === null || bpaData === void 0 ? void 0 : (_bpaData$additionalDe4 = bpaData.additionalDetails) === null || _bpaData$additionalDe4 === void 0 ? void 0 : _bpaData$additionalDe4.typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase());
};
var getApplicationNoLabel$1 = function getApplicationNoLabel(props) {
  var _props$BPA4, _props$BPA4$, _props$BPA5, _props$BPA5$;
  var bpaBusinessService = props !== null && props !== void 0 && (_props$BPA4 = props.BPA) !== null && _props$BPA4 !== void 0 && (_props$BPA4$ = _props$BPA4[0]) !== null && _props$BPA4$ !== void 0 && _props$BPA4$.businessService ? props === null || props === void 0 ? void 0 : (_props$BPA5 = props.BPA) === null || _props$BPA5 === void 0 ? void 0 : (_props$BPA5$ = _props$BPA5[0]) === null || _props$BPA5$ === void 0 ? void 0 : _props$BPA5$.businessService : "BPA";
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  if (bpaBusinessService == "BPA") {
    return props === null || props === void 0 ? void 0 : props.t("BPA_PERMIT_APPLICATION_NUMBER_LABEL");
  } else {
    return props === null || props === void 0 ? void 0 : props.t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL");
  }
};
var BannerPicker$1 = function BannerPicker(props) {
  var _props$data4;
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: GetActionMessage$1(props),
    applicationNumber: (_props$data4 = props.data) === null || _props$data4 === void 0 ? void 0 : _props$data4.BPA[0].applicationNo,
    info: props.isSuccess ? getApplicationNoLabel$1(props) : "",
    successful: props.isSuccess,
    headerStyles: {
      fontSize: "32px"
    }
  });
};
var OBPSAcknowledgement$1 = function OBPSAcknowledgement(_ref) {
  var data = _ref.data,
    onSuccess = _ref.onSuccess;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var mutation = Digit.Hooks.obps.useObpsAPI(data !== null && data !== void 0 && data.tenantId ? data === null || data === void 0 ? void 0 : data.tenantId : tenantId, true);
  var mutation1 = Digit.Hooks.obps.useObpsAPI(data !== null && data !== void 0 && data.tenantId ? data === null || data === void 0 ? void 0 : data.tenantId : tenantId, false);
  var _Digit$Hooks$useStore = Digit.Hooks.useStore.getInitData();
  React.useEffect(function () {
    try {
      var _data$nocDocuments;
      var _tenantId = data !== null && data !== void 0 && data.tenantId ? data === null || data === void 0 ? void 0 : data.tenantId : _tenantId;
      data.tenantId = data === null || data === void 0 ? void 0 : data.tenantId;
      var formdata = {};
      data === null || data === void 0 ? void 0 : (_data$nocDocuments = data.nocDocuments) === null || _data$nocDocuments === void 0 ? void 0 : _data$nocDocuments.NocDetails.map(function (noc) {
        formdata = convertToNocObject(noc, data);
        mutation.mutate(formdata, {
          onSuccess: onSuccess
        });
      });
      formdata = convertToBPAObject(data, true);
      mutation1.mutate(formdata, {
        onSuccess: onSuccess
      });
    } catch (err) {}
  }, []);
  return mutation1.isLoading || mutation1.isIdle ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(BannerPicker$1, {
    t: t,
    data: mutation1.data,
    isSuccess: mutation1.isSuccess,
    isLoading: mutation1.isIdle || mutation1.isLoading
  }), mutation1.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, getCardText$1(t, mutation1.data)), !mutation1.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t(Digit.Utils.locale.getTransformedLocale(mutation1.error.message))), /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })));
};

var Acknowledgement = function Acknowledgement(props) {
  var _BPAData$workflow, _BPAData$workflow2, _BPAData$additionalDe;
  var BPAData = props === null || props === void 0 ? void 0 : props.data;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var getAppAction = sessionStorage.getItem("BPA_SUBMIT_APP") ? JSON.parse(sessionStorage.getItem("BPA_SUBMIT_APP")) : null;
  var bpaBusinessService = BPAData !== null && BPAData !== void 0 && BPAData.businessService ? BPAData === null || BPAData === void 0 ? void 0 : BPAData.businessService : "BPA";
  var bpaStatus = BPAData === null || BPAData === void 0 ? void 0 : BPAData.status;
  var bpaAction = BPAData !== null && BPAData !== void 0 && (_BPAData$workflow = BPAData.workflow) !== null && _BPAData$workflow !== void 0 && _BPAData$workflow.action ? BPAData === null || BPAData === void 0 ? void 0 : (_BPAData$workflow2 = BPAData.workflow) === null || _BPAData$workflow2 === void 0 ? void 0 : _BPAData$workflow2.action : "VERIFY_FORWARD";
  var typeOfArchitect = BPAData === null || BPAData === void 0 ? void 0 : (_BPAData$additionalDe = BPAData.additionalDetails) === null || _BPAData$additionalDe === void 0 ? void 0 : _BPAData$additionalDe.typeOfArchitect;
  if (bpaBusinessService == "BPA_LOW") bpaBusinessService = "BPA";
  return /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: getAppAction == "BPA_SUBMIT_APP" ? t("BPA_SUBMIT_HEADER_" + bpaBusinessService + "_" + bpaAction + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : t("BPA_HEADER_" + bpaBusinessService + "_" + bpaAction + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()),
    applicationNumber: BPAData === null || BPAData === void 0 ? void 0 : BPAData.applicationNo,
    info: bpaBusinessService == "BPA" ? t("BPA_PERMIT_APPLICATION_NUMBER_LABEL") : t("BPA_OCCUPANCY_CERTIFICATE_APPLICATION_NUMBER_LABEL"),
    successful: true,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    }
  }), /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, getAppAction == "BPA_SUBMIT_APP" ? t("BPA_SUBMIT_SUB_HEADER_" + bpaBusinessService + "_" + bpaAction + "_" + (typeOfArchitect ? typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase()) : t("BPA_SUB_HEADER_" + bpaBusinessService + "_" + bpaAction + "_" + (typeOfArchitect ? typeOfArchitect : "ARCHITECT") + "_" + stringReplaceAll(bpaStatus, " ", "_").toUpperCase())), /*#__PURE__*/React__default.createElement("div", {
    style: {
      marginTop: "12px",
      padding: "10px"
    }
  }, /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })))));
};

var GetActionMessage$2 = function GetActionMessage(props) {
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  if (props.isSuccess) {
    return !window.location.href.includes("edit-application") ? t("CS_STAKEHOLDER_APPLICATION_SUCCESS") : t("CS_PROPERTY_UPDATE_APPLICATION_SUCCESS");
  } else if (props.isLoading) {
    return !window.location.href.includes("edit-application") ? t("CS_STAKEHOLDER_APPLICATION_PENDING") : t("CS_PROPERTY_UPDATE_APPLICATION_PENDING");
  } else if (!props.isSuccess) {
    return !window.location.href.includes("edit-application") ? t("CS_STAKEHOLDER_APPLICATION_FAILED") : t("CS_PROPERTY_UPDATE_APPLICATION_FAILED");
  }
};
var BannerPicker$2 = function BannerPicker(props) {
  var _props$data;
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Banner, {
    message: GetActionMessage$2(props),
    applicationNumber: (_props$data = props.data) === null || _props$data === void 0 ? void 0 : _props$data.Licenses[0].applicationNumber,
    info: props.isSuccess ? props.t("BPA_NEW_STAKEHOLDER_REGISTRATION_APP_LABEL") : "",
    successful: props.isSuccess,
    style: {
      padding: "10px"
    },
    headerStyles: {
      fontSize: "32px"
    }
  });
};
var StakeholderAcknowledgement = function StakeholderAcknowledgement(_ref) {
  var _data$address, _data$address2, _data$address2$city, _mutation$data, _mutation$data$Licens, _mutation$data$Licens2, _mutation$data$Licens3, _mutation$data$Licens4, _mutation$data$Licens5, _mutation$data$Licens6;
  var data = _ref.data,
    onSuccess = _ref.onSuccess;
  var _useTranslation2 = reactI18next.useTranslation(),
    t = _useTranslation2.t;
  var tenantId = Digit.ULBService.getCurrentTenantId();
  var mutation = Digit.Hooks.obps.useStakeholderAPI(data !== null && data !== void 0 && (_data$address = data.address) !== null && _data$address !== void 0 && _data$address.city ? (_data$address2 = data.address) === null || _data$address2 === void 0 ? void 0 : (_data$address2$city = _data$address2.city) === null || _data$address2$city === void 0 ? void 0 : _data$address2$city.code : tenantId, true);
  var _Digit$Hooks$useStore = Digit.Hooks.useStore.getInitData();
  var isOpenLinkFlow = window.location.href.includes("openlink");
  var isCitizenUrl = Digit.Utils.browser.isMobile() ? true : false;
  var licenseType = (mutation === null || mutation === void 0 ? void 0 : (_mutation$data = mutation.data) === null || _mutation$data === void 0 ? void 0 : (_mutation$data$Licens = _mutation$data.Licenses) === null || _mutation$data$Licens === void 0 ? void 0 : (_mutation$data$Licens2 = _mutation$data$Licens[0]) === null || _mutation$data$Licens2 === void 0 ? void 0 : (_mutation$data$Licens3 = _mutation$data$Licens2.tradeLicenseDetail) === null || _mutation$data$Licens3 === void 0 ? void 0 : (_mutation$data$Licens4 = _mutation$data$Licens3.tradeUnits) === null || _mutation$data$Licens4 === void 0 ? void 0 : (_mutation$data$Licens5 = _mutation$data$Licens4[0]) === null || _mutation$data$Licens5 === void 0 ? void 0 : (_mutation$data$Licens6 = _mutation$data$Licens5.tradeType) === null || _mutation$data$Licens6 === void 0 ? void 0 : _mutation$data$Licens6.split(".")[0]) || "ARCHITECT";
  React.useEffect(function () {
    try {
      var _data$result, _data$result$Licenses, _data$result2, _data$result2$License;
      var _tenantId = data !== null && data !== void 0 && (_data$result = data.result) !== null && _data$result !== void 0 && (_data$result$Licenses = _data$result.Licenses[0]) !== null && _data$result$Licenses !== void 0 && _data$result$Licenses.tenantId ? data === null || data === void 0 ? void 0 : (_data$result2 = data.result) === null || _data$result2 === void 0 ? void 0 : (_data$result2$License = _data$result2.Licenses[0]) === null || _data$result2$License === void 0 ? void 0 : _data$result2$License.tenantId : _tenantId;
      data.tenantId = _tenantId;
      var formdata = {};
      formdata = convertToStakeholderObject(data);
      mutation.mutate(formdata, {
        onSuccess: onSuccess
      });
    } catch (err) {}
  }, []);
  return mutation.isLoading || mutation.isIdle ? /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null) : /*#__PURE__*/React__default.createElement("div", null, /*#__PURE__*/React__default.createElement("div", {
    className: isOpenLinkFlow ? "OpenlinkContainer" : ""
  }, isOpenLinkFlow && /*#__PURE__*/React__default.createElement(digitUiReactComponents.BackButton, {
    style: {
      border: "none"
    }
  }, t("CS_COMMON_BACK")), /*#__PURE__*/React__default.createElement(digitUiReactComponents.Card, null, /*#__PURE__*/React__default.createElement(BannerPicker$2, {
    t: t,
    data: mutation.data,
    isSuccess: mutation.isSuccess,
    isLoading: mutation.isIdle || mutation.isLoading
  }), mutation.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, "" + t("TRADELICENSE_TRADETYPE_" + licenseType) + t("CS_FILE_STAKEHOLDER_RESPONSE")), !mutation.isSuccess && /*#__PURE__*/React__default.createElement(digitUiReactComponents.CardText, null, t("CS_FILE_PROPERTY_FAILED_RESPONSE")), mutation.isSuccess && !isOpenLinkFlow && /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen/payment/collect/" + mutation.data.Licenses[0].businessService + "/" + mutation.data.Licenses[0].applicationNumber + "/" + mutation.data.Licenses[0].tenantId + "?tenantId=" + mutation.data.Licenses[0].tenantId,
      state: {
        tenantId: mutation.data.Licenses[0].tenantId
      }
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("COMMON_MAKE_PAYMENT")
  })), !isOpenLinkFlow && /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: "/digit-ui/citizen"
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.LinkButton, {
    label: t("CORE_COMMON_GO_TO_HOME")
  })), mutation.isSuccess && isOpenLinkFlow && /*#__PURE__*/React__default.createElement(reactRouterDom.Link, {
    to: {
      pathname: "/digit-ui/citizen"
    }
  }, /*#__PURE__*/React__default.createElement(digitUiReactComponents.SubmitBar, {
    label: t("BPA_COMMON_PROCEED_NEXT")
  })))))
  ;
};

var OBPSModule = function OBPSModule(_ref) {
  var stateCode = _ref.stateCode,
    userType = _ref.userType,
    tenants = _ref.tenants;
  var moduleCode = ["bpa", "bpareg", "common"];
  var _useRouteMatch = reactRouterDom.useRouteMatch(),
    path = _useRouteMatch.path;
  var language = Digit.StoreData.getCurrentLanguage();
  var _Digit$Services$useSt = Digit.Services.useStore({
      stateCode: stateCode,
      moduleCode: moduleCode,
      language: language
    }),
    isLoading = _Digit$Services$useSt.isLoading;
  Digit.SessionStorage.set("OBPS_TENANTS", tenants);
  if (isLoading) {
    return /*#__PURE__*/React__default.createElement(digitUiReactComponents.Loader, null);
  }
  if (userType === "citizen") {
    return /*#__PURE__*/React__default.createElement(App, {
      path: path,
      stateCode: stateCode
    });
  }
  return /*#__PURE__*/React__default.createElement(EmployeeApp, {
    path: path,
    stateCode: stateCode
  });
};
var OBPSLinks = function OBPSLinks(_ref2) {
  var matchPath = _ref2.matchPath;
  var _useTranslation = reactI18next.useTranslation(),
    t = _useTranslation.t;
  var links = [{
    link: matchPath + "/my-applications",
    i18nKey: t("BPA_CITIZEN_HOME_VIEW_APP_BY_CITIZEN_LABEL")
  }, {
    link: matchPath + "/stakeholder/apply/stakeholder-docs-required",
    i18nKey: t("BPA_CITIZEN_HOME_STAKEHOLDER_LOGIN_LABEL")
  }, {
    link: matchPath + "/home",
    i18nKey: t("BPA_CITIZEN_HOME_ARCHITECT_LOGIN_LABEL")
  }];
  return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenHomeCard, {
    header: t("ACTION_TEST_BUILDING_PLAN_APPROVAL"),
    links: links,
    Icon: function Icon() {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.OBPSIcon, null);
    },
    Info: function Info() {
      return /*#__PURE__*/React__default.createElement(digitUiReactComponents.CitizenInfoLabel, {
        style: {
          margin: "0px",
          padding: "10px"
        },
        info: t("CS_FILE_APPLICATION_INFO_LABEL"),
        text: t("BPA_CITIZEN_HOME_STAKEHOLDER_INCLUDES_INFO_LABEL")
      });
    },
    isInfo: true
  });
};
var componentsToRegister = {
  OBPSModule: OBPSModule,
  OBPSLinks: OBPSLinks,
  OBPSCard: OBPSEmployeeHomeCard,
  BPACitizenHomeScreen: BPACitizenHomeScreen,
  EDCRForm: EDCRForm,
  BasicDetails: BasicDetails,
  DocsRequired: DocsRequired,
  PlotDetails: PlotDetails,
  ScrutinyDetails: ScrutinyDetails,
  OwnerDetails: OwnerDetails,
  DocumentDetails: DocumentDetails,
  NOCDetails: NOCDetails,
  LocationDetails: LocationDetails,
  GIS: GIS,
  OCEDCRDocsRequired: OCEDCRDocsRequired,
  OCeDCRScrutiny: OCeDCRScrutiny,
  OCUploadPlanDiagram: OCUploadPlanDiagram,
  StakeholderDocsRequired: StakeholderDocsRequired,
  LicenseType: LicenseType,
  LicenseDetails: LicenseDetails,
  CorrospondenceAddress: CorrospondenceAddress,
  PermanentAddress: PermanentAddress,
  StakeholderDocuments: StakeholderDocuments,
  OCBasicDetails: OCBasicDetails,
  OBPSSearchApplication: OBPSSearchApplication,
  InspectionReport: InspectionReport$1,
  BPAInbox: Inbox,
  StakeholderInbox: Inbox$1,
  StakeholderCheckPage: CheckPage$3,
  BPACheckPage: CheckPage,
  OCBPACheckPage: CheckPage$1,
  OCBPASendBackCheckPage: CheckPage$2,
  EDCRAcknowledgement: EDCRAcknowledgement,
  OCEDCRAcknowledgement: EDCRAcknowledgement$1,
  BPAAcknowledgement: OBPSAcknowledgement,
  OCBPAAcknowledgement: OBPSAcknowledgement$1,
  OCSendBackAcknowledgement: Acknowledgement,
  StakeholderAcknowledgement: StakeholderAcknowledgement,
  ObpsCreateEDCR: CreateEDCR,
  ObpsCreateOCEDCR: CreateOCEDCR,
  ObpsNewBuildingPermit: NewBuildingPermit,
  ObpsOCBuildingPermit: OCBuildingPermit,
  ObpsStakeholderRegistration: StakeholderRegistration,
  ObpsCitizenBpaApplicationDetail: BpaApplicationDetail,
  ObpsBPASendToArchitect: BPASendToArchitect,
  ObpsOCSendToArchitect: OCSendToArchitect,
  ObpsBPASendBackToCitizen: BPASendBackToCitizen,
  ObpsOCSendBackToCitizen: OCSendBackToCitizen,
  ObpsEdcrInbox: Inbox$2,
  ObpsEmpApplicationDetail: ApplicationDetail,
  ObpsEmployeeBpaApplicationDetail: BpaApplicationDetail$1
};
var initOBPSComponents = function initOBPSComponents() {
  Object.entries(componentsToRegister).forEach(function (_ref3) {
    var key = _ref3[0],
      value = _ref3[1];
    Digit.ComponentRegistryService.setComponent(key, value);
  });
};

exports.initOBPSComponents = initOBPSComponents;
//# sourceMappingURL=index.js.map
